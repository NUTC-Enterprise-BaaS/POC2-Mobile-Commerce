!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a){function s(a){var b=a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}function x(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});
if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(w.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return n.inArray(a,b)>=0!==c})}function E(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function H(a){var b=G[a]={};return n.each(a.match(F)||[],function(a,c){b[c]=!0}),b}function J(){z.addEventListener?(z.removeEventListener("DOMContentLoaded",K,!1),a.removeEventListener("load",K,!1)):(z.detachEvent("onreadystatechange",K),a.detachEvent("onload",K))
}function K(){(z.addEventListener||"load"===event.type||"complete"===z.readyState)&&(J(),n.ready())}function P(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(O,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:N.test(c)?n.parseJSON(c):c}catch(e){}n.data(a,b,c)}else c=void 0}return c}function Q(a){var b;for(b in a)if(("data"!==b||!n.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function R(a,b,d,e){if(n.acceptData(a)){var f,g,h=n.expando,i=a.nodeType,j=i?n.cache:a,k=i?a[h]:a[h]&&h;
if(k&&j[k]&&(e||j[k].data)||void 0!==d||"string"!=typeof b)return k||(k=i?a[h]=c.pop()||n.guid++:h),j[k]||(j[k]=i?{}:{toJSON:n.noop}),("object"==typeof b||"function"==typeof b)&&(e?j[k]=n.extend(j[k],b):j[k].data=n.extend(j[k].data,b)),g=j[k],e||(g.data||(g.data={}),g=g.data),void 0!==d&&(g[n.camelCase(b)]=d),"string"==typeof b?(f=g[b],null==f&&(f=g[n.camelCase(b)])):f=g,f}}function S(a,b,c){if(n.acceptData(a)){var d,e,f=a.nodeType,g=f?n.cache:a,h=f?a[n.expando]:n.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){n.isArray(b)?b=b.concat(n.map(b,n.camelCase)):b in d?b=[b]:(b=n.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;
for(;e--;)delete d[b[e]];if(c?!Q(d):!n.isEmptyObject(d))return}(c||(delete g[h].data,Q(g[h])))&&(f?n.cleanData([a],!0):l.deleteExpando||g!=g.window?delete g[h]:g[h]=null)}}}function bb(){return!0}function cb(){return!1}function db(){try{return z.activeElement}catch(a){}}function eb(a){var b=fb.split("|"),c=a.createDocumentFragment();if(c.createElement)for(;b.length;)c.createElement(b.pop());return c}function vb(a,b){var c,d,e=0,f=typeof a.getElementsByTagName!==L?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==L?a.querySelectorAll(b||"*"):void 0;
if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||n.nodeName(d,b)?f.push(d):n.merge(f,vb(d,b));return void 0===b||b&&n.nodeName(a,b)?n.merge([a],f):f}function wb(a){X.test(a.type)&&(a.defaultChecked=a.checked)}function xb(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function yb(a){return a.type=(null!==n.find.attr(a,"type"))+"/"+a.type,a}function zb(a){var b=qb.exec(a.type);
return b?a.type=b[1]:a.removeAttribute("type"),a}function Ab(a,b){for(var c,d=0;null!=(c=a[d]);d++)n._data(c,"globalEval",!b||n._data(b[d],"globalEval"))}function Bb(a,b){if(1===b.nodeType&&n.hasData(a)){var c,d,e,f=n._data(a),g=n._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)n.event.add(b,c,h[c][d])}g.data&&(g.data=n.extend({},g.data))}}function Cb(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!l.noCloneEvent&&b[n.expando]){e=n._data(b);for(d in e.events)n.removeEvent(b,d,e.handle);
b.removeAttribute(n.expando)}"script"===c&&b.text!==a.text?(yb(b).text=a.text,zb(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),l.html5Clone&&a.innerHTML&&!n.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&X.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}function Fb(b,c){var d=n(c.createElement(b)).appendTo(c.body),e=a.getDefaultComputedStyle?a.getDefaultComputedStyle(d[0]).display:n.css(d[0],"display");
return d.detach(),e}function Gb(a){var b=z,c=Eb[a];return c||(c=Fb(a,b),"none"!==c&&c||(Db=(Db||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=(Db[0].contentWindow||Db[0].contentDocument).document,b.write(),b.close(),c=Fb(a,b),Db.detach()),Eb[a]=c),c}function Mb(a,b){return{get:function(){var c=a();if(null!=c)return c?(delete this.get,void 0):(this.get=b).apply(this,arguments)}}}function Vb(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=Ub.length;e--;)if(b=Ub[e]+c,b in a)return b;
return d}function Wb(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=n._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&V(d)&&(f[g]=n._data(d,"olddisplay",Gb(d.nodeName)))):f[g]||(e=V(d),(c&&"none"!==c||!e)&&n._data(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function Xb(a,b,c){var d=Qb.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b
}function Yb(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+U[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+U[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+U[f]+"Width",!0,e))):(g+=n.css(a,"padding"+U[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+U[f]+"Width",!0,e)));return g}function Zb(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Jb(a),g=l.boxSizing()&&"border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Kb(a,b,f),(0>e||null==e)&&(e=a.style[b]),Ib.test(e))return e;
d=g&&(l.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Yb(a,b,c||(g?"border":"content"),d,f)+"px"}function $b(a,b,c,d,e){return new $b.prototype.init(a,b,c,d,e)}function gc(){return setTimeout(function(){_b=void 0}),_b=n.now()}function hc(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=U[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function ic(a,b,c){for(var d,e=(fc[b]||[]).concat(fc["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function jc(a,b,c){var d,e,f,g,h,i,j,k,m=this,o={},p=a.style,q=a.nodeType&&V(a),r=n._data(a,"fxshow");
c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,m.always(function(){m.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[p.overflow,p.overflowX,p.overflowY],j=n.css(a,"display"),k=Gb(a.nodeName),"none"===j&&(j=k),"inline"===j&&"none"===n.css(a,"float")&&(l.inlineBlockNeedsLayout&&"inline"!==k?p.zoom=1:p.display="inline-block")),c.overflow&&(p.overflow="hidden",l.shrinkWrapBlocks()||m.always(function(){p.overflow=c.overflow[0],p.overflowX=c.overflow[1],p.overflowY=c.overflow[2]
}));for(d in b)if(e=b[d],bc.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(q?"hide":"show")){if("show"!==e||!r||void 0===r[d])continue;q=!0}o[d]=r&&r[d]||n.style(a,d)}if(!n.isEmptyObject(o)){r?"hidden"in r&&(q=r.hidden):r=n._data(a,"fxshow",{}),f&&(r.hidden=!q),q?n(a).show():m.done(function(){n(a).hide()}),m.done(function(){var b;n._removeData(a,"fxshow");for(b in o)n.style(a,b,o[b])});for(d in o)g=ic(q?r[d]:0,d,m),d in r||(r[d]=g.start,q&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function kc(a,b){var c,d,e,f,g;
for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function lc(a,b,c){var d,e,f=0,g=ec.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=_b||gc(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)
},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:_b||gc(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(kc(k,j.opts.specialEasing);g>f;f++)if(d=ec[f].call(j,a,k,j.opts))return d;
return n.map(k,ic,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function Mc(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(F)||[];if(n.isFunction(c))for(;d=f[e++];)"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Nc(a,b,c,d){function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);
return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}var e={},f=a===Jc;return g(b.dataTypes[0])||!e["*"]&&g("*")}function Oc(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d]);return c&&n.extend(!0,a,c),a}function Pc(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"));if(e)for(g in h)if(h[g]&&h[g].test(e)){i.unshift(g);break}if(i[0]in c)f=i[0];
else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Qc(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));
break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function Wc(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||Sc.test(a)?d(a,e):Wc(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)Wc(a+"["+e+"]",b[e],c,d)}function $c(){try{return new a.XMLHttpRequest}catch(b){}}function _c(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function ed(a){return n.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1
}var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k="".trim,l={},m="1.11.1pre",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b
},each:function(a,b){return n.each(this,a,b)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;
for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(e=arguments[h]))for(d in e)a=g[d],c=e[d],g!==c&&(j&&c&&(n.isPlainObject(c)||(b=n.isArray(c)))?(b?(b=!1,f=a&&n.isArray(a)?a:[]):f=a&&n.isPlainObject(a)?a:{},g[d]=n.extend(j,f,c)):void 0!==c&&(g[d]=c));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)
},isArray:Array.isArray||function(a){return"array"===n.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return a-parseFloat(a)>=0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||"object"!==n.type(a)||a.nodeType||n.isWindow(a))return!1;try{if(a.constructor&&!j.call(a,"constructor")&&!j.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(l.ownLast)for(b in a)return j.call(a,b);for(b in a);return void 0===b||j.call(a,b)
},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(b){b&&n.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=s(a);if(c){if(g)for(;f>e&&(d=b.apply(a[e],c),d!==!1);e++);else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g)for(;f>e&&(d=b.call(a[e],e,a[e]),d!==!1);e++);else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;
return a},trim:k&&!k.call("\ufeff\xa0")?function(a){return null==a?"":k.call(a)}:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){var d;if(b){if(g)return g.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;)a[e++]=b[d++];if(c!==c)for(;void 0!==b[d];)a[e++]=b[d++];
return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=s(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(f=a[b],b=a,a=f),n.isFunction(a)?(c=d.call(arguments,2),e=function(){return a.apply(b||this,c.concat(d.call(arguments)))},e.guid=a.guid=a.guid||n.guid++,e):void 0
},now:function(){return+new Date},support:l}),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});var t=function(a){function eb(a,b,d,e){var f,g,i,j,k,n,q,r,v,w;if((b?b.ownerDocument||b:u)!==m&&l(b),b=b||m,d=d||[],!a||"string"!=typeof a)return d;if(1!==(j=b.nodeType)&&9!==j)return[];if(o&&!e){if(f=$.exec(a))if(i=f[1]){if(9===j){if(g=b.getElementById(i),!g||!g.parentNode)return d;if(g.id===i)return d.push(g),d}else if(b.ownerDocument&&(g=b.ownerDocument.getElementById(i))&&s(b,g)&&g.id===i)return d.push(g),d
}else{if(f[2])return H.apply(d,b.getElementsByTagName(a)),d;if((i=f[3])&&c.getElementsByClassName&&b.getElementsByClassName)return H.apply(d,b.getElementsByClassName(i)),d}if(c.qsa&&(!p||!p.test(a))){if(r=q=t,v=b,w=9===j&&a,1===j&&"object"!==b.nodeName.toLowerCase()){for(n=pb(a),(q=b.getAttribute("id"))?r=q.replace(ab,"\\$&"):b.setAttribute("id",r),r="[id='"+r+"'] ",k=n.length;k--;)n[k]=r+qb(n[k]);v=_.test(a)&&nb(b.parentNode)||b,w=n.join(",")}if(w)try{return H.apply(d,v.querySelectorAll(w)),d}catch(x){}finally{q||b.removeAttribute("id")
}}}return h(a.replace(Q,"$1"),b,d,e)}function fb(){function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}var a=[];return b}function gb(a){return a[t]=!0,a}function hb(a){var b=m.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ib(a,b){for(var c=a.split("|"),e=a.length;e--;)d.attrHandle[c[e]]=b}function jb(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;
if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function kb(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function lb(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function mb(a){return gb(function(b){return b=+b,gb(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function nb(a){return a&&typeof a.getElementsByTagName!==B&&a}function ob(){}function pb(a,b){var c,e,f,g,h,i,j,k=y[a+" "];
if(k)return b?0:k.slice(0);for(h=a,i=[],j=d.preFilter;h;){(!c||(e=R.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=S.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(Q," ")}),h=h.slice(c.length));for(g in d.filter)!(e=W[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?eb.error(a):y(a,i).slice(0)}function qb(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function rb(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=w++;
return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[v,f];if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e){if(i=b[t]||(b[t]={}),(h=i[d])&&h[0]===v&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function sb(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function tb(a,b,c){for(var d=0,e=b.length;e>d;d++)eb(a,b[d],c);return c}function ub(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));
return g}function vb(a,b,c,d,e,f){return d&&!d[t]&&(d=vb(d)),e&&!e[t]&&(e=vb(e,f)),gb(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||tb(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:ub(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d)for(j=ub(r,n),d(j,[],h,i),k=j.length;k--;)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l));if(f){if(e||a){if(e){for(j=[],k=r.length;k--;)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}for(k=r.length;k--;)(l=r[k])&&(j=e?J.call(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=ub(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)
})}function wb(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],j=g?1:0,k=rb(function(a){return a===b},h,!0),l=rb(function(a){return J.call(b,a)>-1},h,!0),m=[function(a,c,d){return!g&&(d||c!==i)||((b=c).nodeType?k(a,c,d):l(a,c,d))}];f>j;j++)if(c=d.relative[a[j].type])m=[rb(sb(m),c)];else{if(c=d.filter[a[j].type].apply(null,a[j].matches),c[t]){for(e=++j;f>e&&!d.relative[a[e].type];e++);return vb(j>1&&sb(m),j>1&&qb(a.slice(0,j-1).concat({value:" "===a[j-2].type?"*":""})).replace(Q,"$1"),c,e>j&&wb(a.slice(j,e)),f>e&&wb(a=a.slice(e)),f>e&&qb(a))
}m.push(c)}return sb(m)}function xb(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,j,k){var l,n,o,p=0,q="0",r=f&&[],s=[],t=i,u=f||e&&d.find.TAG("*",k),w=v+=null==t?1:Math.random()||.1,x=u.length;for(k&&(i=g!==m&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){for(n=0;o=a[n++];)if(o(l,g,h)){j.push(l);break}k&&(v=w)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){for(n=0;o=b[n++];)o(r,s,g,h);if(f){if(p>0)for(;q--;)r[q]||s[q]||(s[q]=F.call(j));s=ub(s)}H.apply(j,s),k&&!f&&s.length>0&&p+b.length>1&&eb.uniqueSort(j)
}return k&&(v=w,i=t),r};return c?gb(f):f}var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t="sizzle"+-new Date,u=a.document,v=0,w=0,x=fb(),y=fb(),z=fb(),A=function(a,b){return a===b&&(k=!0),0},B="undefined",C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=E.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N=M.replace("w","w#"),O="\\["+L+"*("+M+")"+L+"*(?:([*^$|!~]?=)"+L+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+N+")|)|)"+L+"*\\]",P=":("+M+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+O.replace(3,8)+")*)|.*)\\)|)",Q=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),R=new RegExp("^"+L+"*,"+L+"*"),S=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),T=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),U=new RegExp(P),V=new RegExp("^"+N+"$"),W={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+P),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,$=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_=/[+~]/,ab=/'|\\/g,bb=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),cb=function(a,b,c){var d="0x"+b-65536;
return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{H.apply(E=I.call(u.childNodes),u.childNodes),E[u.childNodes.length].nodeType}catch(db){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}c=eb.support={},f=eb.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},l=eb.setDocument=function(a){var b,e=a?a.ownerDocument||a:u,g=e.defaultView;return e!==m&&9===e.nodeType&&e.documentElement?(m=e,n=e.documentElement,o=!f(e),g&&g!==g.top&&(g.addEventListener?g.addEventListener("unload",function(){l()
},!1):g.attachEvent&&g.attachEvent("onunload",function(){l()})),c.attributes=hb(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=hb(function(a){return a.appendChild(e.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Z.test(e.getElementsByClassName)&&hb(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),c.getById=hb(function(a){return n.appendChild(a).id=t,!e.getElementsByName||!e.getElementsByName(t).length
}),c.getById?(d.find.ID=function(a,b){if(typeof b.getElementById!==B&&o){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(bb,cb);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(bb,cb);return function(a){var c=typeof a.getAttributeNode!==B&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==B?b.getElementsByTagName(a):void 0
}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==B&&o?b.getElementsByClassName(a):void 0},q=[],p=[],(c.qsa=Z.test(e.querySelectorAll))&&(hb(function(a){a.innerHTML="<select t=''><option selected=''></option></select>",a.querySelectorAll("[t^='']").length&&p.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||p.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll(":checked").length||p.push(":checked")
}),hb(function(a){var b=e.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&p.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||p.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),p.push(",.*:")})),(c.matchesSelector=Z.test(r=n.webkitMatchesSelector||n.mozMatchesSelector||n.oMatchesSelector||n.msMatchesSelector))&&hb(function(a){c.disconnectedMatch=r.call(a,"div"),r.call(a,"[s!='']:x"),q.push("!=",P)
}),p=p.length&&new RegExp(p.join("|")),q=q.length&&new RegExp(q.join("|")),b=Z.test(n.compareDocumentPosition),s=b||Z.test(n.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},A=b?function(a,b){if(a===b)return k=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===e||a.ownerDocument===u&&s(u,a)?-1:b===e||b.ownerDocument===u&&s(u,b)?1:j?J.call(j,a)-J.call(j,b):0:4&d?-1:1)
}:function(a,b){if(a===b)return k=!0,0;var c,d=0,f=a.parentNode,g=b.parentNode,h=[a],i=[b];if(!f||!g)return a===e?-1:b===e?1:f?-1:g?1:j?J.call(j,a)-J.call(j,b):0;if(f===g)return jb(a,b);for(c=a;c=c.parentNode;)h.unshift(c);for(c=b;c=c.parentNode;)i.unshift(c);for(;h[d]===i[d];)d++;return d?jb(h[d],i[d]):h[d]===u?-1:i[d]===u?1:0},e):m},eb.matches=function(a,b){return eb(a,null,null,b)},eb.matchesSelector=function(a,b){if((a.ownerDocument||a)!==m&&l(a),b=b.replace(T,"='$1']"),!(!c.matchesSelector||!o||q&&q.test(b)||p&&p.test(b)))try{var d=r.call(a,b);
if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return eb(b,m,null,[a]).length>0},eb.contains=function(a,b){return(a.ownerDocument||a)!==m&&l(a),s(a,b)},eb.attr=function(a,b){(a.ownerDocument||a)!==m&&l(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!o):void 0;return void 0!==f?f:c.attributes||!o?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},eb.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)
},eb.uniqueSort=function(a){var b,d=[],e=0,f=0;if(k=!c.detectDuplicates,j=!c.sortStable&&a.slice(0),a.sort(A),k){for(;b=a[f++];)b===a[f]&&(e=d.push(f));for(;e--;)a.splice(d[e],1)}return j=null,a},e=eb.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else for(;b=a[d++];)c+=e(b);return c},d=eb.selectors={cacheLength:50,createPseudo:gb,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(bb,cb),a[3]=(a[4]||a[5]||"").replace(bb,cb),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)
},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||eb.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&eb.error(a[0]),a},PSEUDO:function(a){var b,c=!a[5]&&a[2];return W.CHILD.test(a[0])?null:(a[3]&&void 0!==a[4]?a[2]=a[4]:c&&U.test(c)&&(b=pb(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(bb,cb).toLowerCase();return"*"===a?function(){return!0
}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=x[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&x(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==B&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=eb.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0
}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[t]||(q[t]={}),j=k[a]||[],n=j[0]===v&&j[1],m=j[0]===v&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[v,n,m];
break}}else if(s&&(j=(b[t]||(b[t]={}))[a])&&j[0]===v)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[t]||(l[t]={}))[a]=[v,m]),l!==b)););return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||eb.error("unsupported pseudo: "+a);return e[t]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?gb(function(a,c){for(var d,f=e(a,b),g=f.length;g--;)d=J.call(a,f[g]),a[d]=!(c[d]=f[g])
}):function(a){return e(a,0,c)}):e}},pseudos:{not:gb(function(a){var b=[],c=[],d=g(a.replace(Q,"$1"));return d[t]?gb(function(a,b,c,e){for(var f,g=d(a,null,e,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:gb(function(a){return function(b){return eb(a,b).length>0}}),contains:gb(function(a){return function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:gb(function(a){return V.test(a||"")||eb.error("unsupported lang: "+a),a=a.replace(bb,cb).toLowerCase(),function(b){var c;
do if(c=o?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===n},focus:function(a){return a===m.activeElement&&(!m.hasFocus||m.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();
return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Y.test(a.nodeName)},input:function(a){return X.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())
},first:mb(function(){return[0]}),last:mb(function(a,b){return[b-1]}),eq:mb(function(a,b,c){return[0>c?c+b:c]}),even:mb(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:mb(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:mb(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:mb(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=kb(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=lb(b);
return ob.prototype=d.filters=d.pseudos,d.setFilters=new ob,g=eb.compile=function(a,b){var c,d=[],e=[],f=z[a+" "];if(!f){for(b||(b=pb(a)),c=b.length;c--;)f=wb(b[c]),f[t]?d.push(f):e.push(f);f=z(a,xb(e,d)),f.selector=a}return f},h=eb.select=function(a,b,e,f){var h,i,j,k,l,m="function"==typeof a&&a,n=!f&&pb(a=m.selector||a);if(e=e||[],1===n.length){if(i=n[0]=n[0].slice(0),i.length>2&&"ID"===(j=i[0]).type&&c.getById&&9===b.nodeType&&o&&d.relative[i[1].type]){if(b=(d.find.ID(j.matches[0].replace(bb,cb),b)||[])[0],!b)return e;
m&&(b=b.parentNode),a=a.slice(i.shift().value.length)}for(h=W.needsContext.test(a)?0:i.length;h--&&(j=i[h],!d.relative[k=j.type]);)if((l=d.find[k])&&(f=l(j.matches[0].replace(bb,cb),_.test(i[0].type)&&nb(b.parentNode)||b))){if(i.splice(h,1),a=f.length&&qb(i),!a)return H.apply(e,f),e;break}}return(m||g(a,n))(f,b,!o,e,_.test(a)&&nb(b.parentNode)||b),e},c.sortStable=t.split("").sort(A).join("")===t,c.detectDuplicates=!!k,l(),c.sortDetached=hb(function(a){return 1&a.compareDocumentPosition(m.createElement("div"))
}),hb(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ib("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&hb(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ib("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),hb(function(a){return null==a.getAttribute("disabled")})||ib(K,function(a,b,c){var d;
return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),eb}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=n.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;
if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;e>b;b++)if(n.contains(d[b],this))return!0}));for(b=0;e>b;b++)n.find(a,d[b],c);return c=this.pushStack(e>1?n.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(x(this,a||[],!1))},not:function(a){return this.pushStack(x(this,a||[],!0))},is:function(a){return!!x(this,"string"==typeof a&&u.test(a)?n(a):a||[],!1).length}});var y,z=a.document,A=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,B=n.fn.init=function(a,b){var c,d;
if(!a)return this;if("string"==typeof a){if(c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:A.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||y).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:z,!0)),v.test(c[1])&&n.isPlainObject(b))for(c in b)n.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}if(d=z.getElementById(c[2]),d&&d.parentNode){if(d.id!==c[2])return y.find(a);this.length=1,this[0]=d
}return this.context=z,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?"undefined"!=typeof y.ready?y.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};B.prototype=n.fn,y=n(z);var C=/^(?:parents|prev(?:Until|All))/,D={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(a,b,c){for(var d=[],e=a[b];e&&9!==e.nodeType&&(void 0===c||1!==e.nodeType||!n(e).is(c));)1===e.nodeType&&d.push(e),e=e[b];return d
},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),n.fn.extend({has:function(a){var b,c=n(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(n.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=u.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.unique(f):f)
},index:function(a){return a?"string"==typeof a?n.inArray(this[0],n(a)):n.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.unique(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return n.dir(a,"parentNode")},parentsUntil:function(a,b,c){return n.dir(a,"parentNode",c)
},next:function(a){return E(a,"nextSibling")},prev:function(a){return E(a,"previousSibling")},nextAll:function(a){return n.dir(a,"nextSibling")},prevAll:function(a){return n.dir(a,"previousSibling")},nextUntil:function(a,b,c){return n.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return n.dir(a,"previousSibling",c)},siblings:function(a){return n.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return n.sibling(a.firstChild)},contents:function(a){return n.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:n.merge([],a.childNodes)
}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(D[a]||(e=n.unique(e)),C.test(a)&&(e=e.reverse())),this.pushStack(e)}});var F=/\S+/g,G={};n.Callbacks=function(a){a="string"==typeof a?G[a]||H(a):n.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(c=a.memory&&l,d=!0,f=g||0,g=0,e=h.length,b=!0;h&&e>f;f++)if(h[f].apply(l[0],l[1])===!1&&a.stopOnFalse){c=!1;break}b=!1,h&&(i?i.length&&j(i.shift()):c?h=[]:k.disable())
},k={add:function(){if(h){var d=h.length;!function f(b){n.each(b,function(b,c){var d=n.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&f(c)})}(arguments),b?e=h.length:c&&(g=d,j(c))}return this},remove:function(){return h&&n.each(arguments,function(a,c){for(var d;(d=n.inArray(c,h,d))>-1;)h.splice(d,1),b&&(e>=d&&e--,f>=d&&f--)}),this},has:function(a){return a?n.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],e=0,this},disable:function(){return h=i=c=void 0,this},disabled:function(){return!h
},lock:function(){return i=void 0,c||k.disable(),this},locked:function(){return!i},fireWith:function(a,c){return!h||d&&!i||(c=c||[],c=[a,c.slice?c.slice():c],b?i.push(c):j(c)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!d}};return k},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c
},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];
d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var i,j,k,b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&n.isFunction(a.promise)?e:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}};if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;
return f||g.resolveWith(k,c),g.promise()}});var I;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){if(a===!0?!--n.readyWait:!n.isReady){if(!z.body)return setTimeout(n.ready);n.isReady=!0,a!==!0&&--n.readyWait>0||(I.resolveWith(z,[n]),n.fn.trigger&&n(z).trigger("ready").off("ready"))}}}),n.ready.promise=function(b){if(!I)if(I=n.Deferred(),"complete"===z.readyState)setTimeout(n.ready);else if(z.addEventListener)z.addEventListener("DOMContentLoaded",K,!1),a.addEventListener("load",K,!1);
else{z.attachEvent("onreadystatechange",K),a.attachEvent("onload",K);var c=!1;try{c=null==a.frameElement&&z.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!n.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}J(),n.ready()}}()}return I.promise(b)};var M,L="undefined";for(M in n(l))break;l.ownLast="0"!==M,l.inlineBlockNeedsLayout=!1,n(function(){var a,b,c=z.getElementsByTagName("body")[0];c&&(a=z.createElement("div"),a.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",b=z.createElement("div"),c.appendChild(a).appendChild(b),typeof b.style.zoom!==L&&(b.style.cssText="border:0;margin:0;width:1px;padding:1px;display:inline;zoom:1",(l.inlineBlockNeedsLayout=3===b.offsetWidth)&&(c.style.zoom=1)),c.removeChild(a),a=b=null)
}),function(){var a=z.createElement("div");if(null==l.deleteExpando){l.deleteExpando=!0;try{delete a.test}catch(b){l.deleteExpando=!1}}a=null}(),n.acceptData=function(a){var b=n.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||b!==!0&&a.getAttribute("classid")===b};var N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;n.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?n.cache[a[n.expando]]:a[n.expando],!!a&&!Q(a)
},data:function(a,b,c){return R(a,b,c)},removeData:function(a,b){return S(a,b)},_data:function(a,b,c){return R(a,b,c,!0)},_removeData:function(a,b){return S(a,b,!0)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=n.data(f),1===f.nodeType&&!n._data(f,"parsedAttrs"))){for(c=g.length;c--;)d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),P(f,d,e[d]));n._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){n.data(this,a)
}):arguments.length>1?this.each(function(){n.data(this,a,b)}):f?P(f,a,n.data(f,a)):void 0},removeData:function(a){return this.each(function(){n.removeData(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=n._data(a,b),c&&(!d||n.isArray(c)?d=n._data(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()
},_queueHooks:function(a,b){var c=b+"queueHooks";return n._data(a,c)||n._data(a,c,{empty:n.Callbacks("once memory").add(function(){n._removeData(a,b+"queue"),n._removeData(a,c)})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])
},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)c=n._data(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var T=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,U=["Top","Right","Bottom","Left"],V=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)},W=n.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;
for(h in c)n.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},X=/^(?:checkbox|radio)$/i;!function(){var a=z.createDocumentFragment(),b=z.createElement("div"),c=z.createElement("input");if(b.setAttribute("className","t"),b.innerHTML="  <link/><table></table><a href='/a'>a</a>",l.leadingWhitespace=3===b.firstChild.nodeType,l.tbody=!b.getElementsByTagName("tbody").length,l.htmlSerialize=!!b.getElementsByTagName("link").length,l.html5Clone="<:nav></:nav>"!==z.createElement("nav").cloneNode(!0).outerHTML,c.type="checkbox",c.checked=!0,a.appendChild(c),l.appendChecked=c.checked,b.innerHTML="<textarea>x</textarea>",l.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,a.appendChild(b),b.innerHTML="<input type='radio' checked='checked' name='t'/>",l.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,l.noCloneEvent=!0,b.attachEvent&&(b.attachEvent("onclick",function(){l.noCloneEvent=!1
}),b.cloneNode(!0).click()),null==l.deleteExpando){l.deleteExpando=!0;try{delete b.test}catch(d){l.deleteExpando=!1}}a=b=c=null}(),function(){var b,c,d=z.createElement("div");for(b in{submit:!0,change:!0,focusin:!0})c="on"+b,(l[b+"Bubbles"]=c in a)||(d.setAttribute(c,"t"),l[b+"Bubbles"]=d.attributes[c].expando===!1);d=null}();var Y=/^(?:input|select|textarea)$/i,Z=/^key/,$=/^(?:mouse|contextmenu)|click/,_=/^(?:focusinfocus|focusoutblur)$/,ab=/^([^.]*)(?:\.(.+)|)$/;n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=n._data(a);
if(r){for(c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=n.guid++),(g=r.events)||(g=r.events={}),(k=r.handle)||(k=r.handle=function(a){return typeof n===L||a&&n.event.triggered===a.type?void 0:n.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(F)||[""],h=b.length;h--;)f=ab.exec(b[h])||[],o=q=f[1],p=(f[2]||"").split(".").sort(),o&&(j=n.event.special[o]||{},o=(e?j.delegateType:j.bindType)||o,j=n.event.special[o]||{},l=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},i),(m=g[o])||(m=g[o]=[],m.delegateCount=0,j.setup&&j.setup.call(a,d,p,k)!==!1||(a.addEventListener?a.addEventListener(o,k,!1):a.attachEvent&&a.attachEvent("on"+o,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,l):m.push(l),n.event.global[o]=!0);
a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=n.hasData(a)&&n._data(a);if(r&&(k=r.events)){for(b=(b||"").match(F)||[""],j=b.length;j--;)if(h=ab.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){for(l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=k[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=m.length;f--;)g=m[f],!e&&q!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(m.splice(f,1),g.selector&&m.delegateCount--,l.remove&&l.remove.call(a,g));
i&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete k[o])}else for(o in k)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(k)&&(delete r.handle,n._removeData(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,l,m,o=[d||z],p=j.call(b,"type")?b.type:b,q=j.call(b,"namespace")?b.namespace.split("."):[];if(h=l=d=d||z,3!==d.nodeType&&8!==d.nodeType&&!_.test(p+n.event.triggered)&&(p.indexOf(".")>=0&&(q=p.split("."),p=q.shift(),q.sort()),g=p.indexOf(":")<0&&"on"+p,b=b[n.expando]?b:new n.Event(p,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=q.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:n.makeArray(c,[b]),k=n.event.special[p]||{},e||!k.trigger||k.trigger.apply(d,c)!==!1)){if(!e&&!k.noBubble&&!n.isWindow(d)){for(i=k.delegateType||p,_.test(i+p)||(h=h.parentNode);h;h=h.parentNode)o.push(h),l=h;
l===(d.ownerDocument||z)&&o.push(l.defaultView||l.parentWindow||a)}for(m=0;(h=o[m++])&&!b.isPropagationStopped();)b.type=m>1?i:k.bindType||p,f=(n._data(h,"events")||{})[b.type]&&n._data(h,"handle"),f&&f.apply(h,c),f=g&&h[g],f&&f.apply&&n.acceptData(h)&&(b.result=f.apply(h,c),b.result===!1&&b.preventDefault());if(b.type=p,!e&&!b.isDefaultPrevented()&&(!k._default||k._default.apply(o.pop(),c)===!1)&&n.acceptData(d)&&g&&d[p]&&!n.isWindow(d)){l=d[g],l&&(d[g]=null),n.event.triggered=p;try{d[p]()}catch(r){}n.event.triggered=void 0,l&&(d[g]=l)
}return b.result}},dispatch:function(a){a=n.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(n._data(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){for(h=n.event.handlers.call(this,a,j),b=0;(f=h[b++])&&!a.isPropagationStopped();)for(a.currentTarget=f.elem,g=0;(e=f.handlers[g++])&&!a.isImmediatePropagationStopped();)(!a.namespace_re||a.namespace_re.test(e.namespace))&&(a.handleObj=e,a.data=e.data,c=((n.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i),void 0!==c&&(a.result=c)===!1&&(a.preventDefault(),a.stopPropagation()));
return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!=this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(e=[],f=0;h>f;f++)d=b[f],c=d.selector+" ",void 0===e[c]&&(e[c]=d.needsContext?n(c,this).index(i)>=0:n.find(c,this,null,[i]).length),e[c]&&e.push(d);e.length&&g.push({elem:i,handlers:e})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g
},fix:function(a){if(a[n.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=$.test(e)?this.mouseHooks:Z.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new n.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||z),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a
}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button,g=b.fromElement;return null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||z,e=d.documentElement,c=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a
}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==db()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===db()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return n.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&(a.originalEvent.returnValue=a.result)
}}},simulate:function(a,b,c,d){var e=n.extend(new n.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?n.event.trigger(e,null,b):n.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},n.removeEvent=z.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===L&&(a[d]=null),a.detachEvent(d,c))},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&(a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault())?bb:cb):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),this[n.expando]=!0,void 0):new n.Event(a,b)
},n.Event.prototype={isDefaultPrevented:cb,isPropagationStopped:cb,isImmediatePropagationStopped:cb,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=bb,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=bb,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=bb,this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;
return(!e||e!==d&&!n.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),l.submitBubbles||(n.event.special.submit={setup:function(){return n.nodeName(this,"form")?!1:(n.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=n.nodeName(b,"input")||n.nodeName(b,"button")?b.form:void 0;c&&!n._data(c,"submitBubbles")&&(n.event.add(c,"submit._submit",function(a){a._submit_bubble=!0}),n._data(c,"submitBubbles",!0))}),void 0)},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&n.event.simulate("submit",this.parentNode,a,!0))
},teardown:function(){return n.nodeName(this,"form")?!1:(n.event.remove(this,"._submit"),void 0)}}),l.changeBubbles||(n.event.special.change={setup:function(){return Y.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(n.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),n.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),n.event.simulate("change",this,a,!0)})),!1):(n.event.add(this,"beforeactivate._change",function(a){var b=a.target;
Y.test(b.nodeName)&&!n._data(b,"changeBubbles")&&(n.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||n.event.simulate("change",this.parentNode,a,!0)}),n._data(b,"changeBubbles",!0))}),void 0)},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return n.event.remove(this,"._change"),!Y.test(this.nodeName)}}),l.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a),!0)
};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=n._data(d,b);e||d.addEventListener(a,c,!0),n._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=n._data(d,b)-1;e?n._data(d,b,e):(d.removeEventListener(a,c,!0),n._removeData(d,b))}}}),n.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(f in a)this.on(f,b,c,a[f],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=cb;
else if(!d)return this;return 1===e&&(g=d,d=function(a){return n().off(a),g.apply(this,arguments)},d.guid=g.guid||(g.guid=n.guid++)),this.each(function(){n.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=cb),this.each(function(){n.event.remove(this,a,c,b)
})},trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}});var fb="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",gb=/ jQuery\d+="(?:null|\d+)"/g,hb=new RegExp("<(?:"+fb+")[\\s/>]","i"),ib=/^\s+/,jb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,kb=/<([\w:]+)/,lb=/<tbody/i,mb=/<|&#?\w+;/,nb=/<(?:script|style|link)/i,ob=/checked\s*(?:[^=]|=\s*.checked.)/i,pb=/^$|\/(?:java|ecma)script/i,qb=/^true\/(.*)/,rb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,sb={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:l.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},tb=eb(z),ub=tb.appendChild(z.createElement("div"));
sb.optgroup=sb.option,sb.tbody=sb.tfoot=sb.colgroup=sb.caption=sb.thead,sb.th=sb.td,n.extend({clone:function(a,b,c){var d,e,f,g,h,i=n.contains(a.ownerDocument,a);if(l.html5Clone||n.isXMLDoc(a)||!hb.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(ub.innerHTML=a.outerHTML,ub.removeChild(f=ub.firstChild)),!(l.noCloneEvent&&l.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(d=vb(f),h=vb(a),g=0;null!=(e=h[g]);++g)d[g]&&Cb(e,d[g]);if(b)if(c)for(h=h||vb(a),d=d||vb(f),g=0;null!=(e=h[g]);g++)Bb(e,d[g]);
else Bb(a,f);return d=vb(f,"script"),d.length>0&&Ab(d,!i&&vb(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k,m=a.length,o=eb(b),p=[],q=0;m>q;q++)if(f=a[q],f||0===f)if("object"===n.type(f))n.merge(p,f.nodeType?[f]:f);else if(mb.test(f)){for(h=h||o.appendChild(b.createElement("div")),i=(kb.exec(f)||["",""])[1].toLowerCase(),k=sb[i]||sb._default,h.innerHTML=k[1]+f.replace(jb,"<$1></$2>")+k[2],e=k[0];e--;)h=h.lastChild;if(!l.leadingWhitespace&&ib.test(f)&&p.push(b.createTextNode(ib.exec(f)[0])),!l.tbody)for(f="table"!==i||lb.test(f)?"<table>"!==k[1]||lb.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;e--;)n.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j);
for(n.merge(p,h.childNodes),h.textContent="";h.firstChild;)h.removeChild(h.firstChild);h=o.lastChild}else p.push(b.createTextNode(f));for(h&&o.removeChild(h),l.appendChecked||n.grep(vb(p,"input"),wb),q=0;f=p[q++];)if((!d||-1===n.inArray(f,d))&&(g=n.contains(f.ownerDocument,f),h=vb(o.appendChild(f),"script"),g&&Ab(h),c))for(e=0;f=h[e++];)pb.test(f.type||"")&&c.push(f);return h=null,o},cleanData:function(a,b){for(var d,e,f,g,h=0,i=n.expando,j=n.cache,k=l.deleteExpando,m=n.event.special;null!=(d=a[h]);h++)if((b||n.acceptData(d))&&(f=d[i],g=f&&j[f])){if(g.events)for(e in g.events)m[e]?n.event.remove(d,e):n.removeEvent(d,e,g.handle);
j[f]&&(delete j[f],k?delete d[i]:typeof d.removeAttribute!==L?d.removeAttribute(i):d[i]=null,c.push(f))}}}),n.fn.extend({text:function(a){return W(this,function(a){return void 0===a?n.text(this):this.empty().append((this[0]&&this[0].ownerDocument||z).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=xb(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=xb(this,a);
b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?n.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||n.cleanData(vb(c)),c.parentNode&&(b&&n.contains(c.ownerDocument,c)&&Ab(vb(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&n.cleanData(vb(a,!1));a.firstChild;)a.removeChild(a.firstChild);
a.options&&n.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return W(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(gb,""):void 0;if(!("string"!=typeof a||nb.test(a)||!l.htmlSerialize&&hb.test(a)||!l.leadingWhitespace&&ib.test(a)||sb[(kb.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(jb,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(vb(b,!1)),b.innerHTML=a);
b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,n.cleanData(vb(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,k=this.length,m=this,o=k-1,p=a[0],q=n.isFunction(p);if(q||k>1&&"string"==typeof p&&!l.checkClone&&ob.test(p))return this.each(function(c){var d=m.eq(c);
q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(k&&(i=n.buildFragment(a,this[0].ownerDocument,!1,this),c=i.firstChild,1===i.childNodes.length&&(i=c),c)){for(g=n.map(vb(i,"script"),yb),f=g.length;k>j;j++)d=i,j!==o&&(d=n.clone(d,!0,!0),f&&n.merge(g,vb(d,"script"))),b.call(this[j],d,j);if(f)for(h=g[g.length-1].ownerDocument,n.map(g,zb),j=0;f>j;j++)d=g[j],pb.test(d.type||"")&&!n._data(d,"globalEval")&&n.contains(h,d)&&(d.src?n._evalUrl&&n._evalUrl(d.src):n.globalEval((d.text||d.textContent||d.innerHTML||"").replace(rb,"")));
i=c=null}return this}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=0,e=[],g=n(a),h=g.length-1;h>=d;d++)c=d===h?this:this.clone(!0),n(g[d])[b](c),f.apply(e,c.get());return this.pushStack(e)}});var Db,Eb={};!function(){var a,b,c=z.createElement("div"),d="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";c.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=c.getElementsByTagName("a")[0],a.style.cssText="float:left;opacity:.5",l.opacity=/^0.5/.test(a.style.opacity),l.cssFloat=!!a.style.cssFloat,c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===c.style.backgroundClip,a=c=null,l.shrinkWrapBlocks=function(){var a,c,e,f;
if(null==b){if(a=z.getElementsByTagName("body")[0],!a)return;f="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",c=z.createElement("div"),e=z.createElement("div"),a.appendChild(c).appendChild(e),b=!1,typeof e.style.zoom!==L&&(e.style.cssText=d+";width:1px;padding:1px;zoom:1",e.innerHTML="<div></div>",e.firstChild.style.width="5px",b=3!==e.offsetWidth),a.removeChild(c),a=c=e=null}return b}}();var Jb,Kb,Hb=/^margin/,Ib=new RegExp("^("+T+")(?!px)[a-z%]+$","i"),Lb=/^(top|right|bottom|left)$/;a.getComputedStyle?(Jb=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)
},Kb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Jb(a),g=c?c.getPropertyValue(b)||c[b]:void 0,c&&(""!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),Ib.test(g)&&Hb.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0===g?g:g+""}):z.documentElement.currentStyle&&(Jb=function(a){return a.currentStyle},Kb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Jb(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),Ib.test(g)&&!Lb.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"
}),function(){function j(){var b,c,g=z.getElementsByTagName("body")[0];g&&(b=z.createElement("div"),c=z.createElement("div"),b.style.cssText=h,g.appendChild(b).appendChild(c),c.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;display:block;padding:1px;border:1px;width:4px;margin-top:1%;top:1%",n.swap(g,null!=g.style.zoom?{zoom:1}:{},function(){d=4===c.offsetWidth}),e=!0,f=!1,a.getComputedStyle&&(f="1%"!==(a.getComputedStyle(c,null)||{}).top,e="4px"===(a.getComputedStyle(c,null)||{width:"4px"}).width),g.removeChild(b),c=g=null)
}var b,c,d,e,f,g=z.createElement("div"),h="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",i="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";g.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",b=g.getElementsByTagName("a")[0],b.style.cssText="float:left;opacity:.5",l.opacity=/^0.5/.test(b.style.opacity),l.cssFloat=!!b.style.cssFloat,g.style.backgroundClip="content-box",g.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===g.style.backgroundClip,b=g=null,n.extend(l,{reliableHiddenOffsets:function(){if(null!=c)return c;
var a,b,d,e=z.createElement("div"),f=z.getElementsByTagName("body")[0];if(f)return e.setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=z.createElement("div"),a.style.cssText=h,f.appendChild(a).appendChild(e),e.innerHTML="<table><tr><td></td><td>t</td></tr></table>",b=e.getElementsByTagName("td"),b[0].style.cssText="padding:0;margin:0;border:0;display:none",d=0===b[0].offsetHeight,b[0].style.display="",b[1].style.display="none",c=d&&0===b[0].offsetHeight,f.removeChild(a),e=f=null,c
},boxSizing:function(){return null==d&&j(),d},boxSizingReliable:function(){return null==e&&j(),e},pixelPosition:function(){return null==f&&j(),f},reliableMarginRight:function(){var b,c,d,e,f=!0;if(a.getComputedStyle){if(b=z.getElementsByTagName("body")[0],!b)return;c=z.createElement("div"),d=z.createElement("div"),c.style.cssText=h,b.appendChild(c).appendChild(d),e=d.appendChild(z.createElement("div")),e.style.cssText=d.style.cssText=i,e.style.marginRight=e.style.width="0",d.style.width="1px",f=!parseFloat((a.getComputedStyle(e,null)||{}).marginRight),b.removeChild(c)
}return f}})}(),n.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var Nb=/alpha\([^)]*\)/i,Ob=/opacity\s*=\s*([^)]*)/,Pb=/^(none|table(?!-c[ea]).+)/,Qb=new RegExp("^("+T+")(.*)$","i"),Rb=new RegExp("^([+-])=("+T+")","i"),Sb={position:"absolute",visibility:"hidden",display:"block"},Tb={letterSpacing:0,fontWeight:400},Ub=["Webkit","O","Moz","ms"];n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Kb(a,"opacity");return""===c?"1":c
}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":l.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;if(b=n.cssProps[h]||(n.cssProps[h]=Vb(i,h)),g=n.cssHooks[b]||n.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];if(f=typeof c,"string"===f&&(e=Rb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(n.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||n.cssNumber[h]||(c+="px"),l.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set"in g&&void 0===(c=g.set(a,c,d)))))try{i[b]="",i[b]=c
}catch(j){}}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Vb(a.style,h)),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(f=g.get(a,!0,c)),void 0===f&&(f=Kb(a,b,d)),"normal"===f&&b in Tb&&(f=Tb[b]),""===c||c?(e=parseFloat(f),c===!0||n.isNumeric(e)?e||0:f):f}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?0===a.offsetWidth&&Pb.test(n.css(a,"display"))?n.swap(a,Sb,function(){return Zb(a,b,d)}):Zb(a,b,d):void 0},set:function(a,c,d){var e=d&&Jb(a);
return Xb(a,c,d?Yb(a,b,d,l.boxSizing()&&"border-box"===n.css(a,"boxSizing",!1,e),e):0)}}}),l.opacity||(n.cssHooks.opacity={get:function(a,b){return Ob.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=n.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===n.trim(f.replace(Nb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=Nb.test(f)?f.replace(Nb,e):f+" "+e)
}}),n.cssHooks.marginRight=Mb(l.reliableMarginRight,function(a,b){return b?n.swap(a,{display:"inline-block"},Kb,[a,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+U[d]+b]=f[d]||f[d-2]||f[0];return e}},Hb.test(a)||(n.cssHooks[a+b].set=Xb)}),n.fn.extend({css:function(a,b){return W(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=Jb(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);
return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return Wb(this,!0)},hide:function(){return Wb(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){V(this)?n(this).show():n(this).hide()})}}),n.Tween=$b,$b.prototype={constructor:$b,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=$b.propHooks[this.prop];
return a&&a.get?a.get(this):$b.propHooks._default.get(this)},run:function(a){var b,c=$b.propHooks[this.prop];return this.pos=b=this.options.duration?n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):$b.propHooks._default.set(this),this}},$b.prototype.init.prototype=$b.prototype,$b.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]
},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[n.cssProps[a.prop]]||n.cssHooks[a.prop])?n.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},$b.propHooks.scrollTop=$b.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},n.fx=$b.prototype.init,n.fx.step={};var _b,ac,bc=/^(?:toggle|show|hide)$/,cc=new RegExp("^(?:([+-])=|)("+T+")([a-z%]*)$","i"),dc=/queueHooks$/,ec=[jc],fc={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=cc.exec(b),f=e&&e[3]||(n.cssNumber[a]?"":"px"),g=(n.cssNumber[a]||"px"!==f&&+d)&&cc.exec(n.css(c.elem,a)),h=1,i=20;
if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,n.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};n.Animation=n.extend(lc,{tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],fc[c]=fc[c]||[],fc[c].unshift(b)},prefilter:function(a,b){b?ec.unshift(a):ec.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};
return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(V).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=lc(this,n.extend({},a),f);
(e||n._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=n._data(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&dc.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));
(b||!c)&&n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=n._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(hc(b,!0),a,d,e)
}}),n.each({slideDown:hc("show"),slideUp:hc("hide"),slideToggle:hc("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=n.timers,c=0;for(_b=n.now();c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||n.fx.stop(),_b=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){ac||(ac=setInterval(n.fx.tick,n.fx.interval))
},n.fx.stop=function(){clearInterval(ac),ac=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(a,b){return a=n.fx?n.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a,b,c,d,e=z.createElement("div");e.setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=e.getElementsByTagName("a")[0],c=z.createElement("select"),d=c.appendChild(z.createElement("option")),b=e.getElementsByTagName("input")[0],a.style.cssText="top:1px",l.getSetAttribute="t"!==e.className,l.style=/top/.test(a.getAttribute("style")),l.hrefNormalized="/a"===a.getAttribute("href"),l.checkOn=!!b.value,l.optSelected=d.selected,l.enctype=!!z.createElement("form").enctype,c.disabled=!0,l.optDisabled=!d.disabled,b=z.createElement("input"),b.setAttribute("value",""),l.input=""===b.getAttribute("value"),b.value="t",b.setAttribute("type","radio"),l.radioValue="t"===b.value,a=b=c=d=e=null
}();var mc=/\r/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(mc,""):null==c?"":c)
}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.text(a)}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(l.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=n.makeArray(b),g=e.length;g--;)if(d=e[g],n.inArray(n.valHooks.option.get(d),f)>=0)try{d.selected=c=!0
}catch(h){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>=0:void 0}},l.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var nc,oc,pc=n.expr.attrHandle,qc=/^(?:checked|selected)$/i,rc=l.getSetAttribute,sc=l.input;n.fn.extend({attr:function(a,b){return W(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)
})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===L?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),d=n.attrHooks[b]||(n.expr.match.bool.test(b)?oc:nc)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=n.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):(n.removeAttr(a,b),void 0))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(F);if(f&&1===a.nodeType)for(;c=f[e++];)d=n.propFix[c]||c,n.expr.match.bool.test(c)?sc&&rc||!qc.test(c)?a[d]=!1:a[n.camelCase("default-"+c)]=a[d]=!1:n.attr(a,c,""),a.removeAttribute(rc?c:d)
},attrHooks:{type:{set:function(a,b){if(!l.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),oc={set:function(a,b,c){return b===!1?n.removeAttr(a,c):sc&&rc||!qc.test(c)?a.setAttribute(!rc&&n.propFix[c]||c,c):a[n.camelCase("default-"+c)]=a[c]=!0,c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=pc[b]||n.find.attr;pc[b]=sc&&rc||!qc.test(b)?function(a,b,d){var e,f;return d||(f=pc[b],pc[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,pc[b]=f),e
}:function(a,b,c){return c?void 0:a[n.camelCase("default-"+b)]?b.toLowerCase():null}}),sc&&rc||(n.attrHooks.value={set:function(a,b,c){return n.nodeName(a,"input")?(a.defaultValue=b,void 0):nc&&nc.set(a,b,c)}}),rc||(nc={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},pc.id=pc.name=pc.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},n.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);
return c&&c.specified?c.value:void 0},set:nc.set},n.attrHooks.contenteditable={set:function(a,b,c){nc.set(a,""===b?!1:b,c)}},n.each(["width","height"],function(a,b){n.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),l.style||(n.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var tc=/^(?:input|select|textarea|button|object)$/i,uc=/^(?:a|area)$/i;n.fn.extend({prop:function(a,b){return W(this,n.prop,a,b,arguments.length>1)
},removeProp:function(a){return a=n.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),n.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!n.isXMLDoc(a),f&&(b=n.propFix[b]||b,e=n.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=n.find.attr(a,"tabindex");return b?parseInt(b,10):tc.test(a.nodeName)||uc.test(a.nodeName)&&a.href?0:-1
}}}}),l.hrefNormalized||n.each(["href","src"],function(a,b){n.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),l.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this}),l.enctype||(n.propFix.enctype="encoding");var vc=/[\t\r\n\f]/g;
n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j="string"==typeof a&&a;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(F)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(vc," "):" ")){for(f=0;e=b[f++];)d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=n.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j=0===arguments.length||"string"==typeof a&&a;
if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(F)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(vc," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");g=a?n.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):n.isFunction(a)?this.each(function(c){n(this).toggleClass(a.call(this,c,this.className,b),b)
}):this.each(function(){if("string"===c)for(var b,d=0,e=n(this),f=a.match(F)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else(c===L||"boolean"===c)&&(this.className&&n._data(this,"__className__",this.className),this.className=this.className||a===!1?"":n._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(vc," ").indexOf(b)>=0)return!0;return!1}}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)
}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var wc=n.now(),xc=/\?/,yc=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;n.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");
var c,d=null,e=n.trim(b+"");return e&&!n.trim(e.replace(yc,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():n.error("Invalid JSON: "+b)},n.parseXML=function(b){var c,d;if(!b||"string"!=typeof b)return null;try{a.DOMParser?(d=new DOMParser,c=d.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(e){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||n.error("Invalid XML: "+b),c};
var zc,Ac,Bc=/#.*$/,Cc=/([?&])_=[^&]*/,Dc=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ec=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Fc=/^(?:GET|HEAD)$/,Gc=/^\/\//,Hc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Ic={},Jc={},Kc="*/".concat("*");try{Ac=location.href}catch(Lc){Ac=z.createElement("a"),Ac.href="",Ac=Ac.href}zc=Hc.exec(Ac.toLowerCase())||[],n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ac,type:"GET",isLocal:Ec.test(zc[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Kc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Oc(Oc(a,n.ajaxSettings),b):Oc(n.ajaxSettings,a)
},ajaxPrefilter:Mc(Ic),ajaxTransport:Mc(Jc),ajax:function(a,b){function w(a,b,c,d){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),i=void 0,f=d||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,c&&(u=Pc(k,v,c)),u=Qc(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(n.lastModified[e]=w),w=v.getResponseHeader("etag"),w&&(n.etag[e]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,h&&m.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),h&&(m.trigger("ajaxComplete",[v,k]),--n.active||n.event.trigger("ajaxStop")))
}"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=n.ajaxSetup({},b),l=k.context||k,m=k.context&&(l.nodeType||l.jquery)?n(l):n.event,o=n.Deferred(),p=n.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!j)for(j={};b=Dc.exec(f);)j[b[1].toLowerCase()]=b[2];b=j[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this
},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return i&&i.abort(b),w(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||Ac)+"").replace(Bc,"").replace(Gc,zc[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=n.trim(k.dataType||"*").toLowerCase().match(F)||[""],null==k.crossDomain&&(c=Hc.exec(k.url.toLowerCase()),k.crossDomain=!(!c||c[1]===zc[1]&&c[2]===zc[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(zc[3]||("http:"===zc[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=n.param(k.data,k.traditional)),Nc(Ic,k,b,v),2===t)return v;
h=k.global,h&&0===n.active++&&n.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!Fc.test(k.type),e=k.url,k.hasContent||(k.data&&(e=k.url+=(xc.test(e)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=Cc.test(e)?e.replace(Cc,"$1_="+wc++):e+(xc.test(e)?"&":"?")+"_="+wc++)),k.ifModified&&(n.lastModified[e]&&v.setRequestHeader("If-Modified-Since",n.lastModified[e]),n.etag[e]&&v.setRequestHeader("If-None-Match",n.etag[e])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+Kc+"; q=0.01":""):k.accepts["*"]);
for(d in k.headers)v.setRequestHeader(d,k.headers[d]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(d in{success:1,error:1,complete:1})v[d](k[d]);return i=Nc(Jc,k,b,v),v.send=function(){v.readyState=1,h&&m.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,i.send(r,w)}catch(a){if(!(2>t))throw a;w(-1,a)}},i?b.autostart!==!1&&v.send():w(-1,"No Transport"),v},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")
}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){if(n.isFunction(a))return this.each(function(b){n(this).wrapAll(a.call(this,b))
});if(this[0]){var b=n(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return n.isFunction(a)?this.each(function(b){n(this).wrapInner(a.call(this,b))}):this.each(function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)
})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!l.reliableHiddenOffsets()&&"none"===(a.style&&a.style.display||n.css(a,"display"))},n.expr.filters.visible=function(a){return!n.expr.filters.hidden(a)};var Rc=/%20/g,Sc=/\[\]$/,Tc=/\r?\n/g,Uc=/^(?:submit|button|image|reset|file)$/i,Vc=/^(?:input|select|textarea|keygen)/i;n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)
};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)Wc(c,a[c],b,e);return d.join("&").replace(Rc,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&Vc.test(this.nodeName)&&!Uc.test(a)&&(this.checked||!X.test(a))
}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(Tc,"\r\n")}}):{name:b.name,value:c.replace(Tc,"\r\n")}}).get()}}),n.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&$c()||_c()}:$c;var Xc=0,Yc={},Zc=n.ajaxSettings.xhr();a.ActiveXObject&&n(a).on("unload",function(){for(var a in Yc)Yc[a](void 0,!0)}),l.cors=!!Zc&&"withCredentials"in Zc,Zc=l.ajax=!!Zc,Zc&&n.ajaxTransport(function(a){if(!a.crossDomain||l.cors){var b;
return{send:function(c,d){var e,f=a.xhr(),g=++Xc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)void 0!==c[e]&&f.setRequestHeader(e,c[e]+"");f.send(a.hasContent&&a.data||null),b=function(c,e){var h,i,j;if(b&&(e||4===f.readyState))if(delete Yc[g],b=void 0,f.onreadystatechange=n.noop,e)4!==f.readyState&&f.abort();
else{j={},h=f.status,"string"==typeof f.responseText&&(j.text=f.responseText);try{i=f.statusText}catch(k){i=""}h||!a.isLocal||a.crossDomain?1223===h&&(h=204):h=j.text?200:404}j&&d(h,i,j,f.getAllResponseHeaders())},a.async?4===f.readyState?setTimeout(b):f.onreadystatechange=Yc[g]=b:b()},abort:function(){b&&b(void 0,!0)}}}}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return n.globalEval(a),a
}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=z.head||n("head")[0]||z.documentElement;return{send:function(d,e){b=z.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))
},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var ad=[],bd=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=ad.pop()||n.expando+"_"+wc++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(bd.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&bd.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(bd,"$1"+e):b.jsonp!==!1&&(b.url+=(xc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]
},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,ad.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||z;var d=v.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=n.buildFragment([a],b,e),e&&e.length&&n(e).remove(),n.merge([],d.childNodes))};var cd=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&cd)return cd.apply(this,arguments);
var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=a.slice(h,a.length),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(f="POST"),g.length>0&&n.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){e=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,e||[a.responseText,b,a])}),this},n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};var dd=a.document.documentElement;return n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};
"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&n.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;
if(f)return b=f.documentElement,n.contains(b,e)?(typeof e.getBoundingClientRect!==L&&(d=e.getBoundingClientRect()),c=ed(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===n.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(c=a.offset()),c.top+=n.css(a[0],"borderTopWidth",!0),c.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-n.css(d,"marginTop",!0),left:b.left-c.left-n.css(d,"marginLeft",!0)}
}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||dd;a&&!n.nodeName(a,"html")&&"static"===n.css(a,"position");)a=a.offsetParent;return a||dd})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);n.fn[a]=function(d){return W(this,function(a,d,e){var f=ed(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:(f?f.scrollTo(c?n(f).scrollLeft():e,c?e:n(f).scrollTop()):a[d]=e,void 0)},a,d,arguments.length,null)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=Mb(l.pixelPosition,function(a,c){return c?(c=Kb(a,b),Ib.test(c)?n(a).position()[b]+"px":c):void 0
})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return W(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)
}})}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,function(){var a,b;n.uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},a=n.uaMatch(navigator.userAgent),b={},a.browser&&(b[a.browser]=!0,b.version=a.version),b.chrome?b.webkit=!0:b.webkit&&(b.safari=!0),n.browser=b
}(),n.version="4.0",n.long_version="4.0.37",n.uid=function(a,b){return(a?a:"")+Math.random().toString().replace(".","")+(b?b:"")},n.globalNamespace=n.uid("Foundry"),a[n.globalNamespace]=n,n.run=function(a){return n.isFunction(a)?a(n):null},n.initialize=function(b){n.initialized||(n.extend(n,b),"development"==n.environment&&(a.F=n),n.initialized=!0,FD40.module.execute())},FD40.jquery(n),"function"==typeof define&&define.amd&&define("jquery",[],function(){return n}),n}),FD40.plugin("lodash",function(a){function P(a,b,c){for(var d=(c||0)-1,e=a?a.length:0;++d<e;)if(a[d]===b)return d;
return-1}function Q(a,b){var c=typeof b;if(a=a.cache,"boolean"==c||null==b)return a[b]?0:-1;"number"!=c&&"string"!=c&&(c="object");var d="number"==c?b:f+b;return a=(a=a[c])&&a[d],"object"==c?a&&P(a,b)>-1?0:-1:a?0:-1}function R(a){var b=this.cache,c=typeof a;if("boolean"==c||null==a)b[a]=!0;else{"number"!=c&&"string"!=c&&(c="object");var d="number"==c?a:f+a,e=b[c]||(b[c]={});"object"==c?(e[d]||(e[d]=[])).push(a):e[d]=!0}}function S(a){return a.charCodeAt(0)}function T(a,b){for(var c=a.criteria,d=b.criteria,e=-1,f=c.length;++e<f;){var g=c[e],h=d[e];
if(g!==h){if(g>h||"undefined"==typeof g)return 1;if(h>g||"undefined"==typeof h)return-1}}return a.index-b.index}function U(a){var b=-1,c=a.length,d=a[0],e=a[c/2|0],f=a[c-1];if(d&&"object"==typeof d&&e&&"object"==typeof e&&f&&"object"==typeof f)return!1;var g=X();g["false"]=g["null"]=g["true"]=g.undefined=!1;var h=X();for(h.array=a,h.cache=g,h.push=R;++b<c;)h.push(a[b]);return h}function V(a){return"\\"+J[a]}function W(){return c.pop()||[]}function X(){return d.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}
}function Y(a){a.length=0,c.length<h&&c.push(a)}function Z(a){var b=a.cache;b&&Z(b),a.array=a.cache=a.criteria=a.object=a.number=a.string=a.value=null,d.length<h&&d.push(a)}function $(a,b,c){b||(b=0),"undefined"==typeof c&&(c=a?a.length:0);for(var d=-1,e=c-b||0,f=Array(0>e?0:e);++d<e;)f[d]=a[b+d];return f}function _(a){function Cb(a){return a&&"object"==typeof a&&!Zb(a)&&mb.call(a,"__wrapped__")?a:new Db(a)}function Db(a,b){this.__chain__=!!b,this.__wrapped__=a}function Fb(a){function e(){if(c){var a=$(c);nb.apply(a,arguments)
}if(this instanceof e){var f=Hb(b.prototype),g=b.apply(f,a||arguments);return zc(g)?g:f}return b.apply(d,a||arguments)}var b=a[0],c=a[2],d=a[4];return Vb(e,a),e}function Gb(a,b,c,d,e){if(c){var f=c(a);if("undefined"!=typeof f)return f}var g=zc(a);if(!g)return a;var h=fb.call(a);if(!F[h])return a;var i=Bb[h];switch(h){case y:case z:return new i(+a);case B:case E:return new i(a);case D:return f=i(a.source,n.exec(a)),f.lastIndex=a.lastIndex,f}var j=Zb(a);if(b){var k=!d;d||(d=W()),e||(e=W());for(var l=d.length;l--;)if(d[l]==a)return e[l];
f=j?i(a.length):{}}else f=j?$(a):ec({},a);return j&&(mb.call(a,"index")&&(f.index=a.index),mb.call(a,"input")&&(f.input=a.input)),b?(d.push(a),e.push(f),(j?Vc:nc)(a,function(a,g){f[g]=Gb(a,b,c,d,e)}),k&&(Y(d),Y(e)),f):f}function Hb(a){return zc(a)?sb(a):{}}function Ib(a,b,c){if("function"!=typeof a)return $d;if("undefined"==typeof b||!("prototype"in a))return a;var d=a.__bindData__;if("undefined"==typeof d&&(Eb.funcNames&&(d=!a.name),d=d||!Eb.funcDecomp,!d)){var e=kb.call(a);Eb.funcNames||(d=!o.test(e)),d||(d=s.test(e),Vb(a,d))
}if(d===!1||d!==!0&&1&d[1])return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return Jd(a,b)}function Jb(a){function m(){var a=h?f:this;if(d){var n=$(d);nb.apply(n,arguments)}if((e||j)&&(n||(n=$(arguments)),e&&nb.apply(n,e),j&&n.length<g))return c|=16,Jb([b,k?c:-4&c,n,null,f,g]);if(n||(n=arguments),i&&(b=a[l]),this instanceof m){a=Hb(b.prototype);
var o=b.apply(a,n);return zc(o)?o:a}return b.apply(a,n)}var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=1&c,i=2&c,j=4&c,k=8&c,l=b;return Vb(m,a),m}function Kb(a,b){var c=-1,d=Tb(),e=a?a.length:0,f=e>=g&&d===P,h=[];if(f){var i=U(b);i?(d=Q,b=i):f=!1}for(;++c<e;){var j=a[c];d(b,j)<0&&h.push(j)}return f&&Z(b),h}function Lb(a,b,c,d){for(var e=(d||0)-1,f=a?a.length:0,g=[];++e<f;){var h=a[e];if(h&&"object"==typeof h&&"number"==typeof h.length&&(Zb(h)||Yb(h))){b||(h=Lb(h,b,c));var i=-1,j=h.length,k=g.length;for(g.length+=j;++i<j;)g[k++]=h[i]
}else c||g.push(h)}return g}function Mb(a,b,c,d,e,f){if(c){var g=c(a,b);if("undefined"!=typeof g)return!!g}if(a===b)return 0!==a||1/a==1/b;var h=typeof a,i=typeof b;if(!(a!==a||a&&I[h]||b&&I[i]))return!1;if(null==a||null==b)return a===b;var j=fb.call(a),k=fb.call(b);if(j==w&&(j=C),k==w&&(k=C),j!=k)return!1;switch(j){case y:case z:return+a==+b;case B:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case D:case E:return a==R(b)}var l=j==x;if(!l){var m=mb.call(a,"__wrapped__"),n=mb.call(b,"__wrapped__");if(m||n)return Mb(m?a.__wrapped__:a,n?b.__wrapped__:b,c,d,e,f);
if(j!=C)return!1;var o=a.constructor,p=b.constructor;if(o!=p&&!(yc(o)&&o instanceof o&&yc(p)&&p instanceof p)&&"constructor"in a&&"constructor"in b)return!1}var q=!e;e||(e=W()),f||(f=W());for(var r=e.length;r--;)if(e[r]==a)return f[r]==b;var s=0;if(g=!0,e.push(a),f.push(b),l){if(r=a.length,s=b.length,g=s==r,g||d)for(;s--;){var t=r,u=b[s];if(d)for(;t--&&!(g=Mb(a[t],u,c,d,e,f)););else if(!(g=Mb(a[s],u,c,d,e,f)))break}}else lc(b,function(b,h,i){return mb.call(i,h)?(s++,g=mb.call(a,h)&&Mb(a[h],b,c,d,e,f)):void 0
}),g&&!d&&lc(a,function(a,b,c){return mb.call(c,b)?g=--s>-1:void 0});return e.pop(),f.pop(),q&&(Y(e),Y(f)),g}function Nb(a,b,c,d,e){(Zb(b)?Vc:nc)(b,function(b,f){var g,h,i=b,j=a[f];if(b&&((h=Zb(b))||Dc(b))){for(var k=d.length;k--;)if(g=d[k]==b){j=e[k];break}if(!g){var l;c&&(i=c(j,b),(l="undefined"!=typeof i)&&(j=i)),l||(j=h?Zb(j)?j:[]:Dc(j)?j:{}),d.push(b),e.push(j),l||Nb(j,b,c,d,e)}}else c&&(i=c(j,b),"undefined"==typeof i&&(i=b)),"undefined"!=typeof i&&(j=i);a[f]=j})}function Ob(a,b){return a+jb(Ab()*(b-a+1))
}function Pb(a,b,c){var d=-1,e=Tb(),f=a?a.length:0,h=[],i=!b&&f>=g&&e===P,j=c||i?W():h;if(i){var k=U(j);e=Q,j=k}for(;++d<f;){var l=a[d],m=c?c(l,d,a):l;(b?!d||j[j.length-1]!==m:e(j,m)<0)&&((c||i)&&j.push(m),h.push(l))}return i?(Y(j.array),Z(j)):c&&Y(j),h}function Qb(a){return function(b,c,d){var e={};c=Cb.createCallback(c,d,3);var f=-1,g=b?b.length:0;if("number"==typeof g)for(;++f<g;){var h=b[f];a(e,h,c(h,f,b),b)}else nc(b,function(b,d,f){a(e,b,c(b,d,f),f)});return e}}function Rb(a,b,c,d,e,f){var g=1&b,h=2&b,i=4&b,k=16&b,l=32&b;
if(!h&&!yc(a))throw new bb;k&&!c.length&&(b&=-17,k=c=!1),l&&!d.length&&(b&=-33,l=d=!1);var m=a&&a.__bindData__;if(m&&m!==!0)return m=$(m),m[2]&&(m[2]=$(m[2])),m[3]&&(m[3]=$(m[3])),!g||1&m[1]||(m[4]=e),!g&&1&m[1]&&(b|=8),!i||4&m[1]||(m[5]=f),k&&nb.apply(m[2]||(m[2]=[]),c),l&&qb.apply(m[3]||(m[3]=[]),d),m[1]|=b,Rb.apply(null,m);var n=1==b||17===b?Fb:Jb;return n([a,b,c,d,e,f])}function Sb(a){return ac[a]}function Tb(){var a=(a=Cb.indexOf)===sd?P:a;return a}function Ub(a){return"function"==typeof a&&gb.test(a)}function Wb(a){var b,c;
return a&&fb.call(a)==C&&(b=a.constructor,!yc(b)||b instanceof b)?(lc(a,function(a,b){c=b}),"undefined"==typeof c||mb.call(a,c)):!1}function Xb(a){return bc[a]}function Yb(a){return a&&"object"==typeof a&&"number"==typeof a.length&&fb.call(a)==w||!1}function fc(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c=b,b=!1),Gb(a,b,"function"==typeof c&&Ib(c,d,1))}function gc(a,b,c){return Gb(a,!0,"function"==typeof b&&Ib(b,c,1))}function hc(a,b){var c=Hb(a);return b?ec(c,b):c}function jc(a,b,c){var d;return b=Cb.createCallback(b,c,3),nc(a,function(a,c,e){return b(a,c,e)?(d=c,!1):void 0
}),d}function kc(a,b,c){var d;return b=Cb.createCallback(b,c,3),oc(a,function(a,c,e){return b(a,c,e)?(d=c,!1):void 0}),d}function mc(a,b,c){var d=[];lc(a,function(a,b){d.push(b,a)});var e=d.length;for(b=Ib(b,c,3);e--&&b(d[e--],d[e],a)!==!1;);return a}function oc(a,b,c){var d=_b(a),e=d.length;for(b=Ib(b,c,3);e--;){var f=d[e];if(b(a[f],f,a)===!1)break}return a}function pc(a){var b=[];return lc(a,function(a,c){yc(a)&&b.push(c)}),b.sort()}function qc(a,b){return a?mb.call(a,b):!1}function rc(a){for(var b=-1,c=_b(a),d=c.length,e={};++b<d;){var f=c[b];
e[a[f]]=f}return e}function sc(a){return a===!0||a===!1||a&&"object"==typeof a&&fb.call(a)==y||!1}function tc(a){return a&&"object"==typeof a&&fb.call(a)==z||!1}function uc(a){return a&&1===a.nodeType||!1}function vc(a){var b=!0;if(!a)return b;var c=fb.call(a),d=a.length;return c==x||c==E||c==w||c==C&&"number"==typeof d&&yc(a.splice)?!d:(nc(a,function(){return b=!1}),b)}function wc(a,b,c,d){return Mb(a,b,"function"==typeof c&&Ib(c,d,2))}function xc(a){return ub(a)&&!vb(parseFloat(a))}function yc(a){return"function"==typeof a
}function zc(a){return!(!a||!I[typeof a])}function Ac(a){return Cc(a)&&a!=+a}function Bc(a){return null===a}function Cc(a){return"number"==typeof a||a&&"object"==typeof a&&fb.call(a)==B||!1}function Ec(a){return a&&"object"==typeof a&&fb.call(a)==D||!1}function Fc(a){return"string"==typeof a||a&&"object"==typeof a&&fb.call(a)==E||!1}function Gc(a){return"undefined"==typeof a}function Hc(a,b,c){var d={};return b=Cb.createCallback(b,c,3),nc(a,function(a,c,e){d[c]=b(a,c,e)}),d}function Ic(a){var b=arguments,c=2;
if(!zc(a))return a;if("number"!=typeof b[2]&&(c=b.length),c>3&&"function"==typeof b[c-2])var d=Ib(b[--c-1],b[c--],2);else c>2&&"function"==typeof b[c-1]&&(d=b[--c]);for(var e=$(arguments,1,c),f=-1,g=W(),h=W();++f<c;)Nb(a,e[f],d,g,h);return Y(g),Y(h),a}function Jc(a,b,c){var d={};if("function"!=typeof b){var e=[];lc(a,function(a,b){e.push(b)}),e=Kb(e,Lb(arguments,!0,!1,1));for(var f=-1,g=e.length;++f<g;){var h=e[f];d[h]=a[h]}}else b=Cb.createCallback(b,c,3),lc(a,function(a,c,e){b(a,c,e)||(d[c]=a)});return d}function Kc(a){for(var b=-1,d=_b(a),e=d.length,f=c(e);++b<e;){var g=d[b];
f[b]=[g,a[g]]}return f}function Lc(a,b,c){var d={};if("function"!=typeof b)for(var e=-1,f=Lb(arguments,!0,!1,1),g=zc(a)?f.length:0;++e<g;){var h=f[e];h in a&&(d[h]=a[h])}else b=Cb.createCallback(b,c,3),lc(a,function(a,c,e){b(a,c,e)&&(d[c]=a)});return d}function Mc(a,b,c,d){var e=Zb(a);if(null==c)if(e)c=[];else{var f=a&&a.constructor,g=f&&f.prototype;c=Hb(g)}return b&&(b=Cb.createCallback(b,d,4),(e?Vc:nc)(a,function(a,d,e){return b(c,a,d,e)})),c}function Nc(a){for(var b=-1,d=_b(a),e=d.length,f=c(e);++b<e;)f[b]=a[d[b]];
return f}function Oc(a){for(var b=arguments,d=-1,e=Lb(b,!0,!1,1),f=b[2]&&b[2][b[1]]===a?1:e.length,g=c(f);++d<f;)g[d]=a[e[d]];return g}function Pc(a,b,c){var d=-1,e=Tb(),f=a?a.length:0,g=!1;return c=(0>c?xb(0,f+c):c)||0,Zb(a)?g=e(a,b,c)>-1:"number"==typeof f?g=(Fc(a)?a.indexOf(b,c):e(a,b,c))>-1:nc(a,function(a){return++d>=c?!(g=a===b):void 0}),g}function Rc(a,b,c){var d=!0;b=Cb.createCallback(b,c,3);var e=-1,f=a?a.length:0;if("number"==typeof f)for(;++e<f&&(d=!!b(a[e],e,a)););else nc(a,function(a,c,e){return d=!!b(a,c,e)
});return d}function Sc(a,b,c){var d=[];b=Cb.createCallback(b,c,3);var e=-1,f=a?a.length:0;if("number"==typeof f)for(;++e<f;){var g=a[e];b(g,e,a)&&d.push(g)}else nc(a,function(a,c,e){b(a,c,e)&&d.push(a)});return d}function Tc(a,b,c){b=Cb.createCallback(b,c,3);var d=-1,e=a?a.length:0;if("number"!=typeof e){var g;return nc(a,function(a,c,d){return b(a,c,d)?(g=a,!1):void 0}),g}for(;++d<e;){var f=a[d];if(b(f,d,a))return f}}function Uc(a,b,c){var d;return b=Cb.createCallback(b,c,3),Wc(a,function(a,c,e){return b(a,c,e)?(d=a,!1):void 0
}),d}function Vc(a,b,c){var d=-1,e=a?a.length:0;if(b=b&&"undefined"==typeof c?b:Ib(b,c,3),"number"==typeof e)for(;++d<e&&b(a[d],d,a)!==!1;);else nc(a,b);return a}function Wc(a,b,c){var d=a?a.length:0;if(b=b&&"undefined"==typeof c?b:Ib(b,c,3),"number"==typeof d)for(;d--&&b(a[d],d,a)!==!1;);else{var e=_b(a);d=e.length,nc(a,function(a,c,f){return c=e?e[--d]:--d,b(f[c],c,f)})}return a}function Zc(a,b){var d=$(arguments,2),e=-1,f="function"==typeof b,g=a?a.length:0,h=c("number"==typeof g?g:0);return Vc(a,function(a){h[++e]=(f?b:a[b]).apply(a,d)
}),h}function $c(a,b,d){var e=-1,f=a?a.length:0;if(b=Cb.createCallback(b,d,3),"number"==typeof f)for(var g=c(f);++e<f;)g[e]=b(a[e],e,a);else g=[],nc(a,function(a,c,d){g[++e]=b(a,c,d)});return g}function _c(a,b,c){var d=-1/0,e=d;if("function"!=typeof b&&c&&c[b]===a&&(b=null),null==b&&Zb(a))for(var f=-1,g=a.length;++f<g;){var h=a[f];h>e&&(e=h)}else b=null==b&&Fc(a)?S:Cb.createCallback(b,c,3),Vc(a,function(a,c,f){var g=b(a,c,f);g>d&&(d=g,e=a)});return e}function ad(a,b,c){var d=1/0,e=d;if("function"!=typeof b&&c&&c[b]===a&&(b=null),null==b&&Zb(a))for(var f=-1,g=a.length;++f<g;){var h=a[f];
e>h&&(e=h)}else b=null==b&&Fc(a)?S:Cb.createCallback(b,c,3),Vc(a,function(a,c,f){var g=b(a,c,f);d>g&&(d=g,e=a)});return e}function cd(a,b,c,d){if(!a)return c;var e=arguments.length<3;b=Cb.createCallback(b,d,4);var f=-1,g=a.length;if("number"==typeof g)for(e&&(c=a[++f]);++f<g;)c=b(c,a[f],f,a);else nc(a,function(a,d,f){c=e?(e=!1,a):b(c,a,d,f)});return c}function dd(a,b,c,d){var e=arguments.length<3;return b=Cb.createCallback(b,d,4),Wc(a,function(a,d,f){c=e?(e=!1,a):b(c,a,d,f)}),c}function ed(a,b,c){return b=Cb.createCallback(b,c,3),Sc(a,function(a,c,d){return!b(a,c,d)
})}function fd(a,c,d){if(a&&"number"!=typeof a.length&&(a=Nc(a)),null==c||d)return a?a[Ob(0,a.length-1)]:b;var e=gd(a);return e.length=yb(xb(0,c),e.length),e}function gd(a){var b=-1,d=a?a.length:0,e=c("number"==typeof d?d:0);return Vc(a,function(a){var c=Ob(0,++b);e[b]=e[c],e[c]=a}),e}function hd(a){var b=a?a.length:0;return"number"==typeof b?b:_b(a).length}function id(a,b,c){var d;b=Cb.createCallback(b,c,3);var e=-1,f=a?a.length:0;if("number"==typeof f)for(;++e<f&&!(d=b(a[e],e,a)););else nc(a,function(a,c,e){return!(d=b(a,c,e))
});return!!d}function jd(a,b,d){var e=-1,f=Zb(b),g=a?a.length:0,h=c("number"==typeof g?g:0);for(f||(b=Cb.createCallback(b,d,3)),Vc(a,function(a,c,d){var g=h[++e]=X();f?g.criteria=$c(b,function(b){return a[b]}):(g.criteria=W())[0]=b(a,c,d),g.index=e,g.value=a}),g=h.length,h.sort(T);g--;){var i=h[g];h[g]=i.value,f||Y(i.criteria),Z(i)}return h}function kd(a){return a&&"number"==typeof a.length?$(a):Nc(a)}function md(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d}function nd(a){return Kb(a,Lb(arguments,!0,!0,1))
}function od(a,b,c){var d=-1,e=a?a.length:0;for(b=Cb.createCallback(b,c,3);++d<e;)if(b(a[d],d,a))return d;return-1}function pd(a,b,c){var d=a?a.length:0;for(b=Cb.createCallback(b,c,3);d--;)if(b(a[d],d,a))return d;return-1}function qd(a,c,d){var e=0,f=a?a.length:0;if("number"!=typeof c&&null!=c){var g=-1;for(c=Cb.createCallback(c,d,3);++g<f&&c(a[g],g,a);)e++}else if(e=c,null==e||d)return a?a[0]:b;return $(a,0,yb(xb(0,e),f))}function rd(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c="function"!=typeof b&&d&&d[b]===a?null:b,b=!1),null!=c&&(a=$c(a,c,d)),Lb(a,b)
}function sd(a,b,c){if("number"==typeof c){var d=a?a.length:0;c=0>c?xb(0,d+c):c||0}else if(c){var e=Bd(a,b);return a[e]===b?e:-1}return P(a,b,c)}function td(a,b,c){var d=0,e=a?a.length:0;if("number"!=typeof b&&null!=b){var f=e;for(b=Cb.createCallback(b,c,3);f--&&b(a[f],f,a);)d++}else d=null==b||c?1:b||d;return $(a,0,yb(xb(0,e-d),e))}function ud(){for(var a=[],b=-1,c=arguments.length,d=W(),e=Tb(),f=e===P,h=W();++b<c;){var i=arguments[b];(Zb(i)||Yb(i))&&(a.push(i),d.push(f&&i.length>=g&&U(b?a[b]:h)))}var j=a[0],k=-1,l=j?j.length:0,m=[];
a:for(;++k<l;){var n=d[0];if(i=j[k],(n?Q(n,i):e(h,i))<0){for(b=c,(n||h).push(i);--b;)if(n=d[b],(n?Q(n,i):e(a[b],i))<0)continue a;m.push(i)}}for(;c--;)n=d[c],n&&Z(n);return Y(d),Y(h),m}function vd(a,c,d){var e=0,f=a?a.length:0;if("number"!=typeof c&&null!=c){var g=f;for(c=Cb.createCallback(c,d,3);g--&&c(a[g],g,a);)e++}else if(e=c,null==e||d)return a?a[f-1]:b;return $(a,xb(0,f-e))}function wd(a,b,c){var d=a?a.length:0;for("number"==typeof c&&(d=(0>c?xb(0,d+c):yb(c,d-1))+1);d--;)if(a[d]===b)return d;return-1}function xd(a){for(var b=arguments,c=0,d=b.length,e=a?a.length:0;++c<d;)for(var f=-1,g=b[c];++f<e;)a[f]===g&&(pb.call(a,f--,1),e--);
return a}function yd(a,b,d){a=+a||0,d="number"==typeof d?d:+d||1,null==b&&(b=a,a=0);for(var e=-1,f=xb(0,hb((b-a)/(d||1))),g=c(f);++e<f;)g[e]=a,a+=d;return g}function zd(a,b,c){var d=-1,e=a?a.length:0,f=[];for(b=Cb.createCallback(b,c,3);++d<e;){var g=a[d];b(g,d,a)&&(f.push(g),pb.call(a,d--,1),e--)}return f}function Ad(a,b,c){if("number"!=typeof b&&null!=b){var d=0,e=-1,f=a?a.length:0;for(b=Cb.createCallback(b,c,3);++e<f&&b(a[e],e,a);)d++}else d=null==b||c?1:xb(0,b);return $(a,d)}function Bd(a,b,c,d){var e=0,f=a?a.length:e;
for(c=c?Cb.createCallback(c,d,1):$d,b=c(b);f>e;){var g=e+f>>>1;c(a[g])<b?e=g+1:f=g}return e}function Cd(){return Pb(Lb(arguments,!0,!0))}function Dd(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c="function"!=typeof b&&d&&d[b]===a?null:b,b=!1),null!=c&&(c=Cb.createCallback(c,d,3)),Pb(a,b,c)}function Ed(a){return Kb(a,$(arguments,1))}function Fd(){for(var a=-1,b=arguments.length;++a<b;){var c=arguments[a];if(Zb(c)||Yb(c))var d=d?Pb(Kb(d,c).concat(Kb(c,d))):c}return d||[]}function Gd(){for(var a=arguments.length>1?arguments:arguments[0],b=-1,d=a?_c(bd(a,"length")):0,e=c(0>d?0:d);++b<d;)e[b]=bd(a,b);
return e}function Hd(a,b){var c=-1,d=a?a.length:0,e={};for(b||!d||Zb(a[0])||(b=[]);++c<d;){var f=a[c];b?e[f]=b[c]:f&&(e[f[0]]=f[1])}return e}function Id(a,b){if(!yc(b))throw new bb;return function(){return--a<1?b.apply(this,arguments):void 0}}function Jd(a,b){return arguments.length>2?Rb(a,17,$(arguments,2),null,b):Rb(a,1,null,null,b)}function Kd(a){for(var b=arguments.length>1?Lb(arguments,!0,!1,1):pc(a),c=-1,d=b.length;++c<d;){var e=b[c];a[e]=Rb(a[e],1,null,null,a)}return a}function Ld(a,b){return arguments.length>2?Rb(b,19,$(arguments,2),null,a):Rb(b,3,null,null,a)
}function Md(){for(var a=arguments,b=a.length;b--;)if(!yc(a[b]))throw new bb;return function(){for(var b=arguments,c=a.length;c--;)b=[a[c].apply(this,b)];return b[0]}}function Nd(a,b){return b="number"==typeof b?b:+b||a.length,Rb(a,4,null,null,null,b)}function Od(a,c,d){var e,f,g,h,i,j,k,l=0,m=!1,n=!0;if(!yc(a))throw new bb;if(c=xb(0,c)||0,d===!0){var o=!0;n=!1}else zc(d)&&(o=d.leading,m="maxWait"in d&&(xb(c,d.maxWait)||0),n="trailing"in d?d.trailing:n);var p=function(){var d=c-(ce()-h);if(0>=d){f&&ib(f);var m=k;
f=j=k=b,m&&(l=ce(),g=a.apply(i,e),j||f||(e=i=null))}else j=ob(p,d)},q=function(){j&&ib(j),f=j=k=b,(n||m!==c)&&(l=ce(),g=a.apply(i,e),j||f||(e=i=null))};return function(){if(e=arguments,h=ce(),i=this,k=n&&(j||!o),m===!1)var b=o&&!j;else{f||o||(l=h);var d=m-(h-l),r=0>=d;r?(f&&(f=ib(f)),l=h,g=a.apply(i,e)):f||(f=ob(q,d))}return r&&j?j=ib(j):j||c===m||(j=ob(p,c)),b&&(r=!0,g=a.apply(i,e)),!r||j||f||(e=i=null),g}}function Pd(a){if(!yc(a))throw new bb;var c=$(arguments,1);return ob(function(){a.apply(b,c)},1)}function Qd(a,c){if(!yc(a))throw new bb;
var d=$(arguments,2);return ob(function(){a.apply(b,d)},c)}function Rd(a,b){if(!yc(a))throw new bb;var c=function(){var d=c.cache,e=b?b.apply(this,arguments):f+arguments[0];return mb.call(d,e)?d[e]:d[e]=a.apply(this,arguments)};return c.cache={},c.reset=function(){var a=c.cache,d=b?b.apply(this,arguments):f+arguments[0];mb.call(a,d)&&delete a[d]},c}function Sd(a){var b,c;if(!yc(a))throw new bb;return function(){return b?c:(b=!0,c=a.apply(this,arguments),a=null,c)}}function Td(a){return Rb(a,16,$(arguments,1))
}function Ud(a){return Rb(a,32,null,$(arguments,1))}function Vd(a,b,c){var d=!0,e=!0;if(!yc(a))throw new bb;return c===!1?d=!1:zc(c)&&(d="leading"in c?c.leading:d,e="trailing"in c?c.trailing:e),G.leading=d,G.maxWait=b,G.trailing=e,Od(a,b,G)}function Wd(a,b){return Rb(b,16,[a])}function Xd(a){return function(){return a}}function Yd(a,b,c){var d=typeof a;if(null==a||"function"==d)return Ib(a,b,c);if("object"!=d)return ee(a);var e=_b(a),f=e[0],g=a[f];return 1!=e.length||g!==g||zc(g)?function(b){for(var c=e.length,d=!1;c--&&(d=Mb(b[e[c]],a[e[c]],null,!0)););return d
}:function(a){var b=a[f];return g===b&&(0!==g||1/g==1/b)}}function Zd(a){return null==a?"":R(a).replace(dc,Sb)}function $d(a){return a}function _d(a,b,c){var d=!0,e=b&&pc(b);b&&(c||e.length)||(null==c&&(c=b),f=Db,b=a,a=Cb,e=pc(b)),c===!1?d=!1:zc(c)&&"chain"in c&&(d=c.chain);var f=a,g=yc(f);Vc(e,function(c){var e=a[c]=b[c];g&&(f.prototype[c]=function(){var b=this.__chain__,c=this.__wrapped__,g=[c];nb.apply(g,arguments);var h=e.apply(a,g);if(d||b){if(c===h&&zc(h))return this;h=new f(h),h.__chain__=b}return h})
})}function ae(){return a._=eb,this}function be(){}function ee(a){return function(b){return b[a]}}function fe(a,b,c){var d=null==a,e=null==b;if(null==c&&("boolean"==typeof a&&e?(c=a,a=1):e||"boolean"!=typeof b||(c=b,e=!0)),d&&e&&(b=1),a=+a||0,e?(b=a,a=0):b=+b||0,c||a%1||b%1){var f=Ab();return yb(a+f*(b-a+parseFloat("1e-"+((f+"").length-1))),b)}return Ob(a,b)}function ge(a,b){if(a){var c=a[b];return yc(c)?a[b]():c}}function he(a,c,d){var e=Cb.templateSettings;a=R(a||""),d=ic({},d,e);var i,f=ic({},d.imports,e.imports),g=_b(f),h=Nc(f),n=0,o=d.interpolate||r,q="__p += '",s=O((d.escape||r).source+"|"+o.source+"|"+(o===p?m:r).source+"|"+(d.evaluate||r).source+"|$","g");
a.replace(s,function(b,c,d,e,f,g){return d||(d=e),q+=a.slice(n,g).replace(t,V),c&&(q+="' +\n__e("+c+") +\n'"),f&&(i=!0,q+="';\n"+f+";\n__p += '"),d&&(q+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'"),n=g+b.length,b}),q+="';\n";var u=d.variable,w=u;w||(u="obj",q="with ("+u+") {\n"+q+"\n}\n"),q=(i?q.replace(j,""):q).replace(k,"$1").replace(l,"$1;"),q="function("+u+") {\n"+(w?"":u+" || ("+u+" = {});\n")+"var __t, __p = '', __e = _.escape"+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+q+"return __p\n}";
var x="\n/*\n//# sourceURL="+(d.sourceURL||"/lodash/template/source["+v++ +"]")+"\n*/";try{var y=J(g,"return "+q+x).apply(b,h)}catch(z){throw z.source=q,z}return c?y(c):(y.source=q,y)}function ie(a,b,d){a=(a=+a)>-1?a:0;var e=-1,f=c(a);for(b=Ib(b,d,1);++e<a;)f[e]=b(e);return f}function je(a){return null==a?"":R(a).replace(cc,Xb)}function ke(a){var b=++e;return R(null==a?"":a)+b}function le(a){return a=new Db(a),a.__chain__=!0,a}function me(a,b){return b(a),a}function ne(){return this.__chain__=!0,this}function oe(){return R(this.__wrapped__)
}function pe(){return this.__wrapped__}a=a?ab.defaults(K.Object(),a,ab.pick(K,u)):K;var c=a.Array,d=a.Boolean,h=a.Date,J=a.Function,L=a.Math,M=a.Number,N=a.Object,O=a.RegExp,R=a.String,bb=a.TypeError,cb=[],db=N.prototype,eb=a._,fb=db.toString,gb=O("^"+R(fb).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),hb=L.ceil,ib=a.clearTimeout,jb=L.floor,kb=J.prototype.toString,lb=Ub(lb=N.getPrototypeOf)&&lb,mb=db.hasOwnProperty,nb=cb.push,ob=a.setTimeout,pb=cb.splice,qb=cb.unshift,rb=function(){try{var a={},b=Ub(b=N.defineProperty)&&b,c=b(a,a,a)&&b
}catch(d){}return c}(),sb=Ub(sb=N.create)&&sb,tb=Ub(tb=c.isArray)&&tb,ub=a.isFinite,vb=a.isNaN,wb=Ub(wb=N.keys)&&wb,xb=L.max,yb=L.min,zb=a.parseInt,Ab=L.random,Bb={};Bb[x]=c,Bb[y]=d,Bb[z]=h,Bb[A]=J,Bb[C]=N,Bb[B]=M,Bb[D]=O,Bb[E]=R,Db.prototype=Cb.prototype;var Eb=Cb.support={};Eb.funcDecomp=!Ub(a.WinRTError)&&s.test(_),Eb.funcNames="string"==typeof J.name,Cb.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:p,variable:"",imports:{_:Cb}},sb||(Hb=function(){function b(){}return function(c){if(zc(c)){b.prototype=c;
var d=new b;b.prototype=null}return d||a.Object()}}());var Vb=rb?function(a,b){H.value=b,rb(a,"__bindData__",H)}:be,Zb=tb||function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&fb.call(a)==x||!1},$b=function(a){var b,c=a,d=[];if(!c)return d;if(!I[typeof a])return d;for(b in c)mb.call(c,b)&&d.push(b);return d},_b=wb?function(a){return zc(a)?wb(a):[]}:$b,ac={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},bc=rc(ac),cc=O("("+_b(bc).join("|")+")","g"),dc=O("["+_b(ac).join("")+"]","g"),ec=function(a,b,c){var d,e=a,f=e;
if(!e)return f;var g=arguments,h=0,i="number"==typeof c?2:g.length;if(i>3&&"function"==typeof g[i-2])var j=Ib(g[--i-1],g[i--],2);else i>2&&"function"==typeof g[i-1]&&(j=g[--i]);for(;++h<i;)if(e=g[h],e&&I[typeof e])for(var k=-1,l=I[typeof e]&&_b(e),m=l?l.length:0;++k<m;)d=l[k],f[d]=j?j(f[d],e[d]):e[d];return f},ic=function(a,b,c){var d,e=a,f=e;if(!e)return f;for(var g=arguments,h=0,i="number"==typeof c?2:g.length;++h<i;)if(e=g[h],e&&I[typeof e])for(var j=-1,k=I[typeof e]&&_b(e),l=k?k.length:0;++j<l;)d=k[j],"undefined"==typeof f[d]&&(f[d]=e[d]);
return f},lc=function(a,b,c){var d,e=a,f=e;if(!e)return f;if(!I[typeof e])return f;b=b&&"undefined"==typeof c?b:Ib(b,c,3);for(d in e)if(b(e[d],d,a)===!1)return f;return f},nc=function(a,b,c){var d,e=a,f=e;if(!e)return f;if(!I[typeof e])return f;b=b&&"undefined"==typeof c?b:Ib(b,c,3);for(var g=-1,h=I[typeof e]&&_b(e),i=h?h.length:0;++g<i;)if(d=h[g],b(e[d],d,a)===!1)return f;return f},Dc=lb?function(a){if(!a||fb.call(a)!=C)return!1;var b=a.valueOf,c=Ub(b)&&(c=lb(b))&&lb(c);return c?a==c||lb(a)==c:Wb(a)}:Wb,Qc=Qb(function(a,b,c){mb.call(a,c)?a[c]++:a[c]=1
}),Xc=Qb(function(a,b,c){(mb.call(a,c)?a[c]:a[c]=[]).push(b)}),Yc=Qb(function(a,b,c){a[c]=b}),bd=$c,ld=Sc,ce=Ub(ce=h.now)&&ce||function(){return(new h).getTime()},de=8==zb(i+"08")?zb:function(a,b){return zb(Fc(a)?a.replace(q,""):a,b||0)};return Cb.after=Id,Cb.assign=ec,Cb.at=Oc,Cb.bind=Jd,Cb.bindAll=Kd,Cb.bindKey=Ld,Cb.chain=le,Cb.compact=md,Cb.compose=Md,Cb.constant=Xd,Cb.countBy=Qc,Cb.create=hc,Cb.createCallback=Yd,Cb.curry=Nd,Cb.debounce=Od,Cb.defaults=ic,Cb.defer=Pd,Cb.delay=Qd,Cb.difference=nd,Cb.filter=Sc,Cb.flatten=rd,Cb.forEach=Vc,Cb.forEachRight=Wc,Cb.forIn=lc,Cb.forInRight=mc,Cb.forOwn=nc,Cb.forOwnRight=oc,Cb.functions=pc,Cb.groupBy=Xc,Cb.indexBy=Yc,Cb.initial=td,Cb.intersection=ud,Cb.invert=rc,Cb.invoke=Zc,Cb.keys=_b,Cb.map=$c,Cb.mapValues=Hc,Cb.max=_c,Cb.memoize=Rd,Cb.merge=Ic,Cb.min=ad,Cb.omit=Jc,Cb.once=Sd,Cb.pairs=Kc,Cb.partial=Td,Cb.partialRight=Ud,Cb.pick=Lc,Cb.pluck=bd,Cb.property=ee,Cb.pull=xd,Cb.range=yd,Cb.reject=ed,Cb.remove=zd,Cb.rest=Ad,Cb.shuffle=gd,Cb.sortBy=jd,Cb.tap=me,Cb.throttle=Vd,Cb.times=ie,Cb.toArray=kd,Cb.transform=Mc,Cb.union=Cd,Cb.uniq=Dd,Cb.values=Nc,Cb.where=ld,Cb.without=Ed,Cb.wrap=Wd,Cb.xor=Fd,Cb.zip=Gd,Cb.zipObject=Hd,Cb.collect=$c,Cb.drop=Ad,Cb.each=Vc,Cb.eachRight=Wc,Cb.extend=ec,Cb.methods=pc,Cb.object=Hd,Cb.select=Sc,Cb.tail=Ad,Cb.unique=Dd,Cb.unzip=Gd,_d(Cb),Cb.clone=fc,Cb.cloneDeep=gc,Cb.contains=Pc,Cb.escape=Zd,Cb.every=Rc,Cb.find=Tc,Cb.findIndex=od,Cb.findKey=jc,Cb.findLast=Uc,Cb.findLastIndex=pd,Cb.findLastKey=kc,Cb.has=qc,Cb.identity=$d,Cb.indexOf=sd,Cb.isArguments=Yb,Cb.isArray=Zb,Cb.isBoolean=sc,Cb.isDate=tc,Cb.isElement=uc,Cb.isEmpty=vc,Cb.isEqual=wc,Cb.isFinite=xc,Cb.isFunction=yc,Cb.isNaN=Ac,Cb.isNull=Bc,Cb.isNumber=Cc,Cb.isObject=zc,Cb.isPlainObject=Dc,Cb.isRegExp=Ec,Cb.isString=Fc,Cb.isUndefined=Gc,Cb.lastIndexOf=wd,Cb.mixin=_d,Cb.noConflict=ae,Cb.noop=be,Cb.now=ce,Cb.parseInt=de,Cb.random=fe,Cb.reduce=cd,Cb.reduceRight=dd,Cb.result=ge,Cb.runInContext=_,Cb.size=hd,Cb.some=id,Cb.sortedIndex=Bd,Cb.template=he,Cb.unescape=je,Cb.uniqueId=ke,Cb.all=Rc,Cb.any=id,Cb.detect=Tc,Cb.findWhere=Tc,Cb.foldl=cd,Cb.foldr=dd,Cb.include=Pc,Cb.inject=cd,_d(function(){var a={};
return nc(Cb,function(b,c){Cb.prototype[c]||(a[c]=b)}),a}(),!1),Cb.first=qd,Cb.last=vd,Cb.sample=fd,Cb.take=qd,Cb.head=qd,nc(Cb,function(a,b){var c="sample"!==b;Cb.prototype[b]||(Cb.prototype[b]=function(b,d){var e=this.__chain__,f=a(this.__wrapped__,b,d);return e||null!=b&&(!d||c&&"function"==typeof b)?new Db(f,e):f})}),Cb.VERSION="2.4.1",Cb.prototype.chain=ne,Cb.prototype.toString=oe,Cb.prototype.value=pe,Cb.prototype.valueOf=pe,Vc(["join","pop","shift"],function(a){var b=cb[a];Cb.prototype[a]=function(){var a=this.__chain__,c=b.apply(this.__wrapped__,arguments);
return a?new Db(c,a):c}}),Vc(["push","reverse","sort","unshift"],function(a){var b=cb[a];Cb.prototype[a]=function(){return b.apply(this.__wrapped__,arguments),this}}),Vc(["concat","slice","splice"],function(a){var b=cb[a];Cb.prototype[a]=function(){return new Db(b.apply(this.__wrapped__,arguments),this.__chain__)}}),Cb}var b,c=[],d=[],e=0,f=+new Date+"",g=75,h=40,i=" 	\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000",j=/\b__p \+= '';/g,k=/\b(__p \+=) '' \+/g,l=/(__e\(.*?\)|\b__t\)) \+\n'';/g,m=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,n=/\w*$/,o=/^\s*function[ \n\r\t]+\w/,p=/<%=([\s\S]+?)%>/g,q=RegExp("^["+i+"]*0+(?=.$)"),r=/($^)/,s=/\bthis\b/,t=/['\n\r\t\u2028\u2029\\]/g,u=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],v=0,w="[object Arguments]",x="[object Array]",y="[object Boolean]",z="[object Date]",A="[object Function]",B="[object Number]",C="[object Object]",D="[object RegExp]",E="[object String]",F={};
F[A]=!1,F[w]=F[x]=F[y]=F[z]=F[B]=F[C]=F[D]=F[E]=!0;var G={leading:!1,maxWait:0,trailing:!1},H={configurable:!1,enumerable:!1,value:null,writable:!1},I={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},J={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},K=I[typeof window]&&window||this,L=I[typeof exports]&&exports&&!exports.nodeType&&exports,M=I[typeof module]&&module&&!module.nodeType&&module,O=(M&&M.exports===L&&L,I[typeof global]&&global);!O||O.global!==O&&O.window!==O||(K=O);
var ab=a._=_();a.each(ab,function(b,c){Object.hasOwnProperty.call(ab,b)&&!/VERSION/.test(name)&&(a[b]||(a[b]=c))})}),FD40.plugin("bootstrap3",function(a){var b=a;if(window["Foundry/Bootstrap"])throw new Error("An instance of Bootstrap has been initialized before this.");window["Foundry/Bootstrap"]={version:"3.0.3",foundry:b},+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};
for(var c in b)if(void 0!==a.style[c])return{end:b[c]}}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one(a.support.transition.end,function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b()})}(b),+function(a){"use strict";var b='[data-bs-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype.close=function(b){function f(){e.trigger("closed.bs.alert").remove()}var c=a(this),d=c.attr("data-target");
d||(d=c.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,""));var e=a(d);b&&b.preventDefault(),e.length||(e=c.hasClass("alert")?c:c.parent()),e.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(e.removeClass("in"),a.support.transition&&e.hasClass("fade")?e.one(a.support.transition.end,f).emulateTransitionEnd(150):f())};var d=a.fn.alert;a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("bs.alert");e||d.data("bs.alert",e=new c(this)),"string"==typeof b&&e[b].call(d)})},a.fn.alert.Constructor=c,a.fn.alert.noConflict=function(){return a.fn.alert=d,this
},a(document).on("click.bs.alert.data-api",b,c.prototype.close)}(b),+function(a){"use strict";var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d)};b.DEFAULTS={loadingText:"loading..."},b.prototype.setState=function(a){var b="disabled",c=this.$element,d=c.is("input")?"val":"html",e=c.data();a+="Text",e.resetText||c.data("resetText",c[d]()),c[d](e[a]||this.options[a]),setTimeout(function(){"loadingText"==a?c.addClass(b).attr(b,b):c.removeClass(b).removeAttr(b)},0)},b.prototype.toggle=function(){var a=this.$element.closest('[data-bs-toggle="buttons"]'),b=!0;
if(a.length){var c=this.$element.find("input");"radio"===c.prop("type")&&(c.prop("checked")&&this.$element.hasClass("active")?b=!1:a.find(".active").removeClass("active")),b&&c.prop("checked",!this.$element.hasClass("active")).trigger("change")}b&&this.$element.toggleClass("active")};var c=a.fn.button;a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof c&&c;e||d.data("bs.button",e=new b(this,f)),"toggle"==c?e.toggle():c&&e.setState(c)})},a.fn.button.Constructor=b,a.fn.button.noConflict=function(){return a.fn.button=c,this
},a(document).on("click.bs.button.data-api","[data-bs-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle"),b.preventDefault()})}(b),+function(a){"use strict";var b=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))
};b.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},b.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},b.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},b.prototype.to=function(b){var c=this,d=this.getActiveIndex();return b>this.$items.length-1||0>b?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){c.to(b)
}):d==b?this.pause().cycle():this.slide(b>d?"next":"prev",a(this.$items[b]))},b.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition.end&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},b.prototype.next=function(){return this.sliding?void 0:this.slide("next")},b.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},b.prototype.slide=function(b,c){var d=this.$element.find(".item.active"),e=c||d[b](),f=this.interval,g="next"==b?"left":"right",h="next"==b?"first":"last",i=this;
if(!e.length){if(!this.options.wrap)return;e=this.$element.find(".item")[h]()}this.sliding=!0,f&&this.pause();var j=a.Event("slide.bs.carousel",{relatedTarget:e[0],direction:g});if(!e.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var b=a(i.$indicators.children()[i.getActiveIndex()]);b&&b.addClass("active")})),a.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(j),j.isDefaultPrevented())return;
e.addClass(b),e[0].offsetWidth,d.addClass(g),e.addClass(g),d.one(a.support.transition.end,function(){e.removeClass([b,g].join(" ")).addClass("active"),d.removeClass(["active",g].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(600)}else{if(this.$element.trigger(j),j.isDefaultPrevented())return;d.removeClass("active"),e.addClass("active"),this.sliding=!1,this.$element.trigger("slid.bs.carousel")}return f&&this.cycle(),this}};var c=a.fn.carousel;a.fn.carousel=function(c){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c),g="string"==typeof c?c:f.slide;
e||d.data("bs.carousel",e=new b(this,f)),"number"==typeof c?e.to(c):g?e[g]():f.interval&&e.pause().cycle()})},a.fn.carousel.Constructor=b,a.fn.carousel.noConflict=function(){return a.fn.carousel=c,this},a(document).on("click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",function(b){var d,c=a(this),e=a(c.attr("data-target")||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")),f=a.extend({},e.data(),c.data()),g=c.attr("data-bs-slide-to");g&&(f.interval=!1),e.carousel(f),(g=c.attr("data-bs-slide-to"))&&e.data("bs.carousel").to(g),b.preventDefault()
}),a(window).on("load",function(){a('[data-bs-ride="carousel"]').each(function(){var b=a(this);b.carousel(b.data())})})}(b),+function(a){"use strict";var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d),this.transitioning=null,this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.DEFAULTS={toggle:!0},b.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},b.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b=a.Event("show.bs.collapse");
if(this.$element.triggerHandler(b),!b.isDefaultPrevented()){var c=this.$parent&&this.$parent.find("> .panel > .in");if(c&&c.length){var d=c.data("bs.collapse");if(d&&d.transitioning)return;c.collapse("hide"),d||c.data("bs.collapse",null)}var e=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[e](0),this.transitioning=1;var f=function(){this.$element.removeClass("collapsing").addClass("in")[e]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return f.call(this);
var g=a.camelCase(["scroll",e].join("-"));this.$element.one(a.support.transition.end,a.proxy(f,this)).emulateTransitionEnd(350)[e](this.$element[0][g])}}},b.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.triggerHandler(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var d=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")
};return a.support.transition?(this.$element[c](0).one(a.support.transition.end,a.proxy(d,this)).emulateTransitionEnd(350),void 0):d.call(this)}}},b.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var c=a.fn.collapse;a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("bs.collapse"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c);e||d.data("bs.collapse",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.collapse.Constructor=b,a.fn.collapse.noConflict=function(){return a.fn.collapse=c,this
},a(document).on("click.bs.collapse.data-api","[data-bs-toggle=collapse]",function(b){var d,c=a(this),e=c.attr("data-target")||b.preventDefault()||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""),f=a(e),g=f.data("bs.collapse"),h=g?"toggle":c.data(),i=c.attr("data-parent"),j=i&&a(i);g&&g.transitioning||(j&&j.find('[data-bs-toggle=collapse][data-parent="'+i+'"]').not(c).addClass("collapsed"),c[f.hasClass("in")?"addClass":"removeClass"]("collapsed")),f.collapse(h)})}(b),+function(a){"use strict";function e(){a(b).remove(),a(c).each(function(b){var c=f(a(this));
c.hasClass("open")&&(c.triggerHandler(b=a.Event("hide.bs.dropdown")),b.isDefaultPrevented()||c.removeClass("open").trigger("hidden.bs.dropdown"))})}function f(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}var b=".dropdown-backdrop",c="[data-bs-toggle=dropdown]",d=function(b){a(b).on("click.bs.dropdown",this.toggle)};d.prototype.toggle=function(b){var c=a(this);if(!c.is(".disabled, :disabled")){var d=f(c),g=d.hasClass("open");
if(e(),!g){if("ontouchstart"in document.documentElement&&!d.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",e),d.triggerHandler(b=a.Event("show.bs.dropdown")),b.isDefaultPrevented())return;d.toggleClass("open").trigger("shown.bs.dropdown"),c.focus()}return!1}},d.prototype.keydown=function(b){if(/(38|40|27)/.test(b.keyCode)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var e=f(d),g=e.hasClass("open");if(!g||g&&27==b.keyCode)return 27==b.which&&e.find(c).focus(),d.click();
var h=a("[role=menu] li:not(.divider):visible a",e);if(h.length){var i=h.index(h.filter(":focus"));38==b.keyCode&&i>0&&i--,40==b.keyCode&&i<h.length-1&&i++,~i||(i=0),h.eq(i).focus()}}}};var g=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var c=a(this),e=c.data("bs.dropdown");e||c.data("bs.dropdown",e=new d(this)),"string"==typeof b&&e[b].call(c)})},a.fn.dropdown.Constructor=d,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=g,this},a(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown_ form, .dropdown-static",function(a){a.stopPropagation()
}).on("click.bs.dropdown.data-api",c,d.prototype.toggle).on("keydown.bs.dropdown.data-api",c+", [role=menu]",d.prototype.keydown)}(b),+function(a){"use strict";var b=function(b,c){this.options=c,this.$element=a(b),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.load(this.options.remote)};b.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},b.prototype.toggle=function(a){return this[this.isShown?"hide":"show"](a)},b.prototype.show=function(b){var c=this,d=a.Event("show.bs.modal",{relatedTarget:b});
this.$element.triggerHandler(d),this.isShown||d.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.modal",'[data-bs-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var d=a.support.transition&&c.$element.hasClass("fade");c.$element.parent().length||c.$element.appendTo(document.body),c.$element.show(),d&&c.$element[0].offsetWidth,c.$element.addClass("in").attr("aria-hidden",!1),c.enforceFocus();var e=a.Event("shown.bs.modal",{relatedTarget:b});d?c.$element.find(".modal-dialog").one(a.support.transition.end,function(){c.$element.focus().trigger(e)
}).emulateTransitionEnd(300):c.$element.focus().trigger(e)}))},b.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.triggerHandler(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one(a.support.transition.end,a.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())
},b.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.focus()},this))},b.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},b.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.removeBackdrop(),a.$element.trigger("hidden.bs.modal")
})},b.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},b.prototype.backdrop=function(b){var d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=a.support.transition&&d;if(this.$backdrop=a('<div class="modal-backdrop '+d+'" />').appendTo(document.body),this.$element.on("click.dismiss.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))
},this)),e&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;e?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()):b&&b()};var c=a.fn.modal;a.fn.modal=function(c,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},b.DEFAULTS,e.data(),"object"==typeof c&&c);
f||e.data("bs.modal",f=new b(this,g)),"string"==typeof c?f[c](d):g.show&&f.show(d)})},a.fn.modal.Constructor=b,a.fn.modal.noConflict=function(){return a.fn.modal=c,this},a(document).on("click.bs.modal.data-api",'[data-bs-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());b.preventDefault(),e.modal(f,this).one("hide",function(){c.is(":visible")&&c.focus()})}),a(document).on("show.bs.modal",".modal.bs",function(){a(document.body).addClass("modal-open")
}).on("hidden.bs.modal",".modal.bs",function(){a(document.body).removeClass("modal-open")})}(b),+function(a){"use strict";var b=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",a,b)};b.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},b.prototype.init=function(b,c,d){this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d);
for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focus",i="hover"==g?"mouseleave":"blur";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()
},b.prototype.getDefaults=function(){return b.DEFAULTS},b.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},b.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},b.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);
return clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show),void 0):c.show()},b.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide),void 0):c.hide()
},b.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.triggerHandler(b),b.isDefaultPrevented())return;var c=this.tip();this.setContent(),this.options.animation&&c.addClass("fade");var d="function"==typeof this.options.placement?this.options.placement.call(this,c[0],this.$element[0]):this.options.placement,e=/\s?auto?\s?/i,f=e.test(d);f&&(d=d.replace(e,"")||"top"),c.detach().css({top:0,left:0,display:"block"}).addClass(d.split("-")[0]),this.options.container?c.appendTo(this.options.container):c.insertAfter(this.$element);
var g=this.getPosition(),h=c[0].offsetWidth,i=c[0].offsetHeight;if(f){var j=this.$element.parent(),k=d,l=document.documentElement.scrollTop||document.body.scrollTop,m="body"==this.options.container?window.innerWidth:j.outerWidth(),n="body"==this.options.container?window.innerHeight:j.outerHeight(),o="body"==this.options.container?0:j.offset().left;d="bottom"==d&&g.top+g.height+i-l>n?"top":"top"==d&&g.top-l-i<0?"bottom":"right"==d&&g.right+h>m?"left":"left"==d&&g.left-h<o?"right":d,c.removeClass(k).addClass(d)
}var p=this.getCalculatedOffset(d,g,h,i);this.applyPlacement(p,d),this.$element.trigger("shown.bs."+this.type)}},b.prototype.applyPlacement=function(a,b){var c,d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),a.top=a.top+g,a.left=a.left+h,d.offset(a).addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;if("top"==b&&j!=f&&(c=!0,a.top=a.top+f-j),0===["top","bottom"].indexOf(b.split("-")[0])){var k=0;a.left<0&&(k=-2*a.left,a.left=0,d.offset(a),i=d[0].offsetWidth,j=d[0].offsetHeight),this.replaceArrow(k-e+i,i,"left")
}0===["left","right"].indexOf(b.split("-")[0])&&this.replaceArrow(j-f,j,"top"),c&&d.offset(a)},b.prototype.replaceArrow=function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},b.prototype.hide=function(){function e(){"in"!=b.hoverState&&c.detach()}var b=this,c=this.tip(),d=a.Event("hide.bs."+this.type);return this.$element.triggerHandler(d),d.isDefaultPrevented()?void 0:(c.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?c.one(a.support.transition.end,e).emulateTransitionEnd(150):e(),this.$element.trigger("hidden.bs."+this.type),this)
},b.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},b.prototype.hasContent=function(){return this.getTitle()},b.prototype.getPosition=function(){var b=this.$element[0];return a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())},b.prototype.getCalculatedOffset=function(a,b,c,d){return"left-top"==a?{top:b.top,left:b.left-c}:"left-bottom"==a?{top:b.top+b.height-d,left:b.left-c}:"right-top"==a?{top:b.top,left:b.left+b.width}:"right-bottom"==a?{top:b.top+b.height-d,left:b.left+b.width}:"top-left"==a?{top:b.top-d,left:b.left}:"top-right"==a?{top:b.top-d,left:b.left+b.width-c}:"bottom-left"==a?{top:b.top+b.height,left:b.left}:"bottom-right"==a?{top:b.top+b.height,left:b.left+b.width-c}:"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}
},b.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},b.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)},b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},b.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},b.prototype.enable=function(){this.enabled=!0},b.prototype.disable=function(){this.enabled=!1
},b.prototype.toggleEnabled=function(){this.enabled=!this.enabled},b.prototype.toggle=function(b){var c=b?a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;c.tip().hasClass("in")?c.leave(c):c.enter(c)},b.prototype.destroy=function(){this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var c=a.fn.tooltip;a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof c&&c;e||d.data("bs.tooltip",e=new b(this,f)),"string"==typeof c&&e[c]()
})},a.fn.tooltip.Constructor=b,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=c,this}}(b),+function(a){"use strict";var b=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");b.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div id="fd" class="fd-popover"><div class="arrow"></div><h3 class="fd-popover-title"></h3><div class="fd-popover-content"></div></div>'}),b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),b.prototype.constructor=b,b.prototype.getDefaults=function(){return b.DEFAULTS
},b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".fd-popover-title")[this.options.html?"html":"text"](b),a.find(".fd-popover-content")[this.options.html?"html":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".fd-popover-title").html()||a.find(".fd-popover-title").hide()},b.prototype.hasContent=function(){return this.getTitle()||this.getContent()},b.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)
},b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},b.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip};var c=a.fn.popover;a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof c&&c;e||d.data("bs.popover",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.popover.Constructor=b,a.fn.popover.noConflict=function(){return a.fn.popover=c,this}}(b),+function(a){"use strict";function b(c,d){var e,f=a.proxy(this.process,this);
this.$element=a(c).is("body")?a(window):a(c),this.$body=a("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",f),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||(e=a(c).attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=a([]),this.targets=a([]),this.activeTarget=null,this.refresh(),this.process()}b.DEFAULTS={offset:10},b.prototype.refresh=function(){var b=this.$element[0]==window?"offset":"position";this.offsets=a([]),this.targets=a([]);
{var c=this;this.$body.find(this.selector).map(function(){var d=a(this),e=d.data("target")||d.attr("href"),f=/^#\w/.test(e)&&a(e);return f&&f.length&&[[f[b]().top+(!a.isWindow(c.$scrollElement.get(0))&&c.$scrollElement.scrollTop()),e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){c.offsets.push(this[0]),c.targets.push(this[1])})}},b.prototype.process=function(){var g,a=this.$scrollElement.scrollTop()+this.options.offset,b=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,c=b-this.$scrollElement.height(),d=this.offsets,e=this.targets,f=this.activeTarget;
if(a>=c)return f!=(g=e.last()[0])&&this.activate(g);for(g=d.length;g--;)f!=e[g]&&a>=d[g]&&(!d[g+1]||a<=d[g+1])&&this.activate(e[g])},b.prototype.activate=function(b){this.activeTarget=b,a(this.selector).parents(".active").removeClass("active");var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")};var c=a.fn.scrollspy;a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;
e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=c,this},a(window).on("load",function(){a('[data-bs-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(b),+function(a){"use strict";var b=function(b){this.element=a(b)};b.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a")[0],f=a.Event("show.bs.tab",{relatedTarget:e});
if(b.triggerHandler(f),!f.isDefaultPrevented()){var g=a(d);this.activate(b.parent("li"),c),this.activate(g,g.parent(),function(){b.trigger({type:"shown.bs.tab",relatedTarget:e})})}}},b.prototype.activate=function(b,c,d){function g(){e.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),f?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var e=c.find("> .active"),f=d&&a.support.transition&&e.hasClass("fade");
f?e.one(a.support.transition.end,g).emulateTransitionEnd(150):g(),e.removeClass("in")};var c=a.fn.tab;a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new b(this)),"string"==typeof c&&e[c]()})},a.fn.tab.Constructor=b,a.fn.tab.noConflict=function(){return a.fn.tab=c,this},a(document).on("click.bs.tab.data-api",'[data-bs-toggle="tab"], [data-bs-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})}(b),+function(a){"use strict";var b=function(c,d){this.options=a.extend({},b.DEFAULTS,d),this.$window=a(window).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(c),this.affixed=this.unpin=null,this.checkPosition()
};b.RESET="affix affix-top affix-bottom",b.DEFAULTS={offset:0},b.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},b.prototype.checkPosition=function(){if(this.$element.is(":visible")){var c=a(document).height(),d=this.$window.scrollTop(),e=this.$element.offset(),f=this.options.offset,g=f.top,h=f.bottom;"object"!=typeof f&&(h=g=f),"function"==typeof g&&(g=f.top()),"function"==typeof h&&(h=f.bottom());var i=null!=this.unpin&&d+this.unpin<=e.top?!1:null!=h&&e.top+this.$element.height()>=c-h?"bottom":null!=g&&g>=d?"top":!1;
this.affixed!==i&&(this.unpin&&this.$element.css("top",""),this.affixed=i,this.unpin="bottom"==i?e.top-d:null,this.$element.removeClass(b.RESET).addClass("affix"+(i?"-"+i:"")),"bottom"==i&&this.$element.offset({top:document.body.offsetHeight-h-this.$element.height()}))}};var c=a.fn.affix;a.fn.affix=function(c){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof c&&c;e||d.data("bs.affix",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.affix.Constructor=b,a.fn.affix.noConflict=function(){return a.fn.affix=c,this
},a(window).on("load",function(){a('[data-bs-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{},c.offsetBottom&&(c.offset.bottom=c.offsetBottom),c.offsetTop&&(c.offset.top=c.offsetTop),b.affix(c)})})}(b),!function(a){var b=function(b,c){if(this.$element=a(b),this.$note=a('<div class="alert"></div>'),this.options=a.extend(!0,a.fn.notify.defaults,c),this.options.transition?"fade"==this.options.transition?this.$note.addClass("in").addClass(this.options.transition):this.$note.addClass(this.options.transition):this.$note.addClass("fade").addClass("in"),this.options.type?this.$note.addClass("alert-"+this.options.type):this.$note.addClass("alert-success"),this.options.message||""===this.$element.data("message")?"object"==typeof this.options.message&&(this.options.message.html?this.$note.html(this.options.message.html):this.options.message.text?this.$note.text(this.options.message.text):this.$note.html(this.options.message)):this.$note.html(this.$element.data("message")),this.options.closable)var d=a('<a class="close pull-right" href="javascript: void(0);">&times;</a>');
return a(d).on("click",a.proxy(onClose,this)),this.$note.prepend(d),this};onClose=function(){this.options.onClose(),a(this.$note).remove(),this.options.onClosed()},b.prototype.show=function(){this.options.fadeOut.enabled&&this.$note.delay(this.options.fadeOut.delay||3e3).fadeOut("slow",a.proxy(onClose,this)),this.$element.append(this.$note),this.$note.alert()},b.prototype.hide=function(){this.options.fadeOut.enabled?this.$note.delay(this.options.fadeOut.delay||3e3).fadeOut("slow",a.proxy(onClose,this)):onClose.call(this)
},a.fn.notify=function(a){return new b(this,a)},a.fn.notify.defaults={type:"success",closable:!0,transition:"fade",fadeOut:{enabled:!0,delay:3e3},message:null,onClose:function(){},onClosed:function(){}}}(a)}),FD40.plugin("responsive",function(a){var b={elementWidth:function(a){return a.outerWidth(!0)}};a.responsive=function(c,d){a.isArray(d)&&(d={conditions:d});var d=a.extend({},b,d);return new e(c,d)},a.fn.responsive=function(b){return b&&a.responsive(a(this),b),this};var c=a(window),d=a.isFunction,e=function(b,d){var f=this;
a(b).each(function(){var c=(a(this),a(this).data("$responsive"));c instanceof e&&c.destroy()}),a.extend(f,{elem:b,options:d,conditions:a.sortBy(a.makeArray(d.conditions),function(a){return a.at}),event:"resize.responsive."+a.uid(),handler:a.debounce(function(){f.set()},250)}),delete d.conditions,a(function(){c.on(f.event,f.handler),f.set()}),a(window).load(function(){f.set()})};a.extend(e.prototype,{set:function(){var b=this,c=b.options.elementWidth;a(b.elem).each(function(){var e=a(this),f=d(c)?c(e):c;a(e).data("$responsive",b),b.removeCondition(e.data("currentCondition"),e),a.each(b.conditions,function(a,c){var d=c.at;
return d>=f?(b.applyCondition(c,e),!1):void 0})})},applyCondition:function(b,c){var e,f,g,h;(e=b.switchTo)&&c.addClass(e),(f=b.alsoSwitch)&&a.each(f,function(b,c){a(b).addClass(c)}),(g=b.switchStylesheet)&&a.each(a.makeArray(g),function(b,c){var d=a('link[href$="'+c+'"]');d.length<1&&a("<link/>").attr({rel:"stylesheet",type:"text/css",href:c}).appendTo("head")}),(h=b.whenApplied)&&d(h)&&h(),c.data("currentCondition",b).trigger("responsive",[b])},removeCondition:function(b,c){if(b){var e,f,g,h;(e=b.switchTo)&&c.removeClass(e),(f=b.alsoSwitch)&&a.each(f,function(b,c){a(b).removeClass(c)
}),(g=b.switchStylesheet)&&a.each(a.makeArray(g),function(b,c){a('link[href$="'+c+'"]').remove()}),(h=b.whenRemoved)&&d(h)&&h(),c.removeData("currentCondition")}},resetToDefault:function(b){var c=this,d=a(c.elem);a.each(c.conditions,function(a,e){b&&a==b||c.removeCondition(e,d)})},destroy:function(){if(!b.destroyed){c.off(this.event);var b=this;a(b.elem).each(function(){var c=a(this);b.removeCondition(c.data("currentCondition"),c),c.removeData("$responsive")}),b.destroyed=!0}}})}),FD40.plugin("utils",function(a){!function(){var b=function(a){this.items=a,this.start=0,this.end=a.length-1,this.node=null,this.stopped=!1
};a.extend(b.prototype,{isLooping:function(){return this.stopped?!1:Math.abs(this.start-this.end)>1?(this.node=Math.floor((this.start+this.end)/2),!0):!1},flip:function(a){a?this.end=this.node-1:this.start=this.node+1},stop:function(){this.stop=!0}}),a.Bloop=function(a){return new b(a)}}(),a.Chunk=function(b,c){a.isArray(b)&&(b=[]);var c=a.extend({},{size:256,every:1e3},c),d=a.extend(a.Deferred(),{size:c.size,every:c.every,from:0,to:b.length,process:function(a){return d.process.fn=a,d},chunkStart:function(a){return d.chunkStart.fn=a,d
},chunkEnd:function(a){return d.chunkEnd.fn=a,d},start:function(){return d.stopped=!1,d.iterate(),d},iterate:function(){if(!d.stopped){var a=d.process.fn;if(a){d.to=from.size+d.size;var c=b.length;d.to>c&&(d.to=c);var e={from:d.from,to:d.to};for(d.chunkStart.fn&&d.chunkStart.fn.call(d,e.from,e.to);d.from<d.to&&!d.stopped;)a.call(d,b[d.from]),d.from++;return d.chunkEnd.fn&&d.chunkEnd.fn.call(d,e.from,e.to),d.completed=d.from>=b.length-1,d.completed?d.resolveWith(d):d.nextIteration=setTimeout(d.iterate,d.every),d
}}},pause:function(){return d.stopped=!0,clearTimeout(d.nextIteration),d},restart:function(){return"rejected"===d.state()?d:(d.from=0,d.start(),d)},stop:function(){return d.pause(),d.rejectWith(d,[d.from]),d}});return d},function(b){var c=function(){this.lastId=0};c.prototype.queue=function(c){var d=this,e=a.uid();return d.lastId=e,function(){if(d.lastId===e){var a=arguments,a=b(c)?c.apply(this,a):a;return b(d.fn)?d.fn.apply(this,a):a}}},a.Enqueue=function(d){var e=new c;b(d)&&(e.fn=d);var f=a.proxy(e.queue,e);
return f.reset=function(){e.lastId=0},f}}(a.isFunction),function(){var b={error:"error",warning:"warn",success:"log",info:"info"};a.Exception=function(c){var d=arguments,e=1==d.length,f=3==d.length;return c=a.isPlainObject(c)?c:{type:e?"error":d[0],message:e?d[0]:d[1]},f&&a.extend(c,d[2]),"development"==a.environment&&console[b[c.type]](c.message,c),c}}(),a.IE=function(){var a=navigator.userAgent;if(a.match(/MSIE 9/))return 9;if(a.match(/MSIE 10/))return 10;if(a.match(/rv:11/i))return 11;for(var b,c=3,d=document.createElement("div"),e=d.getElementsByTagName("i");c++,d.innerHTML="<!--[if gt IE "+c+"]><i></i><![endif]-->",e[0];);return c>4?c:b
}(),a.Task=function(b){var c=a.extend(a.Deferred(),{data:{},list:[],add:function(b){var d=a.extend(a.Deferred(),{name:b,item:d});return c.list.push(d),d},process:function(){return c._promise||(c._promise=a.when.apply(a,c.list).then(c.resolve,c.reject,c.progress)),c}},b);return c},function(){var b=function(a){this.threads=[],this.threadCount=0,this.threadLimit=a.threadLimit||1,this.threadDelay=a.threadDelay||0};a.extend(b.prototype,{add:function(b,c){a.isFunction(b)&&(b.type=c||"normal","deferred"==c&&(b.deferred=a.Deferred().always(a.proxy(this.next,this))),this.threads.push(b),this.run())
},addDeferred:function(a){return this.add(a,"deferred")},next:function(){this.threadCount--,this.run()},run:function(){var a=this;setTimeout(function(){if(!(a.threads.length<1)&&a.threadCount<a.threadLimit){a.threadCount++;var b=a.threads.shift();try{b.call(b,b.deferred)}catch(c){console.error(c)}!b.deferred&&a.next()}},a.threadDelay)}}),a.Threads=function(a){return new b(a)}}(),a.callback=function(b,c){if(a.isFunction(b)){var d=a.uid("cb");return window[d]=function(){return c||delete window[d],b.apply(null,arguments)
},d}if(a.isString(b))switch(b){case"destroy":var d=c;delete window[d]}},a.fn.checkList=function(b){var c={checkbox:".checkbox",masterCheckbox:".master-checkbox",check:function(){},uncheck:function(){},change:function(){}},b=a.extend({},c,b),d=this,e=d.find(b.checkbox),f=d.find(b.masterCheckbox),g=!1,h=function(){if(!g){var a=e.filter(":checked"),c=e.not(":checked");a.length<1&&f.removeAttr("checked"),a.length==e.length&&f.prop("checked",!0),b.change.call(d,a,c)}};return e.checked(function(){b.check.apply(d),h()
},function(){b.uncheck.apply(d),h()}),f.checked(function(){g=!0,e.checked(!0),g=!1,h()},function(){g=!0,e.checked(!1),g=!1,h()}),h(),this},a.fn.switchClass=function(b,c){var c=c||"-",d=b.split(c)[0]+c,e=d.length;return this.each(function(){var c=a(this),f=a.map((c.attr("class")||"").split(" "),function(a){return a.slice(0,e)==d||""==a?null:a});f.push(b),c.attr("class",f.join(" "))})},a.fn.activateClass=function(b){return this.prevObject.removeClass(b),a(this).addClass(b)},function(){var b=function(a){var a=parseInt(a.indexOf("#")>-1?a.substring(1):a,16);
return{r:a>>16,g:(65280&a)>>8,b:255&a}},c=function(a){return d(b(a))},d=function(a){var b={h:0,s:0,b:0},c=Math.min(a.r,a.g,a.b),d=Math.max(a.r,a.g,a.b),e=d-c;return b.b=d,b.s=0!=d?255*e/d:0,0!=b.s?(b.h=a.r==d?(a.g-a.b)/e:a.g==d?2+(a.b-a.r)/e:4+(a.r-a.g)/e,b.h*=60):b.h=360,b.h<0&&(b.h+=360),b.s*=100/255,b.b*=100/255,b},e=function(a){var b={},c=a.h,d=255*a.s/100,e=255*a.b/100;if(0==d)b.r=b.g=b.b=e;else{var f=e,g=(255-d)*e/255,h=(f-g)*(c%60)/60;360==c&&(c=0),60>c?(b.r=f,b.b=g,b.g=g+h):120>c?(b.g=f,b.b=g,b.r=f-h):180>c?(b.g=f,b.r=g,b.b=g+h):240>c?(b.b=f,b.r=g,b.g=f-h):300>c?(b.b=f,b.g=g,b.r=g+h):360>c?(b.r=f,b.g=g,b.b=f-h):(b.r=0,b.g=0,b.b=0)
}return{r:Math.round(b.r),g:Math.round(b.g),b:Math.round(b.b)}},f=function(b){var c=[b.r.toString(16),b.g.toString(16),b.b.toString(16)];return a.each(c,function(a,b){1==b.length&&(c[a]="0"+b)}),c.join("")},g=function(a){return f(e(a))},h=function(a){return{h:Math.min(360,Math.max(0,a.h)),s:Math.min(100,Math.max(0,a.s)),b:Math.min(100,Math.max(0,a.b))}},i=function(a){return{r:Math.min(255,Math.max(0,a.r)),g:Math.min(255,Math.max(0,a.g)),b:Math.min(255,Math.max(0,a.b))}},j=function(a){var b=6-a.length;if(3==b)for(var d,c=a.split(""),a="";d=c.shift();)a+=d+d;
else for(;b--;)a="0"+a;return a.replace(/[^A-Fa-f0-9]/g,"0"),a};a.extend(a,{hexToRgb:b,hexToHsb:c,rgbToHsb:d,hsbToRgb:e,rgbToHex:f,hsbToHex:g,fixHsb:h,fixRgb:i,fixHex:j})}(),a.fn.htmlData=function(b,c){var e,c=void 0===c?!0:c,d=new RegExp("^data-"+(b?b+"-":"")+"(.*)","i"),f={};return a.each(this[0].attributes,function(a,b){if(b.specified&&(e=b.name.match(d))&&e[1])if(c){var a,h,g=e[1].split("-"),i=f;for(max=g.length-1,a=0;max>=a;a++)h=g[a],a==max?i[h]=b.value:(!i[h]&&(i[h]={}),i=i[h])}else f[e[1]]=b.value}),f
},a.fn.defineData=function(a,b){return void 0===this.data(a)&&this.data(a,b),this},a.deletes=function(b,c){a.each(c,function(a,c){delete b[c]})},a.fn.disabled=function(a){return void 0===a?this.is(":disabled")||this.hasClass("disabled"):this.prop("disabled",!!a).toggleClass("disabled",!!a)},a.fn.enabled=function(a){return void 0===a?!this.disabled():this.disabled(!a)},a.distinct=function(b){var c=a.unique;if(!(b.length<1)){if(b[0].nodeType)return c.apply(this,arguments);if("object"==typeof b[0]){var d=Math.random(),e=[];
return a.each(b,function(a){b[a][d]||(e.push(b[a]),b[a][d]=!0)}),a.each(e,function(a){delete e[a][d]}),e}return a.grep(b,function(c,d){return a.inArray(c,b)===d})}},a.fn.tagName=function(){return(this[0]||{}).tagName},a.create=function(b){return a(document.createElement(b))},a.fn.editable=function(b){return a.isUndefined(b)?"true"===this.prop("contenteditable"):(this.prop("contenteditable",b),b===!1&&this.removeAttr("contenteditable"),this)},a.download=function(b){return a("<iframe>").hide().appendTo("body").bind("load",function(){a(this).remove()
}).attr("src",b)},a.ns=function(a,b){return a.split(" ").join(b+" ")+b},a.getPointerPosition=function(a){return a.type.match("touch")?{x:a.originalEvent.changedTouches[0].pageX,y:a.originalEvent.changedTouches[0].pageY}:{x:a.pageX,y:a.pageY}},function(){var b="___eventable",c=["on","off","fire"],d=function(a){return a.split(".")[0]},e=function(a){this.fnList={},this.events={},this.mode=a};a.extend(e.prototype,{createEvent:function(b){return this.events[b]=a.Callbacks(this.mode)},on:function(b,c){if(!b||!a.isFunction(c))return this;
var e=this.fnList;(e[b]||(e[b]=[])).push(c);var f=d(b);return(this.events[f]||this.createEvent(f)).add(c),this},off:function(b){if(!b)return this;var c=d(b),e=this.events[c];if(!e)return this;var f=function(b){a.each(b,function(a,b){e.remove(b)})};return c!==b?a.each(this.fnList,function(a,b){a.indexOf(c)>-1&&f(b)}):f(this.fnList[b]),this},fire:function(b){var c=this.events[b];if(c)return c.fire.apply(c,a.makeArray(arguments).slice(1)),this},destroy:function(){for(name in this.events)this.events[name].disable()
}}),a.eventable=function(d,f){var g=d[b];return g&&"destroy"===f?(g.destroy(),a.deletes(d,c),delete d[b]):(g=d[b]=new e(f),d.on=a.proxy(g.on,g),d.off=a.proxy(g.off,g),d.fire=a.proxy(g.fire,g),d)}}(),a.fn.checkList=function(b){var c={checkbox:".checkbox",masterCheckbox:".master-checkbox",check:function(){},uncheck:function(){},change:function(){}},b=a.extend({},c,b),d=this,e=d.find(b.checkbox),f=d.find(b.masterCheckbox),g=!1,h=function(){if(!g){var a=e.filter(":checked"),c=e.not(":checked");a.length<1&&f.removeAttr("checked"),a.length==e.length&&f.prop("checked",!0),b.change.call(d,a,c)
}};return e.checked(function(){b.check.apply(d),h()},function(){b.uncheck.apply(d),h()}),f.checked(function(){g=!0,e.checked(!0),g=!1,h()},function(){g=!0,e.checked(!1),g=!1,h()}),h(),this},a.fn.checked=function(b,c){return arguments.length<1?this.is(":checked"):(this.each(function(){var e=a(this);return"boolean"==typeof b?(e.attr("checked",b).trigger("change"),void 0):((e.is("input[type=checkbox]")||e.is("input[type=radio]"))&&e.off("change.checked").on("change.checked",function(){try{return e.is(":checked")?b.apply(e):c.apply(e)
}catch(a){}}),void 0)}),this)},a.fn.locate=function(b){var c="data";return a.each(this[0].attributes,function(a,b){return b.specified&&"$"===b.value?(c=b.name,!1):void 0}),this.find("["+c+"-"+b.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()+"]")},function(){var b=["overflow","overflow-x","overflow-y"];a.fn.noscroll=function(c){return void 0===c&&(c=!0),this.each(function(){var d=a(this),e=d.data("noscroll");!e&&c&&(e={},a.each(b,function(a,b){e[b]=d.css(b)}),d.data("noscroll",e)),c?a.each(b,function(a,b){d.css(b,"hidden")
}):e&&d.css(e)})}}(),a.fn.visible=function(b){var c=a(this),d=a(window);if(!(c.length<1)){var e=d.scrollTop(),f=e+d.height(),g=c.offset().top,h=g+c.height(),i=b===!0?h:g,j=b===!0?g:h;return f>=j&&i>=e}},a.fn.where=a.fn.filterBy=function(a,b,c){var c=c||"=",d="[data-"+a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()+c+b+"]";return this.filter(d)},a.fn.checked=function(b,c){return arguments.length<1?this.is(":checked"):(this.each(function(){var e=a(this);return"boolean"==typeof b?(e.attr("checked",b).trigger("change"),void 0):((e.is("input[type=checkbox]")||e.is("input[type=radio]"))&&e.off("change.checked").on("change.checked",function(){try{return e.is(":checked")?b.apply(e):c.apply(e)
}catch(a){}}),void 0)}),this)},a.fn.selectAll=function(){return this.each(function(){this.select()})},a.fn.unselect=function(){return this.each(function(){var a=this,b=a.value;a.value+=" ",a.value=b})},a.fn.toObject=a.fn.serializeObject=function(){var b={};return a.each(a(this).serializeArray(),function(c,d){b.hasOwnProperty(d.name)?(a.isArray(b[d.name])||(b[d.name]=[b[d.name]]),b[d.name].push(d.value)):b[d.name]=d.value}),b},a.fn.toJSON=a.fn.serializeJSON=function(){return JSON.stringify(a(this).serializeObject())
},a.sanitizeHTML=function(b){return a(a.parseHTML(b,document,!0)).toHTML()},a.toHTML=function(b){return a("<div>").html(b).html()},a.fn.toHTML=function(){return a.toHTML(this.clone())},a.toXHTML=function(a,b){var c=a.innerHTML?String(a.innerHTML):a,d=c.match(/(<.+[^>])/g);if(d)for(var e=0;e<d.length;e+=1){var f,g=d[e],h=/\=[a-zA-Z\.\:\[\]_\(\)\&\$\%#\@\!0-9\/]+[?\s+|?>]/g;if(d[e]=d[e].replace(/([<|<\/].+?\w+).+[^>]/,function(a){return a}),f=d[e].match(h))for(var i=0,j=f.length;j>i;){var k=/(\=)([a-zA-Z\.\:\[\]_\(\)\&\$\%#\@\!0-9\/]+)?([\s+|?>])/g,l=function(){var a=Array.prototype.slice.call(arguments);
return'="'+(b?a[2]:a[2].toLowerCase())+'"'+a[3]};d[e]=d[e].replace(f[i],f[i].replace(k,l)),i+=1}c=c.replace(g,d[e])}return c},a.fn.xhtml=function(){return a.IE?a.toXHTML(this[0]):this.html()},a.buildHTML=function(b,c){if(b instanceof a)return b;var d=document;if(window.CloudFlare){var e=a.buildHTML.iframe;if(!e||!e.contentDocument){var e=a.buildHTML.iframe=document.createElement("iframe");e.style.display="none",document.body.appendChild(e)}d=e.contentDocument}var b=a.trim(b),f=[],g=a.buildFragment([b],d,f),h=a.merge([],g.childNodes);
if(!c&&f.length>0){var i=d.createElement("script");i.text="try{"+a.callback(function(){a(f).remove()})+"();}catch(e){}";for(var k,l,j=h.length-1;(k=h[j--])&&("SCRIPT"===k.nodeName?l=h.push(i):1===k.nodeType&&(l=k.appendChild(i)),!l););l||h.push(i),f.push(i)}return a(h)},a.intersects=function(b,c){return a.isArray(c)&&(c={top:c.y,left:c.x,bottom:c.y,right:c.x}),c.left<=b.right&&b.left<=c.right&&c.top<=b.bottom&&b.top<=c.bottom},a.fn.intersectsWith=function(b,c,d,e){var f=this.offset(),g={top:f.top,left:f.left,bottom:f.top+(sourceHeight=this.height()),right:f.left+(sourceWidth=this.width()),width:sourceWidth,height:sourceHeight},h={top:b,left:c,bottom:b+(e||(e=0)),right:c+(d||(d=0)),width:d,height:e};
return a.intersects(g,h)?{reference:g,subject:h}:!1},a.isDeferred=function(b){return b&&a.isFunction(b.always)},a.isNumeric=function(a){return!isNaN(parseFloat(a))&&isFinite(a)},a.rotateNumber=function(a,b,c,d){return void 0===d&&(d=0),a+=d,b>a?a+=c+1:a>c&&(a-=c+1),a},a.regExpEscape=function(a){return a.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},a.remap=function(b,c,d){return a.each(d,function(a,d){b[d]=c[d]}),obj},function(){var b=a.Ajax=function(c){c.autostart=!1;var d=a.ajax(c);
return b.queue.addDeferred(function(a){d.send(),setTimeout(a.resolve,b.interval)}),d};b.queue=a.Threads({threadLimit:1}),b.interval=1200;var c=a.joomla.version.split("."),d=c[0],e=c[1];d>=3&&e>=2&&(b.interval=0)}(),function(){a.fn.addTransitoryClass=function(a,b){var c=this.addClass(a);return setTimeout(function(){c.removeClass(a)},b||1),this};var b=function(a,b,c){var d=this;return setTimeout(function(){d[a+"Class"](b)},c||50),this};a.fn.addClassAfter=function(a,c){return b.call(this,"add",a,c)},a.fn.removeClassAfter=function(a,c){return b.call(this,"remove",a,c)
};var c=function(a,b,c,d){var e=a?"-in":"-out";return this.addTransitoryClass(b.replace(/ /g,e+" ")+e,c||1e3)[(a?"add":"remove")+"ClassAfter"](b),d&&setTimeout(d,c),this};a.fn.addTransitionClass=function(a,b,d){return c.call(this,!0,a,b,d)},a.fn.removeTransitionClass=function(a,b,d){return c.call(this,!1,a,b,d)}}(),a.trimSeparators=function(b,c,d){var e=c;return b=b.replace(new RegExp("^["+e+"\\s]+|["+e+",\\s]+$","g"),"").replace(new RegExp(e+"["+e+"\\s]*"+e,"g"),e).replace(new RegExp("[\\s]+"+e,"g"),e).replace(new RegExp(e+"[\\s]+","g"),e),d&&(b=a.distinct(b.split(e)).join(e)),b
},a.uid=function(a,b){return(a?a:"")+Math.random().toString().replace(".","")+(b?b:"")}}),FD40.plugin("storage",function(a){function h(){try{return e in c&&c[e]}catch(a){return!1}}function l(a){return function(){var c=Array.prototype.slice.call(arguments,0);c.unshift(g),i.appendChild(g),g.addBehavior("#default#userData"),g.load(e);var d=a.apply(b,c);return i.removeChild(g),d}}function n(a){return a.replace(/^d/,"___$&").replace(m,"___")}var g,b={},c=window,d=document,e="localStorage",f="script";if(b.disabled=!1,b.set=function(){},b.get=function(){},b.remove=function(){},b.clear=function(){},b.transact=function(a,c,d){var e=b.get(a);
null==d&&(d=c,c=null),"undefined"==typeof e&&(e=c||{}),d(e),b.set(a,e)},b.getAll=function(){},b.forEach=function(){},b.serialize=function(a){return JSON.stringify(a)},b.deserialize=function(a){if("string"!=typeof a)return void 0;try{return JSON.parse(a)}catch(b){return a||void 0}},h())g=c[e],b.set=function(a,c){return void 0===c?b.remove(a):(g.setItem(a,b.serialize(c)),c)},b.get=function(a){return b.deserialize(g.getItem(a))},b.remove=function(a){g.removeItem(a)},b.clear=function(){g.clear()},b.getAll=function(){var a={};
return b.forEach(function(b,c){a[b]=c}),a},b.forEach=function(a){for(var c=0;c<g.length;c++){var d=g.key(c);a(d,b.get(d))}};else if(d.documentElement.addBehavior){var i,j;try{j=new ActiveXObject("htmlfile"),j.open(),j.write("<"+f+">document.w=window</"+f+'><iframe src="/favicon.ico"></iframe>'),j.close(),i=j.w.frames[0].document,g=i.createElement("div")}catch(k){g=d.createElement("div"),i=d.body}var m=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");b.set=l(function(a,c,d){return c=n(c),void 0===d?b.remove(c):(a.setAttribute(c,b.serialize(d)),a.save(e),d)
}),b.get=l(function(a,c){return c=n(c),b.deserialize(a.getAttribute(c))}),b.remove=l(function(a,b){b=n(b),a.removeAttribute(b),a.save(e)}),b.clear=l(function(a){var b=a.XMLDocument.documentElement.attributes;a.load(e);for(var d,c=0;d=b[c];c++)a.removeAttribute(d.name);a.save(e)}),b.getAll=function(){var c={};return b.forEach(function(a,b){c[a]=b}),c},b.forEach=l(function(a,c){for(var f,d=a.XMLDocument.documentElement.attributes,e=0;f=d[e];++e)c(f.name,b.deserialize(a.getAttribute(f.name)))})}try{var o="__storejs__";
b.set(o,o),b.get(o)!=o&&(b.disabled=!0),b.remove(o)}catch(k){b.disabled=!0}b.enabled=!b.disabled,a.Storage=b}),FD40.plugin("uri",function(a){a.isUrl=function(a){var b=/^(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;return b.test(a)};var b=function(a){"use strict";var b=function(a){var c,d,e,f,g,h,b=[];if("undefined"==typeof a||null===a||""===a)return b;for(0===a.indexOf("?")&&(a=a.substring(1)),d=a.toString().split(/[&;]/),c=0;c<d.length;c++)e=d[c],f=e.split("="),g=f[0],h=-1===e.indexOf("=")?null:null===f[1]?"":f[1],b.push([g,h]);
return b},c=b(a),d=function(){var b,d,a="";for(b=0;b<c.length;b++)d=c[b],a.length>0&&(a+="&"),a+=null===d[1]?d[0]:d.join("=");return a.length>0?"?"+a:a},e=function(a){return a=decodeURIComponent(a),a=a.replace("+"," ")},f=function(a){var b,d;for(d=0;d<c.length;d++)if(b=c[d],e(a)===e(b[0]))return b[1]},g=function(a){var d,f,b=[];for(d=0;d<c.length;d++)f=c[d],e(a)===e(f[0])&&b.push(f[1]);return b},h=function(a,b){var f,g,h,i,d=[];for(f=0;f<c.length;f++)g=c[f],h=e(g[0])===e(a),i=e(g[1])===e(b),(1===arguments.length&&!h||2===arguments.length&&!h&&!i)&&d.push(g);
return c=d,this},i=function(a,b,d){return 3===arguments.length&&-1!==d?(d=Math.min(d,c.length),c.splice(d,0,[a,b])):arguments.length>0&&c.push([a,b]),this},j=function(a,b,d){var g,j,f=-1;if(3===arguments.length){for(g=0;g<c.length;g++)if(j=c[g],e(j[0])===e(a)&&decodeURIComponent(j[1])===e(d)){f=g;break}h(a,d).addParam(a,b,f)}else{for(g=0;g<c.length;g++)if(j=c[g],e(j[0])===e(a)){f=g;break}h(a),i(a,b,f)}return this};return{getParamValue:f,getParamValues:g,deleteParam:h,addParam:i,replaceParam:j,toString:d}},c=function(a){"use strict";
var d=!1,e=/[-a-zA-Z0-9@:%_\+.~#?&//=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&//=]*)?/gi,f=function(a){for(var b={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},c=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],e={name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},f=b[d?"strict":"loose"].exec(a),g={},h=14;h--;)g[c[h]]=f[h]||"";
return g[e.name]={},g[c[12]].replace(e.parser,function(a,b,c){b&&(g[e.name][b]=c)}),g},g=f(a||""),h=new b(g.query),i=function(a){return"undefined"!=typeof a&&(g.protocol=a),g.protocol},j=null,k=function(a){return"undefined"!=typeof a&&(j=a),null===j?-1!==g.source.indexOf("//"):j},l=function(a){return"undefined"!=typeof a&&(g.userInfo=a),g.userInfo},m=function(a){return"undefined"!=typeof a&&(g.host=a),g.host},n=function(a){return"undefined"!=typeof a&&(g.port=a),g.port},o=function(a){return"undefined"!=typeof a&&(g.path=a),g.path
},p=function(a){return"undefined"!=typeof a&&(h=new b(a)),h},q=function(a){return"undefined"!=typeof a&&(g.anchor=a),g.anchor},r=function(a){return i(a),this},s=function(a){return k(a),this},t=function(a){return l(a),this},u=function(a){return m(a),this},v=function(a){return n(a),this},w=function(a){return o(a),this},x=function(a){return p(a),this},y=function(a){return q(a),this},z=function(a){return p().getParamValue(a)},A=function(a){return p().getParamValues(a)},B=function(a,b){return 2===arguments.length?p().deleteParam(a,b):p().deleteParam(a),this
},C=function(a,b,c){return 3===arguments.length?p().addParam(a,b,c):p().addParam(a,b),this},D=function(a,b,c){return 3===arguments.length?p().replaceParam(a,b,c):p().replaceParam(a,b),this},E=function(a){if(void 0===a)return g.path;if("/"==a.substring(0,1))return g.path=a;var b=g.path.split("/"),c=a.split("/");""===b.slice(-1)[0]&&b.pop();for(var d;d=c.shift();)switch(d){case"..":b.length>1&&b.pop();break;case".":break;default:b.push(d)}return g.path=b.join("/"),this},F=function(){var a="",b=function(a){return null!==a&&""!==a
};return b(i())?(a+=i(),i().indexOf(":")!==i().length-1&&(a+=":"),a+="//"):k()&&b(m())&&(a+="//"),b(l())&&b(m())&&(a+=l(),l().indexOf("@")!==l().length-1&&(a+="@")),b(m())&&(a+=m(),b(n())&&(a+=":"+n())),b(o())?a+=o():b(m())&&(b(p().toString())||b(q()))&&(a+="/"),b(p().toString())&&(0!==p().toString().indexOf("?")&&(a+="?"),a+=p().toString()),b(q())&&(0!==q().indexOf("#")&&(a+="#"),a+=q()),a},G=function(b){var c=a.match(e)||[];return void 0===b?c:c[b]||""},H=function(){return new c(F())};return{protocol:i,hasAuthorityPrefix:k,userInfo:l,host:m,port:n,path:o,query:p,anchor:q,setProtocol:r,setHasAuthorityPrefix:s,setUserInfo:t,setHost:u,setPort:v,setPath:w,setQuery:x,setAnchor:y,getQueryParamValue:z,getQueryParamValues:A,deleteQueryParam:B,addQueryParam:C,replaceQueryParam:D,extract:G,toPath:E,toString:F,clone:H}
};a.uri=function(a){return new c(a)}}),FD40.plugin("mvc",function($){!function(){var d,a={undHash:/_|-/,colons:/::/,words:/([A-Z]+)([A-Z][a-z])/g,lowUp:/([a-z\d])([A-Z])/g,dash:/([a-z\d])([A-Z])/g,replacer:/\{([^\}]+)\}/g,dot:/\./},b=function(a,b,c){return void 0!==a[b]?a[b]:c&&(a[b]={})},c=function(a){var b=typeof a;return a&&("function"==b||"object"==b)},e=$.String=$.extend($.String||{},{getObject:d=function(d,e,f){var i,j,k,g=d?d.split(a.dot):[],h=g.length,l=0;if(e=$.isArray(e)?e:[e||window],0==h)return e[0];
for(;i=e[l++];){for(k=0;h-1>k&&c(i);k++)i=b(i,g[k],f);if(c(i)&&(j=b(i,g[k],f),void 0!==j))return f===!1&&delete i[g[k]],j}},capitalize:function(a){return a.charAt(0).toUpperCase()+a.substr(1)},camelize:function(a){return a=e.classize(a),a.charAt(0).toLowerCase()+a.substr(1)},classize:function(b,c){for(var d=b.split(a.undHash),f=0;f<d.length;f++)d[f]=e.capitalize(d[f]);return d.join(c||"")},niceName:function(a){return e.classize(a," ")},underscore:function(b){return b.replace(a.colons,"/").replace(a.words,"$1_$2").replace(a.lowUp,"$1_$2").replace(a.dash,"_").toLowerCase()
},sub:function(b,c,e){var f=[];return f.push(b.replace(a.replacer,function(a,b){var g=d(a,c,"boolean"==typeof e?!e:e)||d(b,c,"boolean"==typeof e?!e:e),h=typeof g;return"object"!==h&&"function"!==h||null===h?""+g:(f.push(g),"")})),f.length<=1?f[0]:f},_regs:a});$.extend($,e)}(),function(){$.String.rsplit=function(a,b){for(var e,f,c=b.exec(a),d=[];null!==c;)e=c.index,f=b.lastIndex,0!==e&&(d.push(a.substring(0,e)),a=a.slice(e)),d.push(c[0]),a=a.slice(c[0].length),c=b.exec(a);return""!==a&&d.push(a),d}}(),function(){var a=/^\d+$/,b=/([^\[\]]+)|(\[\])/g,c=/\+/g,d=/([^?#]*)(#.*)?$/;
$.String=$.extend($.String||{},{deparam:function(e){if(!e||!d.test(e))return{};for(var h,f={},g=e.split("&"),i=0;i<g.length;i++){h=f;var j=g[i].split("=");2!=j.length&&(j=[j[0],j.slice(1).join("=")]);for(var k=decodeURIComponent(j[0].replace(c," ")),l=decodeURIComponent(j[1].replace(c," ")),m=k.match(b),n=0;n<m.length-1;n++){var o=m[n];h[o]||(h[o]=a.test(m[n+1])||"[]"==m[n+1]?[]:{}),h=h[o]}lastPart=m[m.length-1],"[]"==lastPart?h.push(l):h[lastPart]=l}return f}})}(),function(){var a=$.cleanData;$.cleanData=function(b){for(var d,c=0;void 0!==(d=b[c]);c++)$(d).triggerHandler("destroyed");
a(b)}}(),function(){var a=$.fn._closest=$.fn.closest;$.fn.closest=function(b,c){if(b instanceof $||$.isElement(b))return a.call(this,arguments);var e,f,h,j,j,d={},k=!0,l=b;if("string"==typeof b&&(l=[b]),$.each(l,function(a,c){if(0==c.indexOf(">")){if(-1!=c.indexOf(" "))throw" closest does not work with > followed by spaces!";d[l[a]=c.substr(1)]=c,"string"==typeof b&&(b=c.substr(1)),k=!1}}),e=a.call(this,b,c),k)return e;for(h=0;h<e.length;)f=e[h],j=f.selector,void 0===d[j]||(f.selector=d[j],d[j]=!1,"string"==typeof f.selector&&f.elem.parentNode===c)?h++:e.splice(h,1);
return e}}(),function(){$.cookie=function(a,b,c){if("undefined"==typeof b){var i=null;if(document.cookie&&""!=document.cookie)for(var j=document.cookie.split(";"),k=0;k<j.length;k++){var l=jQuery.trim(j[k]);if(l.substring(0,a.length+1)==a+"="){i=decodeURIComponent(l.substring(a.length+1));break}}if(jQuery.evalJSON&&i&&i.match(/^\s*\{/))try{i=jQuery.evalJSON(i)}catch(m){}return i}c=c||{},null===b&&(b="",c.expires=-1),"object"==typeof b&&jQuery.toJSON&&(b=jQuery.toJSON(b));var d="";if(c.expires&&("number"==typeof c.expires||c.expires.toUTCString)){var e;
"number"==typeof c.expires?(e=new Date,e.setTime(e.getTime()+24*c.expires*60*60*1e3)):e=c.expires,d="; expires="+e.toUTCString()}var f=c.path?"; path="+c.path:"",g=c.domain?"; domain="+c.domain:"",h=c.secure?"; secure":"";document.cookie=[a,"=",encodeURIComponent(b),d,f,g,h].join("")}}(),function(){var a=!1,b=$.makeArray,c=$.isFunction,d=$.isArray,e=$.extend,f=$.String.getObject,g=function(a,c){return a.concat(b(c))},h=/xyz/.test(function(){})?/\b_super\b/:/.*/,i=function(a,b,d){d=d||a;for(var e in a)d[e]=c(a[e])&&c(b[e])&&h.test(a[e])?function(a,c){return function(){var e,d=this._super;
return this._super=b[a],e=c.apply(this,arguments),this._super=d,e}}(e,a[e]):a[e]},j="prototype";clss=$.Class=function(){arguments.length&&clss.extend.apply(clss,arguments)},e(clss,{proxy:function(a){var e,c=b(arguments);return a=c.shift(),d(a)||(a=[a]),e=this,function(){for(var f,j,b=g(c,arguments),h=a.length,i=0;h>i;i++)j=a[i],j&&(f="string"==typeof j,f&&e._set_called&&(e.called=j),b=(f?e[j]:j).apply(e,b||[]),h-1>i&&(b=!d(b)||b._use_call?[b]:b));return b}},newInstance:function(){var b,a=this.rawInstance();return a.setup&&(b=a.setup.apply(a,arguments)),a.init&&a.init.apply(a,d(b)?b:arguments),a
},setup:function(a){return this.defaults=e(!0,{},a.defaults,this.defaults),arguments},rawInstance:function(){a=!0;var b=new this;return a=!1,b},extend:function(b,c,d){function p(){return a?void 0:this.constructor!==p&&arguments.length?arguments.callee.extend.apply(arguments.callee,arguments):this.Class.newInstance.apply(this.Class,arguments)}"string"!=typeof b&&(d=c,c=b,b=null),d||(d=c,c=null),d=d||{};var l,m,n,o,h=this,k=this[j];a=!0,o=new this,a=!1,i(d,k,o);for(l in this)this.hasOwnProperty(l)&&(p[l]=this[l]);
if(i(c,this,p),b){var q;c&&c.root&&(q=c.root,$.isString(q)&&(q=f(q,window,!0)));var r=b.split(/\./),m=r.pop(),s=f(r.join("."),q||window,!0),n=s;e(!0,p,s[m]),s[m]=p}e(p,{prototype:o,namespace:n,shortName:m,constructor:p,fullName:b}),p[j].Class=p[j].constructor=p;var t=p.setup.apply(p,g([h],arguments));return p.init&&p.init.apply(p,t||g([h],arguments)),p}}),clss.callback=clss[j].callback=clss[j].proxy=clss.proxy}(),function(){var w,a=function(a,b,c,e){var f,g=a.bind&&a.unbind?a:$(d(a)?[a]:a);return 0===b.indexOf(">")&&(b=b.substr(1),f=function(b){b.target===a&&c.apply(this,arguments)
}),e?g.bind(b,e,f||c):g.bind(b,f||c),function(){g.unbind(b,f||c),a=b=c=f=null}},b=$.makeArray,c=$.isArray,d=$.isFunction,e=$.isString,f=$.extend,g=$.String,h=$.each,i=g.getObject,j="prototype",k="constructor",l=Array[j].slice,m=function(a,b,c,e,f){0===b.indexOf(">")&&(b=(a.data("directSelector")+" "||"")+b);var g=a.delegate&&a.undelegate?a:$(d(a)?[a]:a);return f?g.delegate(b,c,f,e):g.delegate(b,c,e),function(){g.undelegate(b,c,e),g=a=c=e=b=null}},n=function(b,c,d,e,f){return e?m(b,e,c,d,f):a(b,c,d,f)},o=function(a,b){var e="string"==typeof b?a[b]:b;
return c(e)&&d(e[1])&&(e=e[1]),function(){return a.called=b,e.apply(a,[this.nodeName?$(this):this].concat(l.call(arguments,0)))}},p=/\./g,q=/_?controllers?/gi,r=function(a){return g.underscore(a.replace($.globalNamespace+".","").replace(p,"_").replace(q,""))},s=/^\S(.*)\s(.*)/,t=/\{([^\}]+)\}/g,u=/\{([^\.]+[\.][^\.]+)\}/g,v=/^(?:(.*?)\s)?([\w\.\:>]+)$/,x=function(a,b){return $.data(a,"controllers",b)},y=$.globalNamespace+".Controller";$.Controller=function(a){var e,c=b(arguments),d={root:y};return c.length>2?(d=$.extend(d,c[1]),e=c[2]):e=c[1],d.namespace&&(a=d.namespace+"."+a),$.Controller.Class(a,d,e)
};var z=y+".Class";$.Class(z,{setup:function(a,f){if(this._super.apply(this,arguments),this.shortName&&this.fullName!=z){for(var g=this.elements||[],h=0,i=this.defaults;element=g[h++];){var k=element.indexOf("{"),l=element.indexOf("}"),n=(element.length,element.slice(0,k)),o=element.slice(l+1),p=element.slice(k+1,l).split("|"),q=0,s=n.match(/^\^(\S*)\s(.*)/),t="";for(s&&(t=s[1]+"-",n=s[2]);f=p[q++];){var u="{"+$.camelize(t+f)+"}";!$.has(i,u)&&(i[u]=n+f+o)}}this._fullName=r(this.fullName),this._shortName=r(this.shortName);
var w,v=this;if(e(this.pluginName)){var A=this._fullName,B=this.pluginName;$.fn[B]||($.fn[B]=function(a){var c=b(arguments);if($.isString(a)&&"controller"===a){var d=x(this[0]),e=d&&d[A];return e}return this.each(function(){var b=x(this),d=b&&b[A];if(d){if($.isString(a)){var e=d[a];return $.isFunction(e)&&e.apply(d,c.slice(1)),void 0}d.update.apply(d,c)}else v.newInstance.apply(v,[this].concat(c))})})}var C=b(arguments),D=this[j],E=C[C.length>3?3:2];d(E)&&(this.protoFactory=E,D=this.protoFactory.call(this,null)),this.actions={};
for(w in D)if("constructor"!=w&&this._isAction(w)){var F=D[w],G=d(F)||c(F)&&d(F[1]);if(!G)continue;this.actions[w]=this._action(w)}$.module("$:/Controllers/"+this.fullName).resolve(this)}},hookup:function(a){return new this(a)},_isAction:function(a){return s.test(a)?!0:$.inArray(a,this.listensTo)>-1||$.event.special[a]||A[a]},_action:function(a,b){if(t.lastIndex=0,!b&&t.test(a))return null;a=a.replace("{self} ","");var d=a;if(b){var e=!1;if(u.test(a)){var f,h="";d=a.replace(u,function(a,c){var d=c.split(".");
return f=b["{"+d[0]+"}"]||{},$.isControllerInstance(f)&&(h=(f[d[1]]||{}).selector),h}).match(v),e=!!h,d=[f.element].concat(d||[])}e||(d=g.sub(a,[b,window]))}var i=c(d),j=(i?d[1]:d).match(v),k=j[2],l=A[k]||w;return{processor:l,parts:j,delegate:i?d[0]:void 0}},processors:{},listensTo:[],defaults:{},hostname:"parent"},{setup:function(a,c){var d=this,g=d[k],i=d[j],l=g._fullName;d.instanceId=$.uid(l+"_");var m=d.options=f(!0,{},g.defaults,g.defaultOptions,c),n=d.element=$(a);if(g.protoFactory&&(i=g.protoFactory.apply(g,[d,m,n]),f(!0,d,i)),(x(a)||x(a,{}))[l]=d,!n.data("directSelector")){var o=$.uid("DS");
n.addClass(o).data("directSelector","."+o)}d.selectors={};for(var p in m)if(p.match(/^\{.+\}$/)){var q=p.replace(/^\{|\}$/g,""),r=m[p];if(e(r)){var s=d[q];d[q]=d.selectors[q]=function(a,b,c){b=/^(\.|\#)$/.test(b)?b+c:b;var d=function(c){var e=(d.baseElement||a.element).find(b);return $.isString(c)&&(e=e.filter(c)),$.isPlainObject(c)&&$.each(c,function(a,b){e=e.filterBy(a,b)}),e};return d.selector=b,d.css=function(){var a=d.cssRule;if(!a){var c=n.data("directSelector"),e=$.map(b.split(","),function(a){return c+" "+a
});a=d.cssRule=$.cssRule(e),a.important=!0}return arguments.length?a.css.apply(a,arguments):a},d.inside=function(a){return $(a).find(b)},d.of=function(a){return $(a).parents(b).eq(0)},d.under=function(a){var b=[];return d().each(function(){$(this).parents().filter(a).length&&b.push(this)}),$(b)},$.isPlainObject(s)&&$.extend(d,s),d}(d,r,q)}else d[q]=r}var t=m.view,u=d.view;d.view=function(){return u.apply(this,arguments)},h(t||{},function(a){d.view[a]=function(c){var e=b(arguments);return $.isBoolean(c)?e=e.slice(1):c=!1,d.view.apply(d,[c,a].concat(e))
}}),$.extend(d,m.controller),d.pluginInstances={},d.called="init",d._bind();var v=d.init||$.noop;return d.init=function(){return d.init=v,result=v.apply(d,arguments),d.trigger("init."+g.fullName.toLowerCase(),[d]),result},[n,m].concat(b(arguments).slice(2))},on:function(a){var c=b(arguments),d=this.element,f=c.length;return 2==f?this._binder(d,a,c[1]):3==f&&e(c[1])?this._binder(d,a,c[2],c[1]):this._binder(c[1],a,c[2])},_bind:function(){var a=this,b=a[k],c=b.actions,d=a._bindings=[],e=a.element;h(c||{},function(f){if(c.hasOwnProperty(f)){var h=b.actions[f]||b._action(f,a.options);
$.isControllerInstance(h.delegate)&&(h.delegate=h.delegate.element),d.push(h.processor(h.delegate||e,h.parts[2],h.parts[1],f,a))}});var f=o(this,"destroy");return e.bind("destroyed",f),d.push(function(a){$(a).unbind("destroyed",f)}),d.length},_binder:function(a,b,c,d){return"string"==typeof c&&(c=o(this,c)),this._bindings.push(n(a,b,c,d)),this._bindings.length},_unbind:function(){var a=this.element[0];h(this._bindings,function(b,c){c(a)}),this._bindings=[]},trigger:function(a){var b=this.element;if(b){var c=$.Event(a);
return b.trigger.apply(b,[c].concat($.makeArray(arguments).slice(1))),c}},delegate:function(a,b,c,d){return"string"==typeof a&&(d=c,c=b,b=a,a=this.element),this._binder(a,c,d,b)},update:function(a){f(this.options,a),this._unbind(),this._bind()},destroy:function(){if(!this._destroyed){var a=this[k]._fullName;for(pname in this.pluginInstances)this.removePlugin(pname);this._destroyed=!0,this.element.removeClass(a),this._unbind(),delete this._actions,delete this.element.data("controllers")[a],$(this).triggerHandler("destroyed"),this.element=$()
}},find:function(a){return this.element.find(a)},view:function(){var c,a=b(arguments),d=a,e=!1,f=this[k].component||$,g="",h=this.options.view||{};return"boolean"==typeof a[0]&&(e=a[0],d=a.slice(1)),c=d[0]=h[d[0]],void 0==c?e?"":$(""):(g=f.View.apply(f,d),e?g:$($.parseHTML($.trim(g))))},getPlugin:function(a){return this.pluginInstances[a]},addSubscriber:function(a){var b=$.isArray(a)?a:[a||{}],c=this,d=this.Class.hostname,e={};return e["{"+d+"}"]=c,$.map(b,function(a){return $.isControllerInstance(a)?a.options[d]===this?a:(a[d]=c,a.update(e)):!1
}),b},addPlugin:function(a,b,c){if(a){(!b&&!c||$.isPlainObject(b))&&(c=b,b=[this.Class.root,this.Class.fullName,$.String.capitalize(a)].join(".")),$.isString(b)&&(b=$.getController(b));var e=$.isControllerInstance(b);if(d(b)||e){var f=this.Class.pluginExtendsInstance?this.options[a]:(this.options.plugin||{})[a];c=$.extend(!0,{element:this.element},c,f);var g=e?"instance":$.isController(b)?"controller":"function";this.trigger("addPlugin",[a,b,c,g]);var h=this.Class.hostname;c["{"+h+"}"]=this;var i;switch(g){case"instance":i=b,b.update(c),b[h]=this;
break;case"controller":i=c.element.addController(b,c);break;case"function":i=b(this,c)}if(i){if(this.pluginInstances[a]=i,this.Class.pluginExtendsInstance&&(this[a]=i),"function"!==g){var j={};j["{"+a+"}"]=i,this.update(j)}return this.trigger("registerPlugin",[a,i,c,g]),i}}}},removePlugin:function(a){var b=this.getPlugin(a);if(b)return this.trigger("removePlugin",[a,b]),delete this.pluginInstances[a],$.isFunction(b.destroy)?b.destroy():null},invokePlugin:function(a,b,c){var d=this.getPlugin(a);if(d&&$.isFunction(d[b]))return this.trigger("invokePlugin",[a,d,c]),d[b].apply(this,c)
},getMessageGroup:function(){var a=$.isFunction(this.messageGroup)?this.messageGroup():this.element.find("[data-message-group]");return a.length<1&&(a=$("<div data-message-group></div>").prependTo(this.element)),a},setMessage:function(a,b){var c={type:"warning",message:"",parent:this.getMessageGroup(),element:$('<div class="alert fade in"><button type="button" class="close" data-bs-dismiss="alert">\xd7</button></div>')},d={},e=$.isDeferred(a);d=$.isPlainObject(a)&&!e?a:{message:a,type:b||"warning"};var f=$.extend({},c,d),g=f.element;
if($.isDeferred(a)){var h=arguments.callee,i=this;a.done(function(a,b){f.message=a,f.type=b||"warning",h.call(i,f),g.show()})}else g.addClass("alert-"+f.type).append(f.message),$("html").has(g).length<1&&g.appendTo(f.parent);return g},clearMessage:function(){this.getMessageGroup().empty()},_set_called:!0});var A=$.Controller.Class.processors,w=function(a,b,e,f,g){var i,h=g[f];return c(h)&&d(h[1])&&(i=h[0]),n(a,b,o(g,f),e,i)};h("change click contextmenu dblclick keydown keyup keypress mousedown mousemove mouseout mouseover mouseup reset resize scroll select submit focusin focusout mouseenter mouseleave".split(" "),function(a,b){A[b]=w
});var B=function(a){return a.replace("$.Controller",y)},C=function(a){return e(a)&&(a=B(a),a=i(a)||i(y+"."+a)),D(a)?a:void 0},D=function(a){return d(a)&&a.hasOwnProperty("_fullName")},E=function(a){return $.map(a,function(a){return c(a)?E(a):C(a)})};$.getController=C,$.isController=function(a){return!!C(a)},$.isControllerInstance=function(a){return a&&a[k]&&D(a[k])},$.isControllerOf=function(a,b){if(!b)return!1;c(b)||(b=[b]);for(var d=0;d<b.length;d++){var e=C(b[d]);if(a instanceof e)return!0}return!1},$.fn.extend({controllers:function(){var a=E(b(arguments)),c=[];
return this.each(function(){var b=$.data(this,"controllers");h(b||{},function(d,e){b.hasOwnProperty(d)&&(!a.length||$.isControllerOf(e,a))&&c.push(e)})}),c},controller:function(a,b){return void 0===b?this.controllers(a)[0]:(this.addController.apply(this,arguments),this)},hasController:function(a){var b=(C(a)||{})._fullName||(e(a)?r(B(a)):"");return b?($(this).data("controllers")||{}).hasOwnProperty(b):!1},addController:function(a,b,c){var e=C(a);if(e){var f=[];return this.each(function(){if(1===this.nodeType&&"SCRIPT"!=this.nodeName){var g=$(this).controller(a);
if(g)return f.push(g),void 0;var h=new e(this,b);d(c)&&c.apply(h,[$(this),h]),f.push(h)}}),f.length>1?f:f[0]}},removeController:function(a){return this.each(function(){for(var b=$(this).controllers(a);b.length;)b.shift().destroy()}),this},addControllerWhenAvailable:function(a){var b=this,c=arguments,d=$.Deferred();return $.isController(a)&&(a=a.fullName),e(a)?($.module("$:/Controllers/"+a).pipe(function(){var a=b.addController.apply(b,c);d.resolveWith(a,[b,a])},d.reject,d.fail),d):d.reject()},implement:function(){return this.addController.apply(this,arguments),this
}}),function(){for(var c,a=["is","find"],b={};c=a.shift();)b[c]=$.fn[c],$.fn[c]=function(a){return function(c){return b[a].apply(this,(c||{}).hasOwnProperty("of")?[c.selector]:arguments)}}(c)}()}(),function(){var a=function(a){return a.replace(/^\/\//,"").replace(/[\/\.]/g,"_")},b=$.makeArray,c=1,d=$.View=function(a,c,d,e){"function"==typeof d&&(e=d,d=void 0);var j=h(c);if(j.length){var k=$.Deferred();return j.push(f(a,!0)),$.when.apply($,j).then(function(a){var j,f=b(arguments),h=f.pop()[0];if(g(c))c=i(a);else for(var l in c)g(c[l])&&(c[l]=i(f.shift()));
j=h(c,d),k.resolve(j),e&&e(j)}),k.promise()}var l,m="function"==typeof e,k=f(a,m);return m?(l=k,k.done(function(a){e(a(c,d))})):k.done(function(a){l=a(c,d)}),l},e=function(a,b){if(!a.match(/[^\s]/))throw"$.View ERROR: There is no template or an empty template at "+b},f=function(a,b){return $.ajax({url:a,dataType:"view",async:b})},g=function(a){return a&&$.isFunction(a.always)},h=function(a){var b=[];if(g(a))return[a];for(var c in a)g(a[c])&&b.push(a[c]);return b},i=function(a){return $.isArray(a)&&3===a.length&&"success"===a[1]?a[0]:a
};$.ajaxTransport("view",function(b,c){var h,i,j,k,f=c.url,g=f.match(/\.[\w\d]+$/),l=function(a){var b=h.renderer(j,a);return d.cache&&(d.cached[j]=b),{view:b}};if((i=document.getElementById(f))&&(g="."+i.type.match(/\/(x\-)?(.+)/)[2]),g||(g=d.ext,f+=d.ext),j=a(f),f.match(/^\/\//)){var m=f.substr(2);f="undefined"==typeof steal?f="/"+m:steal.root.mapJoin(m)+""}h=d.types[g];var n=$.template()[c.url];return{send:function(a,b){return n?(h=d.types["."+n.type],b(200,"success",l(n.content))):d.cached[j]?b(200,"success",{view:d.cached[j]}):(i?b(200,"success",l(i.innerHTML)):k=$.ajax({async:c.async,url:f,dataType:"text",error:function(){e("",f),b(404)
},success:function(a){e(a,f),b(200,"success",l(a))}}),void 0)},abort:function(){k&&k.abort()}}}),$.extend(d,{hookups:{},hookup:function(a){var b=++c;return d.hookups[b]=a,b},cached:{},cache:!0,register:function(b){this.types["."+b.suffix]=b,window.steal&&steal.type(b.suffix+" view js",function(b,c){var f=d.types["."+b.type],g=a(b.rootSrc+"");b.text=f.script(g,b.text),c()})},types:{},ext:".ejs",registerScript:function(a,b,c){return"$.View.preload('"+b+"',"+d.types["."+a].script(b,c)+");"},preload:function(a,b){d.cached[a]=function(a,c){return b.call(a,a,c)
}}}),window.steal&&steal.type("view js",function(b,c){var f=d.types["."+b.type],g=a(b.rootSrc+"");b.text="steal('"+(f.plugin||"jquery/view/"+b.type)+"').then(function($){$.View.preload('"+g+"',"+b.text+");\n})",c()});var j,k,l,m,n,o,p,r={val:!0,text:!0};j=function(a){var c=$.fn[a];$.fn[a]=function(){var f,h,j,e=b(arguments),i=this;if(g(e[0]))return e[0].done(function(a){k.call(i,[a],c)}),this;if(l(e)){if(f=o(e))return h=e[f],e[f]=function(a){k.call(i,[a],c),h.call(i,a)},d.apply(d,e),this;if(j=d.apply(d,e),g(j))return j.done(function(a){k.call(i,[a],c)
}),this;e=[j]}return r[a]?c.apply(this,e):k.call(this,e,c)}},k=function(a,b){var c,f;for(var g in d.hookups)break;return g&&a[0]&&m(a[0])&&(f=d.hookups,d.hookups={},a[0]=$(a[0])),c=b.apply(this,a),f&&p(a[0],f),c},l=function(a){var b=typeof a[1];return"string"==typeof a[0]&&("object"==b||"function"==b)&&!n(a[1])},n=function(a){return a.nodeType||a.jquery},m=function(a){return n(a)?!0:"string"==typeof a?(a=$.trim(a),"<"===a.substr(0,1)&&">"===a.substr(a.length-1,1)&&a.length>=3):!1},o=function(a){return"function"==typeof a[3]?3:"function"==typeof a[2]&&2
},p=function(a,b){var c,e,g,h,f=0;for(a=a.filter(function(){return 3!=this.nodeType}),c=a.add("[data-view-id]",a),e=c.length;e>f;f++)c[f].getAttribute&&(g=c[f].getAttribute("data-view-id"))&&(h=b[g])&&(h(c[f],g),delete b[g],c[f].removeAttribute("data-view-id"));$.extend(d.hookups,b)},$.fn.hookup=function(){var a=d.hookups;return d.hookups={},p(this,a),this},$.each(["prepend","append","after","before","text","html","replaceWith","val"],function(a,b){j(b)})}(),function(){var myEval=function(script){eval(script)
},rSplit=$.String.rsplit,extend=$.extend,isArray=$.isArray,returnReg=/\r\n/g,retReg=/\r/g,newReg=/\n/g,nReg=/\n/,slashReg=/\\/g,quoteReg=/"/g,singleQuoteReg=/'/g,tabReg=/\t/g,leftBracket=/\{/g,rightBracket=/\}/g,quickFunc=/\s*\(([\$\w]+)\)\s*->([^\n]*)/,clean=function(a){return a.replace(slashReg,"\\\\").replace(newReg,"\\n").replace(quoteReg,'\\"').replace(tabReg,"\\t")},escapeHTML=function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(quoteReg,"&#34;").replace(singleQuoteReg,"&#39;")
},$View=$.View,bracketNum=function(a){var b=a.match(leftBracket),c=a.match(rightBracket);return(b?b.length:0)-(c?c.length:0)},EJS=function(a){if(this.constructor!=EJS){var b=new EJS(a);return function(a,c){return b.render(a,c)}}return"function"==typeof a?(this.template={fn:a},void 0):(extend(this,EJS.options,a),this.template=compile(this.text,this.type,this.name),void 0)};$&&($.EJS=EJS),EJS.prototype.render=function(a,b){a=a||{},this._extra_helpers=b;var c=new EJS.Helpers(a,b||{});return this.template.fn.call(a,a,c)
},extend(EJS,{text:function(a){if("string"==typeof a)return a;if(null===a||void 0===a)return"";var b=a.hookup&&function(b,c){a.hookup.call(a,b,c)}||"function"==typeof a&&a||isArray(a)&&function(b,c){for(var d=0;d<a.length;d++)a[d].hookup?a[d].hookup(b,c):a[d](b,c)};return b?"data-view-id='"+$View.hookup(b)+"'":a.toString?a.toString():""},clean:function(a){return"string"==typeof a?escapeHTML(a):"number"==typeof a?a:EJS.text(a)},options:{type:"[",ext:".ejs"}});var scan=function(a,b,c){for(var d=rSplit(b,nReg),e=0;e<d.length;e++)scanline(a,d[e],c)
},scanline=function(a,b,c){a.lines++;for(var e,d=rSplit(b,a.splitter),f=0;f<d.length;f++)e=d[f],null!==e&&c(e,a)},makeScanner=function(a,b){var c={};return extend(c,{left:a+"%",right:"%"+b,dLeft:a+"%%",dRight:"%%"+b,eeLeft:a+"%==",eLeft:a+"%=",cmnt:a+"%#",cleanLeft:a+"%~",scan:scan,lines:0}),c.splitter=new RegExp("("+[c.dLeft,c.dRight,c.eeLeft,c.eLeft,c.cmnt,c.left,c.right+"\n",c.right,"\n"].join(")|(").replace(/\[/g,"\\[").replace(/\]/g,"\\]")+")"),c},compile=function(a,b){a=a.replace(returnReg,"\n").replace(retReg,"\n"),b=b||"[";
var d="___v1ew.push(",e=d,f="var ___v1ew = [];",g="return ___v1ew.join('')",h=new EJS.Buffer([f],[]),i="",j=function(a){h.push(d,'"',clean(a),'");')},k=null,l=function(){i=""},m="));",n=[];scan(makeScanner(b,"["===b?"]":">"),a||"",function(a,b){var c;if(null===k)switch(a){case"\n":i+="\n",j(i),h.cr(),l();break;case b.left:case b.eLeft:case b.eeLeft:case b.cmnt:k=a,i.length>0&&j(i),l();break;case b.dLeft:i+=b.left;break;default:i+=a}else switch(a){case b.right:switch(k){case b.left:c=bracketNum(i);var d=n.length&&-1==c?n.pop():";";
d===m&&h.push(g),h.push(i,d),1===c&&n.push(";");break;case b.eLeft:if(c=bracketNum(i),c&&n.push(m),quickFunc.test(i)){var o=i.match(quickFunc);i="function(__){var "+o[1]+"=$(__);"+o[2]+"}"}h.push(e,$.globalNamespace+".EJS.clean(",i,c?f:m);break;case b.eeLeft:c=bracketNum(i),c&&n.push(m),h.push(e,$.globalNamespace+".EJS.text(",i,c?f:m)}k=null,l();break;case b.dRight:i+=b.right;break;default:i+=a}}),i.length>0&&h.push(d,'"',clean(i)+'");');var o=h.close(),p={out:"try { with(_VIEW) { with (_CONTEXT) {"+o+" "+g+"}}}catch(e){e.lineNumber=null;throw e;}"};
return myEval.call(p,"this.fn = (function(_CONTEXT,_VIEW){ var $ = "+$.globalNamespace+";"+p.out+"});"),p};EJS.Buffer=function(a,b){this.line=[],this.script=[],this.post=b,this.push.apply(this,a)},EJS.Buffer.prototype={push:function(){this.line.push.apply(this.line,arguments)},cr:function(){this.script.push(this.line.join(""),"\n"),this.line=[]},close:function(){return this.line.length>0&&(this.script.push(this.line.join("")),this.line=[]),this.post.length&&this.push.apply(this,this.post),this.script.push(";"),this.script.join("")
}},EJS.Helpers=function(a,b){this._data=a,this._extras=b,extend(this,b)},EJS.Helpers.prototype={plugin:function(){var b=$.makeArray(arguments),c=b.shift();return function(a){var d=$(a);d[c].apply(d,b)}},view:function(a,b,c){return c=c||this._extras,b=b||this._data,$View(a,b,c)}},$View.register({suffix:"ejs",script:function(a,b){return $.globalNamespace+".EJS(function(_CONTEXT,_VIEW) { "+new EJS({text:b,name:a}).template.out+" })"},renderer:function(a,b){return EJS({text:b,name:a})}})}(),function(){var a=$.isArray,b=function(a){return"object"==typeof a&&null!==a&&a
},c=$.makeArray,d=$.each,e=function(b,c,d){return b instanceof $.Observe?f([b],d._namespace):b=a(b)?new $.Observe.List(b):new $.Observe(b),b.bind("change"+d._namespace,function(a){var f=$.makeArray(arguments),a=f.shift();f[0]="*"===c?d.indexOf(b)+"."+f[0]:c+"."+f[0],$.event.trigger(a,f,d)}),b},f=function(a,b){for(var c,d=0;d<a.length;d++)c=a[d],c&&c.unbind&&c.unbind("change"+b)},g=0,h=null,i=function(){return h?void 0:(h=[],!0)},j=function(a,b,c){return a._init?void 0:h?(h.push({t:a,ev:b,args:c}),void 0):$.event.trigger(b,c,a,!0)
},k=0,l=function(){var c,a=h.length,b=h.slice(0);h=null,k++;for(var d=0;a>d;d++)c=b[d],$.event.trigger({type:c.ev,batchNum:k},c.args,c.t)},m=function(a,c,d){return a.each(function(a,e){d[a]=b(e)&&"function"==typeof e[c]?e[c]():e}),d};$.Class($.globalNamespace+".Observe",{init:function(a){this._data={},this._namespace=".observe"+ ++g,this._init=!0,this.attrs(a),delete this._init},attr:function(a,b){return void 0===b?this._get(a):(this._set(a,b),this)},each:function(){return d.apply(null,[this.__get()].concat(c(arguments)))
},removeAttr:function(b){var c=a(b)?b:b.split("."),d=c.shift(),e=this._data[d];return c.length?e.removeAttr(c):(delete this._data[d],j(this,"change",[d,"remove",void 0,e]),e)},_get:function(b){var c=a(b)?b:(""+b).split("."),d=this.__get(c.shift());return c.length?d?d._get(c):void 0:d},__get:function(a){return a?this._data[a]:this._data},_set:function(c,d){var g=a(c)?c:(""+c).split("."),h=g.shift(),i=this.__get(h);if(b(i)&&g.length)i._set(g,d);else{if(g.length)throw"jQuery.Observe: set a property on an object that does not exist";
if(d!==i){var k=this.__get().hasOwnProperty(h)?"set":"add";this.__set(h,b(d)?e(d,h,this):d),j(this,"change",[h,k,d,i]),i&&f([i],this._namespace)}}},__set:function(a,b){this._data[a]=b,a in this.constructor.prototype||(this[a]=b)},bind:function(){return $.fn.bind.apply($([this]),arguments),this},unbind:function(){return $.fn.unbind.apply($([this]),arguments),this},serialize:function(){return m(this,"serialize",{})},attrs:function(a,c){if(void 0===a)return m(this,"attrs",{});a=$.extend(!0,{},a);var d,e=i();for(d in this._data){var f=this._data[d],g=a[d];
void 0!==g?(b(f)&&b(g)?f.attrs(g,c):f!=g&&this._set(d,g),delete a[d]):c&&this.removeAttr(d)}for(var d in a)g=a[d],this._set(d,g);e&&l()}});var n=$.Observe($.globalNamespace+".Observe.List",{init:function(a,b){this.length=0,this._namespace=".list"+ ++g,this._init=!0,this.bind("change",this.proxy("_changes")),this.push.apply(this,c(a||[])),$.extend(this,b),this.comparator&&this.sort(),delete this._init},_changes:function(a,b,c,d,e){if(this.comparator&&/^\d+./.test(b)){var f=+/^\d+/.exec(b)[0],g=this[f],h=this.sortedIndex(g);
if(h!==f)return[].splice.call(this,f,1),[].splice.call(this,h,0,g),j(this,"move",[g,h,f]),a.stopImmediatePropagation(),j(this,"change",[b.replace(/^\d+/,h),c,d,e]),void 0}-1===b.indexOf(".")&&("add"===c?j(this,c,[d,+b]):"remove"===c&&j(this,c,[e,+b]))},sortedIndex:function(a){for(var d,b=a.attr(this.comparator),c=0,d=0;d<this.length;d++)if(a!==this[d]){if(b<=this[d].attr(this.comparator))return d+c}else c=-1;return d+c},__get:function(a){return a?this[a]:this},__set:function(a,b){this[a]=b},serialize:function(){return m(this,"serialize",[])
},splice:function(a,d){var h,g=c(arguments);for(h=2;h<g.length;h++){var i=g[h];b(i)&&(g[h]=e(i,"*",this))}void 0===d&&(d=g[1]=this.length-a);var k=[].splice.apply(this,g);return d>0&&(j(this,"change",[""+a,"remove",void 0,k]),f(k,this._namespace)),g.length>2&&j(this,"change",[""+a,"add",g.slice(2),k]),k},attrs:function(a,c){if(void 0===a)return m(this,"attrs",[]);a=a.slice(0);for(var d=Math.min(a.length,this.length),e=i(),f=0;d>f;f++){var g=this[f],h=a[f];b(g)&&b(h)?g.attrs(h,c):g!=h&&this._set(f,h)}a.length>this.length?this.push(a.slice(this.length)):a.length<this.length&&c&&this.splice(a.length),e&&l()
},sort:function(a,b){{var c=this.comparator,d=c?[function(a,b){return a=a[c],b=b[c],a===b?0:b>a?-1:1}]:[];[].sort.apply(this,d)}!b&&j(this,"reset")}}),o=function(a){return a[0]&&$.isArray(a[0])?a[0]:c(a)};d({push:"length",unshift:0},function(a,c){n.prototype[a]=function(){for(var d=o(arguments),f=c?this.length:0,g=0;g<d.length;g++){var h=d[g];b(h)&&(d[g]=e(h,"*",this))}if(1==d.length&&this.comparator){var i=this.sortedIndex(d[0]);return this.splice(i,0,d[0]),this.length}var k=[][a].apply(this,d);return this.comparator&&d.length>1?(this.sort(null,!0),j(this,"reset",[d])):j(this,"change",[""+f,"add",d,void 0]),k
}}),d({pop:"length",shift:0},function(a,b){n.prototype[a]=function(){var c=o(arguments),d=b&&this.length?this.length-1:0,e=[][a].apply(this,c);return j(this,"change",[""+d,"remove",void 0,[e]]),e&&e.unbind&&e.unbind("change"+this._namespace),e}}),n.prototype.indexOf=[].indexOf||function(a){return $.inArray(a,this)},$.O=function(b,c){return a(b)||b instanceof $.Observe.List?new $.Observe.List(b,c):new $.Observe(b,c)}}()}),FD40.plugin("joomla",function(a){var b={squeezebox:function(){return c.isJoomla15?window.parent.document.getElementById("sbox-window"):window.parent.SqueezeBox
}},c=a.Joomla=function(d,e){if(a.isFunction(e)){var f=e;return c.isJoomla15?window[d]=f:window.Joomla[d]=f,void 0}var d=b[d]||(c.isJoomla15?window[d]:window.Joomla[d]);return a.isFunction(d)?d.apply(window,e):void 0},d=parseFloat(a.joomla.version);c.isJoomla15=1.5>=d,c.isJoomla25=d>=1.6&&2.5>=d,c.isJoomla30=d>=3}),FD40.plugin("module",function(a){var b=function(b){var c=this,d=a.Callbacks("once memory");a.extend(this,a.Deferred(),{name:b,status:"pending",ready:function(b){b===!0&&d.fire.call(c,a),a.isFunction(b)&&d.add(b)
}}),c.then(function(){c.exports=this,c.status="resolved"},function(){c.status="rejected"});var e=c.done;c.done=function(){c.required=!0;var b=c.factory;return b&&"ready"===c.status&&b.call(c,a),c.done=e,c.done.apply(this,arguments)}};a.module=function(){var c=function(b,d){var e;if("string"==typeof b){if(e=c.get(b),void 0===d)return e;if(a.isFunction(d))return"resolved"==e.status?e:(e.factory=d,e.status="ready",e.ready("true"),e.required&&(e.status="executing",d.call(e,a)),e)}if(a.isArray(b)){var f=a.map(b,function(b){var d=c.get(a.isString(b)?b:b.name);
if(d)return"pending"===d.status&&(d.status="ready"),a.isPlainObject(b)?b:void 0});a.each(f,function(a,b){c(b.name,b.factory)})}};return a.extend(c,{registry:{},get:function(b){return b?(a.isModule(b)&&(b=b.replace("module://","")),c.registry[b]||c.create(b)):void 0},create:function(a){return c.registry[a]=new b(a)},remove:function(a){delete c.registry[a]}}),c}(),a.isModule=function(c){return a.isString(c)?!!c.match("module://"):c&&c instanceof b}}),FD40.plugin("script",function(a){a.Script=function(b){var c=document.createElement("script");
return c.text=a.isString(b)?b:a.callback(b)+"();",a(c)},a.script=function(){{var b=function(a){if(void 0!==a){"string"==typeof a&&(a={url:a});var b=new c(a);return b}},c=function(b){var c=a.extend(this,b);c.manager=a.Deferred(),a.extend(c,c.manager.promise()),c.load()},d=document.getElementsByTagName("head")[0];document.getElementsByTagName("base")[0]}return a.extend(c.prototype,{timeout:7e3,retry:3,retryCount:1,type:"text/javascript",async:!1,charset:"UTF-8",verbose:!1,head:d,insert:function(){var a=this.node;
this.head.appendChild(a)},remove:function(){var a=this.node;setTimeout(function(){a.onload=a.onerror=a.onreadystatechange=null;try{d.removeChild(a)}catch(b){}},1e3)},load:function(){var c,b=this;b.endTime=void 0,b.startTime=new Date,b.node=c=document.createElement("script"),b.insert(),b._ready=a.proxy(b.ready,b),b._error=a.proxy(b.error,b),c.attachEvent&&!a.browser.opera?(c.attachEvent("onreadystatechange",b._ready),c.attachEvent("onerror",b._error)):(c.addEventListener("load",b._ready,!1),c.addEventListener("error",b._error,!1)),a(c).attr({type:b.type,async:b.async,charset:b.charset,src:b.url}),b.monitor()
},monitor:function(){var a=this;return a.retryCount>a.retry?(a._error(),void 0):(setTimeout(function(){"resolved"!==a.state()&&(a.verbose&&console.warn("$.script: Load timeout. [Retry: "+a.retryCount+"]",a),a.remove(),a.retryCount++,a.load())},a.timeout*a.retryCount),void 0)},ready:function(a){var b=this,c=b.node;("load"===a.type||/loaded|complete/.test(c.readyState))&&(b.complete.call(b,a),b.manager.resolve(b))},error:function(a){var b=this;b.verbose&&console.error("$.script: Unable to load ",b),b.complete.call(b,a),b.remove(),b.manager.reject(b)
},complete:function(){var c=this,d=c.node;c.endTime=new Date,d.detachEvent&&!a.browser.opera?(d.detachEvent("onreadystatechange",c._ready),d.detachEvent("onerror",c._error)):(d.removeEventListener("load",c._ready,!1),d.removeEventListener("error",c._error,!1))}}),b}()}),FD40.plugin("stylesheet",function(a){var b=document.getElementsByTagName("head")[0],c=document.styleSheets,d=document.createStyleSheet,e=31,f=31,g=4095;a.stylesheet=function(){var h=function(b,c){var d={};return a.extend(d,h.defaultOptions,a.isPlainObject(b)?b:{url:b,attr:c||{}}),void 0===d.url?h.create(d):h.load(d)
};return a.extend(h,{defaultOptions:{type:"text/css",rel:"stylesheet",media:"all",title:"",forceInject:!1,xhr:!1},setup:function(b){a.extend(h.defaultOptions,b)},availability:function(){var b={},c=a('link[rel*="stylesheet"]');return styles=a("style"),b.groups=e-c.length-styles.length,b.slots=b.groups*f,h.currentGroup&&(b.slots+=f-h.currentGroup.imports.length),b},get:function(a){for(var b=0;b<c.length;b++){var d=c[b];if((d.ownerNode||d.owningElement)==a)return d}},create:function(f){var g,h,i=c.length;if(d){if(i>=e)return;
g=document.createStyleSheet(),h=g.ownerNode||g.owningElement}else h=document.createElement("style"),b.appendChild(h);a.extend(h,{type:f.type,title:f.title,media:f.media,rel:f.rel});var j=f.content;return void 0!==j&&(d?g.cssText=j:h.appendChild(document.createTextNode(j))),h},nextAvailable:function(a){var b,e=c.length;if(e){var f;for(f=e;f--;0>f){b=c[f];{if(!(d&&(b.cssRules||b.rules).length>=g))break;b=void 0}}}return b.ownerNode||b.owningElement||(a?h():void 0)},load:function(b){if(a.browser.msie&&!b.forceInject)return h._import(b);
var c=a("<link>").attr({href:b.url,type:b.type,rel:b.rel,media:b.media}).appendTo("head");return c[0]},_import:function(a){var b;if(void 0===h.currentGroup){var c;try{c=document.createStyleSheet(),c.media="all",c.title="jquery_stylesheet"}catch(d){b=!0,a.verbose&&console.error("There is not enough slots left to create a new stylesheet group.")}if(b)return!1;h.currentGroup=c}try{h.currentGroup.addImport(a.url)}catch(d){b=!0,a.verbose&&console.info("Import slots exceeded. Creating a new stylesheet group.")}return b?(h.currentGroup=void 0,h._import(a)):!0
}}),h}(),function(){var b=function(b,c,d){a.extend(this,{id:a.uid(),style:d,selectors:[],preRule:"",rules:{},legacy:8===a.IE,important:!1}),b&&this.set(b,c)};a.extend(b.prototype,{set:function(b,c){return this.selectors=a.isString(b)?b.split(","):b,a.isString(c)?(this.preRule=c+"\n",this.rules={}):(this.preRule="",this.rules=c||this.rules),this.update(),this},cssText:function(){return this.selectors.join(",")+"{"+this.ruleText()+"}\n"},ruleText:function(){var b=this.important;return this.preRule+(this.legacy?"-rule-id:"+this.id+";":"")+a.map(this.rules,function(c,d){return a.isNumeric(c)&&!a.cssNumber[d]&&(c+="px"),b&&(c+=" !important"),d+":"+c
}).join(";")},update:function(){if(this.legacy)return this.updateLegacy();var a=this.cssText();return void 0===this.textNode?(this.textNode=document.createTextNode(a),this.style.appendChild(this.textNode)):this.textNode.nodeValue=a,this},updateLegacy:function(){this.removeLegacy();for(var b=a.stylesheet.get(this.style),c=this.selectors,d=this.ruleText(),e=0;e<c.length;e++)b.addRule(c[e],d);return this},remove:function(){return this.legacy?this.removeLegacy():(void 0!==this.textNode&&(this.style.removeChild(this.textNode),delete this.textNode),this)
},removeLegacy:function(){for(var b=a.stylesheet.get(this.style),c=b.rules,d=0;d<c.length;d++)null!==c[d].cssText.match(this.id)&&b.removeRule(d);return this},css:function(b,c){return a.isString(b)&&void 0===c?this.rules[b]:(a.isPlainObject(b)?a.extend(this.rules,b):this.rules[b]=c,this.update(),this)}});var c=a.cssRule=function(d,e,f){var f=f||c.style||a.stylesheet.nextAvailable(!0);if(f)return new b(d,e,f)};c.style=a.stylesheet()}(),function(){a.cssUrl=function(a){return'url("'+encodeURI(a)+'")'}}()}),FD40.plugin("language",function(a){a.sprintf=function(){var a=/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuidfegEG])/g,b=arguments,c=0,d=b[c++],e=function(a,b,c,d){c||(c=" ");
var e=a.length>=b?"":Array(1+b-a.length>>>0).join(c);return d?a+e:e+a},f=function(a,b,c,d,f,g){var h=d-a.length;return h>0&&(a=c||!f?e(a,d,g,c):a.slice(0,b.length)+e("",h,"0",!0)+a.slice(b.length)),a},g=function(a,b,c,d,g,h,i){var j=a>>>0;return c=c&&j&&{2:"0b",8:"0",16:"0x"}[b]||"",a=c+e(j.toString(b),h||0,"0",!1),f(a,c,d,g,i)},h=function(a,b,c,d,e,g){return null!=d&&(a=a.slice(0,d)),f(a,"",b,c,e,g)},i=function(a,d,i,j,k,l,m){var n,o,p,q,r;if("%%"==a)return"%";for(var s=!1,t="",u=!1,v=!1,w=" ",x=i.length,y=0;i&&x>y;y++)switch(i.charAt(y)){case" ":t=" ";
break;case"+":t="+";break;case"-":s=!0;break;case"'":w=i.charAt(y+1);break;case"0":u=!0;break;case"#":v=!0}if(j=j?"*"==j?+b[c++]:"*"==j.charAt(0)?+b[j.slice(1,-1)]:+j:0,0>j&&(j=-j,s=!0),!isFinite(j))throw new Error("sprintf: (minimum-)width must be finite");switch(l=l?"*"==l?+b[c++]:"*"==l.charAt(0)?+b[l.slice(1,-1)]:+l:"fFeE".indexOf(m)>-1?6:"d"==m?0:void 0,r=d?b[d.slice(0,-1)]:b[c++],m){case"s":return h(String(r),s,j,l,u,w);case"c":return h(String.fromCharCode(+r),s,j,l,u);case"b":return g(r,2,v,s,j,l,u);case"o":return g(r,8,v,s,j,l,u);
case"x":return g(r,16,v,s,j,l,u);case"X":return g(r,16,v,s,j,l,u).toUpperCase();case"u":return g(r,10,v,s,j,l,u);case"i":case"d":return n=0|+r,o=0>n?"-":t,r=o+e(String(Math.abs(n)),l,"0",!1),f(r,o,s,j,u);case"e":case"E":case"f":case"F":case"g":case"G":return n=+r,o=0>n?"-":t,p=["toExponential","toFixed","toPrecision"]["efg".indexOf(m.toLowerCase())],q=["toString","toUpperCase"]["eEfFgG".indexOf(m)%2],r=o+Math.abs(n)[p](l),f(r,o,s,j,u)[q]();default:return a}};return d.replace(a,i)};var b=a.language=a.JText=function(a){return arguments.length<2?b._(a):b.sprintf.apply(null,arguments)
};a.extend(b,{lang:{},add:function(c,d){a.isPlainObject(c)?a.extend(b.lang,c):b.lang[c]=d},remove:function(a){delete b.lang[a]},_:function(a){return b.lang.hasOwnProperty(a)?b.lang[a]:a},sprintf:function(){var c=arguments[0];return arguments[0]=b.lang[c],a.sprintf.apply(null,arguments)}})}),FD40.plugin("template",function(a){a.template=function(){var b={content:"",type:"ejs"},c=function(d,e){if(void 0===d)return c.templates;var f;return"string"==typeof e?(f=a.isPlainObject(e)?e:a.extend({},b,{name:d,content:e}),c.templates[d]=f,f):(f=c.templates[d]||{},f.content||"")
};return a.extend(c,{templates:{},remove:function(a){delete c.templates[a]}}),c}()}),FD40.plugin("require",function(a){a.require=function(){var b=function(b){return a.uri(b).setAnchor("").setQuery("").toPath("../").toString()},c=function(a){var b=new e(a);return c.batches[b.id]=b,b};a.extend(c,{defaultOptions:{path:function(){var c=a.path+"/scripts/"||a("[require-path]").attr("require-path")||b(a("script:last").attr("src"))||b(window.location.href);return/^(\/|\.)/.test(c)&&(c=a.uri(window.location.href).toPath(c).toString()),c
}(),timeout:1e4,retry:3,verbose:"development"==a.environment},setup:function(b){a.extend(c.defaultOptions,b)},batches:{},status:function(b){return a.each(c.batches,function(c,d){var e={pending:0,resolved:0,rejected:0,ready:0,total:0},f=[];a.each(d.tasks,function(a,b){state=b.module&&"ready"==b.module.status?"ready":b.state(),e[state]++,e.total++,f.push({state:state,content:"["+state+"] "+b.name})});var g=d.id+": "+d.state()+" ["+e.resolved+"/"+e.total+"]";b&&e[b]<1||(a.IE?(console.log('$.require.batches["'+d.id+'"]'),a.each(f,function(a,b){console.log(b.content)
}),console.log("")):(console.groupCollapsed(g),console.log('$.require.batches["'+d.id+'"]',d),a.each(f,function(a,c){var d=c.state,e=c.content;if(!b||d==b)switch(d){case"pending":console.warn(e);break;case"rejected":console.error(e);break;default:console.info(e)}}),console.groupEnd(g)))}),"$.require.status(pending|resolved|rejected|ready);"},loaders:{},addLoader:function(a,b){c[a]=b,e.prototype[a]=function(){var a=this;return a.autoFinalize(),b.apply(a,arguments),a},c.loaders[a]=c[a]=b},removeLoader:function(a){delete e.prototype[a],delete c[a]
}});var d=0,e=function(b){var e=a.Callbacks("once memory"),f=!1,g=a.extend(this,{id:++d,tasks:[],options:a.extend({},c.defaultOptions,b),autoFinalizeDuration:300,finalized:!1,required:function(b){return b===!0&&(f=!0&&e.fire()),a.isFunction(b)&&e.add(b),f}});return g};return a.extend(e.prototype,{addTask:function(b){var c=this;a.isDeferred(b)&&(c.finalized||(c.tasks.push(b),b.batch=c))},autoFinalize:function(){var a=this,b=a.autoFinalizeDuration;b!==!1&&(clearTimeout(a.autoFinalizeTimer),a.autoFinalizeTimer=setTimeout(function(){a.finalize()
},b))},finalize:function(){var b=this;if(!b.finalized){b.finalized=!0;var c=b.manager=a.when.apply(null,b.tasks),d=c.promise(),e=a.Callbacks();a.extend(b,d,{progress:e.add,notify:e.fire,done:function(){return b.required(!0),b.done=d.done,b.done.apply(b,arguments)}});var f=b.options.verbose;c.progress(function(a,b){f&&"rejected"==a&&console.warn("Require: Task "+b.name+" failed to load.",b)}).fail(function(){f&&console.warn("Require: Batch "+b.id+" failed.",b)}),setTimeout(function(){a.each(b.tasks,function(a,c){c.then(function(){b.notify("resolved",c)
},function(){b.notify("rejected",c)},function(){b.notify("progress",c)})})},1)}},expand:function(b,c){var b=a.makeArray(b),d=c||{},e=[];return a.isPlainObject(b[0])?(d=a.extend(b[0],c),e=b.slice(1)):e=b,{options:d,names:e}}}),a.each(["done","fail","progress","always","then"],function(a,b){e.prototype[b]=function(){var a=this;return a.finalize(),a[b].apply(a,arguments)}}),c}(),a.require.addLoader("script",function(){var b=a.uri(a.indexUrl).host(),c=a.uri(document.location.href).host();b!==c&&b.match("xn--")&&(a.support.cors=!0);
var e=(document.createElement("script").async===!0||"MozAppearance"in document.documentElement.style||window.opera,function(){var d,f,b=this,c=a.makeArray(arguments);a.isPlainObject(c[0])?(d=c[0],f=c.slice(1)):f=c,d=a.extend({},e.defaultOptions,b.options,d,{batch:b});var g;a.each(f,function(a,c){var f=new e.task(c,d,g);b.addTask(f),d.serial&&void 0!==g?g.always(f.start):f.start(),g=f})});return a.extend(e,{defaultOptions:{path:"",extension:"compressed"==a.mode?"min.js":"js",serial:!1,async:!1,xhr:!1},setup:function(){a.extend(e.defaultOptions,options)
},scripts:{},task:function(b,c,d){var e=a.extend(this,a.Deferred());if(e.name=b,e.options=c,e.taskBefore=d,a.isArray(b)){e.name=b[0]+"@"+b[1],e.moduleName=b[0];var f=b[2];f||(e.defineModule=!0,a.module.registry[e.moduleName]&&console.warn("$.require.script: "+e.moduleName+" exists! Using existing module instead."),e.options.xhr=!0),b=b[1],e.module=a.module(e.moduleName)}a.isUrl(b)?e.url=b:/^(\/|\.)/.test(b)?e.url=a.uri(e.options.path).toPath(b).toString():(e.url=a.uri(e.options.path).toPath("./"+b+"."+e.options.extension).toString(),e.module=a.module(b))
}}),a.extend(e.task.prototype,{start:function(){var a=this,b=a.module;return b&&"pending"!==b.status?(a.waitForModule(),void 0):(a.load(),void 0)},waitForModule:function(){var a=this,b=a.module;b.then(a.resolve,a.reject,a.notify),a.batch.required(function(){b.done(a.resolve)})},load:function(){var b=this,c=b.taskBefore;b.script=e.scripts[b.url]||function(){var c=b.options.xhr?a.ajax({url:b.url,dataType:"text"}):a.script({url:b.url,type:"text/javascript",async:b.options.async,timeout:b.batch.options.timeout,retry:b.batch.options.retry,verbose:b.batch.options.verbose});
return e.scripts[b.url]=c}(),b.script.done(function(d){var e=function(){b.module?b.waitForModule():b.resolve()};return b.options.xhr&&(b.defineModule&&(b.module=a.module(b.moduleName,function(){var b=this;a.globalEval(d),b.resolveWith(d)})),!b.options.async||c)?(c.done(function(){a.globalEval(d),e()}),void 0):(e(),void 0)}).fail(function(){b.reject()})}}),e}()),a.require.addLoader("stylesheet",function(){var b=function(){var e,f,c=this,d=a.makeArray(arguments);a.isPlainObject(d[0])?(e=d[0],f=d.slice(1)):f=d,e=a.extend({},b.defaultOptions,c.options,{path:a.path+"/styles/"},e,{batch:c}),a.each(f,function(a,d){var f=new b.task(d,e),g=b.stylesheets[f.url];
f=g||f,c.addTask(f),g||(b.stylesheets[f.url]=f,f.start())})};return a.extend(b,{defaultOptions:{path:"",extension:"compressed"==a.mode?"min.css":"css",xhr:!1},setup:function(){a.extend(b.defaultOptions,options)},stylesheets:{},task:function(b,c){var d=a.extend(this,a.Deferred());d.name=b,d.options=c,d.url=a.isUrl(b)?b:/^(\/|\.)/.test(b)?a.uri(d.options.path).toPath(b).toString():a.uri(d.options.path).toPath("./"+b+"."+d.options.extension).toString(),d.options.url=d.url},loaders:{},loader:function(c){if(a.isArray(c))return a.map(c,function(a){return b.loader(a)
});if(a.isPlainObject(c))return a.map(c,function(a,c){return b.loader(a).resolve(c)});var d=b.loaders[c];return d||(d=b.loaders[c]=a.Deferred().done(function(b){a.isPlainObject(b)||a.stylesheet(b)})),d}}),a.extend(b.task.prototype,{start:function(){var c=this,d=b.loaders[c.name];d||(d=b.loader(c.name),a.stylesheet(c.options)?d.resolve():d.reject()),d.then(c.resolve,c.reject)}}),b}()),a.require.addLoader("template",function(){var b=function(){var e,f,c=this,d=a.makeArray(arguments);a.isPlainObject(d[0])?(e=d[0],f=d.slice(1)):f=d,e=a.extend({},b.defaultOptions,c.options,e,{batch:c}),a.each(f,function(a,d){var f=new b.task(d,e);
c.addTask(f),f.start()})};return a.extend(b,{defaultOptions:{path:"",extension:"htm"},setup:function(){a.extend(b.defaultOptions,options)},task:function(b,c){var d=a.extend(this,a.Deferred());d.name=b,d.options=c,a.isArray(b)&&(d.name=b[0],b=b[1]),d.url=a.isUrl(b)?b:/^(\/|\.)/.test(b)?a.uri(d.options.path).toPath(b).toString():a.uri(d.options.path).toPath("./"+b+"."+d.options.extension).toString()},loaders:{},loader:function(c){if(a.isArray(c))return a.map(c,function(a){return b.loader(a)});if(a.isPlainObject(c))return a.map(c,function(a,c){return b.loader(c).resolve(a)
});var d=b.loaders[c];return d||(d=b.loaders[c]=a.Deferred().done(function(b){a.template(c,b)})),d}}),a.extend(b.task.prototype,{start:function(){var c=this,d=b.loaders[c.name];return d||(d=b.loader(c.name),d.xhr=a.Ajax({url:c.url,dataType:"text"}).then(d.resolve,d.reject).then(c.resolve,c.reject)),c.loader=d,c}}),b}()),a.require.addLoader("language",function(){var b=function(){var e,f,c=this,d=a.makeArray(arguments);a.isPlainObject(d[0])?(e=d[0],f=d.slice(1)):f=d,e=a.extend({},b.defaultOptions,c.options,e,{batch:c});
var g=new b.task(f,e);c.addTask(g),g.start()};return a.extend(b,{defaultOptions:{path:""},setup:function(){a.extend(b.defaultOptions,options)},loaders:{},task:function(b,c){var d=a.extend(this,a.Deferred());d.name=b.join(","),d.options=c,d.url=c.path,d.names=b},loaders:{},loader:function(c){if(a.isArray(c))return a.map(c,function(a){return b.loader(a)});if(a.isPlainObject(c))return a.map(c,function(a,c){return b.loader(c).resolve(a)});var d=b.loaders[c];return d||(d=b.loaders[c]=a.Deferred().done(function(b){a.language.add(c,b)
})),d}}),a.extend(b.task.prototype,{start:function(){var c=this,d=[],e=a.map(c.names,function(a){var c=b.loader(a);return c.push(c),/resolved|rejected/.test(c.state())?null:a});return c.fail(function(){a.each(e,function(a,c){b.loader(c).reject()})}),a.when.apply(null,d).then(c.resolve,c.reject),e.length<1?c:(c.xhr=a.Ajax({url:c.url,type:"POST",data:{keys:e}}).done(function(d){a.isPlainObject(d)?b.loader(d):c.reject()}).fail(function(){c.reject()}),c)}}),b}()),a.require.addLoader("library",function(){var e,b=this,c=a.makeArray(arguments),d={};
return a.isPlainObject(c[0])?(d=c[0],e=c.slice(1)):e=c,a.extend(d,{path:a.scriptPath}),b.script.apply(b,[d].concat(e))}),a.require.addLoader("image",function(){var b=function(){var e,f,c=this,d=a.makeArray(arguments);a.isPlainObject(d[0])?(e=d[0],f=d.slice(1)):f=d,e=a.extend({},b.defaultOptions,c.options,e,{batch:c}),a.each(f,function(a,d){var f=new b.task(d,e),g=b.images[f.url];f=g||f,c.addTask(f),g||(b.images[f.url]=f,f.start())})};return a.extend(b,{defaultOptions:{path:""},setup:function(){a.extend(b.defaultOptions,options)
},images:{},task:function(b,c){var d=a.extend(this,a.Deferred());d.name=b,d.options=c,d.url=a.isUrl(b)?b:/^(\/|\.)/.test(b)?a.uri(d.options.path).toPath(b).toString():a.uri(d.options.path).toPath("./"+b).toString(),d.options.url=d.url}}),a.extend(b.task.prototype,{start:function(){var b=this;b.image=a(new Image).load(function(){b.resolve()}).error(function(){b.reject()}).attr("src",b.options.url)}}),b}())}),FD40.plugin("iframe-transport",function(a){a.ajaxPrefilter(function(a){return a.iframe?"iframe":void 0
}),a.ajaxTransport("iframe",function(b){function k(){i&&j.replaceWith(function(a){return h.get(a)}),e.remove(),f.attr("src","javascript:false;").remove()}var e=null,f=null,g="iframe-"+a.now(),h=a(b.files).filter(":file:enabled"),i=h.length>0,j=null;return b.dataTypes.shift(),e=a("<form enctype='multipart/form-data' method='post'></form>").hide().attr({action:b.url,target:g}),"string"==typeof b.data&&b.data.length>0&&a.error("data must not be serialized"),a.each(b.data||{},function(b,c){a.isPlainObject(c)&&(b=c.name,c=c.value),a.isArray(c)||(c=[c]),a.each(c,function(c,d){a("<input type='hidden' />").attr({name:b,value:d}).appendTo(e)
})}),a("<input type='hidden' value='IFrame' name='X-Requested-With' />").appendTo(e),i&&(j=h.after(function(){return a(this).clone().prop("disabled",!0)}).next(),h.appendTo(e)),{send:function(b,c){f=a("<iframe src='javascript:false;' name='"+g+"' id='"+g+"' style='display:none'></iframe>"),f.bind("load",function(){f.unbind("load").bind("load",function(){var a=this.contentWindow?this.contentWindow.document:this.contentDocument?this.contentDocument:this.document,b=a.documentElement?a.documentElement:a.body,d=b.getElementsByTagName("textarea")[0],e=d?d.getAttribute("data-type"):null,f=d?d.getAttribute("data-status"):200,g=d?d.getAttribute("data-statusText"):"OK",h={html:b.innerHTML,text:e?d.value:b?b.textContent||b.innerText:null};
k(),c(f,g,h,e?"Content-Type: "+e:null)}),e[0].submit()}),a("body").append(e,f)},abort:function(){null!==f&&(f.unbind("load").attr("src","javascript:false;"),k())}}})}),FD40.plugin("server",function($){var self=$.server=function(a){var b=$.Deferred(),c=$.extend(!0,{},self.defaultOptions,a,{success:function(){}}),d=b.xhr=$.Ajax(c).done(function(c){if("string"==typeof c)try{c=$.parseJSON(c)}catch(d){b.rejectWith(b,["Unable to parse Ajax commands.","error"])}if($.isArray(c)){var e=function(c){var d=c.type,e=self.parsers[d]||a[d];
return $.isFunction(e)?e.apply(b,c.data):void 0},c=$.map(c,function(a){return"notify"!=a.type?a:(e(a),void 0)});$.each(c,function(a,b){e(b)})}else b.rejectWith(b,["Invalid ajax commands.","error"]);"pending"===b.state()&&b.resolveWith(b)}).fail(function(a,c,d){b.rejectWith(b,[d,c])});return b.abort=d.abort,b};self.defaultOptions={type:"POST",data:{tmpl:"component",format:"ajax",no_html:1},cache:!1,contentType:"application/x-www-form-urlencoded",dataType:"json"},self.parsers={script:function(){var data=$.makeArray(arguments);
if("string"!=typeof data[0]){var chain=window,chainBroken=!1;$.each(data,function(a,b){"Foundry"===b.property&&(b.property=$.globalNamespace),"Foundry"===b.method&&(b.method=$.globalNamespace);try{switch(b.type){case"get":chain=chain[b.property];break;case"set":chain[b.property]=b.value,chainBroken=!0;break;case"call":chain=chain[b.method].apply(chain,b.args)}}catch(c){chainBroken=!0}})}else try{eval(data[0])}catch(err){}},resolve:function(){this.resolveWith(this,arguments)},reject:function(){this.rejectWith(this,arguments)
},notify:function(){this.notifyWith(this,arguments)},redirect:function(a){window.location=a}}}),FD40.plugin("component",function(a){var b=a.Component=function(a,c){return arguments.length<1?b.registry:arguments.length<2?b.registry[a]:b.register(a,c)};b.registry={},b.proxy=function(b,c,d){b[c]=a.isFunction(d)?a.proxy(d,b):d},b.register=function(c,d){var e;a.isFunction(c)&&(e=c,c=e.className,d=e.options);var f=b.registry[c]=window[c]=function(b){return a.isFunction(b)?b(a):component};if(a.each(b.prototype,function(a,c){b.proxy(f,a,c)
}),f.$=a,f.options=d,f.className=c,f.identifier=c.toLowerCase(),f.componentName="com_"+f.identifier,f.prefix=f.identifier+"/",f.version=d.version,f.safeVersion=f.version.replace(/\./g,""),f.environment=d.environment||a.environment,f.mode=d.mode||a.mode,f.debug="development"===f.environment,f.console=b.console(f),f.language=d.language||a.locale.lang||"en",f.baseUrl=d.baseUrl||a.indexUrl+"?option="+f.componentName,f.ajaxUrl=d.ajaxUrl||a.basePath+"/?option="+f.componentName,f.scriptPath=d.scriptPath||a.rootPath+"/media/"+f.componentName+"/scripts/",f.stylePath=d.stylePath||a.rootPath+"/media/"+f.componentName+"/styles/",f.templatePath=d.templatePath||d.scriptPath,f.languagePath=d.languagePath||f.ajaxUrl+"&tmpl=component&no_html=1&controller=lang&task=getLanguage",f.viewPath=d.viewPath||f.ajaxUrl+"&tmpl=component&no_html=1&controller=themes&task=getAjaxTemplate",f.optimizeResources=!0,f.resourcePath=d.resourcePath||f.ajaxUrl+"&tmpl=component&no_html=1&controller=foundry&task=getResource",f.resourceInterval=1200,f.scriptVersioning=d.scriptVersioning||!1,f.tasks=[],FD40.component(c,f),e){if(f.debug)e.queue.execute();
else{for(var g,h=FD40.installer(c);g=h.shift();)f.install.apply(f,g);a.when(f.install("definitions"),f.install("scripts"),f.install("resources")).done(function(){e.queue.execute()})}var i=f.storage=function(b,c){var d=f.prefix,b=d+b,e=arguments.length;return 1==e?a.Storage.get(b):2==e?b===!1?a.Storage.remove(d+c):a.Storage.set(b,c):i.getAll()};a.extend(f.storage,{getAll:function(){var b=f.prefix,c=b.length,d=a.Storage.getAll(),e={};for(key in d)key.substr(0,c)==b&&(e[key.substr(c)]=d[key]);return e},remove:function(b){a.Storage.remove(f.prefix+b)
},clear:function(){for(key in i.getAll())i.remove(key)}})}},b.extend=function(c,d){b.prototype[c]=d,a.each(b.registry,function(a,e){b.proxy(e,c,d)})},a.template("component/console",'<div id="[%== component.identifier %]-console" class="foundry-console" style="display: none; z-index: 999999;"><div class="console-header"><div class="console-title">[%= component.className %] [%= component.version %]</div><div class="console-remove-button">x</div></div><div class="console-log-item-group"></div><style type="text/css">.foundry-console{position:fixed;width:50%;height:50%;bottom:0;left:0;background:white;box-shadow: 0 0 5px 0;margin-left: 25px;}.console-log-item-group{width: 100%;height: 100%;overflow-y:scroll;}.console-header{position: absolute;background:red;color:white;font-weight:bold;top:-24px;left: 0;line-height:24px;width:100%}.console-remove-button{text-align:center;cursor: pointer;display:block;width: 24px;float:right}.console-remove-button:hover{color: yellow}.console-title{padding: 0 5px;float:left}.console-log-item{padding: 5px}.console-log-item + .console-log-item{border-top: 1px solid #ccc}</style></div>'),b.console=function(b){return function(b){var d,c=function(a){return arguments.length<1?c.toggle():c[a]&&c[a].apply(c,arguments)
};return c.selector="#"+b.identifier+"-console",c.init=function(){return d=a(c.selector),d.length<1&&(d=a(a.View("component/console",{component:b})).appendTo("body"),d.find(".console-remove-button").click(function(){d.hide()})),c.element=d,arguments.callee},c.methods={log:function(c,e,f){e=e||"info";var g=d.find(".console-log-item-group"),h=a(document.createElement("div")).addClass("console-log-item type-"+e).attr("data-code",f).html(c);g.append(h),g[0].scrollTop=g[0].scrollHeight,b.debug&&d.show()},toggle:function(){d.toggle()
},reset:function(){d.find(".console-log-item-group").empty()}},a.each(c.methods,function(a,b){c[a]=function(){return c.init(),b.apply(c,arguments)}}),c}(b)};var c=a(document),d=b.prototype;a.extend(d,{run:function(b){return a.isFunction(b)?b(a):this},ready:function(){return c.ready(function(){d.ready=d.run}),function(b){a.isFunction(b)&&c.ready(function(){b(a)})}}(),install:function(b,c){var d=this,e=d.tasks[b]||(d.tasks[b]=a.Deferred());if(!c)return e;var f=function(){return c(a,d),e.resolve()};return"definitions"==b?f():(a.when(d.install("definitions")).done(f),void 0)
},token:function(){var b=this;if(b.token.value)return b.token.value;var c=b.identifier,d="span#"+c+"-token input",e='meta[name="'+c+':token"]',f=a(d).attr("name")||a(e).attr("content");return b.token.value=f},template:function(b){var c=this;return void 0==b?a.grep(a.template(),function(a){return 0==a.indexOf(c.prefix)}):(arguments[0]=c.prefix+b,a.template.apply(null,arguments))},require:function(b){var c=this,b=b||{},d=a.require(b),e={};return a.each(["library","script","language","template","done"],function(a,b){e[b]=d[b]
}),d.resource=function(b){if(a.isPlainObject(b)&&b.type&&b.name&&a.isDeferred(b.loader)){var f=c.resourceCollector;f||(f=c.resourceCollector=a.Deferred(),a.extend(f,{name:a.uid("ResourceCollector"),manifest:[],loaderList:[],loaders:[],load:function(){if(delete c.resourceCollector,f.manifest.length<0)return f.resolve(),void 0;var b=0,d=function(){b++,a.Ajax({type:"POST",url:c.resourcePath,dataType:"json",data:{resource:f.manifest}}).done(function(d){return a.isArray(d)?(a.each(d,function(a,b){var c=b.content;
f.loaders[b.id][void 0!==c?"resolve":"reject"](c)}),b>1&&c.debug&&console.info("Attempt to try and get resources again was successful!"),void 0):(f.reject("Server did not return a valid resource manifest."),void 0)}).fail(function(){return b>2?(c.debug&&console.error("Unable to get resource again. Giving up!"),void 0):(c.debug&&console.warn("Unable to get resource. Trying again..."),d(),void 0)})};d(),a.when.apply(null,f.loaderList).done(f.resolve).fail(f.reject)}}),setTimeout(f.load,c.resourceCollectionInterval));
var g=b.id=a.uid("Resource");return f.loaders[g]=b.loader,f.loaderList.push(b.loader),delete b.loader,f.manifest.push(b),d}},d.view=function(){var b=this,e=b.expand(arguments,{path:c.viewPath}),f={},g=e.options,h=a.map(e.names,function(e){var g=c.prefix+e,h=a.require.template.loaders[g];if(!h)return h=a.require.template.loader(g),h.name=g,b.addTask(h),c.optimizeResources?(d.resource({type:"view",name:e,loader:h}),void 0):(f[e]=h,e)});return h.length>0&&a.Ajax({url:g.path,dataType:"json",data:{names:h}}).done(function(b){a.isArray(b)&&a.each(b,function(a,b){var c=b.content;
f[b.name][void 0!==c?"resolve":"reject"](c)})}),d},d.language=function(){var b=this,f=b.expand(arguments,{path:c.languagePath});return c.optimizeResources?a.each(f.names,function(c,e){var f=a.require.language.loaders[e];f||(f=a.require.language.loader(e),f.name=e,b.addTask(f),d.resource({type:"language",name:e,loader:f}))}):e.language.apply(d,[f.options].concat(f.names)),d},d.library=function(){return e.script.apply(this,arguments),d},d.script=function(){var b=this,f=b.expand(arguments,{path:c.scriptPath}),g=a.map(f.names,function(b){if(a.isArray(b)||a.isUrl(b)||/^(\/|\.)/.test(b))return b;
var d=c.prefix+b,e=a.uri(f.options.path).toPath("./"+b+"."+(f.options.extension||"js")+(c.scriptVersioning?"?version="+c.safeVersion:"")).toString();return[[d,e,!0]]});return e.script.apply(d,[f.options].concat(g)),d},d.template=function(){var b=this,f=b.expand(arguments,{path:c.templatePath});return e.template.apply(d,[f.options].concat(a.map(f.names,function(a){return[[c.prefix+a,a]]}))),d},d.app=function(){var b=this,f=b.expand(arguments,{path:c.scriptPath});return names=a.map(f.names,function(b){if(a.isArray(b)||a.isUrl(b)||/^(\/|\.)/.test(b))return b;
var d=b.split("/"),e=a.rootPath+"/media/"+c.componentName+"/apps";4===d.length&&(e+="/"+d.shift()),e+="/"+d[0]+"/"+d[1]+"/scripts/"+d[2];var g=c.prefix+b,h=e+"."+(f.options.extension||"js")+(c.scriptVersioning?"?version="+c.safeVersion:"");return[[g,h,!0]]}),e.script.apply(d,[f.options].concat(names)),d},d.done=function(a){return e.done.call(d,function(){c.ready(a)})},d},module:function(b,c){var d=this;if(!a.isArray(b)){var e=d.prefix+b;return c?a.module.apply(null,[e,function(){var b=this;c.call(b,a)}]):a.module(e)
}}}),a.Component.extend("ajax",function(b,c,d){var e=this,f=new Date,g={url:e.ajaxUrl+"&_ts="+f.getTime(),data:a.extend(c,{option:e.componentName,namespace:b})};if(g=a.extend(!0,g,e.options.ajax),g.data[e.token()]=1,g.data.hasOwnProperty("args")&&(g.data.args=a.toJSON(g.data.args)),a.isPlainObject(d)){if(d.type){switch(d.type){case"jsonp":d.dataType="jsonp",d.crossDomain=!0,g.data.transport="jsonp";break;case"iframe":d.iframe=!0,d.processData=!1,d.files=g.data.files,delete g.data.files,g.data.transport="iframe"
}delete d.type}a.extend(g,d)}a.isFunction(d)&&(g.success=d);var h=a.server(g);return h.progress(function(a,b,c){e.debug&&"debug"==b&&e.console.log(a,b,c)}),h}),a.Component.extend("Controller",function(){var e,f,b=this,c=a.makeArray(arguments),d=c[0];return 1==c.length?a.String.getObject(d):(c.length>2?(e=c[1],f=c[2]):(e={},f=c[1]),a.extend(e,{root:b.className+".Controller",component:b}),a.Controller.apply(this,[d,e,f]))}),a.Component.extend("Model",function(){var e,f,b=this,c=a.makeArray(arguments),d=b.className+".Model."+c[0];
return 1==c.length?a.String.getObject(c[0]):(2==c.length&&(e={},f=c[1]),c.length>2&&(e=c[1],f=c[2]),a.extend(e,{component:b}),a.Model.apply(this,[d,e,f]))}),a.Component.extend("Model.List",function(){var e,f,b=this,c=a.makeArray(arguments),d=b.className+".Model.List."+c[0];return 1==c.length?a.String.getObject(c[0]):(2==c.length&&(e={},f=c[1]),c.length>2&&(e=c[1],f=c[2]),a.extend(e,{component:b}),a.Model.List.apply(this,[d,e,f]))}),a.Component.extend("View",function(){var c=this;return arguments.length<1?c.template():(arguments[0]=c.prefix+arguments[0],a.View.apply(this,arguments))
}),FD40.module.execute(),a.each(FD40.component(),function(b,c){c.registered||a.Component.register(c)})}),FD40.plugin("static",function($){!function(){var a=["dialog/default"],b=$.stylesheet({content:".foundryDialog{background:url(images/333-50.png);padding:5px;border:1px solid #333;border-radius:8px;-moz-border-radius:8px;-webkit-border-radius:8px}.foundryDialog.resizing{padding-bottom:7px}.foundryDialog .dialog-wrap{border:1px solid #333;border-radius:4px;-moz-border-radius:4px;-webkit-border-radius:4px;background:#fff;overflow:hidden;min-height:100%;height:100%}.foundryDialog .dialog-wrap>.in{position:relative}.foundryDialog .dialog-head{font:700 14px/30px Arial;height:30px;padding:0 9px;border-top:1px solid #f5f5f5;border-bottom:1px solid #666;background:#eaeaea;color:#444 !important;border-radius:4px 4px 0 0;-moz-border-radius:4px 4px 0 0;-webkit-border-radius:4px 4px 0 0;position:relative}.foundryDialog .dialog-body{background:#fff;padding:10px}.foundryDialog .dialog-body.type-iframe{padding:0}.foundryDialog .dialog-footer{background:#fafafa;border-top:1px solid #aaa;padding:6px;border-radius:0 0 4px 4px;-moz-border-radius:0 0 4px 4px;-webkit-border-radius:0 0 4px 4px}.foundryDialog .dialog-buttons{text-align:right}.foundryDialog .dialog-closeButton{background:url(images/cross-8.png) center;display:block;text-indent:-9999px;width:8px;height:8px;position:absolute !important;right:10px;top:50%;margin-top:-4px;opacity:.4;cursor:pointer}.foundryDialog .dialog-closeButton:hover{opacity:.7}.foundryDialog .dialog-loader{position:absolute;background:rgba(255,255,255,0.5);z-index:9999}.foundryDialog .loader-img{background:url(images/ajax-loader.gif) center no-repeat;width:32px;height:32px;position:absolute;top:50%;left:50%;margin:-16px 0 0 -16px}"})?"resolve":"reject";
$.each(a,function(a,c){$.require.stylesheet.loader(c)[b]()})}(),$.module(["uniform","chosen","event/drag","mousewheel","resize","expanding","ui/core","ui/mouse","ui/widget","textboxlist","autosize.input","scrollTo","tinyscrollbar","history","masonry","datetimepicker","","popbox","ui/position","gmaps","placeholder","image","imgareaselect","passwordstrength","mentions","dialog","easing","gritter"]),function(){var a=function(a){var b=this,c=a,d=function(){!function(a){a.uniform={options:{selectClass:"selector",radioClass:"radio",checkboxClass:"checker",fileClass:"uploader",filenameClass:"filename",fileBtnClass:"action",fileDefaultText:"No file selected",fileBtnText:"Choose File",checkedClass:"checked",focusClass:"focus",disabledClass:"disabled",buttonClass:"button",activeClass:"active",hoverClass:"hover",useID:!0,idPrefix:"uniform",resetSelector:!1,autoHide:!0},elements:[]},a.support.selectOpacity=a.browser.msie&&a.browser.version<7?!1:!0,a.fn.uniform=function(b){function d(b){$el=a(b),$el.addClass($el.attr("type")),k(b)
}function e(b){a(b).addClass("uniform"),k(b)}function f(c){var d=a(c),e=a("<div>"),f=a("<span>");e.addClass(b.buttonClass),b.useID&&""!=d.attr("id")&&e.attr("id",b.idPrefix+"-"+d.attr("id"));var g;d.is("a")||d.is("button")?g=d.text():(d.is(":submit")||d.is(":reset")||d.is("input[type=button]"))&&(g=d.attr("value")),g=""==g?d.is(":reset")?"Reset":"Submit":g,f.html(g),d.css("opacity",0),d.wrap(e),d.wrap(f),e=d.closest("div"),f=d.closest("span"),d.is(":disabled")&&e.addClass(b.disabledClass),e.bind({"mouseenter.uniform":function(){e.addClass(b.hoverClass)
},"mouseleave.uniform":function(){e.removeClass(b.hoverClass),e.removeClass(b.activeClass)},"mousedown.uniform touchbegin.uniform":function(){e.addClass(b.activeClass)},"mouseup.uniform touchend.uniform":function(){e.removeClass(b.activeClass)},"click.uniform touchend.uniform":function(b){if(a(b.target).is("span")||a(b.target).is("div"))if(c[0].dispatchEvent){var d=document.createEvent("MouseEvents");d.initEvent("click",!0,!0),c[0].dispatchEvent(d)}else c[0].click()}}),c.bind({"focus.uniform":function(){e.addClass(b.focusClass)
},"blur.uniform":function(){e.removeClass(b.focusClass)}}),a.uniform.noSelect(e),k(c)}function g(c){var d=a(c),e=a("<div />"),f=a("<span />");"none"==!d.css("display")&&b.autoHide&&e.hide(),e.addClass(b.selectClass),b.useID&&""!=c.attr("id")&&e.attr("id",b.idPrefix+"-"+c.attr("id"));var g=c.find(":selected:first");0==g.length&&(g=c.find("option:first")),f.html(g.html()),c.css("opacity",0),c.wrap(e),c.before(f),e=c.parent("div"),f=c.siblings("span"),c.bind({"change.uniform":function(){f.text(c.find(":selected").html()),e.removeClass(b.activeClass)
},"focus.uniform":function(){e.addClass(b.focusClass)},"blur.uniform":function(){e.removeClass(b.focusClass),e.removeClass(b.activeClass)},"mousedown.uniform touchbegin.uniform":function(){e.addClass(b.activeClass)},"mouseup.uniform touchend.uniform":function(){e.removeClass(b.activeClass)},"click.uniform touchend.uniform":function(){e.removeClass(b.activeClass)},"mouseenter.uniform":function(){e.addClass(b.hoverClass)},"mouseleave.uniform":function(){e.removeClass(b.hoverClass),e.removeClass(b.activeClass)},"keyup.uniform":function(){f.text(c.find(":selected").html())
}}),a(c).prop("disabled")&&e.addClass(b.disabledClass),a.uniform.noSelect(f),k(c)}function h(c){var d=a(c),e=a("<div />"),f=a("<span />");"none"==!d.css("display")&&b.autoHide&&e.hide(),e.addClass(b.checkboxClass),b.useID&&""!=c.attr("id")&&e.attr("id",b.idPrefix+"-"+c.attr("id")),a(c).wrap(e),a(c).wrap(f),f=c.parent(),e=f.parent(),a(c).css("opacity",0).bind({"focus.uniform":function(){e.addClass(b.focusClass)},"blur.uniform":function(){e.removeClass(b.focusClass)},"click.uniform touchend.uniform":function(){a(c).prop("checked")?f.addClass(b.checkedClass):f.removeClass(b.checkedClass)
},"mousedown.uniform touchbegin.uniform":function(){e.addClass(b.activeClass)},"mouseup.uniform touchend.uniform":function(){e.removeClass(b.activeClass)},"mouseenter.uniform":function(){e.addClass(b.hoverClass)},"mouseleave.uniform":function(){e.removeClass(b.hoverClass),e.removeClass(b.activeClass)}}),a(c).prop("checked")&&f.addClass(b.checkedClass),a(c).prop("disabled")&&e.addClass(b.disabledClass),k(c)}function i(c){var d=a(c),e=a("<div />"),f=a("<span />");"none"==!d.css("display")&&b.autoHide&&e.hide(),e.addClass(b.radioClass),b.useID&&""!=c.attr("id")&&e.attr("id",b.idPrefix+"-"+c.attr("id")),a(c).wrap(e),a(c).wrap(f),f=c.parent(),e=f.parent(),a(c).css("opacity",0).bind({"focus.uniform":function(){e.addClass(b.focusClass)
},"blur.uniform":function(){e.removeClass(b.focusClass)},"click.uniform touchend.uniform":function(){if(a(c).prop("checked")){var d=b.radioClass.split(" ")[0];a("."+d+" span."+b.checkedClass+":has([name='"+a(c).attr("name")+"'])").removeClass(b.checkedClass),f.addClass(b.checkedClass)}else f.removeClass(b.checkedClass)},"mousedown.uniform touchend.uniform":function(){a(c).is(":disabled")||e.addClass(b.activeClass)},"mouseup.uniform touchbegin.uniform":function(){e.removeClass(b.activeClass)},"mouseenter.uniform touchend.uniform":function(){e.addClass(b.hoverClass)
},"mouseleave.uniform":function(){e.removeClass(b.hoverClass),e.removeClass(b.activeClass)}}),a(c).prop("checked")&&f.addClass(b.checkedClass),a(c).prop("disabled")&&e.addClass(b.disabledClass),k(c)}function j(c){var d=a(c),e=a("<div />"),f=a("<span>"+b.fileDefaultText+"</span>"),g=a("<span>"+b.fileBtnText+"</span>");if("none"==!d.css("display")&&b.autoHide&&e.hide(),e.addClass(b.fileClass),f.addClass(b.filenameClass),g.addClass(b.fileBtnClass),b.useID&&""!=d.attr("id")&&e.attr("id",b.idPrefix+"-"+d.attr("id")),d.wrap(e),d.after(g),d.after(f),e=d.closest("div"),f=d.siblings("."+b.filenameClass),g=d.siblings("."+b.fileBtnClass),!d.attr("size")){var h=e.width();
d.attr("size",h/10)}var i=function(){var a=d.val();""===a?a=b.fileDefaultText:(a=a.split(/[\/\\]+/),a=a[a.length-1]),f.text(a)};i(),d.css("opacity",0).bind({"focus.uniform":function(){e.addClass(b.focusClass)},"blur.uniform":function(){e.removeClass(b.focusClass)},"mousedown.uniform":function(){a(c).is(":disabled")||e.addClass(b.activeClass)},"mouseup.uniform":function(){e.removeClass(b.activeClass)},"mouseenter.uniform":function(){e.addClass(b.hoverClass)},"mouseleave.uniform":function(){e.removeClass(b.hoverClass),e.removeClass(b.activeClass)
}}),a.browser.msie?d.bind("click.uniform.ie7",function(){setTimeout(i,0)}):d.bind("change.uniform",i),d.prop("disabled")&&e.addClass(b.disabledClass),a.uniform.noSelect(f),a.uniform.noSelect(g),k(c)}function k(b){b=a(b).get(),b.length>1?a.each(b,function(b,c){a.uniform.elements.push(c)}):a.uniform.elements.push(b)}b=a.extend(a.uniform.options,b);var c=this;return 0!=b.resetSelector&&a(b.resetSelector).mouseup(function(){function b(){a.uniform.update(c)}setTimeout(b,10)}),a.uniform.restore=function(b){void 0==b&&(b=a(a.uniform.elements)),a(b).each(function(){a(this).is(":checkbox")?a(this).unwrap().unwrap():a(this).is("select")?(a(this).siblings("span").remove(),a(this).unwrap()):a(this).is(":radio")?a(this).unwrap().unwrap():a(this).is(":file")?(a(this).siblings("span").remove(),a(this).unwrap()):a(this).is("button, :submit, :reset, a, input[type='button']")&&a(this).unwrap().unwrap(),a(this).unbind(".uniform"),a(this).css("opacity","1");
var c=a.inArray(a(b),a.uniform.elements);a.uniform.elements.splice(c,1)})},a.uniform.noSelect=function(b){function c(){return!1}a(b).each(function(){this.onselectstart=this.ondragstart=c,a(this).mousedown(c).css({MozUserSelect:"none"})})},a.uniform.update=function(c){void 0==c&&(c=a(a.uniform.elements)),c=a(c),c.each(function(){var d=a(this);if(d.is("select")){var e=d.siblings("span"),f=d.parent("div");f.removeClass(b.hoverClass+" "+b.focusClass+" "+b.activeClass),e.html(d.find(":selected").html()),d.is(":disabled")?f.addClass(b.disabledClass):f.removeClass(b.disabledClass)
}else if(d.is(":checkbox")){var e=d.closest("span"),f=d.closest("div");f.removeClass(b.hoverClass+" "+b.focusClass+" "+b.activeClass),e.removeClass(b.checkedClass),d.is(":checked")&&e.addClass(b.checkedClass),d.is(":disabled")?f.addClass(b.disabledClass):f.removeClass(b.disabledClass)}else if(d.is(":radio")){var e=d.closest("span"),f=d.closest("div");f.removeClass(b.hoverClass+" "+b.focusClass+" "+b.activeClass),e.removeClass(b.checkedClass),d.is(":checked")&&e.addClass(b.checkedClass),d.is(":disabled")?f.addClass(b.disabledClass):f.removeClass(b.disabledClass)
}else if(d.is(":file")){var f=d.parent("div"),g=d.siblings(b.filenameClass);btnTag=d.siblings(b.fileBtnClass),f.removeClass(b.hoverClass+" "+b.focusClass+" "+b.activeClass),g.text(d.val()),d.is(":disabled")?f.addClass(b.disabledClass):f.removeClass(b.disabledClass)}else if(d.is(":submit")||d.is(":reset")||d.is("button")||d.is("a")||c.is("input[type=button]")){var f=d.closest("div");f.removeClass(b.hoverClass+" "+b.focusClass+" "+b.activeClass),d.is(":disabled")?f.addClass(b.disabledClass):f.removeClass(b.disabledClass)
}})},this.each(function(){if(a.support.selectOpacity){var b=a(this);b.is("select")?1!=b.attr("multiple")&&(void 0==b.attr("size")||b.attr("size")<=1)&&g(b):b.is(":checkbox")?h(b):b.is(":radio")?i(b):b.is(":file")?j(b):b.is(":text, :password, input[type='email']")?d(b):b.is("textarea")?e(b):(b.is("a")||b.is(":submit")||b.is(":reset")||b.is("button")||b.is("input[type=button]"))&&f(b)}})}}(c)};d(),b.resolveWith(d)};FD40.module("uniform",a)}(),function(){var a=function(a){var b=this,c=a,d=function(){var a={};(function(){var a;
a=function(){function a(){this.options_index=0,this.parsed=[]}return a.prototype.add_node=function(a){return"OPTGROUP"===a.nodeName.toUpperCase()?this.add_group(a):this.add_option(a)},a.prototype.add_group=function(a){var b,c,d,e,f,g;for(b=this.parsed.length,this.parsed.push({array_index:b,group:!0,label:a.label,children:0,disabled:a.disabled}),f=a.childNodes,g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(this.add_option(c,b,a.disabled));return g},a.prototype.add_option=function(a,b,c){return"OPTION"===a.nodeName.toUpperCase()?(""!==a.text?(null!=b&&(this.parsed[b].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:a.value,text:a.text,html:a.innerHTML,selected:a.selected,disabled:c===!0?c:a.disabled,group_array_index:b,classes:a.className,style:a.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0
},a}(),a.select_to_array=function(b){var c,d,e,f,g;for(d=new a,g=b.childNodes,e=0,f=g.length;f>e;e++)c=g[e],d.add_node(c);return d.parsed},this.SelectParser=a}).call(a),function(){var a,b;b=this,a=function(){function a(a,b){this.form_field=a,this.options=null!=b?b:{},this.set_default_values(),this.is_multiple=this.form_field.multiple,this.set_default_text(),this.setup(),this.set_up_html(),this.register_observers(),this.finish_setup()}return a.prototype.set_default_values=function(){var a=this;return this.click_test_action=function(b){return a.test_active_click(b)
},this.activate_action=function(b){return a.activate_field(b)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.search_contains=this.options.search_contains||!1,this.choices=0,this.single_backstroke_delete=this.options.single_backstroke_delete||!1,this.max_selected_options=this.options.max_selected_options||1/0
},a.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||"Select Some Options":this.options.placeholder_text_single||this.options.placeholder_text||"Select an Option",this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||"No results match"},a.prototype.mouse_enter=function(){return this.mouse_on_container=!0
},a.prototype.mouse_leave=function(){return this.mouse_on_container=!1},a.prototype.input_focus=function(){var b=this;return this.active_field?void 0:setTimeout(function(){return b.container_mousedown()},50)},a.prototype.input_blur=function(){var b=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return b.blur_test()},100))},a.prototype.result_add_option=function(a){var b,c;return a.disabled?"":(a.dom_id=this.container_id+"_o_"+a.array_index,b=a.selected&&this.is_multiple?[]:["active-result"],a.selected&&b.push("result-selected"),null!=a.group_array_index&&b.push("group-option"),""!==a.classes&&b.push(a.classes),c=""!==a.style.cssText?' style="'+a.style+'"':"",'<li id="'+a.dom_id+'" class="'+b.join(" ")+'"'+c+">"+a.html+"</li>")
},a.prototype.results_update_field=function(){return this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build()},a.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},a.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},a.prototype.keyup_checker=function(a){var b,c;switch(b=null!=(c=a.which)?c:a.keyCode,this.search_field_scale(),b){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices>0)return this.keydown_backstroke();
if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(a.preventDefault(),this.results_showing)return this.result_select(a);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},a.prototype.generate_field_id=function(){var a;return a=this.generate_random_id(),this.form_field.id=a,a},a.prototype.generate_random_char=function(){var a,b,c;return a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",c=Math.floor(Math.random()*a.length),b=a.substring(c,c+1)
},a}(),b.AbstractChosen=a}.call(a),function(){var a,b,d,e,f=Object.prototype.hasOwnProperty,g=function(a,b){function d(){this.constructor=a}for(var c in b)f.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};e=this,a=c,a.fn.extend({chosen:function(c){return a.browser.msie&&("6.0"===a.browser.version||"7.0"===a.browser.version&&7===document.documentMode)?this:this.each(function(){var e;return e=a(this),e.hasClass("chzn-done")?void 0:e.data("chosen",new b(this,c))
})}}),b=function(b){function c(){c.__super__.constructor.apply(this,arguments)}return g(c,b),c.prototype.setup=function(){return this.form_field_jq=a(this.form_field),this.current_value=this.form_field_jq.val(),this.is_rtl=this.form_field_jq.hasClass("chzn-rtl")},c.prototype.finish_setup=function(){return this.form_field_jq.addClass("chzn-done")},c.prototype.set_up_html=function(){var b,c,e,f;return this.container_id=this.form_field.id.length?this.form_field.id.replace(/[^\w]/g,"_"):this.generate_field_id(),this.container_id+="_chzn",this.f_width=this.form_field_jq.outerWidth(),b=a("<div />",{id:this.container_id,"class":"chzn-container"+(this.is_rtl?" chzn-rtl":""),style:"width: "+this.f_width+"px;"}),this.is_multiple?b.html('<ul class="chzn-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop" style="left:-9000px;"><ul class="chzn-results"></ul></div>'):b.html('<a href="javascript:void(0)" class="chzn-single chzn-default"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chzn-drop" style="left:-9000px;"><div class="chzn-search"><input type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>'),this.form_field_jq.hide().after(b),this.container=a("#"+this.container_id),this.container.addClass("chzn-container-"+(this.is_multiple?"multi":"single")),this.dropdown=this.container.find("div.chzn-drop").first(),c=this.container.height(),e=this.f_width-d(this.dropdown),this.dropdown.css({width:e+"px",top:c+"px"}),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chzn-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chzn-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chzn-search").first(),this.selected_item=this.container.find(".chzn-single").first(),f=e-d(this.search_container)-d(this.search_field),this.search_field.css({width:f+"px"})),this.results_build(),this.set_tab_index(),this.form_field_jq.trigger("liszt:ready",{chosen:this})
},c.prototype.register_observers=function(){var a=this;return this.container.mousedown(function(b){return a.container_mousedown(b)}),this.container.mouseup(function(b){return a.container_mouseup(b)}),this.container.mouseenter(function(b){return a.mouse_enter(b)}),this.container.mouseleave(function(b){return a.mouse_leave(b)}),this.search_results.mouseup(function(b){return a.search_results_mouseup(b)}),this.search_results.mouseover(function(b){return a.search_results_mouseover(b)}),this.search_results.mouseout(function(b){return a.search_results_mouseout(b)
}),this.form_field_jq.bind("liszt:updated",function(b){return a.results_update_field(b)}),this.form_field_jq.bind("liszt:activate",function(b){return a.activate_field(b)}),this.form_field_jq.bind("liszt:open",function(b){return a.container_mousedown(b)}),this.search_field.blur(function(b){return a.input_blur(b)}),this.search_field.keyup(function(b){return a.keyup_checker(b)}),this.search_field.keydown(function(b){return a.keydown_checker(b)}),this.is_multiple?(this.search_choices.click(function(b){return a.choices_click(b)
}),this.search_field.focus(function(b){return a.input_focus(b)})):this.container.click(function(a){return a.preventDefault()})},c.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chzn-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus",this.activate_action),this.close_field()):(this.container.removeClass("chzn-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus",this.activate_action))
},c.prototype.container_mousedown=function(b){var c;return this.is_disabled?void 0:(c=null!=b?a(b.target).hasClass("search-choice-close"):!1,b&&"mousedown"===b.type&&!this.results_showing&&b.stopPropagation(),this.pending_destroy_click||c?this.pending_destroy_click=!1:(this.active_field?this.is_multiple||!b||a(b.target)[0]!==this.selected_item[0]&&!a(b.target).parents("a.chzn-single").length||(b.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),a(document).click(this.click_test_action),this.results_show()),this.activate_field()))
},c.prototype.container_mouseup=function(a){return"ABBR"!==a.target.nodeName||this.is_disabled?void 0:this.results_reset(a)},c.prototype.blur_test=function(){return!this.active_field&&this.container.hasClass("chzn-container-active")?this.close_field():void 0},c.prototype.close_field=function(){return a(document).unbind("click",this.click_test_action),this.is_multiple||(this.selected_item.attr("tabindex",this.search_field.attr("tabindex")),this.search_field.attr("tabindex",-1)),this.active_field=!1,this.results_hide(),this.container.removeClass("chzn-container-active"),this.winnow_results_clear(),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()
},c.prototype.activate_field=function(){return this.is_multiple||this.active_field||(this.search_field.attr("tabindex",this.selected_item.attr("tabindex")),this.selected_item.attr("tabindex",-1)),this.container.addClass("chzn-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},c.prototype.test_active_click=function(b){return a(b.target).parents("#"+this.container_id).length?this.active_field=!0:this.close_field()},c.prototype.results_build=function(){var a,b,c,d,f;
for(this.parsing=!0,this.results_data=e.SelectParser.select_to_array(this.form_field),this.is_multiple&&this.choices>0?(this.search_choices.find("li.search-choice").remove(),this.choices=0):this.is_multiple||(this.selected_item.addClass("chzn-default").find("span").text(this.default_text),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?this.container.addClass("chzn-container-single-nosearch"):this.container.removeClass("chzn-container-single-nosearch")),a="",f=this.results_data,c=0,d=f.length;d>c;c++)b=f[c],b.group?a+=this.result_add_group(b):b.empty||(a+=this.result_add_option(b),b.selected&&this.is_multiple?this.choice_build(b):b.selected&&!this.is_multiple&&(this.selected_item.removeClass("chzn-default").find("span").text(b.text),this.allow_single_deselect&&this.single_deselect_control_build()));
return this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.search_results.html(a),this.parsing=!1},c.prototype.result_add_group=function(b){return b.disabled?"":(b.dom_id=this.container_id+"_g_"+b.array_index,'<li id="'+b.dom_id+'" class="group-result">'+a("<div />").text(b.label).html()+"</li>")},c.prototype.result_do_highlight=function(a){var b,c,d,e,f;if(a.length){if(this.result_clear_highlight(),this.result_highlight=a,this.result_highlight.addClass("highlighted"),d=parseInt(this.search_results.css("maxHeight"),10),f=this.search_results.scrollTop(),e=d+f,c=this.result_highlight.position().top+this.search_results.scrollTop(),b=c+this.result_highlight.outerHeight(),b>=e)return this.search_results.scrollTop(b-d>0?b-d:0);
if(f>c)return this.search_results.scrollTop(c)}},c.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},c.prototype.results_show=function(){var a;if(this.is_multiple){if(this.max_selected_options<=this.choices)return this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1}else this.selected_item.addClass("chzn-single-with-drop"),this.result_single_selected&&this.result_do_highlight(this.result_single_selected);
return a=this.is_multiple?this.container.height():this.container.height()-1,this.form_field_jq.trigger("liszt:showing_dropdown",{chosen:this}),this.dropdown.css({top:a+"px",left:0}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results()},c.prototype.results_hide=function(){return this.is_multiple||this.selected_item.removeClass("chzn-single-with-drop"),this.result_clear_highlight(),this.form_field_jq.trigger("liszt:hiding_dropdown",{chosen:this}),this.dropdown.css({left:"-9000px"}),this.results_showing=!1
},c.prototype.set_tab_index=function(){var b;return this.form_field_jq.attr("tabindex")?(b=this.form_field_jq.attr("tabindex"),this.form_field_jq.attr("tabindex",-1),this.is_multiple?this.search_field.attr("tabindex",b):(this.selected_item.attr("tabindex",b),this.search_field.attr("tabindex",-1))):void 0},c.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))
},c.prototype.search_results_mouseup=function(b){var c;return c=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first(),c.length?(this.result_highlight=c,this.result_select(b)):void 0},c.prototype.search_results_mouseover=function(b){var c;return c=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first(),c?this.result_do_highlight(c):void 0},c.prototype.search_results_mouseout=function(b){return a(b.target).hasClass("active-result")?this.result_clear_highlight():void 0
},c.prototype.choices_click=function(b){return b.preventDefault(),!this.active_field||a(b.target).hasClass("search-choice")||this.results_showing?void 0:this.results_show()},c.prototype.choice_build=function(b){var c,d,e,f=this;return this.is_multiple&&this.max_selected_options<=this.choices?(this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1):(c=this.container_id+"_c_"+b.array_index,this.choices+=1,d=b.disabled?'<li class="search-choice search-choice-disabled" id="'+c+'"><span>'+b.html+"</span></li>":'<li class="search-choice" id="'+c+'"><span>'+b.html+'</span><a href="javascript:void(0)" class="search-choice-close" rel="'+b.array_index+'"></a></li>',this.search_container.before(d),e=a("#"+c).find("a").first(),e.click(function(a){return f.choice_destroy_link_click(a)
}))},c.prototype.choice_destroy_link_click=function(b){return b.preventDefault(),this.is_disabled?b.stopPropagation:(this.pending_destroy_click=!0,this.choice_destroy(a(b.target)))},c.prototype.choice_destroy=function(a){return this.result_deselect(a.attr("rel"))?(this.choices-=1,this.show_search_field_default(),this.is_multiple&&this.choices>0&&this.search_field.val().length<1&&this.results_hide(),a.parents("li").first().remove()):void 0},c.prototype.results_reset=function(){return this.form_field.options[0].selected=!0,this.selected_item.find("span").text(this.default_text),this.is_multiple||this.selected_item.addClass("chzn-default"),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0
},c.prototype.results_reset_cleanup=function(){return this.current_value=this.form_field_jq.val(),this.selected_item.find("abbr").remove()},c.prototype.result_select=function(a){var b,c,d,e;return this.result_highlight?(b=this.result_highlight,c=b.attr("id"),this.result_clear_highlight(),this.is_multiple?this.result_deactivate(b):(this.search_results.find(".result-selected").removeClass("result-selected"),this.result_single_selected=b,this.selected_item.removeClass("chzn-default")),b.addClass("result-selected"),e=c.substr(c.lastIndexOf("_")+1),d=this.results_data[e],d.selected=!0,this.form_field.options[d.options_index].selected=!0,this.is_multiple?this.choice_build(d):(this.selected_item.find("span").first().text(d.text),this.allow_single_deselect&&this.single_deselect_control_build()),a.metaKey&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field_jq.val()!==this.current_value)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[d.options_index].value}),this.current_value=this.form_field_jq.val(),this.search_field_scale()):void 0
},c.prototype.result_activate=function(a){return a.addClass("active-result")},c.prototype.result_deactivate=function(a){return a.removeClass("active-result")},c.prototype.result_deselect=function(b){var c,d;return d=this.results_data[b],this.form_field.options[d.options_index].disabled?!1:(d.selected=!1,this.form_field.options[d.options_index].selected=!1,c=a("#"+this.container_id+"_o_"+b),c.removeClass("result-selected").addClass("active-result").show(),this.result_clear_highlight(),this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[d.options_index].value}),this.search_field_scale(),!0)
},c.prototype.single_deselect_control_build=function(){return this.allow_single_deselect&&this.selected_item.find("abbr").length<1?this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'):void 0},c.prototype.winnow_results=function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;for(this.no_results_clear(),j=0,k=this.search_field.val()===this.default_text?"":a("<div/>").text(a.trim(this.search_field.val())).html(),g=this.search_contains?"":"^",f=new RegExp(g+k.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),n=new RegExp(k.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),s=this.results_data,o=0,q=s.length;q>o;o++)if(c=s[o],!c.disabled&&!c.empty)if(c.group)a("#"+c.dom_id).css("display","none");
else if(!this.is_multiple||!c.selected){if(b=!1,i=c.dom_id,h=a("#"+i),f.test(c.html))b=!0,j+=1;else if((c.html.indexOf(" ")>=0||0===c.html.indexOf("["))&&(e=c.html.replace(/\[|\]/g,"").split(" "),e.length))for(p=0,r=e.length;r>p;p++)d=e[p],f.test(d)&&(b=!0,j+=1);b?(k.length?(l=c.html.search(n),m=c.html.substr(0,l+k.length)+"</em>"+c.html.substr(l+k.length),m=m.substr(0,l)+"<em>"+m.substr(l)):m=c.html,h.html(m),this.result_activate(h),null!=c.group_array_index&&a("#"+this.results_data[c.group_array_index].dom_id).css("display","list-item")):(this.result_highlight&&i===this.result_highlight.attr("id")&&this.result_clear_highlight(),this.result_deactivate(h))
}return 1>j&&k.length?this.no_results(k):this.winnow_results_set_highlight()},c.prototype.winnow_results_clear=function(){var b,c,d,e,f;for(this.search_field.val(""),c=this.search_results.find("li"),f=[],d=0,e=c.length;e>d;d++)b=c[d],b=a(b),b.hasClass("group-result")?f.push(b.css("display","auto")):this.is_multiple&&b.hasClass("result-selected")?f.push(void 0):f.push(this.result_activate(b));return f},c.prototype.winnow_results_set_highlight=function(){var a,b;return this.result_highlight||(b=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),a=b.length?b.first():this.search_results.find(".active-result").first(),null==a)?void 0:this.result_do_highlight(a)
},c.prototype.no_results=function(b){var c;return c=a('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),c.find("span").first().html(b),this.search_results.append(c)},c.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},c.prototype.keydown_arrow=function(){var b,c;return this.result_highlight?this.results_showing&&(c=this.result_highlight.nextAll("li.active-result").first(),c&&this.result_do_highlight(c)):(b=this.search_results.find("li.active-result").first(),b&&this.result_do_highlight(a(b))),this.results_showing?void 0:this.results_show()
},c.prototype.keyup_arrow=function(){var a;return this.results_showing||this.is_multiple?this.result_highlight?(a=this.result_highlight.prevAll("li.active-result"),a.length?this.result_do_highlight(a.first()):(this.choices>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},c.prototype.keydown_backstroke=function(){var a;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(a=this.search_container.siblings("li.search-choice").last(),a.length&&!a.hasClass("search-choice-disabled")?(this.pending_backstroke=a,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)
},c.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},c.prototype.keydown_checker=function(a){var b,c;switch(b=null!=(c=a.which)?c:a.keyCode,this.search_field_scale(),8!==b&&this.pending_backstroke&&this.clear_backstroke(),b){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(a),this.mouse_on_container=!1;break;case 13:a.preventDefault();
break;case 38:a.preventDefault(),this.keyup_arrow();break;case 40:this.keydown_arrow()}},c.prototype.search_field_scale=function(){var b,c,d,e,f,g,h,i,j;if(this.is_multiple){for(d=0,h=0,f="position:absolute; left: -1000px; top: -1000px; display:none;",g=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],i=0,j=g.length;j>i;i++)e=g[i],f+=e+":"+this.search_field.css(e)+";";return c=a("<div />",{style:f}),c.text(this.search_field.val()),a("body").append(c),h=c.width()+25,c.remove(),h>this.f_width-10&&(h=this.f_width-10),this.search_field.css({width:h+"px"}),b=this.container.height(),this.dropdown.css({top:b+"px"})
}},c.prototype.generate_random_id=function(){var b;for(b="sel"+this.generate_random_char()+this.generate_random_char()+this.generate_random_char();a("#"+b).length>0;)b+=this.generate_random_char();return b},c}(e.AbstractChosen),d=function(a){var b;return b=a.outerWidth()-a.width()},e.get_side_border_padding=d;var h=a.debounce(function(){var c=a(".chzn-container").parent();a(".chzn-container").innerWidth(c.innerWidth()),a(".chzn-search input").innerWidth(c.innerWidth()-12),a(".chzn-drop").innerWidth(c.innerWidth()-2)
},500);window.addEventListener("resize",h,!1)}.call(a)};d(),b.resolveWith(d)};FD40.module("chosen",a)}(),function(){var a=function(a){var b=this,c=a,d=function(){!function(a){a.fn.drag=function(b,c,d){var e="string"==typeof b?b:"",f=a.isFunction(b)?b:a.isFunction(c)?c:null;return 0!==e.indexOf("drag")&&(e="drag"+e),d=(b==f?c:d)||{},f?this.bind(e,d,f):this.trigger(e)};var b=a.event,c=b.special,d=c.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(b){var c=a.data(this,d.datakey),e=b.data||{};
c.related+=1,a.each(d.defaults,function(a){void 0!==e[a]&&(c[a]=e[a])})},remove:function(){a.data(this,d.datakey).related-=1},setup:function(){if(!a.data(this,d.datakey)){var c=a.extend({related:0},d.defaults);a.data(this,d.datakey,c),b.add(this,"touchstart mousedown",d.init,c),this.attachEvent&&this.attachEvent("ondragstart",d.dontstart)}},teardown:function(){var c=a.data(this,d.datakey)||{};c.related||(a.removeData(this,d.datakey),b.remove(this,"touchstart mousedown",d.init),d.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",d.dontstart))
},init:function(e){if(!d.touched){var g,f=e.data;if(!(0!=e.which&&f.which>0&&e.which!=f.which||a(e.target).is(f.not)||f.handle&&!a(e.target).closest(f.handle,e.currentTarget).length||(d.touched="touchstart"==e.type?this:null,f.propagates=1,f.mousedown=this,f.interactions=[d.interaction(this,f)],f.target=e.target,f.pageX=e.pageX,f.pageY=e.pageY,f.dragging=null,g=d.hijack(e,"draginit",f),!f.propagates)))return g=d.flatten(g),g&&g.length&&(f.interactions=[],a.each(g,function(){f.interactions.push(d.interaction(this,f))
})),f.propagates=f.interactions.length,f.drop!==!1&&c.drop&&c.drop.handler(e,f),d.textselect(!1),d.touched?b.add(d.touched,"touchmove touchend",d.handler,f):b.add(document,"mousemove mouseup",d.handler,f),!d.touched||f.live?!1:void 0}},interaction:function(b,c){var e=a(b)[c.relative?"position":"offset"]()||{top:0,left:0};return{drag:b,callback:new d.callback,droppable:[],offset:e}},handler:function(e){var f=e.data;switch(e.type){case!f.dragging&&"touchmove":e.preventDefault();case!f.dragging&&"mousemove":if(Math.pow(e.pageX-f.pageX,2)+Math.pow(e.pageY-f.pageY,2)<Math.pow(f.distance,2))break;
e.target=f.target,d.hijack(e,"dragstart",f),f.propagates&&(f.dragging=!0);case"touchmove":e.preventDefault();case"mousemove":if(f.dragging){if(d.hijack(e,"drag",f),f.propagates){f.drop!==!1&&c.drop&&c.drop.handler(e,f);break}e.type="mouseup"}case"touchend":case"mouseup":default:d.touched?b.remove(d.touched,"touchmove touchend",d.handler):b.remove(document,"mousemove mouseup",d.handler),f.dragging&&(f.drop!==!1&&c.drop&&c.drop.handler(e,f),d.hijack(e,"dragend",f)),d.textselect(!0),f.click===!1&&f.dragging&&a.data(f.mousedown,"suppress.click",(new Date).getTime()+5),f.dragging=d.touched=!1
}},hijack:function(c,e,f,g,h){if(f){var k,m,o,i={event:c.originalEvent,type:c.type},j=e.indexOf("drop")?"drag":"drop",l=g||0,p=isNaN(g)?f.interactions.length:g;c.type=e,c.originalEvent=null,f.results=[];do if(m=f.interactions[l]){if("dragend"!==e&&m.cancelled)continue;o=d.properties(c,f,m),m.results=[],a(h||m[j]||f.droppable).each(function(g,h){return o.target=h,c.isPropagationStopped=function(){return!1},k=h?b.dispatch.call(h,c,o):null,k===!1?("drag"==j&&(m.cancelled=!0,f.propagates-=1),"drop"==e&&(m[j][g]=null)):"dropinit"==e&&m.droppable.push(d.element(k)||h),"dragstart"==e&&(m.proxy=a(d.element(k)||m.drag)[0]),m.results.push(k),delete c.result,"dropinit"!==e?k:void 0
}),f.results[l]=d.flatten(m.results),"dropinit"==e&&(m.droppable=d.flatten(m.droppable)),"dragstart"!=e||m.cancelled||o.update()}while(++l<p);return c.type=i.type,c.originalEvent=i.event,d.flatten(f.results)}},properties:function(a,b,c){var e=c.callback;return e.drag=c.drag,e.proxy=c.proxy||c.drag,e.startX=b.pageX,e.startY=b.pageY,e.deltaX=a.pageX-b.pageX,e.deltaY=a.pageY-b.pageY,e.originalX=c.offset.left,e.originalY=c.offset.top,e.offsetX=e.originalX+e.deltaX,e.offsetY=e.originalY+e.deltaY,e.drop=d.flatten((c.drop||[]).slice()),e.available=d.flatten((c.droppable||[]).slice()),e
},element:function(a){return a&&(a.jquery||1==a.nodeType)?a:void 0},flatten:function(b){return a.map(b,function(b){return b&&b.jquery?a.makeArray(b):b&&b.length?d.flatten(b):b})},textselect:function(b){a(document)[b?"unbind":"bind"]("selectstart",d.dontstart).css("MozUserSelect",b?"":"none"),document.unselectable=b?"off":"on"},dontstart:function(){return!1},callback:function(){}};d.callback.prototype={update:function(){c.drop&&this.available.length&&a.each(this.available,function(a){c.drop.locate(this,a)})}};
var e=b.dispatch;b.dispatch=function(b){return a.data(this,"suppress."+b.type)-(new Date).getTime()>0?(a.removeData(this,"suppress."+b.type),void 0):e.apply(this,arguments)};var f=b.fixHooks.touchstart=b.fixHooks.touchmove=b.fixHooks.touchend=b.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(b,c){if(c){var d=c.touches&&c.touches[0]||c.changedTouches&&c.changedTouches[0]||null;d&&a.each(f.props,function(a,c){b[c]=d[c]})}return b}};c.draginit=c.dragstart=c.dragend=d
}(c)};d(),b.resolveWith(d)};FD40.module("event/drag",a)}(),function(){var a=function(a){var b=this,c=function(){function i(b){var c=b||window.event,g=d.call(arguments,1),i=0,l=0,m=0,n=0,o=0,p=0;if(b=a.event.fix(c),b.type="mousewheel","detail"in c&&(m=-1*c.detail),"wheelDelta"in c&&(m=c.wheelDelta),"wheelDeltaY"in c&&(m=c.wheelDeltaY),"wheelDeltaX"in c&&(l=-1*c.wheelDeltaX),"axis"in c&&c.axis===c.HORIZONTAL_AXIS&&(l=-1*m,m=0),i=0===m?l:m,"deltaY"in c&&(m=-1*c.deltaY,i=m),"deltaX"in c&&(l=c.deltaX,0===m&&(i=-1*l)),0!==m||0!==l){if(1===c.deltaMode){var q=a.data(this,"mousewheel-line-height");
i*=q,m*=q,l*=q}else if(2===c.deltaMode){var r=a.data(this,"mousewheel-page-height");i*=r,m*=r,l*=r}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||f>n)&&(f=n,k(c,n)&&(f/=40)),k(c,n)&&(i/=40,l/=40,m/=40),i=Math[i>=1?"floor":"ceil"](i/f),l=Math[l>=1?"floor":"ceil"](l/f),m=Math[m>=1?"floor":"ceil"](m/f),h.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,g.unshift(b,i,l,m),e&&clearTimeout(e),e=setTimeout(j,200),(a.event.dispatch||a.event.handle).apply(this,g)
}}function j(){f=null}function k(a,b){return h.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120===0}var e,f,b=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],c="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],d=Array.prototype.slice;if(a.event.fixHooks)for(var g=b.length;g;)a.event.fixHooks[b[--g]]=a.event.mouseHooks;var h=a.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var b=c.length;b;)this.addEventListener(c[--b],i,!1);
else this.onmousewheel=i;a.data(this,"mousewheel-line-height",h.getLineHeight(this)),a.data(this,"mousewheel-page-height",h.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var b=c.length;b;)this.removeEventListener(c[--b],i,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height"),a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){var c=a(b),d=c["offsetParent"in a.fn?"offsetParent":"parent"]();return d.length||(d=a("body")),parseInt(d.css("fontSize"),10)||parseInt(c.css("fontSize"),10)||16
},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})};c(),b.resolveWith(c)};FD40.module("mousewheel",a)}(),function(){var a=function(a){var b=this,c=function(){function j(){d=window[e](function(){b.each(function(){var b=a(this),c=b.width(),d=b.height(),e=a.data(this,g);(c!==e.w||d!==e.h)&&b.trigger(f,[e.w=c,e.h=d])
}),j()},c[h])}var d,b=a([]),c=a.resize=a.extend(a.resize,{}),e="setTimeout",f="resize",g=f+"-special-event",h="delay",i="throttleWindow";c[h]=250,c[i]=!0,a.event.special[f]={setup:function(){if(!c[i]&&this[e])return!1;var d=a(this);b=b.add(d),a.data(this,g,{w:d.width(),h:d.height()}),1===b.length&&j()},teardown:function(){if(!c[i]&&this[e])return!1;var f=a(this);b=b.not(f),f.removeData(g),b.length||clearTimeout(d)},add:function(b){function f(b,c,e){var f=a(this),h=a.data(this,g);null==h&&(h={w:null,h:null}),h.w=void 0!==c?c:f.width(),h.h=void 0!==e?e:f.height(),d.apply(this,arguments)
}if(!c[i]&&this[e])return!1;var d;return a.isFunction(b)?(d=b,f):(d=b.handler,b.handler=f,void 0)}}};c(),b.resolveWith(c)};FD40.module("resize",a)}(),function(){var a=function(a){var b=this,c=function(){function f(){var b=a(this).data("textareaClone");b.find("div").text(this.value.replace(/\r\n/g,"\n")+" "),a(this).trigger("resize.expanding")}a.expandingTextarea=a.extend({autoInitialize:!0,initialSelector:"textarea.expanding",opts:{resize:function(){}}},a.expandingTextarea||{});var b=["lineHeight","textDecoration","letterSpacing","fontSize","fontFamily","fontStyle","fontWeight","textTransform","textAlign","direction","wordSpacing","fontSizeAdjust","wordWrap","word-break","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","boxSizing","webkitBoxSizing","mozBoxSizing","msBoxSizing"],c={position:"absolute",height:"100%",resize:"none"},d={visibility:"hidden",border:"0 solid",whiteSpace:"pre-wrap"},e={position:"relative"};
a.fn.expandingTextarea=function(g){var h=a.extend({},a.expandingTextarea.opts,g);return"resize"===g?this.trigger("input.expanding"):"destroy"===g?(this.filter(".expanding-init").each(function(){var b=a(this).removeClass("expanding-init");b.attr("style",b.data("expanding-styles")||"").removeData("expanding-styles")}),this):(this.filter("textarea").not(".expanding-init").addClass("expanding-init").each(function(){var g=a(this),i=g.parent(),j=a(a.parseHTML("<pre class='textareaClone'><div></div></pre>"));g.after(j).data("textareaClone",j),i.css(e),g.data("expanding-styles",g.attr("style")),g.css(c),j.css(d),a.each(b,function(a,b){var c=g.css(b);
j.css(b)!==c&&j.css(b,c)}),g.bind("input.expanding propertychange.expanding keyup.expanding",f),f.apply(this),h.resize&&g.bind("resize.expanding",h.resize)}),this)},a(function(){a.expandingTextarea.autoInitialize&&a(a.expandingTextarea.initialSelector).expandingTextarea()})};c(),b.resolveWith(c)};FD40.module("expanding",a)}(),function(){var a=function(a){var b=this,c=a,d=function(){!function(a,b){function e(b,c){var d,e,g,h=b.nodeName.toLowerCase();return"area"===h?(d=b.parentNode,e=d.name,b.href&&e&&"map"===d.nodeName.toLowerCase()?(g=a("img[usemap=#"+e+"]")[0],!!g&&f(g)):!1):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||c:c)&&f(b)
}function f(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var c=0,d=/^ui-id-\d+$/;a.ui=a.ui||{},a.extend(a.ui,{version:"1.10.4pre",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({focus:function(b){return function(c,d){return"number"==typeof c?this.each(function(){var b=this;
setTimeout(function(){a(b).focus(),d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),scrollParent:function(){var b;return b=a.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))
}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length)for(var e,f,d=a(this[0]);d.length&&d[0]!==document;){if(e=d.css("position"),("absolute"===e||"relative"===e||"fixed"===e)&&(f=parseInt(d.css("zIndex"),10),!isNaN(f)&&0!==f))return f;d=d.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++c)})},removeUniqueId:function(){return this.each(function(){d.test(this.id)&&a(this).removeAttr("id")
})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return e(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var c=a.attr(b,"tabindex"),d=isNaN(c);return(d||c>=0)&&e(b,!d)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function h(b,c,d,f){return a.each(e,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),f&&(c-=parseFloat(a.css(b,"margin"+this))||0)
}),c}var e="Width"===d?["Left","Right"]:["Top","Bottom"],f=d.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?g["inner"+d].call(this):this.each(function(){a(this).css(f,h(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?g["outer"+d].call(this,b):this.each(function(){a(this).css(f,h(this,b,!0,c)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))
}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.support.selectstart="onselectstart"in document.createElement("div"),a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")
}}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c){var d,e=a.plugins[b];if(e&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(d=0;d<e.length;d++)a.options[e[d][0]]&&e[d][1].apply(a.element,c)}},hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)}}),a(function(){a("body > [id=fd].ui").length>0||a(document.createElement("div")).attr("id","fd").addClass("ui").css({position:"absolute",top:0,left:0,overflow:"visible",width:0,height:0,zIndex:10002}).appendTo("body")
})}(c)};d(),b.resolveWith(d)};FD40.module("ui/core",a)}(),function(){var a=function(a){var b=this,c=a;a.require().script("ui/widget").done(function(){var a=function(){!function(a){var c=!1;a(document).mouseup(function(){c=!1}),a.widget("ui.mouse",{version:"1.10.4pre",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a,c){return b._mouseDown(c||a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0
}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!c){this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var d=this,e=1===b.which,f="string"==typeof this.options.cancel&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;return e&&!f&&this._mouseCapture(b)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0
},this.options.delay)),this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(b)!==!1,!this._mouseStarted)?(b.preventDefault(),!0):(!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),c=!0,!0)):!0
}},_mouseMove:function(b){return a.ui.ie&&(!document.documentMode||document.documentMode<9)&&!b.button?this._mouseUp(b):this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1
},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(c)};a(),b.resolveWith(a)})};FD40.module("ui/mouse",a)}(),function(){var a=function(a){var b=this,c=a,d=function(){!function(a,b){var c=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var d,c=0;null!=(d=b[c]);c++)try{a(d).triggerHandler("remove")
}catch(f){}e(b)},a.widget=function(b,c,d){var e,f,g,h,i={},j=b.split(".")[0];b=b.split(".")[1],e=j+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e.toLowerCase()]=function(b){return!!a.data(b,e)},a[j]=a[j]||{},f=a[j][b],g=a[j][b]=function(a,b){return this._createWidget?(arguments.length&&this._createWidget(a,b),void 0):new g(a,b)},a.extend(g,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),h=new c,h.options=a.widget.extend({},h.options),a.each(d,function(b,d){return a.isFunction(d)?(i[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)
},e=function(a){return c.prototype[b].apply(this,a)};return function(){var f,b=this._super,c=this._superApply;return this._super=a,this._superApply=e,f=d.apply(this,arguments),this._super=b,this._superApply=c,f}}(),void 0):(i[b]=d,void 0)}),g.prototype=a.widget.extend(h,{widgetEventPrefix:f?h.widgetEventPrefix:b},i,{constructor:g,namespace:j,widgetName:b,widgetFullName:e}),f?(a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,g,c._proto)}),delete f._childConstructors):c._childConstructors.push(g),a.widget.bridge(b,g)
},a.widget.extend=function(c){for(var h,i,e=d.call(arguments,1),f=0,g=e.length;g>f;f++)for(h in e[f])i=e[f][h],e[f].hasOwnProperty(h)&&i!==b&&(c[h]=a.isPlainObject(i)?a.isPlainObject(c[h])?a.widget.extend({},c[h],i):a.widget.extend({},i):i);return c},a.widget.bridge=function(c,e){var f=e.prototype.widgetFullName||c;a.fn[c]=function(g){var h="string"==typeof g,i=d.call(arguments,1),j=this;return g=!h&&i.length?a.widget.extend.apply(null,[g].concat(i)):g,h?this.each(function(){var d,e=a.data(this,f);return e?a.isFunction(e[g])&&"_"!==g.charAt(0)?(d=e[g].apply(e,i),d!==e&&d!==b?(j=d&&d.jquery?j.pushStack(d.get()):d,!1):void 0):a.error("no such method '"+g+"' for "+c+" widget instance"):a.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+g+"'")
}):this.each(function(){var b=a.data(this,f);b?b.option(g||{})._init():a.data(this,f,new e(g,this))}),j}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=c++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()
}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")
},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var f,g,h,e=c;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof c)if(e={},f=c.split("."),c=f.shift(),f.length){for(g=e[c]=a.widget.extend({},this.options[c]),h=0;h<f.length-1;h++)g[f[h]]=g[f[h]]||{},g=g[f[h]];if(c=f.pop(),d===b)return g[c]===b?null:g[c];g[c]=d}else{if(d===b)return this.options[c]===b?null:this.options[c];e[c]=d}return this._setOptions(e),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);
return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(b,c,d){var e,f=this;"boolean"!=typeof b&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,g){function h(){return b||f.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof g?f[g]:g).apply(f,arguments):void 0
}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^(\w+)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.delegate(k,j,h):c.bind(j,h)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")
},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);
return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()
})}})}(c)};d(),b.resolveWith(d)};FD40.module("ui/widget",a)}(),function(){var a=function(a){var b=this;a.require().script("autosize.input","scrollTo").done(function(){var c=function(){var b={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,ENTER:13,ESCAPE:27,LEFT:37,RIGHT:39,SPACE:32,TAB:9,UP:38};a.template("textboxlist/item",'<div class="textboxlist-item[%== (this.locked) ? " is-locked" : "" %]" data-textboxlist-item><span class="textboxlist-itemContent" data-textboxlist-itemContent>[%== html %]</span><div class="textboxlist-itemRemoveButton" data-textboxlist-itemRemoveButton><i class="fa fa-times"></i></a></div>'),a.template("textboxlist/itemContent",'[%= title %]<input type="hidden" name="[%= name %]" value="[%= id %]"/>'),a.Controller("Textboxlist",{pluginName:"textboxlist",hostname:"textboxlist",defaultOptions:{view:{item:"textboxlist/item",itemContent:"textboxlist/itemContent"},plugin:{},name:"items[]",unique:!0,caseSensitive:!1,max:null,ignoreLocked:!1,filterItem:null,"{item}":"[data-textboxlist-item]","{itemContent}":"[data-textboxlist-itemContent]","{itemRemoveButton}":"[data-textboxlist-itemRemoveButton]","{textField}":"[data-textboxlist-textField]"}},function(c){return{init:function(){var d=c.textField();
d.autosizeInput(),d.data("placeholderText",d.attr("placeholder"));var e=d.data("textboxlistName");e&&(c.options.name=e),c.item().each(function(){var b=a(this),d=b.find(c.itemContent.selector);c.createItem({id:b.data("id")||function(){var c=a.uid("item-");return b.data("id",c),c}(),title:b.data("title")||a.trim(d.text()),locked:b.hasClass("is-locked"),html:d.html()})}),(c.options.plugin.autocomplete||c.element.data("query"))&&c.addPlugin("autocomplete"),c.on("keypress",c.textField(),function(a){return a.keyCode==b.ENTER?a.preventDefault():void 0
})},setLayout:function(){var a=c.textField(),b=a.data("placeholderText");c.item().length>0&&(b=""),a.attr("placeholder",b).data("autosizeInputInstance").update()},enable:function(){c.element.removeClass("disabled"),c.textField().enabled(!0)},disable:function(){c.element.addClass("disabled"),c.textField().disabled(!0)},items:{},itemsByTitle:{},get:function(a){var b=c.getItemKey(a);return c.itemsByTitle.hasOwnProperty(b)?c.itemsByTitle[b]:void 0},getItemKey:function(a){return c.options.caseSensitive?a:a.toLowerCase()
},filterItem:function(b){var d=c.options,e=d.filterItem;a.isFunction(e)&&(b=e.call(c,b));var f=c.itemsByTitle;if(a.isString(b)&&""!==b){var g=b,h=c.getItemKey(g);b=f.hasOwnProperty(h)?c.itemsByTitle[h]:{id:a.uid("item-"),title:g,key:c.getItemKey(g),locked:!1}}return b.name=b.name||c.options.name,b.html=b.html||c.view.itemContent(!0,b),b},createItem:function(a){a.key=c.getItemKey(a.title),c.items[a.id]=a,c.itemsByTitle[a.key]=a},deleteItem:function(a){var b=c.items[a];c.item().filterBy("id",a).remove(),delete c.items[a];
var d=c.options.caseSensitive?b.title:b.title.toLowerCase();delete c.itemsByTitle[d]},addItem:function(b,d){if(b){var e=c.options,f=e.max;if((d||null===f||!((e.ignoreLocked?c.item(":not(.is-locked)"):c.item()).length>=f))&&(b=c.filterItem(b),a.isPlainObject(b))){var g,h=c.item().filterBy("id",b.id);if(e.unique&&h.length>0&&(g=h),g||(g=c.view.item(b).addClass(b.className||"").attr("data-id",b.id)),c.createItem(b),b.locked){var i=c.item(".is-locked:last");i.length>0?g.insertAfter(i):g.prependTo(c.element)}else g.insertBefore(c.textField());
return c.trigger("addItem",[b]),c.trigger("listChange"),b}}},removeItem:function(a){var b=c.items[a];c.deleteItem(a),c.trigger("removeItem",[b]),c.trigger("listChange")},clearItems:function(){c.item().each(function(){c.removeItem(a(this).data("id"))})},getAddedItems:function(){var b=[];return c.item().each(function(){var d=a(this),e=d.data("id");b.push(c.items[e])}),b},"{self} addItem":function(){c.setLayout()},"{self} removeItem":function(){c.setLayout()},"{itemRemoveButton} click":function(a){var b=a.parents(c.item.selector);
c.removeItem(b.data("id"))},"{textField} keydown":function(a,c){var d=c.keyCode;a.data("realEnterKey",d==b.ENTER)},"{textField} keypress":function(d,e){var f=d.data("realEnterKey"),g=e.keyCode==b.ENTER;d.data("realEnterKey",f&&g);var h=a.trim(c.textField().val());switch(e.keyCode){case b.ENTER:if(d.data("realEnterKey")){var e=c.trigger("useItem",[h]),i=e.item;if(void 0===i&&(i=h),i===!1||null===i)return;c.addItem(i),d.val("")}}},"{textField} keyup":function(d,e){var f=a.trim(c.textField().val()),g="canRemoveItemUsingBackspace";
switch(e.keyCode){case b.BACKSPACE:if(""===f)if(c[g]){var h=d.prev(c.item.selector);if(h.length>0){var i=h.data("id"),f=c.items[i];!f.locked&&c.removeItem(i)}}else c[g]=!0;break;default:c[g]=!1}},"{self} click":function(a,b){var d=c.textField();d.is(b.target)||d.focus()},"{textField} focusin":function(){c.activated||(c.activated=!0,c.trigger("textboxlistActivate"))},"{self} mousedown":function(){c.focusing=!0},"{self} mouseup":function(){c.focusing=!1},"{self} focusout":function(){c.focusing||(c.activated=!1,c.deactivateTimer=setTimeout(function(){c.activated||c.trigger("textboxlistDeactivate")
},1))}}}),a(document).on("click.textboxlist.data-api","[data-textboxlist]",function(){a(this).addController(a.Controller.Textboxlist).textField().focus()}).on("focus.textboxlist.data-api","[data-textboxlist] [data-textboxlist-textField]",function(){a(this).parents("[data-textboxlist]").addController(a.Controller.Textboxlist)}),a.template("textboxlist/menu",'<div id="fd" class="textboxlist-autocomplete" data-textboxlist-autocomplete><b><b></b></b><div class="textboxlist-autocomplete-inner" data-textboxlist-autocomplete-viewport><div class="textboxlist-autocomplete-loading" data-textboxlist-autocomplete-loading></div><div class="textboxlist-autocomplete-empty" data-textboxlist-autocomplete-empty></div><ul class="textboxlist-menu" data-textboxlist-menu></ul></div></div>'),a.template("textboxlist/menuItem",'<li class="textboxlist-menuItem" data-textboxlist-menuItem>[%== html %]</li>'),a.template("textboxlist/loadingHint",'<i class="textboxlist-autocomplete-loading-indicator"></i>'),a.template("textboxlist/emptyHint",'<span class="textboxlist-autocomplete-empty-text">No items found.</span>'),a.Controller("Textboxlist.Autocomplete",{defaultOptions:{view:{menu:"textboxlist/menu",menuItem:"textboxlist/menuItem",loadingHint:"textboxlist/loadingHint",emptyHint:"textboxlist/emptyHint"},cache:!0,minLength:1,limit:10,highlight:!0,caseSensitive:!1,exclusive:!1,query:null,position:{my:"left top",at:"left bottom",collision:"none"},filterItem:null,showEmptyHint:!1,showLoadingHint:!1,id:"fd",component:"",modifier:"",shadow:!1,sticky:!1,animation:!1,"{menu}":"[data-textboxlist-menu]","{menuItem}":"[data-textboxlist-menuItem]","{viewport}":"[data-textboxlist-autocomplete-viewport]","{loadingHint}":"[data-textboxlist-autocomplete-loading]","{emptyHint}":"[data-textboxlist-autocomplete-empty]"}},function(c,d){return{init:function(){if(!c.element.data(c.Class.fullName))return c.destroy(),c.view.menu().attr("id",d.id).addClass(d.component).addClass(d.modifier).addClass(d.shadow?"has-shadow":"").addClass(d.animation?"has-animation":"").addClass(d.sticky?"is-sticky":"").addClass(c.textboxlist.options.component).appendTo("body").data(c.Class.fullName,!0).addController(c.Class,c.options),void 0;
var a=c.textboxlist;a.autocomplete=c,a.pluginInstances.autocomplete=c,c.options.position.of=c.textboxlist.element,c.initQuery(),c.view.loadingHint().appendTo(c.loadingHint()),c.view.emptyHint().appendTo(c.emptyHint()),c.element.detach()},initQuery:function(){var b=c.options.query||c.textboxlist.element.data("query");if(a.isUrl(b)){var d=b;return c.query=function(b){return a.ajax(d+b)},void 0}if(a.isFunction(b)){var e=b;return c.query=function(a){return e.call(c,a)},void 0}if(a.isArray(b)){var f=b;return c.query=function(b){var c=a.Deferred(),b=b.toLowerCase();
return setTimeout(function(){var d=a.grep(f,function(a){return a.title.toLowerCase().indexOf(b)>-1});c.resolve(d)},0),c},void 0}},setLayout:function(){c.hidden||c.element.css({opacity:1,width:c.textboxlist.element.outerWidth()}).position(c.options.position)},"{window} resize":a.debounce(function(){c.element.css("opacity",0),c.setLayout()},250),"{window} scroll":a.debounce(function(){c.element.css("opacity",0),c.setLayout()},250),"{window} dialogTransitionStart":function(){c.hidden=!0,c.element.css("opacity",0)
},"{window} dialogTransitionEnd":function(){c.hidden=!1,c.setLayout()},show:function(){clearTimeout(c.sleep),c.element.appendTo("body").show(),c.hidden=!1,c.setLayout()},hide:function(){c.element.hide();var b=c.menuItem(),d=b.filter(".active");d.length>0&&(c.lastItem={keyword:a.trim(c.textboxlist.textField().val()),item:d.data("item")}),b.removeClass("active"),c.render.reset(),c.hidden=!0,clearTimeout(c.sleep),c.sleep=setTimeout(function(){c.element.detach()},3e3)},queries:{},populated:!1,populate:function(b){c.populated=!1;
var d=c.element,e=c.options;d.removeClass("loading empty"),e.showLoadingHint&&c.hide();var f=c.trigger("populateKeyword",[b]);f.keyword&&(b=f.keyword);var g=e.caseSensitive?b:b.toLowerCase(),h=c.queries[g],i=!a.isDeferred(h)||!c.options.cache,j=function(){e.showLoadingHint&&(d.addClass("loading"),c.show()),(i||!i&&"rejected"==h.state())&&(h=c.queries[g]=c.query(b)),h.done(c.render(function(a){return[a,b]})).fail(function(){c.hide()}).always(function(){d.removeClass("loading")}),c.trigger("queryKeyword",[h,b])
};i?(clearTimeout(c.queryTask),c.queryTask=setTimeout(j,250)):j()},populateTask:null,populateFromTextField:function(){clearTimeout(c.populateTask),c.populateTask=setTimeout(function(){var b=c.textboxlist.textField(),d=a.trim(b.val());""===d||d.length<c.options.minLength?c.hide():c.populate(d)},1)},render:a.Enqueue(function(b,d){a.isArray(b)||(b=[]);var e=c.textboxlist,f=c,g=c.element,h=c.options,i=c.menu();if(b.length<1)return h.showEmptyHint?(i.empty(),g.addClass("empty"),e.trigger("renderMenu",[i,f,e]),c.show()):c.hide(),void 0;
g.removeClass("empty"),h.cache&&i.data("keyword")===d||(i.empty(),a.each(b,function(b,g){e.trigger("filterItem",[g,f,e]);var j=h.filterItem;if(a.isFunction(j)&&(g=j.call(c,g,d)),a.isPlainObject(g)&&!g.discard){var k=g.menuHtml||g.title;c.view.menuItem({html:k}).addClass(g.className||"").data("item",g).appendTo(i)}}),i.data("keyword",d));var j=c.menuItem();return e.trigger("filterMenu",[i,j,f,e]),j.filter(":not(.hidden)").length<1&&(g.addClass("empty"),!h.showEmptyHint)?c.hide():(h.exclusive&&c.menuItem(":not(.hidden):first").addClass("active"),e.trigger("renderMenu",[i,f,e]),c.show(),void 0)
}),"{textboxlist.textField} keydown":function(a,d){clearTimeout(c.sleep);var e=c.menuItem(".active:not(.hidden)");e.length<1&&(e=!1);c.textboxlist.textField();switch(d.keyCode){case b.UP:c.menuItem().removeClass("active"),e?e.prev(c.menuItem.selector+":not(.hidden)").addClass("active"):c.menuItem(":not(.hidden):last").addClass("active"),d.preventDefault();break;case b.DOWN:c.menuItem().removeClass("active"),e?e.next(c.menuItem.selector+":not(.hidden)").addClass("active"):c.menuItem(":not(.hidden):first").addClass("active"),d.preventDefault();
break;case b.ESCAPE:c.hide();break;case b.ENTER:break;default:c.populateFromTextField()}var e=c.menuItem(".active:not(.hidden)");e.length<1||c.viewport().scrollIntoView(e)},"{textboxlist} textboxlistActivate":function(){c.populateFromTextField()},"{textboxlist} textboxlistDeactivate":function(){setTimeout(function(){c.hide()},150)},"{textboxlist} destroyed":function(){c.element.remove()},"{textboxlist} useItem":function(a,b,d){var e=c.options.exclusive;if(e&&(b.item=!1),c.hidden){var f=c.lastItem;return e&&f&&f.keyword==d&&(b.item=f.item),void 0
}var g=c.menuItem(".active");if(g.length>0){var h=g.data("item");b.item=h}c.hide()},"{menuItem} mousedown":function(){c.textboxlist.focusing=!0},"{menuItem} mouseup":function(){c.textboxlist.focusing=!1},"{menuItem} click":function(a){c.hide();var b=a.data("item");c.textboxlist.addItem(b);var d=c.textboxlist.textField().val("");setTimeout(function(){d.focus()},150)},"{menuItem} mouseover":function(a){c.menuItem().removeClass("active"),a.addClass("active")},"{menuItem} mouseout":function(){c.menuItem().removeClass("active")
}}})};c(),b.resolveWith(c)})};FD40.module("textboxlist",a)}(),function(){var a=function(a){var b=this,d=function(){var b=function(c,d){var e=this;e.input=a(c),e.options=a.extend(b.defaultOptions,d),e.mirror=a('<span style="position:absolute; top:-999px; left:0; white-space:pre;"/>'),a.each(["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],function(a,b){e.mirror[0].style[b]=e.input.css(b)}),a("body").append(e.mirror),e.input.bind("keydown keyup input",function(){e.update()
}),e.update()};b.defaultOptions={space:30},b.validTypes=["text","password","search","url","tel","email"],b.prototype.update=function(){var a=this,b=a.input,c=a.mirror,d=b.val();if(d||(d=b.attr("placeholder")),d!==c.text()){c.text(d);var e=c.width()+a.options.space;b.width(e)}},a.fn.autosizeInput=function(c){return this.each(function(){if("INPUT"==this.tagName&&a.inArray(this.type,b.validTypes)>-1){var d=a(this);d.data("autosizeInputInstance")||d.data("autosizeInputInstance",new b(this,c))}})},a(function(){a("input[data-autosize-input]").autosizeInput()
})};d(),b.resolveWith(d)};FD40.module("autosize.input",a)}(),function(){var a=function(a){var b=this,c=a,d=function(){!function(a){function c(a){return"object"==typeof a?a:{top:a,left:a}}var b=a.scrollTo=function(b,c,d){a(window).scrollTo(b,c,d)};b.defaults={axis:"xy",duration:parseFloat(a.fn.jquery)>=1.3?0:1,limit:!0},b.window=function(){return a(window)._scrollable()},a.fn._scrollable=function(){return this.map(function(){var b=this,c=!b.nodeName||-1!=a.inArray(b.nodeName.toLowerCase(),["iframe","#document","html","body"]);
if(!c)return b;var d=(b.contentWindow||b).document||b.ownerDocument||b;return/webkit/i.test(navigator.userAgent)||"BackCompat"==d.compatMode?d.body:d.documentElement})},a.fn.scrollTo=function(d,e,f){return"object"==typeof e&&(f=e,e=0),"function"==typeof f&&(f={onAfter:f}),"max"==d&&(d=9e9),f=a.extend({},b.defaults,f),e=e||f.duration,f.queue=f.queue&&f.axis.length>1,f.queue&&(e/=2),f.offset=c(f.offset),f.over=c(f.over),this._scrollable().each(function(){function m(a){h.animate(k,e,f.easing,a&&function(){a.call(this,d,f)
})}if(null!=d){var j,g=this,h=a(g),i=d,k={},l=h.is("html,body");switch(typeof i){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(i)){i=c(i);break}if(i=a(i,this),!i.length)return;case"object":(i.is||i.style)&&(j=(i=a(i)).offset())}a.each(f.axis.split(""),function(a,c){var d="x"==c?"Left":"Top",e=d.toLowerCase(),n="scroll"+d,o=g[n],p=b.max(g,c);if(j)k[n]=j[e]+(l?0:o-h.offset()[e]),f.margin&&(k[n]-=parseInt(i.css("margin"+d))||0,k[n]-=parseInt(i.css("border"+d+"Width"))||0),k[n]+=f.offset[e]||0,f.over[e]&&(k[n]+=i["x"==c?"width":"height"]()*f.over[e]);
else{var q=i[e];k[n]=q.slice&&"%"==q.slice(-1)?parseFloat(q)/100*p:q}f.limit&&/^\d+$/.test(k[n])&&(k[n]=k[n]<=0?0:Math.min(k[n],p)),!a&&f.queue&&(o!=k[n]&&m(f.onAfterFirst),delete k[n])}),m(f.onAfter)}}).end()},a.fn.scrollIntoView=function(b){var b=a(b);if(!(b.length<1)){var c=this.offset(),d=this.height(),e=c.top,f=e+d,g=b.offset(),h=b.height(),i=g.top,j=i+h;return j>f?this.scrollTo(b):e>i?this.scrollTo(b,{offset:-1*(d-h)}):void 0}},b.max=function(b,c){var d="x"==c?"Width":"Height",e="scroll"+d;if(!a(b).is("html,body"))return b[e]-a(b)[d.toLowerCase()]();
var f="client"+d,g=b.ownerDocument.documentElement,h=b.ownerDocument.body;return Math.max(g[e],h[e])-Math.min(g[f],h[f])}}(c)};d(),b.resolveWith(d)};FD40.module("scrollTo",a)}(),function(){var a=function(a){var b=this,c=function(){var b=a;!function(a){function b(b,c){function r(){return d.update(),t(),d}function s(){var a=m.toLowerCase();j.obj.css(l,n/h.ratio),g.obj.css(l,-n),p.start=j.obj.offset()[l],h.obj.css(a,i[c.axis]),i.obj.css(a,i[c.axis]),j.obj.css(a,j[c.axis])}function t(){q?f.obj[0].ontouchstart=function(a){1===a.touches.length&&(u(a.touches[0]),a.stopPropagation())
}:(j.obj.bind("mousedown",u),i.obj.bind("mouseup",w)),c.scroll&&window.addEventListener?(e[0].addEventListener("DOMMouseScroll",v,!1),e[0].addEventListener("mousewheel",v,!1)):c.scroll&&(e[0].onmousewheel=v)}function u(b){var c=parseInt(j.obj.css(l),10);p.start=k?b.pageX:b.pageY,o.start="auto"==c?0:c,q?(document.ontouchmove=function(a){a.preventDefault(),w(a.touches[0])},document.ontouchend=x):(a(document).bind("mousemove",w),a(document).bind("mouseup",x),j.obj.bind("mouseup",x))}function v(b){if(g.ratio<1){var d=b||window.event,e=d.wheelDelta?d.wheelDelta/120:-d.detail/3;
n-=e*c.wheel,n=Math.min(g[c.axis]-f[c.axis],Math.max(0,n)),j.obj.css(l,n/h.ratio),g.obj.css(l,-n),(c.lockscroll||n!==g[c.axis]-f[c.axis]&&0!==n)&&(d=a.event.fix(d),d.preventDefault())}}function w(a){g.ratio<1&&(o.now=q?Math.min(i[c.axis]-j[c.axis],Math.max(0,o.start+(p.start-(k?a.pageX:a.pageY)))):Math.min(i[c.axis]-j[c.axis],Math.max(0,o.start+((k?a.pageX:a.pageY)-p.start))),n=o.now*h.ratio,g.obj.css(l,-n),j.obj.css(l,o.now))}function x(){a(document).unbind("mousemove",w),a(document).unbind("mouseup",x),j.obj.unbind("mouseup",x),document.ontouchmove=document.ontouchend=null
}var d=this,e=b,f={obj:a(".viewport",b)},g={obj:a(".overview",b)},h={obj:a(".scrollbar",b)},i={obj:a(".track",h.obj)},j={obj:a(".thumb",h.obj)},k="x"===c.axis,l=k?"left":"top",m=k?"Width":"Height",n=0,o={start:0,now:0},p={},q="ontouchstart"in document.documentElement?!0:!1;return this.update=function(a){f[c.axis]=f.obj[0]["offset"+m],g[c.axis]=g.obj[0]["scroll"+m],g.ratio=f[c.axis]/g[c.axis],h.obj.toggleClass("disable",g.ratio>=1),i[c.axis]="auto"===c.size?f[c.axis]:c.size,j[c.axis]=Math.min(i[c.axis],Math.max(0,"auto"===c.sizethumb?i[c.axis]*g.ratio:c.sizethumb)),h.ratio="auto"===c.sizethumb?g[c.axis]/i[c.axis]:(g[c.axis]-f[c.axis])/(i[c.axis]-j[c.axis]),n="relative"===a&&g.ratio<=1?Math.min(g[c.axis]-f[c.axis],Math.max(0,n)):0,n="bottom"===a&&g.ratio<=1?g[c.axis]-f[c.axis]:isNaN(parseInt(a,10))?n:parseInt(a,10),s()
},r()}a.tiny=a.tiny||{},a.tiny.scrollbar={options:{axis:"y",wheel:40,scroll:!0,lockscroll:!0,size:"auto",sizethumb:"auto"}},a.fn.tinyscrollbar=function(c){var d=a.extend({},a.tiny.scrollbar.options,c);return this.each(function(){a(this).data("tsb",new b(a(this),d))}),this},a.fn.tinyscrollbar_update=function(b){return a(this).data("tsb").update(b)}}(b)};c(),b.resolveWith(c)};FD40.module("tinyscrollbar",a)}(),function(){var a=function(a){var b=this,c=a,d=function(){!function(a,b){"use strict";var d=a.History=a.History||{};
if("undefined"!=typeof d.Adapter)throw new Error("History.js Adapter has already been loaded...");d.Adapter={bind:function(a,b,d){c(a).bind(b,d)},trigger:function(a,b,d){c(a).trigger(b,d)},extractEventData:function(a,c,d){var e=c&&c.originalEvent&&c.originalEvent[a]||d&&d[a]||b;return e},onDomLoad:function(a){c(a)}},"undefined"!=typeof d.init&&d.init()}(window),function(a){"use strict";var c=a.document,d=a.setTimeout||d,e=a.clearTimeout||e,f=a.setInterval||f,g=a.History=a.History||{};if("undefined"!=typeof g.initHtml4)throw new Error("History.js HTML4 Support has already been loaded...");
g.initHtml4=function(){return"undefined"!=typeof g.initHtml4.initialized?!1:(g.initHtml4.initialized=!0,g.enabled=!0,g.savedHashes=[],g.isLastHash=function(a){var c,b=g.getHashByIndex();return c=a===b},g.saveHash=function(a){return g.isLastHash(a)?!1:(g.savedHashes.push(a),!0)},g.getHashByIndex=function(a){var b=null;return b="undefined"==typeof a?g.savedHashes[g.savedHashes.length-1]:0>a?g.savedHashes[g.savedHashes.length+a]:g.savedHashes[a]},g.discardedHashes={},g.discardedStates={},g.discardState=function(a,b,c){var e,d=g.getHashByState(a);
return e={discardedState:a,backState:c,forwardState:b},g.discardedStates[d]=e,!0},g.discardHash=function(a,b,c){var d={discardedHash:a,backState:c,forwardState:b};return g.discardedHashes[a]=d,!0},g.discardedState=function(a){var c,b=g.getHashByState(a);return c=g.discardedStates[b]||!1},g.discardedHash=function(a){var b=g.discardedHashes[a]||!1;return b},g.recycleState=function(a){var b=g.getHashByState(a);return g.discardedState(a)&&delete g.discardedStates[b],!0},g.emulated.hashChange&&(g.hashChangeInit=function(){g.checkerFunction=null;
var d,e,h,i,b="";return g.isInternetExplorer()?(d="historyjs-iframe",e=c.createElement("iframe"),e.setAttribute("id",d),e.style.display="none",c.body.appendChild(e),e.contentWindow.document.open(),e.contentWindow.document.close(),h="",i=!1,g.checkerFunction=function(){if(i)return!1;i=!0;var c=g.getHash()||"",d=g.unescapeHash(e.contentWindow.document.location.hash)||"";return c!==b?(b=c,d!==c&&(h=d=c,e.contentWindow.document.open(),e.contentWindow.document.close(),e.contentWindow.document.location.hash=g.escapeHash(c)),g.Adapter.trigger(a,"hashchange")):d!==h&&(h=d,g.setHash(d,!1)),i=!1,!0
}):g.checkerFunction=function(){var c=g.getHash();return c!==b&&(b=c,g.Adapter.trigger(a,"hashchange")),!0},g.intervalList.push(f(g.checkerFunction,g.options.hashChangeInterval)),!0},g.Adapter.onDomLoad(g.hashChangeInit)),g.emulated.pushState&&(g.onHashChange=function(b){var j,d=b&&b.newURL||c.location.href,e=g.getHashByUrl(d),f=null,h=null;return g.isLastHash(e)?(g.busy(!1),!1):(g.doubleCheckComplete(),g.saveHash(e),e&&g.isTraditionalAnchor(e)?(g.Adapter.trigger(a,"anchorchange"),g.busy(!1),!1):(f=g.extractState(g.getFullUrl(e||c.location.href,!1),!0),g.isLastSavedState(f)?(g.busy(!1),!1):(h=g.getHashByState(f),(j=g.discardedState(f))?(g.getHashByIndex(-2)===g.getHashByState(j.forwardState)?g.back(!1):g.forward(!1),!1):(g.pushState(f.data,f.title,f.url,!1),!0))))
},g.Adapter.bind(a,"hashchange",g.onHashChange),g.pushState=function(b,d,e,f){if(g.getHashByUrl(e))throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(f!==!1&&g.busy())return g.pushQueue({scope:g,callback:g.pushState,args:arguments,queue:f}),!1;g.busy(!0);var h=g.createStateObject(b,d,e),i=g.getHashByState(h),j=g.getState(!1),k=g.getHashByState(j),l=g.getHash();return g.storeState(h),g.expectedStateId=h.id,g.recycleState(h),g.setTitle(h),i===k?(g.busy(!1),!1):i!==l&&i!==g.getShortUrl(c.location.href)?(g.setHash(i,!1),!1):(g.saveState(h),g.Adapter.trigger(a,"statechange"),g.busy(!1),!0)
},g.replaceState=function(a,b,c,d){if(g.getHashByUrl(c))throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(d!==!1&&g.busy())return g.pushQueue({scope:g,callback:g.replaceState,args:arguments,queue:d}),!1;g.busy(!0);var e=g.createStateObject(a,b,c),f=g.getState(!1),h=g.getStateByIndex(-2);return g.discardState(f,e,h),g.pushState(e.data,e.title,e.url,!1),!0}),g.emulated.pushState&&g.getHash()&&!g.emulated.hashChange&&g.Adapter.onDomLoad(function(){g.Adapter.trigger(a,"hashchange")
}),void 0)},"undefined"!=typeof g.init&&g.init()}(window),function(a,b){"use strict";var c=a.console||b,d=a.document,e=a.navigator,f=a.sessionStorage||!1,g=a.setTimeout,h=a.clearTimeout,i=a.setInterval,j=a.clearInterval,k=a.JSON,l=a.alert,m=a.History=a.History||{},n=a.history;if(k.stringify=k.stringify||k.encode,k.parse=k.parse||k.decode,"undefined"!=typeof m.init)throw new Error("History.js Core has already been loaded...");m.init=function(){return"undefined"==typeof m.Adapter?!1:("undefined"!=typeof m.initCore&&m.initCore(),"undefined"!=typeof m.initHtml4&&m.initHtml4(),!0)
},m.initCore=function(){if("undefined"!=typeof m.initCore.initialized)return!1;if(m.initCore.initialized=!0,m.options=m.options||{},m.options.hashChangeInterval=m.options.hashChangeInterval||100,m.options.safariPollInterval=m.options.safariPollInterval||500,m.options.doubleCheckInterval=m.options.doubleCheckInterval||500,m.options.storeInterval=m.options.storeInterval||1e3,m.options.busyDelay=m.options.busyDelay||250,m.options.debug=m.options.debug||!1,m.options.initialTitle=m.options.initialTitle||d.title,m.intervalList=[],m.clearAllIntervals=function(){var a,b=m.intervalList;
if("undefined"!=typeof b&&null!==b){for(a=0;a<b.length;a++)j(b[a]);m.intervalList=null}},m.debug=function(){m.options.debug&&m.log.apply(m,arguments)},m.log=function(){var e,f,g,h,i,a=!("undefined"==typeof c||"undefined"==typeof c.log||"undefined"==typeof c.log.apply),b=d.getElementById("log");for(a?(h=Array.prototype.slice.call(arguments),e=h.shift(),"undefined"!=typeof c.debug?c.debug.apply(c,[e,h]):c.log.apply(c,[e,h])):e="\n"+arguments[0]+"\n",f=1,g=arguments.length;g>f;++f){if(i=arguments[f],"object"==typeof i&&"undefined"!=typeof k)try{i=k.stringify(i)
}catch(j){}e+="\n"+i+"\n"}return b?(b.value+=e+"\n-----\n",b.scrollTop=b.scrollHeight-b.clientHeight):a||l(e),!0},m.getInternetExplorerMajorVersion=function(){var a=m.getInternetExplorerMajorVersion.cached="undefined"!=typeof m.getInternetExplorerMajorVersion.cached?m.getInternetExplorerMajorVersion.cached:function(){for(var a=3,b=d.createElement("div"),c=b.getElementsByTagName("i");(b.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->")&&c[0];);return a>4?a:!1}();return a},m.isInternetExplorer=function(){var a=m.isInternetExplorer.cached="undefined"!=typeof m.isInternetExplorer.cached?m.isInternetExplorer.cached:Boolean(m.getInternetExplorerMajorVersion());
return a},m.emulated={pushState:!Boolean(a.history&&a.history.pushState&&a.history.replaceState&&!(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(e.userAgent)||/AppleWebKit\/5([0-2]|3[0-2])/i.test(e.userAgent))),hashChange:Boolean(!("onhashchange"in a||"onhashchange"in d)||m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<8)},m.enabled=!m.emulated.pushState,m.bugs={setHash:Boolean(!m.emulated.pushState&&"Apple Computer, Inc."===e.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),safariPoll:Boolean(!m.emulated.pushState&&"Apple Computer, Inc."===e.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),ieDoubleCheck:Boolean(m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<7)},m.isEmptyObject=function(a){for(var b in a)return!1;
return!0},m.cloneObject=function(a){var b,c;return a?(b=k.stringify(a),c=k.parse(b)):c={},c},m.getRootUrl=function(){var a=d.location.protocol+"//"+(d.location.hostname||d.location.host);return d.location.port&&(a+=":"+d.location.port),a+="/"},m.getBaseHref=function(){var a=d.getElementsByTagName("base"),b=null,c="";return 1===a.length&&(b=a[0],c=b.href.replace(/[^\/]+$/,"")),c=c.replace(/\/+$/,""),c&&(c+="/"),c},m.getBaseUrl=function(){var a=m.getBaseHref()||m.getBasePageUrl()||m.getRootUrl();return a},m.getPageUrl=function(){var c,a=m.getState(!1,!1),b=(a||{}).url||d.location.href;
return c=b.replace(/\/+$/,"").replace(/[^\/]+$/,function(a){return/\./.test(a)?a:a+"/"})},m.getBasePageUrl=function(){var a=d.location.href.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(a){return/[^\/]$/.test(a)?"":a}).replace(/\/+$/,"")+"/";return a},m.getFullUrl=function(a,b){var c=a,d=a.substring(0,1);return b="undefined"==typeof b?!0:b,/[a-z]+\:\/\//.test(a)||(c="/"===d?m.getRootUrl()+a.replace(/^\/+/,""):"#"===d?m.getPageUrl().replace(/#.*/,"")+a:"?"===d?m.getPageUrl().replace(/[\?#].*/,"")+a:b?m.getBaseUrl()+a.replace(/^(\.\/)+/,""):m.getBasePageUrl()+a.replace(/^(\.\/)+/,"")),c.replace(/\#$/,"")
},m.getShortUrl=function(a){var b=a,c=m.getBaseUrl(),d=m.getRootUrl();return m.emulated.pushState&&(b=b.replace(c,"")),b=b.replace(d,"/"),m.isTraditionalAnchor(b)&&(b="./"+b),b=b.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},m.store={},m.idToState=m.idToState||{},m.stateToId=m.stateToId||{},m.urlToId=m.urlToId||{},m.storedStates=m.storedStates||[],m.savedStates=m.savedStates||[],m.normalizeStore=function(){m.store.idToState=m.store.idToState||{},m.store.urlToId=m.store.urlToId||{},m.store.stateToId=m.store.stateToId||{}
},m.getState=function(a,b){"undefined"==typeof a&&(a=!0),"undefined"==typeof b&&(b=!0);var c=m.getLastSavedState();return!c&&b&&(c=m.createStateObject()),a&&(c=m.cloneObject(c),c.url=c.cleanUrl||c.url),c},m.getIdByState=function(a){var c,b=m.extractId(a.url);if(!b)if(c=m.getStateString(a),"undefined"!=typeof m.stateToId[c])b=m.stateToId[c];else if("undefined"!=typeof m.store.stateToId[c])b=m.store.stateToId[c];else{for(;;)if(b=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),"undefined"==typeof m.idToState[b]&&"undefined"==typeof m.store.idToState[b])break;
m.stateToId[c]=b,m.idToState[b]=a}return b},m.normalizeState=function(a){var b,c;return a&&"object"==typeof a||(a={}),"undefined"!=typeof a.normalized?a:(a.data&&"object"==typeof a.data||(a.data={}),b={},b.normalized=!0,b.title=a.title||"",b.url=m.getFullUrl(m.unescapeString(a.url||d.location.href)),b.hash=m.getShortUrl(b.url),b.data=m.cloneObject(a.data),b.id=m.getIdByState(b),b.cleanUrl=b.url.replace(/\??\&_suid.*/,""),b.url=b.cleanUrl,c=!m.isEmptyObject(b.data),(b.title||c)&&(b.hash=m.getShortUrl(b.url).replace(/\??\&_suid.*/,""),/\?/.test(b.hash)||(b.hash+="?"),b.hash+="&_suid="+b.id),b.hashedUrl=m.getFullUrl(b.hash),(m.emulated.pushState||m.bugs.safariPoll)&&m.hasUrlDuplicate(b)&&(b.url=b.hashedUrl),b)
},m.createStateObject=function(a,b,c){var d={data:a,title:b,url:c};return d=m.normalizeState(d)},m.getStateById=function(a){a=String(a);var c=m.idToState[a]||m.store.idToState[a]||b;return c},m.getStateString=function(a){var b,c,d;return b=m.normalizeState(a),c={data:b.data,title:a.title,url:a.url},d=k.stringify(c)},m.getStateId=function(a){var b,c;return b=m.normalizeState(a),c=b.id},m.getHashByState=function(a){var b,c;return b=m.normalizeState(a),c=b.hash},m.extractId=function(a){var b,c,d;return c=/(.*)\&_suid=([0-9]+)$/.exec(a),d=c?c[1]||a:a,b=c?String(c[2]||""):"",b||!1
},m.isTraditionalAnchor=function(a){var b=!/[\/\?\.]/.test(a);return b},m.extractState=function(a,b){var d,e,c=null;return b=b||!1,d=m.extractId(a),d&&(c=m.getStateById(d)),c||(e=m.getFullUrl(a),d=m.getIdByUrl(e)||!1,d&&(c=m.getStateById(d)),c||!b||m.isTraditionalAnchor(a)||(c=m.createStateObject(null,null,e))),c},m.getIdByUrl=function(a){var c=m.urlToId[a]||m.store.urlToId[a]||b;return c},m.getLastSavedState=function(){return m.savedStates[m.savedStates.length-1]||b},m.getLastStoredState=function(){return m.storedStates[m.storedStates.length-1]||b
},m.hasUrlDuplicate=function(a){var c,b=!1;return c=m.extractState(a.url),b=c&&c.id!==a.id},m.storeState=function(a){return m.urlToId[a.url]=a.id,m.storedStates.push(m.cloneObject(a)),a},m.isLastSavedState=function(a){var c,d,e,b=!1;return m.savedStates.length&&(c=a.id,d=m.getLastSavedState(),e=d.id,b=c===e),b},m.saveState=function(a){return m.isLastSavedState(a)?!1:(m.savedStates.push(m.cloneObject(a)),!0)},m.getStateByIndex=function(a){var b=null;return b="undefined"==typeof a?m.savedStates[m.savedStates.length-1]:0>a?m.savedStates[m.savedStates.length+a]:m.savedStates[a]
},m.getHash=function(){var a=m.unescapeHash(d.location.hash);return a},m.unescapeString=function(b){for(var d,c=b;;){if(d=a.unescape(c),d===c)break;c=d}return c},m.unescapeHash=function(a){var b=m.normalizeHash(a);return b=m.unescapeString(b)},m.normalizeHash=function(a){var b=a.replace(/[^#]*#/,"").replace(/#.*/,"");return b},m.setHash=function(a,b){var c,e,f;return b!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.setHash,args:arguments,queue:b}),!1):(c=m.escapeHash(a),m.busy(!0),e=m.extractState(a,!0),e&&!m.emulated.pushState?m.pushState(e.data,e.title,e.url,!1):d.location.hash!==c&&(m.bugs.setHash?(f=m.getPageUrl(),m.pushState(null,null,f+"#"+c,!1)):d.location.hash=c),m)
},m.escapeHash=function(b){var c=m.normalizeHash(b);return c=a.escape(c),m.bugs.hashEscape||(c=c.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),c},m.getHashByUrl=function(a){var b=String(a).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return b=m.unescapeHash(b)},m.setTitle=function(a){var c,b=a.title;b||(c=m.getStateByIndex(0),c&&c.url===a.url&&(b=c.title||m.options.initialTitle));try{d.getElementsByTagName("title")[0].innerHTML=b.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")
}catch(e){}return d.title=b,m},m.queues=[],m.busy=function(a){if("undefined"!=typeof a?m.busy.flag=a:"undefined"==typeof m.busy.flag&&(m.busy.flag=!1),!m.busy.flag){h(m.busy.timeout);var b=function(){var a,c,d;if(!m.busy.flag)for(a=m.queues.length-1;a>=0;--a)c=m.queues[a],0!==c.length&&(d=c.shift(),m.fireQueueItem(d),m.busy.timeout=g(b,m.options.busyDelay))};m.busy.timeout=g(b,m.options.busyDelay)}return m.busy.flag},m.busy.flag=!1,m.fireQueueItem=function(a){return a.callback.apply(a.scope||m,a.args||[])},m.pushQueue=function(a){return m.queues[a.queue||0]=m.queues[a.queue||0]||[],m.queues[a.queue||0].push(a),m
},m.queue=function(a,b){return"function"==typeof a&&(a={callback:a}),"undefined"!=typeof b&&(a.queue=b),m.busy()?m.pushQueue(a):m.fireQueueItem(a),m},m.clearQueue=function(){return m.busy.flag=!1,m.queues=[],m},m.stateChanged=!1,m.doubleChecker=!1,m.doubleCheckComplete=function(){return m.stateChanged=!0,m.doubleCheckClear(),m},m.doubleCheckClear=function(){return m.doubleChecker&&(h(m.doubleChecker),m.doubleChecker=!1),m},m.doubleCheck=function(a){return m.stateChanged=!1,m.doubleCheckClear(),m.bugs.ieDoubleCheck&&(m.doubleChecker=g(function(){return m.doubleCheckClear(),m.stateChanged||a(),!0
},m.options.doubleCheckInterval)),m},m.safariStatePoll=function(){var c,b=m.extractState(d.location.href);if(!m.isLastSavedState(b))return c=b,c||(c=m.createStateObject()),m.Adapter.trigger(a,"popstate"),m},m.back=function(a){return a!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.back,args:arguments,queue:a}),!1):(m.busy(!0),m.doubleCheck(function(){m.back(!1)}),n.go(-1),!0)},m.forward=function(a){return a!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.forward,args:arguments,queue:a}),!1):(m.busy(!0),m.doubleCheck(function(){m.forward(!1)
}),n.go(1),!0)},m.go=function(a,b){var c;if(a>0)for(c=1;a>=c;++c)m.forward(b);else{if(!(0>a))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(c=-1;c>=a;--c)m.back(b)}return m},m.emulated.pushState){var o=function(){};m.pushState=m.pushState||o,m.replaceState=m.replaceState||o}else m.onPopState=function(b,c){var g,h,e=!1,f=!1;return m.doubleCheckComplete(),(g=m.getHash())?(h=m.extractState(g||d.location.href,!0),h?m.replaceState(h.data,h.title,h.url,!1):(m.Adapter.trigger(a,"anchorchange"),m.busy(!1)),m.expectedStateId=!1,!1):(e=m.Adapter.extractEventData("state",b,c)||!1,f=e?m.getStateById(e):m.expectedStateId?m.getStateById(m.expectedStateId):m.extractState(d.location.href),f||(f=m.createStateObject(null,null,d.location.href)),m.expectedStateId=!1,m.isLastSavedState(f)?(m.busy(!1),!1):(m.storeState(f),m.saveState(f),m.setTitle(f),m.Adapter.trigger(a,"statechange"),m.busy(!1),!0))
},m.Adapter.bind(a,"popstate",m.onPopState),m.pushState=function(b,c,d,e){if(m.getHashByUrl(d)&&m.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(e!==!1&&m.busy())return m.pushQueue({scope:m,callback:m.pushState,args:arguments,queue:e}),!1;m.busy(!0);var f=m.createStateObject(b,c,d);return m.isLastSavedState(f)?m.busy(!1):(m.storeState(f),m.expectedStateId=f.id,n.pushState(f.id,f.title,f.url),m.Adapter.trigger(a,"popstate")),!0},m.replaceState=function(b,c,d,e){if(m.getHashByUrl(d)&&m.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");
if(e!==!1&&m.busy())return m.pushQueue({scope:m,callback:m.replaceState,args:arguments,queue:e}),!1;m.busy(!0);var f=m.createStateObject(b,c,d);return m.isLastSavedState(f)?m.busy(!1):(m.storeState(f),m.expectedStateId=f.id,n.replaceState(f.id,f.title,f.url),m.Adapter.trigger(a,"popstate")),!0};if(f){try{m.store=k.parse(f.getItem("History.store"))||{}}catch(p){m.store={}}m.normalizeStore()}else m.store={},m.normalizeStore();m.Adapter.bind(a,"beforeunload",m.clearAllIntervals),m.Adapter.bind(a,"unload",m.clearAllIntervals),m.saveState(m.storeState(m.extractState(d.location.href,!0))),f&&(m.onUnload=function(){var a,b;
try{a=k.parse(f.getItem("History.store"))||{}}catch(c){a={}}a.idToState=a.idToState||{},a.urlToId=a.urlToId||{},a.stateToId=a.stateToId||{};for(b in m.idToState)m.idToState.hasOwnProperty(b)&&(a.idToState[b]=m.idToState[b]);for(b in m.urlToId)m.urlToId.hasOwnProperty(b)&&(a.urlToId[b]=m.urlToId[b]);for(b in m.stateToId)m.stateToId.hasOwnProperty(b)&&(a.stateToId[b]=m.stateToId[b]);m.store=a,m.normalizeStore(),f.setItem("History.store",k.stringify(a))},m.intervalList.push(i(m.onUnload,m.options.storeInterval)),m.Adapter.bind(a,"beforeunload",m.onUnload),m.Adapter.bind(a,"unload",m.onUnload)),m.emulated.pushState||(m.bugs.safariPoll&&m.intervalList.push(i(m.safariStatePoll,m.options.safariPollInterval)),("Apple Computer, Inc."===e.vendor||"Mozilla"===(e.appCodeName||""))&&(m.Adapter.bind(a,"hashchange",function(){m.Adapter.trigger(a,"popstate")
}),m.getHash()&&m.Adapter.onDomLoad(function(){m.Adapter.trigger(a,"hashchange")})))},m.init()}(window);var b=[];a.fn.route=function(c){if(this.is("a")){var d=this.attr("title"),e=a.joomla.appendTitle;"before"===e&&(d=a.joomla.sitename+(d?" - "+d:"")),"after"===e&&(d=(d?d+" - ":"")+a.joomla.sitename);var f=(new Date).getTime();b[f]=f,History.pushState(a.extend({timestamp:f,refresh:!0},c),d,this.attr("href"))}return this},History.Adapter.bind(window,"statechange",function(){var a=History.getState();a.id===History.savedStates[0].id&&(window.location=a.url),a.data.timestamp in b?delete b[a.data.timestamp]:a.data.refresh&&(window.location=a.url)
})};d(),b.resolveWith(d)};FD40.module("history",a)}(),function(){var a=function(a){var b=this,c=a,d=function(){!function(){function e(){}function f(a){function b(b){b.prototype.option||(b.prototype.option=function(b){a.isPlainObject(b)&&(this.options=a.extend(!0,this.options,b))})}function f(b,e){a.fn[b]=function(f){if("string"==typeof f){for(var g=d.call(arguments,1),h=0,i=this.length;i>h;h++){var j=this[h],k=a.data(j,b);if(k)if(a.isFunction(k[f])&&"_"!==f.charAt(0)){var l=k[f].apply(k,g);if(void 0!==l)return l
}else c("no such method '"+f+"' for "+b+" instance");else c("cannot call methods on "+b+" prior to initialization; attempted to call '"+f+"'")}return this}return this.each(function(){var c=a.data(this,b);c?(c.option(f),c._init()):(c=new e(this,f),a.data(this,b,c))})}}if(a){var c="undefined"==typeof console?e:function(a){console.error(a)};return a.bridget=function(a,c){b(c),f(a,c)},a.bridget}}var c=null,d=Array.prototype.slice;"function"==typeof c&&c.amd?c("jquery-bridget/jquery.bridget",["jquery"],f):f(a)}(window),function(a){function f(b){var c=a.event;
return c.target=c.target||c.srcElement||b,c}var c=document.documentElement,e=function(){};c.addEventListener?e=function(a,b,c){a.addEventListener(b,c,!1)}:c.attachEvent&&(e=function(a,b,c){a[b+c]=c.handleEvent?function(){var b=f(a);c.handleEvent.call(c,b)}:function(){var b=f(a);c.call(a,b)},a.attachEvent("on"+b,a[b+c])});var g=function(){};c.removeEventListener?g=function(a,b,c){a.removeEventListener(b,c,!1)}:c.detachEvent&&(g=function(a,b,c){a.detachEvent("on"+b,a[b+c]);try{delete a[b+c]}catch(d){a[b+c]=void 0
}});var h={bind:e,unbind:g};"function"==typeof define&&define.amd?define("eventie/eventie",h):"object"==typeof d?b.exports=h:a.eventie=h}(this),function(a){function d(a){"function"==typeof a&&(d.isReady?a():c.push(a))}function e(a){var e="readystatechange"===a.type&&"complete"!==b.readyState;if(!d.isReady&&!e){d.isReady=!0;for(var f=0,g=c.length;g>f;f++){var h=c[f];h()}}}function f(c){return c.bind(b,"DOMContentLoaded",e),c.bind(b,"readystatechange",e),c.bind(a,"load",e),d}var b=a.document,c=[];d.isReady=!1,"function"==typeof define&&define.amd?(d.isReady="function"==typeof requirejs,define("doc-ready/doc-ready",["eventie/eventie"],f)):a.docReady=f(a.eventie)
}(this),function(){function a(){}function f(a,b){for(var c=a.length;c--;)if(a[c].listener===b)return c;return-1}function g(a){return function(){return this[a].apply(this,arguments)}}var c=a.prototype,d=this,e=d.EventEmitter;c.getListeners=function(a){var c,d,b=this._getEvents();if(a instanceof RegExp){c={};for(d in b)b.hasOwnProperty(d)&&a.test(d)&&(c[d]=b[d])}else c=b[a]||(b[a]=[]);return c},c.flattenListeners=function(a){var c,b=[];for(c=0;c<a.length;c+=1)b.push(a[c].listener);return b},c.getListenersAsObject=function(a){var c,b=this.getListeners(a);
return b instanceof Array&&(c={},c[a]=b),c||b},c.addListener=function(a,b){var e,c=this.getListenersAsObject(a),d="object"==typeof b;for(e in c)c.hasOwnProperty(e)&&-1===f(c[e],b)&&c[e].push(d?b:{listener:b,once:!1});return this},c.on=g("addListener"),c.addOnceListener=function(a,b){return this.addListener(a,{listener:b,once:!0})},c.once=g("addOnceListener"),c.defineEvent=function(a){return this.getListeners(a),this},c.defineEvents=function(a){for(var b=0;b<a.length;b+=1)this.defineEvent(a[b]);return this},c.removeListener=function(a,b){var d,e,c=this.getListenersAsObject(a);
for(e in c)c.hasOwnProperty(e)&&(d=f(c[e],b),-1!==d&&c[e].splice(d,1));return this},c.off=g("removeListener"),c.addListeners=function(a,b){return this.manipulateListeners(!1,a,b)},c.removeListeners=function(a,b){return this.manipulateListeners(!0,a,b)},c.manipulateListeners=function(a,b,c){var d,e,f=a?this.removeListener:this.addListener,g=a?this.removeListeners:this.addListeners;if("object"!=typeof b||b instanceof RegExp)for(d=c.length;d--;)f.call(this,b,c[d]);else for(d in b)b.hasOwnProperty(d)&&(e=b[d])&&("function"==typeof e?f.call(this,d,e):g.call(this,d,e));
return this},c.removeEvent=function(a){var d,b=typeof a,c=this._getEvents();if("string"===b)delete c[a];else if(a instanceof RegExp)for(d in c)c.hasOwnProperty(d)&&a.test(d)&&delete c[d];else delete this._events;return this},c.removeAllListeners=g("removeEvent"),c.emitEvent=function(a,b){var d,e,f,g,c=this.getListenersAsObject(a);for(f in c)if(c.hasOwnProperty(f))for(e=c[f].length;e--;)d=c[f][e],d.once===!0&&this.removeListener(a,d.listener),g=d.listener.apply(this,b||[]),g===this._getOnceReturnValue()&&this.removeListener(a,d.listener);
return this},c.trigger=g("emitEvent"),c.emit=function(a){var b=Array.prototype.slice.call(arguments,1);return this.emitEvent(a,b)},c.setOnceReturnValue=function(a){return this._onceReturnValue=a,this},c._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},c._getEvents=function(){return this._events||(this._events={})},a.noConflict=function(){return d.EventEmitter=e,a},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return a
}):"object"==typeof b&&b.exports?b.exports=a:this.EventEmitter=a}.call(this),function(a){function f(a){if(a){if("string"==typeof e[a])return a;a=a.charAt(0).toUpperCase()+a.slice(1);for(var b,d=0,f=c.length;f>d;d++)if(b=c[d]+a,"string"==typeof e[b])return b}}var c="Webkit Moz ms Ms O".split(" "),e=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return f}):"object"==typeof d?b.exports=f:a.getStyleProperty=f}(window),function(a){function g(a){var b=parseFloat(a),c=-1===a.indexOf("%")&&!isNaN(b);
return c&&b}function i(){for(var a={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},b=0,c=h.length;c>b;b++){var d=h[b];a[d]=0}return a}function j(a){function d(a){if("string"==typeof a&&(a=document.querySelector(a)),a&&"object"==typeof a&&a.nodeType){var d=f(a);if("none"===d.display)return i();var e={};e.width=a.offsetWidth,e.height=a.offsetHeight;for(var k=e.isBorderBox=!(!b||!d[b]||"border-box"!==d[b]),l=0,m=h.length;m>l;l++){var n=h[l],o=d[n];o=j(a,o);var p=parseFloat(o);e[n]=isNaN(p)?0:p
}var q=e.paddingLeft+e.paddingRight,r=e.paddingTop+e.paddingBottom,s=e.marginLeft+e.marginRight,t=e.marginTop+e.marginBottom,u=e.borderLeftWidth+e.borderRightWidth,v=e.borderTopWidth+e.borderBottomWidth,w=k&&c,x=g(d.width);x!==!1&&(e.width=x+(w?0:q+u));var y=g(d.height);return y!==!1&&(e.height=y+(w?0:r+v)),e.innerWidth=e.width-(q+u),e.innerHeight=e.height-(r+v),e.outerWidth=e.width+s,e.outerHeight=e.height+t,e}}function j(a,b){if(e||-1===b.indexOf("%"))return b;var c=a.style,d=c.left,f=a.runtimeStyle,g=f&&f.left;
return g&&(f.left=a.currentStyle.left),c.left=b,b=c.pixelLeft,c.left=d,g&&(f.left=g),b}var c,b=a("boxSizing");return function(){if(b){var a=document.createElement("div");a.style.width="200px",a.style.padding="1px 2px 3px 4px",a.style.borderStyle="solid",a.style.borderWidth="1px 2px 3px 4px",a.style[b]="border-box";var d=document.body||document.documentElement;d.appendChild(a);var e=f(a);c=200===g(e.width),d.removeChild(a)}}(),d}var e=a.getComputedStyle,f=e?function(a){return e(a,null)}:function(a){return a.currentStyle
},h=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],j):"object"==typeof d?b.exports=j(require("get-style-property")):a.getSize=j(a.getStyleProperty)}(window),function(a,b){function d(a,b){return a[c](b)}function e(a){if(!a.parentNode){var b=document.createDocumentFragment();
b.appendChild(a)}}function f(a,b){e(a);for(var c=a.parentNode.querySelectorAll(b),d=0,f=c.length;f>d;d++)if(c[d]===a)return!0;return!1}function g(a,b){return e(a),d(a,b)}var h,c=function(){if(b.matchesSelector)return"matchesSelector";for(var a=["webkit","moz","ms","o"],c=0,d=a.length;d>c;c++){var e=a[c],f=e+"MatchesSelector";if(b[f])return f}}();if(c){var i=document.createElement("div"),j=d(i,"div");h=j?d:g}else h=f;"function"==typeof define&&define.amd?define("matches-selector/matches-selector",[],function(){return h
}):window.matchesSelector=h}(this,Element.prototype),function(a){function d(a,b){for(var c in b)a[c]=b[c];return a}function e(a){for(var b in a)return!1;return b=null,!0}function f(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}function g(a,b,g){function o(a,b){a&&(this.element=a,this.layout=b,this.position={x:0,y:0},this._create())}var h=g("transition"),i=g("transform"),j=h&&i,k=!!g("perspective"),l={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[h],m=["transform","transition","transitionDuration","transitionProperty"],n=function(){for(var a={},b=0,c=m.length;c>b;b++){var d=m[b],e=g(d);
e&&e!==d&&(a[d]=e)}return a}();d(o.prototype,a.prototype),o.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},o.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},o.prototype.getSize=function(){this.size=b(this.element)},o.prototype.css=function(a){var b=this.element.style;for(var c in a){var d=n[c]||c;b[d]=a[c]}},o.prototype.getPosition=function(){var a=c(this.element),b=this.layout.options,d=b.isOriginLeft,e=b.isOriginTop,f=parseInt(a[d?"left":"right"],10),g=parseInt(a[e?"top":"bottom"],10);
f=isNaN(f)?0:f,g=isNaN(g)?0:g;var h=this.layout.size;f-=d?h.paddingLeft:h.paddingRight,g-=e?h.paddingTop:h.paddingBottom,this.position.x=f,this.position.y=g},o.prototype.layoutPosition=function(){var a=this.layout.size,b=this.layout.options,c={};b.isOriginLeft?(c.left=this.position.x+a.paddingLeft+"px",c.right=""):(c.right=this.position.x+a.paddingRight+"px",c.left=""),b.isOriginTop?(c.top=this.position.y+a.paddingTop+"px",c.bottom=""):(c.bottom=this.position.y+a.paddingBottom+"px",c.top=""),this.css(c),this.emitEvent("layout",[this])
};var p=k?function(a,b){return"translate3d("+a+"px, "+b+"px, 0)"}:function(a,b){return"translate("+a+"px, "+b+"px)"};o.prototype._transitionTo=function(a,b){this.getPosition();var c=this.position.x,d=this.position.y,e=parseInt(a,10),f=parseInt(b,10),g=e===this.position.x&&f===this.position.y;if(this.setPosition(a,b),g&&!this.isTransitioning)return this.layoutPosition(),void 0;var h=a-c,i=b-d,j={},k=this.layout.options;h=k.isOriginLeft?h:-h,i=k.isOriginTop?i:-i,j.transform=p(h,i),this.transition({to:j,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})
},o.prototype.goTo=function(a,b){this.setPosition(a,b),this.layoutPosition()},o.prototype.moveTo=j?o.prototype._transitionTo:o.prototype.goTo,o.prototype.setPosition=function(a,b){this.position.x=parseInt(a,10),this.position.y=parseInt(b,10)},o.prototype._nonTransition=function(a){this.css(a.to),a.isCleaning&&this._removeStyles(a.to);for(var b in a.onTransitionEnd)a.onTransitionEnd[b].call(this)},o.prototype._transition=function(a){if(!parseFloat(this.layout.options.transitionDuration))return this._nonTransition(a),void 0;
var b=this._transn;for(var c in a.onTransitionEnd)b.onEnd[c]=a.onTransitionEnd[c];for(c in a.to)b.ingProperties[c]=!0,a.isCleaning&&(b.clean[c]=!0);if(a.from){this.css(a.from);var d=this.element.offsetHeight;d=null}this.enableTransition(a.to),this.css(a.to),this.isTransitioning=!0};var q=i&&f(i)+",opacity";o.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:q,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(l,this,!1))},o.prototype.transition=o.prototype[h?"_transition":"_nonTransition"],o.prototype.onwebkitTransitionEnd=function(a){this.ontransitionend(a)
},o.prototype.onotransitionend=function(a){this.ontransitionend(a)};var r={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};o.prototype.ontransitionend=function(a){if(a.target===this.element){var b=this._transn,c=r[a.propertyName]||a.propertyName;if(delete b.ingProperties[c],e(b.ingProperties)&&this.disableTransition(),c in b.clean&&(this.element.style[a.propertyName]="",delete b.clean[c]),c in b.onEnd){var d=b.onEnd[c];d.call(this),delete b.onEnd[c]}this.emitEvent("transitionEnd",[this])
}},o.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(l,this,!1),this.isTransitioning=!1},o.prototype._removeStyles=function(a){var b={};for(var c in a)b[c]="";this.css(b)};var s={transitionProperty:"",transitionDuration:""};return o.prototype.removeTransitionStyles=function(){this.css(s)},o.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.emitEvent("remove",[this])},o.prototype.remove=function(){if(!h||!parseFloat(this.layout.options.transitionDuration))return this.removeElem(),void 0;
var a=this;this.on("transitionEnd",function(){return a.removeElem(),!0}),this.hide()},o.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var a=this.layout.options;this.transition({from:a.hiddenStyle,to:a.visibleStyle,isCleaning:!0})},o.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var a=this.layout.options;this.transition({from:a.visibleStyle,to:a.hiddenStyle,isCleaning:!0,onTransitionEnd:{opacity:function(){this.isHidden&&this.css({display:"none"})}}})},o.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})
},o}var b=a.getComputedStyle,c=b?function(a){return b(a,null)}:function(a){return a.currentStyle};"function"==typeof define&&define.amd?define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property"],g):(a.Outlayer={},a.Outlayer.Item=g(a.EventEmitter,a.getSize,a.getStyleProperty))}(window),function(a){function f(a,b){for(var c in b)a[c]=b[c];return a}function h(a){return"[object Array]"===g.call(a)}function i(a){var b=[];if(h(a))b=a;else if(a&&"number"==typeof a.length)for(var c=0,d=a.length;d>c;c++)b.push(a[c]);
else b.push(a);return b}function l(a,b){var c=k(b,a);-1!==c&&b.splice(c,1)}function m(a){return a.replace(/(.)([A-Z])/g,function(a,b,c){return b+"-"+c}).toLowerCase()}function n(g,h,k,n,o,p){function s(a,c){if("string"==typeof a&&(a=b.querySelector(a)),!a||!j(a))return d&&d.error("Bad "+this.constructor.namespace+" element: "+a),void 0;this.element=a,this.options=f({},this.constructor.defaults),this.option(c);var e=++q;this.element.outlayerGUID=e,r[e]=this,this._create(),this.options.isInitLayout&&this.layout()
}var q=0,r={};return s.namespace="outlayer",s.Item=p,s.defaults={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},f(s.prototype,k.prototype),s.prototype.option=function(a){f(this.options,a)},s.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),f(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()
},s.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},s.prototype._itemize=function(a){for(var b=this._filterFindItemElements(a),c=this.constructor.Item,d=[],e=0,f=b.length;f>e;e++){var g=b[e],h=new c(g,this);d.push(h)}return d},s.prototype._filterFindItemElements=function(a){a=i(a);for(var b=this.options.itemSelector,c=[],d=0,e=a.length;e>d;d++){var f=a[d];if(j(f))if(b){o(f,b)&&c.push(f);for(var g=f.querySelectorAll(b),h=0,k=g.length;k>h;h++)c.push(g[h])}else c.push(f)}return c
},s.prototype.getItemElements=function(){for(var a=[],b=0,c=this.items.length;c>b;b++)a.push(this.items[b].element);return a},s.prototype.layout=function(){this._resetLayout(),this._manageStamps();var a=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,a),this._isLayoutInited=!0},s.prototype._init=s.prototype.layout,s.prototype._resetLayout=function(){this.getSize()},s.prototype.getSize=function(){this.size=n(this.element)},s.prototype._getMeasurement=function(a,b){var d,c=this.options[a];
c?("string"==typeof c?d=this.element.querySelector(c):j(c)&&(d=c),this[a]=d?n(d)[b]:c):this[a]=0},s.prototype.layoutItems=function(a,b){a=this._getItemsForLayout(a),this._layoutItems(a,b),this._postLayout()},s.prototype._getItemsForLayout=function(a){for(var b=[],c=0,d=a.length;d>c;c++){var e=a[c];e.isIgnored||b.push(e)}return b},s.prototype._layoutItems=function(a,b){function d(){c.emitEvent("layoutComplete",[c,a])}var c=this;if(!a||!a.length)return d(),void 0;this._itemsOn(a,"layout",d);for(var e=[],f=0,g=a.length;g>f;f++){var h=a[f],i=this._getItemLayoutPosition(h);
i.item=h,i.isInstant=b||h.isLayoutInstant,e.push(i)}this._processLayoutQueue(e)},s.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},s.prototype._processLayoutQueue=function(a){for(var b=0,c=a.length;c>b;b++){var d=a[b];this._positionItem(d.item,d.x,d.y,d.isInstant)}},s.prototype._positionItem=function(a,b,c,d){d?a.goTo(b,c):a.moveTo(b,c)},s.prototype._postLayout=function(){this.resizeContainer()},s.prototype.resizeContainer=function(){if(this.options.isResizingContainer){var a=this._getContainerSize();
a&&(this._setContainerMeasure(a.width,!0),this._setContainerMeasure(a.height,!1))}},s.prototype._getContainerSize=e,s.prototype._setContainerMeasure=function(a,b){if(void 0!==a){var c=this.size;c.isBorderBox&&(a+=b?c.paddingLeft+c.paddingRight+c.borderLeftWidth+c.borderRightWidth:c.paddingBottom+c.paddingTop+c.borderTopWidth+c.borderBottomWidth),a=Math.max(a,0),this.element.style[b?"width":"height"]=a+"px"}},s.prototype._itemsOn=function(a,b,c){function g(){return d++,d===e&&c.call(f),!0}for(var d=0,e=a.length,f=this,h=0,i=a.length;i>h;h++){var j=a[h];
j.on(b,g)}},s.prototype.ignore=function(a){var b=this.getItem(a);b&&(b.isIgnored=!0)},s.prototype.unignore=function(a){var b=this.getItem(a);b&&delete b.isIgnored},s.prototype.stamp=function(a){if(a=this._find(a)){this.stamps=this.stamps.concat(a);for(var b=0,c=a.length;c>b;b++){var d=a[b];this.ignore(d)}}},s.prototype.unstamp=function(a){if(a=this._find(a))for(var b=0,c=a.length;c>b;b++){var d=a[b];l(d,this.stamps),this.unignore(d)}},s.prototype._find=function(a){return a?("string"==typeof a&&(a=this.element.querySelectorAll(a)),a=i(a)):void 0
},s.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var a=0,b=this.stamps.length;b>a;a++){var c=this.stamps[a];this._manageStamp(c)}}},s.prototype._getBoundingRect=function(){var a=this.element.getBoundingClientRect(),b=this.size;this._boundingRect={left:a.left+b.paddingLeft+b.borderLeftWidth,top:a.top+b.paddingTop+b.borderTopWidth,right:a.right-(b.paddingRight+b.borderRightWidth),bottom:a.bottom-(b.paddingBottom+b.borderBottomWidth)}},s.prototype._manageStamp=e,s.prototype._getElementOffset=function(a){var b=a.getBoundingClientRect(),c=this._boundingRect,d=n(a),e={left:b.left-c.left-d.marginLeft,top:b.top-c.top-d.marginTop,right:c.right-b.right-d.marginRight,bottom:c.bottom-b.bottom-d.marginBottom};
return e},s.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},s.prototype.bindResize=function(){this.isResizeBound||(g.bind(a,"resize",this),this.isResizeBound=!0)},s.prototype.unbindResize=function(){this.isResizeBound&&g.unbind(a,"resize",this),this.isResizeBound=!1},s.prototype.onresize=function(){function b(){a.resize(),delete a.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var a=this;this.resizeTimeout=setTimeout(b,100)},s.prototype.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()
},s.prototype.needsResizeLayout=function(){var a=n(this.element),b=this.size&&a;return b&&a.innerWidth!==this.size.innerWidth},s.prototype.addItems=function(a){var b=this._itemize(a);return b.length&&(this.items=this.items.concat(b)),b},s.prototype.appended=function(a){var b=this.addItems(a);b.length&&(this.layoutItems(b,!0),this.reveal(b))},s.prototype.prepended=function(a){var b=this._itemize(a);if(b.length){var c=this.items.slice(0);this.items=b.concat(c),this._resetLayout(),this._manageStamps(),this.layoutItems(b,!0),this.reveal(b),this.layoutItems(c)
}},s.prototype.reveal=function(a){var b=a&&a.length;if(b)for(var c=0;b>c;c++){var d=a[c];d.reveal()}},s.prototype.hide=function(a){var b=a&&a.length;if(b)for(var c=0;b>c;c++){var d=a[c];d.hide()}},s.prototype.getItem=function(a){for(var b=0,c=this.items.length;c>b;b++){var d=this.items[b];if(d.element===a)return d}},s.prototype.getItems=function(a){if(a&&a.length){for(var b=[],c=0,d=a.length;d>c;c++){var e=a[c],f=this.getItem(e);f&&b.push(f)}return b}},s.prototype.remove=function(a){a=i(a);var b=this.getItems(a);
if(b&&b.length){this._itemsOn(b,"remove",function(){this.emitEvent("removeComplete",[this,b])});for(var c=0,d=b.length;d>c;c++){var e=b[c];e.remove(),l(e,this.items)}}},s.prototype.destroy=function(){var a=this.element.style;a.height="",a.position="",a.width="";for(var b=0,d=this.items.length;d>b;b++){var e=this.items[b];e.destroy()}this.unbindResize(),delete this.element.outlayerGUID,c&&c.removeData(this.element,this.constructor.namespace)},s.data=function(a){var b=a&&a.outlayerGUID;return b&&r[b]},s.create=function(a,e){function g(){s.apply(this,arguments)
}return Object.create?g.prototype=Object.create(s.prototype):f(g.prototype,s.prototype),g.prototype.constructor=g,g.defaults=f({},s.defaults),f(g.defaults,e),g.prototype.settings={},g.namespace=a,g.data=s.data,g.Item=function(){p.apply(this,arguments)},g.Item.prototype=new p,h(function(){for(var e=m(a),f=b.querySelectorAll(".js-"+e),h="data-"+e+"-options",i=0,j=f.length;j>i;i++){var n,k=f[i],l=k.getAttribute(h);try{n=l&&JSON.parse(l)}catch(o){d&&d.error("Error parsing "+h+" on "+k.nodeName.toLowerCase()+(k.id?"#"+k.id:"")+": "+o);
continue}var p=new g(k,n);c&&c.data(k,a,p)}}),c&&c.bridget&&c.bridget(a,g),g},s.Item=p,s}var b=a.document,d=a.console,e=function(){},g=Object.prototype.toString,j="object"==typeof HTMLElement?function(a){return a instanceof HTMLElement}:function(a){return a&&"object"==typeof a&&1===a.nodeType&&"string"==typeof a.nodeName},k=Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1};"function"==typeof define&&define.amd?define("outlayer/outlayer",["eventie/eventie","doc-ready/doc-ready","eventEmitter/EventEmitter","get-size/get-size","matches-selector/matches-selector","./item"],n):a.Outlayer=n(a.eventie,a.docReady,a.EventEmitter,a.getSize,a.matchesSelector,a.Outlayer.Item)
}(window),function(a){function c(a,c){var d=a.create("masonry");return d.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns();var a=this.cols;for(this.colYs=[];a--;)this.colYs.push(0);this.maxY=0},d.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var a=this.items[0],b=a&&a.element;this.columnWidth=b&&c(b).outerWidth||this.containerWidth}this.columnWidth+=this.gutter,this.cols=Math.floor((this.containerWidth+this.gutter)/this.columnWidth),this.cols=Math.max(this.cols,1)
},d.prototype.getContainerWidth=function(){var a=this.options.isFitWidth?this.element.parentNode:this.element,b=c(a);this.containerWidth=b&&b.innerWidth},d.prototype._getItemLayoutPosition=function(a){a.getSize();var c=a.size.outerWidth%this.columnWidth,d=c&&1>c?"round":"ceil",e=Math[d](a.size.outerWidth/this.columnWidth);e=Math.min(e,this.cols);for(var f=this._getColGroup(e),g=Math.min.apply(Math,f),h=b(f,g),i={x:this.columnWidth*h,y:g},j=g+a.size.outerHeight,k=this.cols+1-f.length,l=0;k>l;l++)this.colYs[h+l]=j;
return i},d.prototype._getColGroup=function(a){if(2>a)return this.colYs;for(var b=[],c=this.cols+1-a,d=0;c>d;d++){var e=this.colYs.slice(d,d+a);b[d]=Math.max.apply(Math,e)}return b},d.prototype._manageStamp=function(a){var b=c(a),d=this._getElementOffset(a),e=this.options.isOriginLeft?d.left:d.right,f=e+b.outerWidth,g=Math.floor(e/this.columnWidth);g=Math.max(0,g);var h=Math.floor(f/this.columnWidth);h-=f%this.columnWidth?0:1,h=Math.min(this.cols-1,h);for(var i=(this.options.isOriginTop?d.top:d.bottom)+b.outerHeight,j=g;h>=j;j++)this.colYs[j]=Math.max(i,this.colYs[j])
},d.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var a={height:this.maxY};return this.options.isFitWidth&&(a.width=this._getContainerFitWidth()),a},d.prototype._getContainerFitWidth=function(){for(var a=0,b=this.cols;--b&&0===this.colYs[b];)a++;return(this.cols-a)*this.columnWidth-this.gutter},d.prototype.needsResizeLayout=function(){var a=this.containerWidth;return this.getContainerWidth(),a!==this.containerWidth},d}var b=Array.prototype.indexOf?function(a,b){return a.indexOf(b)
}:function(a,b){for(var c=0,d=a.length;d>c;c++){var e=a[c];if(e===b)return c}return-1};"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],c):a.Masonry3=c(a.Outlayer,a.getSize)}(window)};d(),b.resolveWith(d)};FD40.module("masonry",a)}(),function(){var a=function(a){var b=this;a.require().script("moment").done(function(){var c=function(){var b=0,c=a.moment,d=function(d,e){var f={pickDate:!0,pickTime:!0,useMinutes:!0,useSeconds:!1,useCurrent:!0,minuteStepping:1,minDate:new c({y:1900}),maxDate:(new c).add(100,"y"),showToday:!0,collapse:!0,language:"en",defaultDate:"",disabledDates:!1,enabledDates:!1,icons:{},useStrict:!1,direction:"auto",sideBySide:!1,daysOfWeekDisabled:!1,component:"",dow:0},g={time:"fa fa-clock-o",date:"fa fa-calendar",up:"fa fa-chevron-up",down:"fa fa-chevron-down"},h=this,j=function(){var n,i=!1;
if(h.options=a.extend({},f,e),h.options.icons=a.extend({},g,h.options.icons),h.element=a(d),l(),!h.options.pickTime&&!h.options.pickDate)throw new Error("Must choose at least one picker");if(h.id=b++,c.lang(h.options.language),h.date=c(),h.unset=!1,h.isInput=h.element.is("input"),h.component=!1,c()._lang._week.dow=h.options.dow,h.element.hasClass("input-group")&&(h.component=0==h.element.find(".datepickerbutton").size()?h.element.find("[class^='input-group-']"):h.element.find(".datepickerbutton")),h.format=h.options.format,n=c()._lang._longDateFormat,h.format||(h.format=h.options.pickDate?n.L:"",h.options.pickDate&&h.options.pickTime&&(h.format+=" "),h.format+=h.options.pickTime?n.LT:"",h.options.useSeconds&&(~n.LT.indexOf(" A")?h.format=h.format.split(" A")[0]+":ss A":h.format+=":ss")),h.use24hours=h.format.toLowerCase().indexOf("a")<1,h.component&&(i=h.component.find("span")),h.options.pickTime&&i&&i.addClass(h.options.icons.time),h.options.pickDate&&i&&(i.removeClass(h.options.icons.time),i.addClass(h.options.icons.date)),h.widget=a(O()).appendTo("body"),h.options.useSeconds&&!h.use24hours&&h.widget.width(300),h.minViewMode=h.options.minViewMode||0,"string"==typeof h.minViewMode)switch(h.minViewMode){case"months":h.minViewMode=1;
break;case"years":h.minViewMode=2;break;default:h.minViewMode=0}if(h.viewMode=h.options.viewMode||0,"string"==typeof h.viewMode)switch(h.viewMode){case"months":h.viewMode=1;break;case"years":h.viewMode=2;break;default:h.viewMode=0}if(h.options.disabledDates=M(h.options.disabledDates),h.options.enabledDates=M(h.options.enabledDates),h.startViewMode=h.viewMode,h.setMinDate(h.options.minDate),h.setMaxDate(h.options.maxDate),q(),r(),t(),u(),v(),p(),C(),D(),""!==h.options.defaultDate&&""==k().val()&&h.setValue(h.options.defaultDate),1!==h.options.minuteStepping){var o=h.options.minuteStepping;
h.date.minutes(Math.round(h.date.minutes()/o)*o%60).seconds(0)}},k=function(){return h.isInput?h.element:dateStr=h.element.find("input")},l=function(){var a;a=h.element.is("input")?h.element.data():h.element.data(),void 0!==a.dateFormat&&(h.options.format=a.dateFormat),void 0!==a.datePickdate&&(h.options.pickDate=a.datePickdate),void 0!==a.datePicktime&&(h.options.pickTime=a.datePicktime),void 0!==a.dateUseminutes&&(h.options.useMinutes=a.dateUseminutes),void 0!==a.dateUseseconds&&(h.options.useSeconds=a.dateUseseconds),void 0!==a.dateUsecurrent&&(h.options.useCurrent=a.dateUsecurrent),void 0!==a.dateMinutestepping&&(h.options.minuteStepping=a.dateMinutestepping),void 0!==a.dateMindate&&(h.options.minDate=a.dateMindate),void 0!==a.dateMaxdate&&(h.options.maxDate=a.dateMaxdate),void 0!==a.dateShowtoday&&(h.options.showToday=a.dateShowtoday),void 0!==a.dateCollapse&&(h.options.collapse=a.dateCollapse),void 0!==a.dateLanguage&&(h.options.language=a.dateLanguage),void 0!==a.dateDefaultdate&&(h.options.defaultDate=a.dateDefaultdate),void 0!==a.dateDisableddates&&(h.options.disabledDates=a.dateDisableddates),void 0!==a.dateEnableddates&&(h.options.enabledDates=a.dateEnableddates),void 0!==a.dateIcons&&(h.options.icons=a.dateIcons),void 0!==a.dateUsestrict&&(h.options.useStrict=a.dateUsestrict),void 0!==a.dateDirection&&(h.options.direction=a.dateDirection),void 0!==a.dateSidebyside&&(h.options.sideBySide=a.dateSidebyside)
},m=function(){var b="absolute",c=h.component?h.component.offset():h.element.offset(),d=a(window);h.width=h.component?h.component.outerWidth():h.element.outerWidth(),c.top=c.top+h.element.outerHeight();var e;"up"===h.options.direction?e="top":"bottom"===h.options.direction?e="bottom":"auto"===h.options.direction&&(e=c.top+h.widget.height()>d.height()+d.scrollTop()&&h.widget.height()+h.element.outerHeight()<c.top?"top":"bottom"),"top"===e?(c.top-=h.widget.height()+h.element.outerHeight()+15,h.widget.addClass("top").removeClass("bottom")):(c.top+=1,h.widget.addClass("bottom").removeClass("top")),void 0!==h.options.width&&h.widget.width(h.options.width),"left"===h.options.orientation&&(h.widget.addClass("left-oriented"),c.left=c.left-h.widget.width()+20),H()&&(b="fixed",c.top-=d.scrollTop(),c.left-=d.scrollLeft()),d.width()<c.left+h.widget.outerWidth()?(c.right=d.width()-c.left-h.width,c.left="auto",h.widget.addClass("pull-right")):(c.right="auto",h.widget.removeClass("pull-right")),h.widget.css({position:b,top:c.top,left:c.left,right:c.right})
},n=function(a,b){c(h.date).isSame(c(a))||(h.element.trigger({type:"dp.change",date:c(h.date),oldDate:c(a)}),"change"!==b&&h.element.change())},o=function(a){h.element.trigger({type:"dp.error",date:c(a)})},p=function(a){c.lang(h.options.language);var b=a;b||(b=k().val(),b&&(h.date=c(b,h.format,h.options.useStrict)),h.date||(h.date=c())),h.viewDate=c(h.date).startOf("month"),s(),w()},q=function(){c.lang(h.options.language);var b=a("<tr>"),d=c.weekdaysMin(),f=d.splice(c()._lang._week.dow);d=f.concat(d),a.each(d,function(a,c){b.append('<th class="dow">'+c+"</th>")
}),h.widget.find(".datepicker-days thead").append(b)},r=function(){c.lang(h.options.language);for(var a="",b=0,d=c.monthsShort();12>b;)a+='<span class="month">'+d[b++]+"</span>";h.widget.find(".datepicker-months td").append(a)},s=function(){c.lang(h.options.language);var j,k,l,n,o,p,q,r,s,b=h.viewDate.year(),d=h.viewDate.month(),e=h.options.minDate.year(),f=h.options.minDate.month(),g=h.options.maxDate.year(),i=h.options.maxDate.month(),m=[],t=c.months();for(h.widget.find(".datepicker-days").find(".disabled").removeClass("disabled"),h.widget.find(".datepicker-months").find(".disabled").removeClass("disabled"),h.widget.find(".datepicker-years").find(".disabled").removeClass("disabled"),h.widget.find(".datepicker-days th:eq(1)").text(t[d]+" "+b),k=c(h.viewDate).subtract("months",1),q=k.daysInMonth(),k.date(q).startOf("week"),(b==e&&f>=d||e>b)&&h.widget.find(".datepicker-days th:eq(0)").addClass("disabled"),(b==g&&d>=i||b>g)&&h.widget.find(".datepicker-days th:eq(2)").addClass("disabled"),l=c(k).add(42,"d");k.isBefore(l);){if(k.weekday()===c().startOf("week").weekday()&&(n=a("<tr>"),m.push(n)),o="",k.year()<b||k.year()==b&&k.month()<d?o+=" old":(k.year()>b||k.year()==b&&k.month()>d)&&(o+=" new"),k.isSame(c({y:h.date.year(),M:h.date.month(),d:h.date.date()}))&&(o+=" active"),(K(k)||!L(k))&&(o+=" disabled"),h.options.showToday===!0&&k.isSame(c(),"day")&&(o+=" today"),h.options.daysOfWeekDisabled)for(p in h.options.daysOfWeekDisabled)if(k.day()==h.options.daysOfWeekDisabled[p]){o+=" disabled";
break}n.append('<td class="day'+o+'">'+k.date()+"</td>"),j=k.date(),k.add(1,"d"),j==k.date()&&k.add(1,"d")}for(h.widget.find(".datepicker-days tbody").empty().append(m),s=h.date.year(),t=h.widget.find(".datepicker-months").find("th:eq(1)").text(b).end().find("span").removeClass("active"),s===b&&t.eq(h.date.month()).addClass("active"),e>s-1&&h.widget.find(".datepicker-months th:eq(0)").addClass("disabled"),s+1>g&&h.widget.find(".datepicker-months th:eq(2)").addClass("disabled"),p=0;12>p;p++)b==e&&f>p||e>b?a(t[p]).addClass("disabled"):(b==g&&p>i||b>g)&&a(t[p]).addClass("disabled");
for(m="",b=10*parseInt(b/10,10),r=h.widget.find(".datepicker-years").find("th:eq(1)").text(b+"-"+(b+9)).end().find("td"),h.widget.find(".datepicker-years").find("th").removeClass("disabled"),e>b&&h.widget.find(".datepicker-years").find("th:eq(0)").addClass("disabled"),b+9>g&&h.widget.find(".datepicker-years").find("th:eq(2)").addClass("disabled"),b-=1,p=-1;11>p;p++)m+='<span class="year'+(-1===p||10===p?" old":"")+(s===b?" active":"")+(e>b||b>g?" disabled":"")+'">'+b+"</span>",b+=1;r.html(m)},t=function(){c.lang(h.options.language);
var d,e,f,a=h.widget.find(".timepicker .timepicker-hours table"),b="";if(a.parent().hide(),h.use24hours)for(d=0,e=0;6>e;e+=1){for(b+="<tr>",f=0;4>f;f+=1)b+='<td class="hour">'+N(d.toString())+"</td>",d++;b+="</tr>"}else for(d=1,e=0;3>e;e+=1){for(b+="<tr>",f=0;4>f;f+=1)b+='<td class="hour">'+N(d.toString())+"</td>",d++;b+="</tr>"}a.html(b)},u=function(){var d,e,a=h.widget.find(".timepicker .timepicker-minutes table"),b="",c=0,f=h.options.minuteStepping;for(a.parent().hide(),1==f&&(f=5),d=0;d<Math.ceil(60/f/4);d++){for(b+="<tr>",e=0;4>e;e+=1)60>c?(b+='<td class="minute">'+N(c.toString())+"</td>",c+=f):b+="<td></td>";
b+="</tr>"}a.html(b)},v=function(){var d,e,a=h.widget.find(".timepicker .timepicker-seconds table"),b="",c=0;for(a.parent().hide(),d=0;3>d;d++){for(b+="<tr>",e=0;4>e;e+=1)b+='<td class="second">'+N(c.toString())+"</td>",c+=5;b+="</tr>"}a.html(b)},w=function(){if(h.date){var a=h.widget.find(".timepicker span[data-time-component]"),b=h.date.hours(),c="AM";h.use24hours||(b>=12&&(c="PM"),0===b?b=12:12!=b&&(b%=12),h.widget.find(".timepicker [data-action=togglePeriod]").text(c)),a.filter("[data-time-component=hours]").text(N(b)),a.filter("[data-time-component=minutes]").text(N(h.date.minutes())),a.filter("[data-time-component=seconds]").text(N(h.date.second()))
}},x=function(b){b.stopPropagation(),b.preventDefault(),h.unset=!1;var e,f,g,i,d=a(b.target).closest("span, td, th"),j=c(h.date);if(1===d.length&&!d.is(".disabled"))switch(d[0].nodeName.toLowerCase()){case"th":switch(d[0].className){case"switch":C(1);break;case"prev":case"next":g=P.modes[h.viewMode].navStep,"prev"===d[0].className&&(g=-1*g),h.viewDate.add(g,P.modes[h.viewMode].navFnc),s()}break;case"span":d.is(".month")?(e=d.parent().find("span").index(d),h.viewDate.month(e)):(f=parseInt(d.text(),10)||0,h.viewDate.year(f)),h.viewMode===h.minViewMode&&(h.date=c({y:h.viewDate.year(),M:h.viewDate.month(),d:h.viewDate.date(),h:h.date.hours(),m:h.date.minutes(),s:h.date.seconds()}),n(j,b.type),I()),C(-1),s();
break;case"td":d.is(".day")&&(i=parseInt(d.text(),10)||1,e=h.viewDate.month(),f=h.viewDate.year(),d.is(".old")?0===e?(e=11,f-=1):e-=1:d.is(".new")&&(11==e?(e=0,f+=1):e+=1),h.date=c({y:f,M:e,d:i,h:h.date.hours(),m:h.date.minutes(),s:h.date.seconds()}),h.viewDate=c({y:f,M:e,d:Math.min(28,i)}),s(),I(),n(j,b.type))}},y={incrementHours:function(){J("add","hours",1)},incrementMinutes:function(){J("add","minutes",h.options.minuteStepping)},incrementSeconds:function(){J("add","seconds",1)},decrementHours:function(){J("subtract","hours",1)
},decrementMinutes:function(){J("subtract","minutes",h.options.minuteStepping)},decrementSeconds:function(){J("subtract","seconds",1)},togglePeriod:function(){var a=h.date.hours();a>=12?a-=12:a+=12,h.date.hours(a)},showPicker:function(){h.widget.find(".timepicker > div:not(.timepicker-picker)").hide(),h.widget.find(".timepicker .timepicker-picker").show()},showHours:function(){h.widget.find(".timepicker .timepicker-picker").hide(),h.widget.find(".timepicker .timepicker-hours").show()},showMinutes:function(){h.widget.find(".timepicker .timepicker-picker").hide(),h.widget.find(".timepicker .timepicker-minutes").show()
},showSeconds:function(){h.widget.find(".timepicker .timepicker-picker").hide(),h.widget.find(".timepicker .timepicker-seconds").show()},selectHour:function(b){var c=h.widget.find(".timepicker [data-action=togglePeriod]").text(),d=parseInt(a(b.target).text(),10);"PM"==c&&(d+=12),h.date.hours(d),y.showPicker.call(h)},selectMinute:function(b){h.date.minutes(parseInt(a(b.target).text(),10)),y.showPicker.call(h)},selectSecond:function(b){h.date.seconds(parseInt(a(b.target).text(),10)),y.showPicker.call(h)}},z=function(b){var d=c(h.date),e=a(b.currentTarget).data("action"),f=y[e].apply(h,arguments);
return A(b),h.date||(h.date=c({y:1970})),I(),w(),n(d,b.type),f},A=function(a){a.stopPropagation(),a.preventDefault()},B=function(b){c.lang(h.options.language);var d=a(b.target),e=c(h.date),f=c(d.val(),h.format,h.options.useStrict);f.isValid()&&!K(f)&&L(f)?(p(),h.setValue(f),n(e,b.type),I()):(h.viewDate=e,n(e,b.type),o(f),h.unset=!0)},C=function(a){a&&(h.viewMode=Math.max(h.minViewMode,Math.min(2,h.viewMode+a)));P.modes[h.viewMode].clsName;h.widget.find(".datepicker > div").hide().filter(".datepicker-"+P.modes[h.viewMode].clsName).show()
},D=function(){var b,c,d,e,f;h.widget.on("click",".datepicker *",a.proxy(x,this)),h.widget.on("click","[data-action]",a.proxy(z,this)),h.widget.on("mousedown",a.proxy(A,this)),h.options.pickDate&&h.options.pickTime&&h.widget.on("click.togglePicker",".accordion-toggle",function(g){if(g.stopPropagation(),b=a(this),c=b.closest("ul"),d=c.find(".in"),e=c.find(".collapse:not(.in)"),d&&d.length){if(f=d.data("collapse"),f&&f.date-transitioning)return;d.collapse("hide"),e.collapse("show"),b.find("span").toggleClass(h.options.icons.time+" "+h.options.icons.date),h.element.find(".input-group-addon span").toggleClass(h.options.icons.time+" "+h.options.icons.date)
}}),h.isInput?h.element.on({focus:a.proxy(h.show,this),change:a.proxy(B,this),blur:a.proxy(h.hide,this)}):(h.element.on({change:a.proxy(B,this)},"input"),h.component?h.component.on("click",a.proxy(h.show,this)):h.element.on("click",a.proxy(h.show,this)))},E=function(){a(window).on("resize.datetimepicker"+h.id,a.proxy(m,this)),h.isInput||a(document).on("mousedown.datetimepicker"+h.id,a.proxy(h.hide,this))},F=function(){h.widget.off("click",".datepicker *",h.click),h.widget.off("click","[data-action]"),h.widget.off("mousedown",h.stopEvent),h.options.pickDate&&h.options.pickTime&&h.widget.off("click.togglePicker"),h.isInput?h.element.off({focus:h.show,change:h.change}):(h.element.off({change:h.change},"input"),h.component?h.component.off("click",h.show):h.element.off("click",h.show))
},G=function(){a(window).off("resize.datetimepicker"+h.id),h.isInput||a(document).off("mousedown.datetimepicker"+h.id)},H=function(){if(h.element){var d,b=h.element.parents(),c=!1;for(d=0;d<b.length;d++)if("fixed"==a(b[d]).css("position")){c=!0;break}return c}return!1},I=function(){c.lang(h.options.language);var a="";h.unset||(a=c(h.date).format(h.format)),k().val(a),h.element.data("date",a),h.options.pickTime||h.hide()},J=function(a,b,d){c.lang(h.options.language);var e;return"add"==a?(e=c(h.date),23==e.hours()&&e.add(d,b),e.add(d,b)):e=c(h.date).subtract(d,b),K(c(e.subtract(d,b)))||K(e)?(o(e.format(h.format)),void 0):("add"==a?h.date.add(d,b):h.date.subtract(d,b),h.unset=!1,void 0)
},K=function(a){return c.lang(h.options.language),a.isAfter(h.options.maxDate)||a.isBefore(h.options.minDate)?!0:h.options.disabledDates===!1?!1:h.options.disabledDates[c(a).format("YYYY-MM-DD")]===!0},L=function(a){return c.lang(h.options.language),h.options.enabledDates===!1?!0:h.options.enabledDates[c(a).format("YYYY-MM-DD")]===!0},M=function(a){var b={},d=0;for(i=0;i<a.length;i++)dDate=c(a[i]),dDate.isValid()&&(b[dDate.format("YYYY-MM-DD")]=!0,d++);return d>0?b:!1},N=function(a){return a=a.toString(),a.length>=2?a:"0"+a
},O=function(){if(h.options.pickDate&&h.options.pickTime){var a="";return a='<div id="fd" class="bootstrap-datetimepicker-widget'+(h.options.sideBySide?" timepicker-sbs":"")+" "+h.options.component+'" style="z-index:9999 !important;">',a+=h.options.sideBySide?'<div class="row"><div class="col-sm-6 datepicker">'+P.template+'</div><div class="col-sm-6 timepicker">'+Q.getTemplate()+"</div></div>":'<ul class="list-unstyled"><li'+(h.options.collapse?' class="collapse in"':"")+'><div class="datepicker">'+P.template+'</div></li><li class="picker-switch accordion-toggle"><a class="btn btn-primary" style="width:100%"><span class="'+h.options.icons.time+'"></span></a></li><li'+(h.options.collapse?' class="collapse"':"")+'><div class="timepicker">'+Q.getTemplate()+"</div></li></ul>",a+="</div>"
}return h.options.pickTime?'<div id="fd" class="bootstrap-datetimepicker-widget"><div class="timepicker">'+Q.getTemplate()+"</div></div>":'<div id="fd" class="bootstrap-datetimepicker-widget"><div class="datepicker">'+P.template+"</div></div>"},P={modes:[{clsName:"days",navFnc:"month",navStep:1},{clsName:"months",navFnc:"year",navStep:1},{clsName:"years",navFnc:"year",navStep:10}],headTemplate:'<thead><tr><th class="prev">&lsaquo;</th><th colspan="5" class="switch"></th><th class="next">&rsaquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'},Q={hourTemplate:'<span data-action="showHours"   data-time-component="hours"   class="timepicker-hour"></span>',minuteTemplate:'<span data-action="showMinutes" data-time-component="minutes" class="timepicker-minute"></span>',secondTemplate:'<span data-action="showSeconds"  data-time-component="seconds" class="timepicker-second"></span>'};
P.template='<div class="datepicker-days"><table class="table-condensed">'+P.headTemplate+'<tbody></tbody></table></div><div class="datepicker-months"><table class="table-condensed">'+P.headTemplate+P.contTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+P.headTemplate+P.contTemplate+"</table></div>",Q.getTemplate=function(){return'<div class="timepicker-picker"><table class="table-condensed"><tr><td><a href="#" class="btn" data-action="incrementHours"><i class="'+h.options.icons.up+'"></i></a></td><td class="separator"></td><td>'+(h.options.useMinutes?'<a href="#" class="btn" data-action="incrementMinutes"><i class="'+h.options.icons.up+'"></i></a>':"")+"</td>"+(h.options.useSeconds?'<td class="separator"></td><td><a href="#" class="btn" data-action="incrementSeconds"><i class="'+h.options.icons.up+'"></i></a></td>':"")+(h.use24hours?"":'<td class="separator"></td>')+"</tr><tr><td>"+Q.hourTemplate+'</td> <td class="separator">:</td><td>'+(h.options.useMinutes?Q.minuteTemplate:'<span class="timepicker-minute">00</span>')+"</td> "+(h.options.useSeconds?'<td class="separator">:</td><td>'+Q.secondTemplate+"</td>":"")+(h.use24hours?"":'<td class="separator"></td><td><button type="button" class="btn btn-primary" data-action="togglePeriod"></button></td>')+'</tr><tr><td><a href="#" class="btn" data-action="decrementHours"><i class="'+h.options.icons.down+'"></i></a></td><td class="separator"></td><td>'+(h.options.useMinutes?'<a href="#" class="btn" data-action="decrementMinutes"><i class="'+h.options.icons.down+'"></i></a>':"")+"</td>"+(h.options.useSeconds?'<td class="separator"></td><td><a href="#" class="btn" data-action="decrementSeconds"><i class="'+h.options.icons.down+'"></i></a></td>':"")+(h.use24hours?"":'<td class="separator"></td>')+'</tr></table></div><div class="timepicker-hours" data-action="selectHour"><table class="table-condensed"></table></div><div class="timepicker-minutes" data-action="selectMinute"><table class="table-condensed"></table></div>'+(h.options.useSeconds?'<div class="timepicker-seconds" data-action="selectSecond"><table class="table-condensed"></table></div>':"")
},h.destroy=function(){F(),G(),h.widget.remove(),h.element.removeData("DateTimePicker"),h.component&&h.component.removeData("DateTimePicker")},h.show=function(a){if(h.options.useCurrent&&""==k().val())if(1!==h.options.minuteStepping){var b=c(),d=h.options.minuteStepping;b.minutes(Math.round(b.minutes()/d)*d%60).seconds(0),h.setValue(b.format(h.format))}else h.setValue(c().format(h.format));h.widget.hasClass("picker-open")?(h.widget.hide(),h.widget.removeClass("picker-open")):(h.widget.show(),h.widget.addClass("picker-open")),h.height=h.component?h.component.outerHeight():h.element.outerHeight(),m(),h.element.trigger({type:"dp.show",date:c(h.date)}),E(),a&&A(a)
},h.disable=function(){var a=h.element.find("input");a.prop("disabled")||(a.prop("disabled",!0),F())},h.enable=function(){var a=h.element.find("input");a.prop("disabled")&&(a.prop("disabled",!1),D())},h.hide=function(b){if(!b||!a(b.target).is(h.element.attr("id"))){var e,f,d=h.widget.find(".collapse");for(e=0;e<d.length;e++)if(f=d.eq(e).data("collapse"),f&&f.date-transitioning)return;h.widget.hide(),h.widget.removeClass("picker-open"),h.viewMode=h.startViewMode,C(),h.element.trigger({type:"dp.hide",date:c(h.date)}),G()
}},h.setValue=function(a){c.lang(h.options.language),a?h.unset=!1:(h.unset=!0,I()),c.isMoment(a)||(a=c(a,h.format)),a.isValid()?(h.date=a,I(),h.viewDate=c({y:h.date.year(),M:h.date.month()}),s(),w()):o(a)},h.getDate=function(){return h.unset?null:h.date},h.setDate=function(a){var b=c(h.date);a?h.setValue(a):h.setValue(null),n(b,"function")},h.setDisabledDates=function(a){h.options.disabledDates=M(a),h.viewDate&&p()},h.setEnabledDates=function(a){h.options.enabledDates=M(a),h.viewDate&&p()},h.setMaxDate=function(a){void 0!=a&&(h.options.maxDate=c(a),h.viewDate&&p())
},h.setMinDate=function(a){void 0!=a&&(h.options.minDate=c(a),h.viewDate&&p())},j()};a.fn._datetimepicker=function(b){return this.each(function(){var c=a(this),e=c.data("DateTimePicker");e||c.data("DateTimePicker",new d(this,b))})}};c(),b.resolveWith(c)})};FD40.module("datetimepicker",a)}(),function(){var a=function(a){var b=this;a.require().script("ui/position").done(function(){var c=function(){a.fn.popbox=function(c){if(a.isPlainObject(c))return this.each(function(){var d=a(this),e=b.get(d);e?e.update(c):e=new b(d,c)
}),this;if(a.isString(c)){var g,d=a(this[0]),e=b.get(d)||new b(d),f=e[c];return a.isFunction(f)&&(g=f.apply(e,a.makeArray(arguments).slice(1))),g||this}return this};var b=function(c,d){var e=this;c.data("popbox",e),a.isString(d)&&(d={content:d}),d||(d={}),c.parentsUntil("body").addBack().each(function(){var b=a(this);return"fixed"===b.css("position")?(d.fixed=!0,!1):void 0});var f={},g=c.attr("data-popbox")||c.find("[data-popbox-content]").html()||a(c.attr("data-popbox-target")).html();g&&(f.content=g),a(["id","component","type","toggle","position","collision"]).each(function(a,b){var d=c.attr("data-popbox-"+b);
f[b]=d}),void 0!==c.attr("data-popbox-offset")&&(f.offset=parseInt(c.attr("data-popbox-offset"))),void 0===g&&c.attr("data-popbox",""),e.update(a.extend(!0,{},b.defaultOptions,{tooltip:a(),loader:a('<div id="fd" class="popbox loading" data-popbox-tooltip><div class="arrow"></div></div>'),uid:a.uid(),button:c},f,d))};b.defaultOptions={content:"",id:null,type:"",enabled:!1,wait:!1,locked:!1,exclusive:!1,hideTimer:null,hideDelay:50,toggle:"hover",position:"bottom",collision:"flip",cache:!0,fixed:!1,offset:10},b.get=function(c){var d=a(c).data("popbox");
return d instanceof b?d:void 0},b.toggleEvent=navigator.userAgent.match(/iPhone|iPad|iPod/i)?"touchstart":"click",a.extend(b.prototype,{positions:"top top-left top-right top-center bottom bottom-left bottom-right bottom-center left left-top left-bottom left-center right right-top right-bottom right-center",update:function(b){var c=this;if(a.extend(!0,c,b),a.isModule(c.content))return c.wait=!0,a.module(c.content).done(function(b){a.isPlainObject(b)&&c.update(b),a.isFunction(b)&&c.update({content:b})}).fail(function(){c.update({content:"Unable to load tooltip content."})
}).always(function(){c.wait=!1}),void 0;a.isString(c.content)&&(c.content=a.Deferred().resolve(c.content));var d=c.position;if(a.isString(d)){var f,g,h,i,e=d.split("-");switch(e[0]){case"top":case"bottom":f=h=e[1]||"center",g="top"==e[0]?"bottom":"top",i="top"==e[0]?"top":"bottom";break;case"left":case"right":g=i=e[1]||"center",f="left"==e[0]?"right":"left",h="left"==e[0]?"left":"right"}c.position={classname:d,my:f+" "+g,at:h+" "+i,using:function(b,d){var f=a(this),g=c.position.classname,h=b.top,i=b.left,j=c.offset,k=c.button.offset();
switch(e[0]){case"top":case"bottom":var l=d.vertical;l==e[0]&&(g=g.replace(/top|bottom/gi,"top"==l?"bottom":"top")),h="top"==l?h+j:h-j,"left"==e[1]&&i<Math.floor(k.left)&&(g=g.replace(/left|right/gi,"left"==e[1]?"right":"left"));break;case"left":case"right":var m=d.horizontal;d.horizontal==e[0]&&(g=g.replace(/left|right/gi,"left"==d.horizontal?"right":"left")),i="left"==m?i+j:i-j}f.css({top:h+"px",left:i+"px"}).removeClass(c.positions).addClass(g)}}}a.extend(c.position,{of:c.button,collision:c.collision}),c.loader.attr({id:c.id,"data-popbox-tooltip":c.type,style:c.fixed?"position: fixed":""}).addClass(c.component).addClass("popbox-"+c.type),c.enabled&&c.show()
},trigger:function(a,b){this.tooltip.trigger(a,b),this.button.trigger(a,b)},show:function(){var c=this;if(c.enabled=!0,!c.wait){if(clearTimeout(c.hideTimer),c.exclusive&&a("[data-popbox-tooltip]").each(function(){var c=b.get(a(this));c&&c.hide()}),c.button.addClass("active"),"click"==c.toggle){var d=a(document),e=b.toggleEvent+".popbox."+c.uid;d.off(e).on(e,function(b){var f=a(b.target).parents().andSelf();f.filter(c.button).length>0||f.filter(c.tooltip).length>0||(d.off(e),c.hide())})}var f=a(window),g="resize.popbox"+c.uid;
if(f.off(g).on(g,function(){c.tooltip.length>0&&c.tooltip.position(c.position)}),c.tooltip.length>0)return c.tooltip.appendTo("body").position(c.position),c.trigger("popboxActivate",[c]),void 0;if(a.isFunction(c.content)){var h=c.content(c);if(c.update(h),c.wait)return}a.isDeferred(c.content)&&("pending"==c.content.state()&&(c.loader.appendTo("body").position(c.position),c.trigger("popboxLoading",[c])),c.content.always(function(){c.wait=!1}).done(function(b){if(!(c.tooltip.length>0)&&c.enabled){c.loader.detach();
var d=a.buildHTML(b);if(d.filter("[data-popbox-tooltip]").length<1){var e=d;d=a('<div id="fd" class="popbox" data-popbox-tooltip><div class="arrow"></div><div class="popbox-content" data-popbox-content></div></div>').attr({id:c.id,"data-popbox-tooltip":c.type,style:c.fixed?"position: fixed":""}).addClass(c.component).addClass("popbox-"+c.type).appendTo("body"),d.find("[data-popbox-content]").append(e)}else d=d.appendTo("body").filter("[data-popbox-tooltip]");c.tooltip=d.data("popbox",c).position(c.position),c.trigger("popboxActivate",[c])
}}).fail(function(){c.update({content:"Unable to load tooltip content."})}))}},hide:function(b){var c=this;c.enabled=!1,clearTimeout(c.hideTimer),c.loader.detach();var d=function(){(!c.locked||b)&&(c.tooltip.detach(),a(window).off("resize.popbox"+c.uid),c.trigger("popboxDeactivate",[c]),c.cache||c.destroy())};c.button.removeClass("active"),c.hideTimer=setTimeout(d,c.hideDelay)},destroy:function(){this.button.removeData("popbox")},widget:function(){return this}}),a(document).on(b.toggleEvent+".popbox","[data-popbox]",function(){var b=a(this).popbox("widget");
"hover"!=b.toggle&&(b.enabled?b.hide():b.show())}).on("mouseover.popbox","[data-popbox]",function(){var b=a(this).popbox("widget");"hover"!=b.toggle||/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||b.show()}).on("mouseout.popbox","[data-popbox]",function(){var b=a(this).popbox("widget");"hover"==b.toggle&&b.hide()}).on("mouseover.popbox.tooltip","[data-popbox-tooltip]",function(){var a=b.get(this);a&&"hover"===a.toggle&&(a.locked=!0,clearTimeout(a.hideTimer))}).on("mouseout.popbox.tooltip","[data-popbox-tooltip]",function(){var a=b.get(this);
a&&"hover"===a.toggle&&(a.locked=!1,a.hide())}).on("click.popbox.close","[data-popbox-close]",function(){var c=b.get(a(this).parents("[data-popbox-tooltip]"));c&&c.hide()})};c(),b.resolveWith(c)})};FD40.module("popbox",a)}(),function(){var a=function(a){var b=this,c=a,d=function(){!function(a,b){function m(a,b,c){return[parseFloat(a[0])*(k.test(a[0])?b/100:1),parseFloat(a[1])*(k.test(a[1])?c/100:1)]}function n(b,c){return parseInt(a.css(b,c),10)||0}function o(b){var c=b[0];return 9===c.nodeType?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:a.isWindow(c)?{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()}
}a.ui=a.ui||{};var c,d=Math.max,e=Math.abs,f=Math.round,g=/left|center|right/,h=/top|center|bottom/,i=/[\+\-]\d+(\.[\d]+)?%?/,j=/^\w+/,k=/%$/,l=a.fn.position;a.position={scrollbarWidth:function(){if(c!==b)return c;var d,e,f=a("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),g=f.children()[0];return a("body").append(f),d=g.offsetWidth,f.css("overflow","scroll"),e=g.offsetWidth,d===e&&(e=f[0].clientWidth),f.remove(),c=d-e},getScrollInfo:function(b){var c=b.isWindow?"":b.element.css("overflow-x"),d=b.isWindow?"":b.element.css("overflow-y"),e="scroll"===c||"auto"===c&&b.width<b.element[0].scrollWidth,f="scroll"===d||"auto"===d&&b.height<b.element[0].scrollHeight;
return{width:f?a.position.scrollbarWidth():0,height:e?a.position.scrollbarWidth():0}},getWithinInfo:function(b){var c=a(b||window),d=a.isWindow(c[0]);return{element:c,isWindow:d,offset:c.offset()||{left:0,top:0},scrollLeft:c.scrollLeft(),scrollTop:c.scrollTop(),width:d?c.width():c.outerWidth(),height:d?c.height():c.outerHeight()}}},a.fn.position=function(b){if(!b||!b.of)return l.apply(this,arguments);b=a.extend({},b);var c,k,p,q,r,s,t=a(b.of),u=a.position.getWithinInfo(b.within),v=a.position.getScrollInfo(u),w=(b.collision||"flip").split(" "),x={};
return s=o(t),t[0].preventDefault&&(b.at="left top"),k=s.width,p=s.height,q=s.offset,r=a.extend({},q),a.each(["my","at"],function(){var c,d,a=(b[this]||"").split(" ");1===a.length&&(a=g.test(a[0])?a.concat(["center"]):h.test(a[0])?["center"].concat(a):["center","center"]),a[0]=g.test(a[0])?a[0]:"center",a[1]=h.test(a[1])?a[1]:"center",c=i.exec(a[0]),d=i.exec(a[1]),x[this]=[c?c[0]:0,d?d[0]:0],b[this]=[j.exec(a[0])[0],j.exec(a[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===b.at[0]?r.left+=k:"center"===b.at[0]&&(r.left+=k/2),"bottom"===b.at[1]?r.top+=p:"center"===b.at[1]&&(r.top+=p/2),c=m(x.at,k,p),r.left+=c[0],r.top+=c[1],this.each(function(){var g,h,i=a(this),j=i.outerWidth(),l=i.outerHeight(),o=n(this,"marginLeft"),s=n(this,"marginTop"),y=j+o+n(this,"marginRight")+v.width,z=l+s+n(this,"marginBottom")+v.height,A=a.extend({},r),B=m(x.my,i.outerWidth(),i.outerHeight());
"right"===b.my[0]?A.left-=j:"center"===b.my[0]&&(A.left-=j/2),"bottom"===b.my[1]?A.top-=l:"center"===b.my[1]&&(A.top-=l/2),A.left+=B[0],A.top+=B[1],a.support.offsetFractions||(A.left=f(A.left),A.top=f(A.top)),g={marginLeft:o,marginTop:s},a.each(["left","top"],function(d,e){a.ui.position[w[d]]&&a.ui.position[w[d]][e](A,{targetWidth:k,targetHeight:p,elemWidth:j,elemHeight:l,collisionPosition:g,collisionWidth:y,collisionHeight:z,offset:[c[0]+B[0],c[1]+B[1]],my:b.my,at:b.at,within:u,elem:i})}),b.using&&(h=function(a){var c=q.left-A.left,f=c+k-j,g=q.top-A.top,h=g+p-l,m={target:{element:t,left:q.left,top:q.top,width:k,height:p},element:{element:i,left:A.left,top:A.top,width:j,height:l},horizontal:0>f?"left":c>0?"right":"center",vertical:0>h?"top":g>0?"bottom":"middle"};
j>k&&e(c+f)<k&&(m.horizontal="center"),l>p&&e(g+h)<p&&(m.vertical="middle"),m.important=d(e(c),e(f))>d(e(g),e(h))?"horizontal":"vertical",b.using.call(this,a,m)}),i.offset(a.extend(A,{using:h}))})},a.ui.position={fit:{left:function(a,b){var j,c=b.within,e=c.isWindow?c.scrollLeft:c.offset.left,f=c.width,g=a.left-b.collisionPosition.marginLeft,h=e-g,i=g+b.collisionWidth-f-e;b.collisionWidth>f?h>0&&0>=i?(j=a.left+h+b.collisionWidth-f-e,a.left+=h-j):a.left=i>0&&0>=h?e:h>i?e+f-b.collisionWidth:e:h>0?a.left+=h:i>0?a.left-=i:a.left=d(a.left-g,a.left)
},top:function(a,b){var j,c=b.within,e=c.isWindow?c.scrollTop:c.offset.top,f=b.within.height,g=a.top-b.collisionPosition.marginTop,h=e-g,i=g+b.collisionHeight-f-e;b.collisionHeight>f?h>0&&0>=i?(j=a.top+h+b.collisionHeight-f-e,a.top+=h-j):a.top=i>0&&0>=h?e:h>i?e+f-b.collisionHeight:e:h>0?a.top+=h:i>0?a.top-=i:a.top=d(a.top-g,a.top)}},flip:{left:function(a,b){var n,o,c=b.within,d=c.offset.left+c.scrollLeft,f=c.width,g=c.isWindow?c.scrollLeft:c.offset.left,h=a.left-b.collisionPosition.marginLeft,i=h-g,j=h+b.collisionWidth-f-g,k="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,l="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,m=-2*b.offset[0];
0>i?(n=a.left+k+l+m+b.collisionWidth-f-d,(0>n||n<e(i))&&(a.left+=k+l+m)):j>0&&(o=a.left-b.collisionPosition.marginLeft+k+l+m-g,(o>0||e(o)<j)&&(a.left+=k+l+m))},top:function(a,b){var o,p,c=b.within,d=c.offset.top+c.scrollTop,f=c.height,g=c.isWindow?c.scrollTop:c.offset.top,h=a.top-b.collisionPosition.marginTop,i=h-g,j=h+b.collisionHeight-f-g,k="top"===b.my[1],l=k?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,m="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,n=-2*b.offset[1];0>i?(p=a.top+l+m+n+b.collisionHeight-f-d,a.top+l+m+n>i&&(0>p||p<e(i))&&(a.top+=l+m+n)):j>0&&(o=a.top-b.collisionPosition.marginTop+l+m+n-g,a.top+l+m+n>j&&(o>0||e(o)<j)&&(a.top+=l+m+n))
}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments),a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments),a.ui.position.fit.top.apply(this,arguments)}}},function(){var b,c,d,e,f,g=document.getElementsByTagName("body")[0],h=document.createElement("div");b=document.createElement(g?"div":"body"),d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},g&&a.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(f in d)b.style[f]=d[f];
b.appendChild(h),c=g||document.documentElement,c.insertBefore(b,c.firstChild),h.style.cssText="position: absolute; left: 10.7432222px;",e=a(h).offset().left,a.support.offsetFractions=e>10&&11>e,b.innerHTML="",c.removeChild(b)}()}(c)};d(),b.resolveWith(d)};FD40.module("ui/position",a)}(),function(){var a=function(a){var b=this,c=a.callback(function(){window.google||window.google.maps||b.reject("Google Maps API is required. Please register the following JavaScript library http://maps.google.com/maps/api/js?sensor=true.");
var c=function(){"use strict";var c=document,d=function(b,c){return a("#"+b.replace("#",""),c)[0]},g=function(a){var b=this,j=["bounds_changed","center_changed","click","dblclick","drag","dragend","dragstart","idle","maptypeid_changed","projection_changed","resize","tilesloaded","zoom_changed"],k=["mousemove","mouseout","mouseover"];if(window.context_menu={},this.el="string"==typeof a.el||"string"==typeof a.div?d(a.el||a.div,a.context):a.el||a.div,"undefined"==typeof this.el||null===this.el)throw"No element defined.";
this.el.style.width=a.width||this.el.scrollWidth||this.el.offsetWidth,this.el.style.height=a.height||this.el.scrollHeight||this.el.offsetHeight,this.controls=[],this.overlays=[],this.layers=[],this.singleLayers={},this.markers=[],this.polylines=[],this.routes=[],this.polygons=[],this.infoWindow=null,this.overlay_el=null,this.zoom=a.zoom||15,this.registered_events={};var m,l=a.markerClusterer;m=a.mapType?google.maps.MapTypeId[a.mapType.toUpperCase()]:google.maps.MapTypeId.ROADMAP;var n=new google.maps.LatLng(a.lat,a.lng);
delete a.el,delete a.lat,delete a.lng,delete a.mapType,delete a.width,delete a.height,delete a.markerClusterer;var o=a.zoomControlOpt||{style:"DEFAULT",position:"TOP_LEFT"},p=a.zoomControl||!0,q=o.style||"DEFAULT",r=o.position||"TOP_LEFT",s=a.panControl||!0,t=a.mapTypeControl||!0,u=a.scaleControl||!0,v=a.streetViewControl||!0,w=w||!0,x={},y={zoom:this.zoom,center:n,mapTypeId:m},z={panControl:s,zoomControl:p,zoomControlOptions:{style:google.maps.ZoomControlStyle[q],position:google.maps.ControlPosition[r]},mapTypeControl:t,scaleControl:u,streetViewControl:v,overviewMapControl:w};
1!=a.disableDefaultUI&&(y=f(y,z)),x=f(y,a);for(var A=0;A<j.length;A++)delete x[j[A]];for(var A=0;A<k.length;A++)delete x[k[A]];this.map=new google.maps.Map(this.el,x),l&&(this.markerClusterer=l.apply(this,[this.map]));var B=function(a){var b=0,c=0;if(a.offsetParent)do b+=a.offsetLeft,c+=a.offsetTop;while(a=a.offsetParent);return[b,c]},C=function(a,c){var e="",f=window.context_menu[a];for(var g in f)if(f.hasOwnProperty(g)){var h=f[g];e+='<li><a id="'+a+"_"+g+'" href="#">'+h.title+"</a></li>"}if(d("gmaps_context_menu")){var i=d("gmaps_context_menu");
i.innerHTML=e;for(var j=i.getElementsByTagName("a"),k=j.length,g=0;k>g;g++){var l=j[g],m=function(d){d.preventDefault(),f[this.id.replace(a+"_","")].action.apply(b,[c]),b.hideContextMenu()};google.maps.event.clearListeners(l,"click"),google.maps.event.addDomListenerOnce(l,"click",m,!1)}var n=B.apply(this,[b.el]),o=n[0]+c.pixel.x-15,p=n[1]+c.pixel.y-15;i.style.left=o+"px",i.style.top=p+"px",i.style.display="block"}},D=function(a,c){if("marker"===a){c.pixel={};var d=new google.maps.OverlayView;d.setMap(b.map),d.draw=function(){var b=d.getProjection(),e=c.marker.getPosition();
c.pixel=b.fromLatLngToContainerPixel(e),C(a,c)}}else C(a,c)};this.setContextMenu=function(a){window.context_menu[a.control]={};for(var b in a.options)if(a.options.hasOwnProperty(b)){var e=a.options[b];window.context_menu[a.control][e.name]={title:e.title,action:e.action}}var f=c.createElement("ul");f.id="gmaps_context_menu",f.style.display="none",f.style.position="absolute",f.style.minWidth="100px",f.style.background="white",f.style.listStyle="none",f.style.padding="8px",f.style.boxShadow="2px 2px 6px #ccc",c.body.appendChild(f);
var g=d("gmaps_context_menu");google.maps.event.addDomListener(g,"mouseout",function(a){a.relatedTarget&&this.contains(a.relatedTarget)||window.setTimeout(function(){g.style.display="none"},400)},!1)},this.hideContextMenu=function(){var a=d("gmaps_context_menu");a&&(a.style.display="none")};for(var E=function(c,d){google.maps.event.addListener(c,d,function(c){void 0==c&&(c=this),a[d].apply(this,[c]),b.hideContextMenu()})},F=0;F<j.length;F++){var G=j[F];G in a&&E(this.map,G)}for(var F=0;F<k.length;F++){var G=k[F];
G in a&&E(this.map,G)}google.maps.event.addListener(this.map,"rightclick",function(b){a.rightclick&&a.rightclick.apply(this,[b]),void 0!=window.context_menu.map&&D("map",b)}),this.refresh=function(){google.maps.event.trigger(this.map,"resize")},this.fitZoom=function(){for(var a=[],b=this.markers.length,c=0;b>c;c++)a.push(this.markers[c].getPosition());this.fitLatLngBounds(a)},this.fitLatLngBounds=function(a){for(var b=a.length,c=new google.maps.LatLngBounds,d=0;b>d;d++)c.extend(a[d]);this.map.fitBounds(c)},this.setCenter=function(a,b,c){this.map.panTo(new google.maps.LatLng(a,b)),c&&c()
},this.getElement=function(){return this.el},this.zoomIn=function(a){a=a||1,this.zoom=this.map.getZoom()+a,this.map.setZoom(this.zoom)},this.zoomOut=function(a){a=a||1,this.zoom=this.map.getZoom()-a,this.map.setZoom(this.zoom)};var H=[];for(var I in this.map)"function"!=typeof this.map[I]||this[I]||H.push(I);for(var A=0;A<H.length;A++)!function(a,b,c){a[c]=function(){return b[c].apply(b,arguments)}}(this,this.map,H[A]);this.createControl=function(a){var b=c.createElement("div");b.style.cursor="pointer",b.style.fontFamily="Arial, sans-serif",b.style.fontSize="13px",b.style.boxShadow="rgba(0, 0, 0, 0.398438) 0px 2px 4px";
for(var d in a.style)b.style[d]=a.style[d];a.id&&(b.id=a.id),a.classes&&(b.className=a.classes),a.content&&(b.innerHTML=a.content);for(var e in a.events)!function(b,c){google.maps.event.addDomListener(b,c,function(){a.events[c].apply(this,[this])})}(b,e);return b.index=1,b},this.addControl=function(a){var b=google.maps.ControlPosition[a.position.toUpperCase()];delete a.position;var c=this.createControl(a);return this.controls.push(c),this.map.controls[b].push(c),c},this.createMarker=function(a){if(a.hasOwnProperty("lat")&&a.hasOwnProperty("lng")||a.position){var b=this,c=a.details,d=a.fences,e=a.outside,g={position:new google.maps.LatLng(a.lat,a.lng),map:null};
delete a.lat,delete a.lng,delete a.fences,delete a.outside;var h=f(g,a),i=new google.maps.Marker(h);if(i.fences=d,a.infoWindow){i.infoWindow=new google.maps.InfoWindow(a.infoWindow);for(var j=["closeclick","content_changed","domready","position_changed","zindex_changed"],k=0;k<j.length;k++)!function(b,c){a.infoWindow[c]&&google.maps.event.addListener(b,c,function(b){a.infoWindow[c].apply(this,[b])})}(i.infoWindow,j[k])}for(var l=["animation_changed","clickable_changed","cursor_changed","draggable_changed","flat_changed","icon_changed","position_changed","shadow_changed","shape_changed","title_changed","visible_changed","zindex_changed"],m=["dblclick","drag","dragend","dragstart","mousedown","mouseout","mouseover","mouseup"],k=0;k<l.length;k++)!function(b,c){a[c]&&google.maps.event.addListener(b,c,function(){a[c].apply(this,[this])
})}(i,l[k]);for(var k=0;k<m.length;k++)!function(b,c,d){a[d]&&google.maps.event.addListener(c,d,function(c){c.pixel||(c.pixel=b.getProjection().fromLatLngToPoint(c.latLng)),a[d].apply(this,[c])})}(this.map,i,m[k]);return google.maps.event.addListener(i,"click",function(){this.details=c,a.click&&a.click.apply(this,[this]),i.infoWindow&&(b.hideInfoWindows(),i.infoWindow.open(b.map,i))}),google.maps.event.addListener(i,"rightclick",function(b){b.marker=this,a.rightclick&&a.rightclick.apply(this,[b]),void 0!=window.context_menu.marker&&D("marker",b)
}),i.fences&&google.maps.event.addListener(i,"dragend",function(){b.checkMarkerGeofence(i,function(a,b){e(a,b)})}),i}throw"No latitude or longitude defined."},this.addMarker=function(a){var b;if(a.hasOwnProperty("gm_accessors_"))b=a;else{if(!(a.hasOwnProperty("lat")&&a.hasOwnProperty("lng")||a.position))throw"No latitude or longitude defined.";b=this.createMarker(a)}return b.setMap(this.map),this.markerClusterer&&this.markerClusterer.addMarker(b),this.markers.push(b),g.fire("marker_added",b,this),b},this.addMarkers=function(a){for(var c,b=0;c=a[b];b++)this.addMarker(c);
return this.markers},this.hideInfoWindows=function(){for(var b,a=0;b=this.markers[a];a++)b.infoWindow&&b.infoWindow.close()},this.removeMarker=function(a){for(var b=0;b<this.markers.length;b++)if(this.markers[b]===a){this.markers[b].setMap(null),this.markers.splice(b,1),g.fire("marker_removed",a,this);break}return a},this.removeMarkers=function(a){for(var a=a||this.markers,b=0;b<this.markers.length;b++)this.markers[b]===a[b]&&this.markers[b].setMap(null);for(var c=[],b=0;b<this.markers.length;b++)null!=this.markers[b].getMap()&&c.push(this.markers[b]);
this.markers=c},this.drawOverlay=function(a){var d=new google.maps.OverlayView;d.setMap(b.map);var e=!0;return null!=a.auto_show&&(e=a.auto_show),d.onAdd=function(){var b=c.createElement("div");b.style.borderStyle="none",b.style.borderWidth="0px",b.style.position="absolute",b.style.zIndex=100,b.innerHTML=a.content,d.el=b;var e=this.getPanes();a.layer||(a.layer="overlayLayer");var f=e[a.layer];f.appendChild(b);for(var g=["contextmenu","DOMMouseScroll","dblclick","mousedown"],h=0;h<g.length;h++)!function(a,b){google.maps.event.addDomListener(a,b,function(a){-1!=navigator.userAgent.toLowerCase().indexOf("msie")&&document.all?(a.cancelBubble=!0,a.returnValue=!1):a.stopPropagation()
})}(b,g[h]);google.maps.event.trigger(this,"ready")},d.draw=function(){var b=this.getProjection(),c=b.fromLatLngToDivPixel(new google.maps.LatLng(a.lat,a.lng));a.horizontalOffset=a.horizontalOffset||0,a.verticalOffset=a.verticalOffset||0;var f=d.el,g=f.children[0],h=g.clientHeight,i=g.clientWidth;switch(a.verticalAlign){case"top":f.style.top=c.y-h+a.verticalOffset+"px";break;default:case"middle":f.style.top=c.y-h/2+a.verticalOffset+"px";break;case"bottom":f.style.top=c.y+a.verticalOffset+"px"}switch(a.horizontalAlign){case"left":f.style.left=c.x-i+a.horizontalOffset+"px";
break;default:case"center":f.style.left=c.x-i/2+a.horizontalOffset+"px";break;case"right":f.style.left=c.x+a.horizontalOffset+"px"}f.style.display=e?"block":"none",e||a.show.apply(this,[f])},d.onRemove=function(){var b=d.el;a.remove?a.remove.apply(this,[b]):(d.el.parentNode.removeChild(d.el),d.el=null)},b.overlays.push(d),d},this.removeOverlay=function(a){for(var b=0;b<this.overlays.length;b++)if(this.overlays[b]===a){this.overlays[b].setMap(null),this.overlays.splice(b,1);break}},this.removeOverlays=function(){for(var c,a=0;c=b.overlays[a];a++)c.setMap(null);
b.overlays=[]},this.drawPolyline=function(a){var b=[],c=a.path;if(c.length)if(void 0===c[0][0])b=c;else for(var e,d=0;e=c[d];d++)b.push(new google.maps.LatLng(e[0],e[1]));var f={map:this.map,path:b,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight,geodesic:a.geodesic,clickable:!0,editable:!1,visible:!0};a.hasOwnProperty("clickable")&&(f.clickable=a.clickable),a.hasOwnProperty("editable")&&(f.editable=a.editable),a.hasOwnProperty("icons")&&(f.icons=a.icons),a.hasOwnProperty("zIndex")&&(f.zIndex=a.zIndex);
for(var h=new google.maps.Polyline(f),i=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],j=0;j<i.length;j++)!function(b,c){a[c]&&google.maps.event.addListener(b,c,function(b){a[c].apply(this,[b])})}(h,i[j]);return this.polylines.push(h),g.fire("polyline_added",h,this),h},this.removePolyline=function(a){for(var b=0;b<this.polylines.length;b++)if(this.polylines[b]===a){this.polylines[b].setMap(null),this.polylines.splice(b,1),g.fire("polyline_removed",a,this);break}},this.removePolylines=function(){for(var c,a=0;c=b.polylines[a];a++)c.setMap(null);
b.polylines=[]},this.drawCircle=function(a){a=f({map:this.map,center:new google.maps.LatLng(a.lat,a.lng)},a),delete a.lat,delete a.lng;for(var b=new google.maps.Circle(a),c=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],d=0;d<c.length;d++)!function(b,c){a[c]&&google.maps.event.addListener(b,c,function(b){a[c].apply(this,[b])})}(b,c[d]);return this.polygons.push(b),b},this.drawRectangle=function(a){a=f({map:this.map},a);var b=new google.maps.LatLngBounds(new google.maps.LatLng(a.bounds[0][0],a.bounds[0][1]),new google.maps.LatLng(a.bounds[1][0],a.bounds[1][1]));
a.bounds=b;for(var c=new google.maps.Rectangle(a),d=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],e=0;e<d.length;e++)!function(b,c){a[c]&&google.maps.event.addListener(b,c,function(b){a[c].apply(this,[b])})}(c,d[e]);return this.polygons.push(c),c},this.drawPolygon=function(a){var b=!1;a.hasOwnProperty("useGeoJSON")&&(b=a.useGeoJSON),delete a.useGeoJSON,a=f({map:this.map},a),0==b&&(a.paths=[a.paths.slice(0)]),a.paths.length>0&&a.paths[0].length>0&&(a.paths=i(h(a.paths,e,b)));
for(var c=new google.maps.Polygon(a),d=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],j=0;j<d.length;j++)!function(b,c){a[c]&&google.maps.event.addListener(b,c,function(b){a[c].apply(this,[b])})}(c,d[j]);return this.polygons.push(c),g.fire("polygon_added",c,this),c},this.removePolygon=function(a){for(var b=0;b<this.polygons.length;b++)if(this.polygons[b]===a){this.polygons[b].setMap(null),this.polygons.splice(b,1),g.fire("polygon_removed",a,this);break}},this.removePolygons=function(){for(var c,a=0;c=b.polygons[a];a++)c.setMap(null);
b.polygons=[]},this.getFromFusionTables=function(a){var b=a.events;delete a.events;var c=a,d=new google.maps.FusionTablesLayer(c);for(var e in b)!function(a,c){google.maps.event.addListener(a,c,function(a){b[c].apply(this,[a])})}(d,e);return this.layers.push(d),d},this.loadFromFusionTables=function(a){var b=this.getFromFusionTables(a);return b.setMap(this.map),b},this.getFromKML=function(a){var b=a.url,c=a.events;delete a.url,delete a.events;var d=a,e=new google.maps.KmlLayer(b,d);for(var f in c)!function(a,b){google.maps.event.addListener(a,b,function(a){c[b].apply(this,[a])
})}(e,f);return this.layers.push(e),e},this.loadFromKML=function(a){var b=this.getFromKML(a);return b.setMap(this.map),b};var J,K;this.getRoutes=function(a){switch(a.travelMode){case"bicycling":J=google.maps.TravelMode.BICYCLING;break;case"transit":J=google.maps.TravelMode.TRANSIT;break;case"driving":J=google.maps.TravelMode.DRIVING;break;default:J=google.maps.TravelMode.WALKING}K="imperial"===a.unitSystem?google.maps.UnitSystem.IMPERIAL:google.maps.UnitSystem.METRIC;var b={avoidHighways:!1,avoidTolls:!1,optimizeWaypoints:!1,waypoints:[]},c=f(b,a);
c.origin=/string/.test(typeof a.origin)?a.origin:new google.maps.LatLng(a.origin[0],a.origin[1]),c.destination=new google.maps.LatLng(a.destination[0],a.destination[1]),c.travelMode=J,c.unitSystem=K,delete c.callback;var d=this,e=new google.maps.DirectionsService;e.route(c,function(b,c){if(c===google.maps.DirectionsStatus.OK)for(var e in b.routes)b.routes.hasOwnProperty(e)&&d.routes.push(b.routes[e]);a.callback&&a.callback(d.routes)})},this.removeRoutes=function(){this.routes=[]},this.getElevations=function(a){a=f({locations:[],path:!1,samples:256},a),a.locations.length>0&&a.locations[0].length>0&&(a.locations=i(h([a.locations],e,!1)));
var b=a.callback;delete a.callback;var c=new google.maps.ElevationService;if(a.path){var d={path:a.locations,samples:a.samples};c.getElevationAlongPath(d,function(a,c){b&&"function"==typeof b&&b(a,c)})}else delete a.path,delete a.samples,c.getElevationForLocations(a,function(a,c){b&&"function"==typeof b&&b(a,c)})},this.cleanRoute=this.removePolylines,this.drawRoute=function(a){var b=this;this.getRoutes({origin:a.origin,destination:a.destination,travelMode:a.travelMode,waypoints:a.waypoints,unitSystem:a.unitSystem,callback:function(c){c.length>0&&(b.drawPolyline({path:c[c.length-1].overview_path,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight}),a.callback&&a.callback(c[c.length-1]))
}})},this.travelRoute=function(a){if(a.origin&&a.destination)this.getRoutes({origin:a.origin,destination:a.destination,travelMode:a.travelMode,waypoints:a.waypoints,callback:function(b){if(b.length>0&&a.start&&a.start(b[b.length-1]),b.length>0&&a.step){var c=b[b.length-1];if(c.legs.length>0)for(var f,d=c.legs[0].steps,e=0;f=d[e];e++)f.step_number=e,a.step(f,c.legs[0].steps.length-1)}b.length>0&&a.end&&a.end(b[b.length-1])}});else if(a.route&&a.route.legs.length>0)for(var d,b=a.route.legs[0].steps,c=0;d=b[c];c++)d.step_number=c,a.step(d)
},this.drawSteppedRoute=function(a){if(a.origin&&a.destination)this.getRoutes({origin:a.origin,destination:a.destination,travelMode:a.travelMode,waypoints:a.waypoints,callback:function(c){if(c.length>0&&a.start&&a.start(c[c.length-1]),c.length>0&&a.step){var d=c[c.length-1];if(d.legs.length>0)for(var g,e=d.legs[0].steps,f=0;g=e[f];f++)g.step_number=f,b.drawPolyline({path:g.path,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight}),a.step(g,d.legs[0].steps.length-1)}c.length>0&&a.end&&a.end(c[c.length-1])
}});else if(a.route&&a.route.legs.length>0)for(var e,c=a.route.legs[0].steps,d=0;e=c[d];d++)e.step_number=d,b.drawPolyline({path:e.path,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight}),a.step(e)},this.checkGeofence=function(a,b,c){return c.containsLatLng(new google.maps.LatLng(a,b))},this.checkMarkerGeofence=function(a,c){if(a.fences)for(var e,d=0;e=a.fences[d];d++){var f=a.getPosition();b.checkGeofence(f.lat(),f.lng(),e)||c(a,e)}},this.addLayer=function(a,b){b=b||{};var c;
switch(a){case"weather":this.singleLayers.weather=c=new google.maps.weather.WeatherLayer;break;case"clouds":this.singleLayers.clouds=c=new google.maps.weather.CloudLayer;break;case"traffic":this.singleLayers.traffic=c=new google.maps.TrafficLayer;break;case"transit":this.singleLayers.transit=c=new google.maps.TransitLayer;break;case"bicycling":this.singleLayers.bicycling=c=new google.maps.BicyclingLayer;break;case"panoramio":this.singleLayers.panoramio=c=new google.maps.panoramio.PanoramioLayer,c.setTag(b.filter),delete b.filter,b.click&&google.maps.event.addListener(c,"click",function(a){b.click(a),delete b.click
});break;case"places":if(this.singleLayers.places=c=new google.maps.places.PlacesService(this.map),b.search||b.nearbySearch){var d={bounds:b.bounds||null,keyword:b.keyword||null,location:b.location||null,name:b.name||null,radius:b.radius||null,rankBy:b.rankBy||null,types:b.types||null};b.search&&c.search(d,b.search),b.nearbySearch&&c.nearbySearch(d,b.nearbySearch)}if(b.textSearch){var e={bounds:b.bounds||null,location:b.location||null,query:b.query||null,radius:b.radius||null};c.textSearch(e,b.textSearch)}}return void 0!==c?("function"==typeof c.setOptions&&c.setOptions(b),"function"==typeof c.setMap&&c.setMap(this.map),c):void 0
},this.removeLayer=function(a){void 0!==this.singleLayers[a]&&(this.singleLayers[a].setMap(null),delete this.singleLayers[a])},this.toImage=function(a){var a=a||{},b={};if(b.size=a.size||[this.el.clientWidth,this.el.clientHeight],b.lat=this.getCenter().lat(),b.lng=this.getCenter().lng(),this.markers.length>0){b.markers=[];for(var c=0;c<this.markers.length;c++)b.markers.push({lat:this.markers[c].getPosition().lat(),lng:this.markers[c].getPosition().lng()})}if(this.polylines.length>0){var d=this.polylines[0];b.polyline={},b.polyline.path=google.maps.geometry.encoding.encodePath(d.getPath()),b.polyline.strokeColor=d.strokeColor,b.polyline.strokeOpacity=d.strokeOpacity,b.polyline.strokeWeight=d.strokeWeight
}return g.staticMapURL(b)},this.addMapType=function(a,b){if(!b.hasOwnProperty("getTileUrl")||"function"!=typeof b.getTileUrl)throw"'getTileUrl' function required.";b.tileSize=b.tileSize||new google.maps.Size(256,256);var c=new google.maps.ImageMapType(b);this.map.mapTypes.set(a,c)},this.addOverlayMapType=function(a){if(!a.hasOwnProperty("getTile")||"function"!=typeof a.getTile)throw"'getTile' function required.";var b=a.index;delete a.index,this.map.overlayMapTypes.insertAt(b,a)},this.removeOverlayMapType=function(a){this.map.overlayMapTypes.removeAt(a)
},this.addStyle=function(a){var b=new google.maps.StyledMapType(a.styles,a.styledMapName);this.map.mapTypes.set(a.mapTypeId,b)},this.setStyle=function(a){this.map.setMapTypeId(a)},this.createPanorama=function(a){return a.hasOwnProperty("lat")&&a.hasOwnProperty("lng")||(a.lat=this.getCenter().lat(),a.lng=this.getCenter().lng()),this.panorama=g.createPanorama(a),this.map.setStreetView(this.panorama),this.panorama},this.on=function(a,b){return g.on(a,this,b)},this.off=function(a){g.off(a,this)}};return g.createPanorama=function(a){var b=d(a.el,a.context);
a.position=new google.maps.LatLng(a.lat,a.lng),delete a.el,delete a.context,delete a.lat,delete a.lng;for(var c=["closeclick","links_changed","pano_changed","position_changed","pov_changed","resize","visible_changed"],e=f({visible:!0},a),g=0;g<c.length;g++)delete e[c[g]];for(var h=new google.maps.StreetViewPanorama(b,e),g=0;g<c.length;g++)!function(b,c){a[c]&&google.maps.event.addListener(b,c,function(){a[c].apply(this)})}(h,c[g]);return h},g.Route=function(a){this.map=a.map,this.route=a.route,this.step_count=0,this.steps=this.route.legs[0].steps,this.steps_length=this.steps.length,this.polyline=this.map.drawPolyline({path:new google.maps.MVCArray,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight}).getPath(),this.back=function(){if(this.step_count>0){this.step_count--;
var a=this.route.legs[0].steps[this.step_count].path;for(var b in a)a.hasOwnProperty(b)&&this.polyline.pop()}},this.forward=function(){if(this.step_count<this.steps_length){var a=this.route.legs[0].steps[this.step_count].path;for(var b in a)a.hasOwnProperty(b)&&this.polyline.push(a[b]);this.step_count++}}},g.geolocate=function(a){var b=a.always||a.complete;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(c){a.success(c),b&&b()},function(c){a.error(c),b&&b()},a.options):(a.not_supported(),b&&b())
},g.geocode=function(a){this.geocoder=new google.maps.Geocoder;var b=a.callback;a.hasOwnProperty("lat")&&a.hasOwnProperty("lng")&&(a.latLng=new google.maps.LatLng(a.lat,a.lng)),delete a.lat,delete a.lng,delete a.callback,this.geocoder.geocode(a,function(a,c){b(a,c)})},g.staticMapURL=function(a){function n(a,b){if("#"===a[0]&&(a=a.replace("#","0x"),b)){if(b=parseFloat(b),b=Math.min(1,Math.max(b,0)),0===b)return"0x00000000";b=(255*b).toString(16),1===b.length&&(b+=b),a=a.slice(0,8)+b}return a}var c,b=[],d="https://maps.googleapis.com/maps/api/staticmap";
a.url&&(d=a.url,delete a.url),d+="?";var e=a.markers;delete a.markers,!e&&a.marker&&(e=[a.marker],delete a.marker);var f=a.polyline;if(delete a.polyline,a.center)b.push("center="+a.center),delete a.center;else if(a.address)b.push("center="+a.address),delete a.address;else if(a.lat)b.push(["center=",a.lat,",",a.lng].join("")),delete a.lat,delete a.lng;else if(a.visible){var g=encodeURI(a.visible.join("|"));b.push("visible="+g)}var h=a.size;h?(h.join&&(h=h.join("x")),delete a.size):h="630x300",b.push("size="+h),a.zoom||(a.zoom=15);
var i=a.hasOwnProperty("sensor")?!!a.sensor:!0;delete a.sensor,b.push("sensor="+i);for(var j in a)a.hasOwnProperty(j)&&b.push(j+"="+a[j]);if(e)for(var k,l,m=0;c=e[m];m++)k=[],c.size&&"normal"!==c.size?k.push("size:"+c.size):c.icon&&k.push("icon:"+encodeURI(c.icon)),c.color&&k.push("color:"+c.color.replace("#","0x")),c.label&&k.push("label:"+c.label[0].toUpperCase()),l=c.address?c.address:c.lat+","+c.lng,k.length||0===m?(k.push(l),k=k.join("|"),b.push("markers="+encodeURI(k))):(k=b.pop()+encodeURI("|"+l),b.push(k));
if(f){if(c=f,f=[],c.strokeWeight&&f.push("weight:"+parseInt(c.strokeWeight,10)),c.strokeColor){var o=n(c.strokeColor,c.strokeOpacity);f.push("color:"+o)}if(c.fillColor){var p=n(c.fillColor,c.fillOpacity);f.push("fillcolor:"+p)}var q=c.path;if(q.join)for(var s,r=0;s=q[r];r++)f.push(s.join(","));else f.push("enc:"+q);f=f.join("|"),b.push("path="+encodeURI(f))}return b=b.join("&"),d+b},g.custom_events=["marker_added","marker_removed","polyline_added","polyline_removed","polygon_added","polygon_removed","geolocated","geolocation_failed"],g.on=function(a,b,c){if(-1==g.custom_events.indexOf(a))return google.maps.event.addListener(b,a,c);
var d={handler:c,eventName:a};return b.registered_events[a]=b.registered_events[a]||[],b.registered_events[a].push(d),d},g.off=function(a,b){-1==g.custom_events.indexOf(a)?google.maps.event.clearListeners(b,a):b.registered_events[a]=[]},g.fire=function(a,b,c){if(-1==g.custom_events.indexOf(a))google.maps.event.trigger(b,a,Array.prototype.slice.apply(arguments).slice(2));else if(a in c.registered_events)for(var d=c.registered_events[a],e=0;e<d.length;e++)!function(a,b,c){a.apply(b,[c])}(d[e].handler,c,b)},google.maps.Polygon.prototype.getBounds||(google.maps.Polygon.prototype.getBounds=function(){for(var d,b=new google.maps.LatLngBounds,c=this.getPaths(),e=0;e<c.getLength();e++){d=c.getAt(e);
for(var f=0;f<d.getLength();f++)b.extend(d.getAt(f))}return b}),google.maps.Polygon.prototype.containsLatLng||(google.maps.Polygon.prototype.containsLatLng=function(a){var b=this.getBounds();if(null!==b&&!b.contains(a))return!1;for(var c=!1,d=this.getPaths().getLength(),e=0;d>e;e++)for(var f=this.getPaths().getAt(e),g=f.getLength(),h=g-1,i=0;g>i;i++){var j=f.getAt(i),k=f.getAt(h);(j.lng()<a.lng()&&k.lng()>=a.lng()||k.lng()<a.lng()&&j.lng()>=a.lng())&&j.lat()+(a.lng()-j.lng())/(k.lng()-j.lng())*(k.lat()-j.lat())<a.lat()&&(c=!c),h=i
}return c}),google.maps.LatLngBounds.prototype.containsLatLng=function(a){return this.contains(a)},google.maps.Marker.prototype.setFences=function(a){this.fences=a},google.maps.Marker.prototype.addFence=function(a){this.fences.push(a)},g}(this),d=function(a,b){var c=a[0],d=a[1];return b&&(c=a[1],d=a[0]),new google.maps.LatLng(c,d)},e=function(a,b){for(var c=0;c<a.length;c++)a[c]=a[c].length>0&&"number"!=typeof a[c][0]?e(a[c],b):d(a[c],b);return a},f=function(a,b){if(a===b)return a;for(var c in b)a[c]=b[c];return a
},h=function(a,b){var c=Array.prototype.slice.call(arguments,2);if(Array.prototype.map&&a.map===Array.prototype.map)return Array.prototype.map.call(a,function(a){return callback_params=c,callback_params.splice(0,0,a),b.apply(this,callback_params)});for(var d=[],e=a.length,f=0;e>f;f++)callback_params=c,callback_params=callback_params.splice(0,0,a[f]),d.push(b.apply(this,callback_params));return d},i=function(a){new_array=[];for(var b=0;b<a.length;b++)new_array=new_array.concat(a[b]);return new_array};a.GMaps=c,a.GMaps.mapEvents=["bounds_changed","center_changed","click","dblclick","drag","dragend","dragstart","heading_changed","idle","maptypeid_changed","mousemove","mouseout","mouseover","projection_changed","resize","rightclick","tilesloaded","tilt_changed","zoom_changed"],a.fn.gmaps=function(b){if(!(this.length<1)){var d=a(this[0]),e=d.data("gmaps"),f=void 0===e,g=void 0===b;
if(a.isString(b)&&(b={address:b}),f){var h=a.uid("gmaps-"),i={lat:0,lng:0};return a.isPlainObject(b)&&(b=a.extend({},i,b)),d.attr("id",h),b.div="#"+h,a.each(a.GMaps.mapEvents,function(c,f){var g=a.isFunction(b[f])?b[f]:a.noop;b[f]=function(){var b=a.makeArray(arguments);g.apply(e,arguments),d.trigger.apply(d,["map_"+f].concat(b))}}),e=new c(b),d.data("gmaps",e),e.go=function(a,b){e.setCenter(a,b),e.addMarker({lat:a,lng:b})},g&&c.geolocate({success:function(a){e.go(a.coords.latitude,a.coords.longitude)}}),e}var j=b.lat,k=b.lng;
return(a.isNumber(j)||a.isNumber(k))&&e.go(j,k),e}},b.resolveWith(c)}),d=a('meta[name="foundry:location:language"]').attr("content")||"en";window.google&&window.google.maps?window[c]():a.require().script(a.uri(window.location).protocol()+"://maps.google.com/maps/api/js?sensor=true&callback="+c+"&language="+d).done()};FD40.module("gmaps",a)}(),function(){var a=function(a){var b=this,c=a,d=function(){!function(a,b,c){function j(a){var b={},d=/^jQuery\d+$/;return c.each(a.attributes,function(a,c){c.specified&&!d.test(c.name)&&(b[c.name]=c.value)
}),b}function k(a,d){var e=this,f=c(e);if(e.value==f.attr("placeholder")&&f.hasClass("placeholder"))if(f.data("placeholder-password")){if(f=f.hide().next().show().attr("id",f.removeAttr("id").data("placeholder-id")),a===!0)return f[0].value=d;f.focus()}else e.value="",f.removeClass("placeholder"),e==b.activeElement&&e.select()}function l(){var a,b=this,d=c(b),f=this.id;if(""==b.value){if("password"==b.type){if(!d.data("placeholder-textinput")){try{a=d.clone().attr({type:"text"})}catch(g){a=c("<input>").attr(c.extend(j(this),{type:"text"}))
}a.removeAttr("name").data({"placeholder-password":!0,"placeholder-id":f}).bind("focus.placeholder",k),d.data({"placeholder-textinput":a,"placeholder-id":f}).before(a)}d=d.removeAttr("id").hide().prev().attr("id",f).show()}d.addClass("placeholder"),d[0].value=d.attr("placeholder")}else d.removeClass("placeholder")}var h,i,d="placeholder"in b.createElement("input"),e="placeholder"in b.createElement("textarea"),f=c.fn,g=c.valHooks;d&&e?(i=f.placeholder=function(){return this},i.input=i.textarea=!0):(i=f.placeholder=function(){var a=this;
return a.filter((d?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":k,"blur.placeholder":l}).data("placeholder-enabled",!0).trigger("blur.placeholder"),a},i.input=d,i.textarea=e,h={get:function(a){var b=c(a);return b.data("placeholder-enabled")&&b.hasClass("placeholder")?"":a.value},set:function(a,d){var e=c(a);return e.data("placeholder-enabled")?(""==d?(a.value=d,a!=b.activeElement&&l.call(a)):e.hasClass("placeholder")?k.call(a,!0,d)||(a.value=d):a.value=d,e):a.value=d}},d||(g.input=h),e||(g.textarea=h),c(function(){c(b).delegate("form","submit.placeholder",function(){var a=c(".placeholder",this).each(k);
setTimeout(function(){a.each(l)},10)})}),c(a).bind("beforeunload.placeholder",function(){c(".placeholder").each(function(){this.value=""})}))}(window,document,c)};d(),b.resolveWith(d)};FD40.module("placeholder",a)}(),function(){var a=function(a){var b=this,c=function(){a.fn.image=function(b){var b=a.Image[b];return b&&b.apply(this[0],a.makeArray(arguments).slice(1))},a.Image={get:function(b){var c="IMG"===this.nodeName,d=a(c?this:new Image),e=a.Deferred();return d.load(function(){var a,b,f,g;c||d.appendTo("body");
var h={width:a=d.width(),height:b=d.height(),aspectRatio:f=a/b,orientation:g=1===f?"square":1>f?"tall":"wide"};d.css({position:"absolute",left:"-99999px"}).data(h).addClass("orientation-"+g).removeAttr("style"),c||d.detach(),e.resolve(d,h)}).error(function(){e.reject()}).attr("src",b),e},aspectRatio:function(b,c){return a.isPlainObject(b)&&(b=b.width,c=b.height),b/c},orientation:function(b,c){return a.isPlainObject(b)&&(b=b.width,c=b.height),b===c?"square":b>c?"wide":"tall"},resizeProportionate:function(a,b,c,d,e){var f=a,g=b,h=c/a;
f=a*h,g=b*h;var i=g>d;return"outer"==e&&(i=d>g),i&&(h=d/b,f=a*h,g=b*h),{top:(d-g)/2,left:(c-f)/2,width:f,height:g}},resizeWithin:function(b,c,d,e){return a.Image.resizeProportionate(b,c,d,e,"inner")},resizeToFill:function(b,c,d,e){return a.Image.resizeProportionate(b,c,d,e,"outer")}}};c(),b.resolveWith(c)};FD40.module("image",a)}(),function(){var a=function(a){var b=this,c=a,d=function(){!function(a){function f(){return a("<div/>")}var b=Math.abs,c=Math.max,d=Math.min,e=Math.round;a.imgAreaSelect=function(g,h){function X(a){return a+s.left-w.left
}function Y(a){return a+s.top-w.top}function Z(a){return a-s.left+w.left}function $(a){return a-s.top+w.top}function _(a){return a.pageX-w.left}function ab(a){return a.pageY-w.top}function bb(a){var b=a||B,c=a||C;return{x1:e(O.x1*b),y1:e(O.y1*c),x2:e(O.x2*b),y2:e(O.y2*c),width:e(O.x2*b)-e(O.x1*b),height:e(O.y2*c)-e(O.y1*c)}}function cb(a,b,c,d,f){var g=f||B,h=f||C;O={x1:e(a/g||0),y1:e(b/h||0),x2:e(c/g||0),y2:e(d/h||0)},O.width=O.x2-O.x1,O.height=O.y2-O.y1}function db(){i.width()&&(s={left:e(i.offset().left),top:e(i.offset().top)},t=i.innerWidth(),u=i.innerHeight(),s.top+=i.outerHeight()-u>>1,s.left+=i.outerWidth()-t>>1,E=e(h.minWidth/B)||0,F=e(h.minHeight/C)||0,G=e(d(h.maxWidth/B||1<<24,t)),H=e(d(h.maxHeight/C||1<<24,u)),"1.3.2"!=a().jquery||"fixed"!=y||P.getBoundingClientRect||(s.top+=c(document.body.scrollTop,P.scrollTop),s.left+=c(document.body.scrollLeft,P.scrollLeft)),w=/absolute|relative/.test(v.css("position"))?{left:e(v.offset().left)-v.scrollLeft(),top:e(v.offset().top)-v.scrollTop()}:"fixed"==y?{left:a(document).scrollLeft(),top:a(document).scrollTop()}:{left:0,top:0},q=X(0),r=Y(0),(O.x2>t||O.y2>u)&&lb())
}function eb(b){if(J){switch(k.css({left:X(O.x1),top:Y(O.y1)}).add(l).width(U=O.width).height(V=O.height),l.add(m).add(o).css({left:0,top:0}),m.width(c(U-m.outerWidth()+m.innerWidth(),0)).height(c(V-m.outerHeight()+m.innerHeight(),0)),a(n[0]).css({left:q,top:r,width:O.x1,height:u}),a(n[1]).css({left:q+O.x1,top:r,width:U,height:O.y1}),a(n[2]).css({left:q+O.x2,top:r,width:t-O.x2,height:u}),a(n[3]).css({left:q+O.x1,top:r+O.y2,width:U,height:u-O.y2}),U-=o.outerWidth(),V-=o.outerHeight(),o.length){case 8:a(o[4]).css({left:U>>1}),a(o[5]).css({left:U,top:V>>1}),a(o[6]).css({left:U>>1,top:V}),a(o[7]).css({top:V>>1});
case 4:o.slice(1,3).css({left:U}),o.slice(2,4).css({top:V})}b!==!1&&(a.imgAreaSelect.keyPress!=ub&&a(document).unbind(a.imgAreaSelect.keyPress,a.imgAreaSelect.onKeyPress),h.keys&&a(document)[a.imgAreaSelect.keyPress](a.imgAreaSelect.onKeyPress=ub)),a.browser.msie&&m.outerWidth()-m.innerWidth()==2&&(m.css("margin",0),setTimeout(function(){m.css("margin","auto")},0))}}function fb(a){db(),eb(a),K=X(O.x1),L=Y(O.y1),M=X(O.x2),N=Y(O.y2)}function gb(a,b){h.fadeSpeed?a.fadeOut(h.fadeSpeed,b):a.hide()}function hb(a){var b=Z(_(a))-O.x1,c=$(ab(a))-O.y1;
W||(db(),W=!0,k.one("mouseout",function(){W=!1})),D="",h.resizable&&(c<=h.resizeMargin?D="n":c>=O.height-h.resizeMargin&&(D="s"),b<=h.resizeMargin?D+="w":b>=O.width-h.resizeMargin&&(D+="e")),k.css("cursor",D?D+"-resize":h.movable?"move":""),p&&p.toggle()}function ib(){a("body").css("cursor",""),(h.autoHide||O.width*O.height==0)&&gb(k.add(n),function(){a(this).hide()}),a(document).unbind("mousemove",mb),k.mousemove(hb),h.onSelectEnd(g,bb())}function jb(b){return 1!=b.which?!1:(db(),D?(a("body").css("cursor",D+"-resize"),K=X(O[/w/.test(D)?"x2":"x1"]),L=Y(O[/n/.test(D)?"y2":"y1"]),a(document).mousemove(mb).one("mouseup",ib),k.unbind("mousemove",hb)):h.movable?(z=q+O.x1-_(b),A=r+O.y1-ab(b),k.unbind("mousemove",hb),a(document).mousemove(ob).one("mouseup",function(){h.onSelectEnd(g,bb()),a(document).unbind("mousemove",ob),k.mousemove(hb)
})):i.mousedown(b),!1)}function kb(a){I&&(a?(M=c(q,d(q+t,K+b(N-L)*I*(M>K||-1))),N=e(c(r,d(r+u,L+b(M-K)/I*(N>L||-1)))),M=e(M)):(N=c(r,d(r+u,L+b(M-K)/I*(N>L||-1))),M=e(c(q,d(q+t,K+b(N-L)*I*(M>K||-1)))),N=e(N)))}function lb(){K=d(K,q+t),L=d(L,r+u),b(M-K)<E&&(M=K-E*(K>M||-1),q>M?K=q+E:M>q+t&&(K=q+t-E)),b(N-L)<F&&(N=L-F*(L>N||-1),r>N?L=r+F:N>r+u&&(L=r+u-F)),M=c(q,d(M,q+t)),N=c(r,d(N,r+u)),kb(b(M-K)<b(N-L)*I),b(M-K)>G&&(M=K-G*(K>M||-1),kb()),b(N-L)>H&&(N=L-H*(L>N||-1),kb(!0)),O={x1:Z(d(K,M)),x2:Z(c(K,M)),y1:$(d(L,N)),y2:$(c(L,N)),width:b(M-K),height:b(N-L)},eb(),h.onSelectChange(g,bb())
}function mb(a){return M=/w|e|^$/.test(D)||I?_(a):X(O.x2),N=/n|s|^$/.test(D)||I?ab(a):Y(O.y2),lb(),!1}function nb(b,c){M=(K=b)+O.width,N=(L=c)+O.height,a.extend(O,{x1:Z(K),y1:$(L),x2:Z(M),y2:$(N)}),eb(),h.onSelectChange(g,bb())}function ob(a){return K=c(q,d(z+_(a),q+t-O.width)),L=c(r,d(A+ab(a),r+u-O.height)),nb(K,L),a.preventDefault(),!1}function pb(){a(document).unbind("mousemove",pb),db(),M=K,N=L,lb(),D="",n.is(":visible")||k.add(n).hide().fadeIn(h.fadeSpeed||0),J=!0,a(document).unbind("mouseup",qb).mousemove(mb).one("mouseup",ib),k.unbind("mousemove",hb),h.onSelectStart(g,bb())
}function qb(){a(document).unbind("mousemove",pb).unbind("mouseup",qb),gb(k.add(n)),cb(Z(K),$(L),Z(K),$(L)),this instanceof a.imgAreaSelect||(h.onSelectChange(g,bb()),h.onSelectEnd(g,bb()))}function rb(b){return 1!=b.which||n.is(":animated")?!1:(db(),z=K=_(b),A=L=ab(b),a(document).mousemove(pb).mouseup(qb),!1)}function sb(){fb(!1)}function tb(){j=!0,wb(h=a.extend({classPrefix:"imgareaselect",movable:!0,parent:"body",resizable:!0,resizeMargin:10,onInit:function(){},onSelectStart:function(){},onSelectChange:function(){},onSelectEnd:function(){}},h)),k.add(n).css({visibility:""}),h.show&&(J=!0,db(),eb(),k.add(n).hide().fadeIn(h.fadeSpeed||0)),setTimeout(function(){h.onInit(g,bb())
},0)}function vb(a,b){for(var c in b)void 0!==h[c]&&a.css(b[c],h[c])}function wb(b){if(b.parent&&(v=a(b.parent)).append(k.add(n)),a.extend(h,b),db(),null!=b.handles){for(o.remove(),o=a([]),S=b.handles?"corners"==b.handles?4:8:0;S--;)o=o.add(f());o.addClass(h.classPrefix+"-handle").css({position:"absolute",fontSize:0,zIndex:x+1||1}),!parseInt(o.css("width"))>=0&&o.width(5).height(5),(T=h.borderWidth)&&o.css({borderWidth:T,borderStyle:"solid"}),vb(o,{borderColor1:"border-color",borderColor2:"background-color",borderOpacity:"opacity"})
}for(B=h.imageWidth/t||1,C=h.imageHeight/u||1,null!=b.x1&&(cb(b.x1,b.y1,b.x2,b.y2),b.show=!b.hide),b.keys&&(h.keys=a.extend({shift:1,ctrl:"resize"},b.keys)),n.addClass(h.classPrefix+"-outer"),l.addClass(h.classPrefix+"-selection"),S=0;S++<4;)a(m[S-1]).addClass(h.classPrefix+"-border"+S);vb(l,{selectionColor:"background-color",selectionOpacity:"opacity"}),vb(m,{borderOpacity:"opacity",borderWidth:"border-width"}),vb(n,{outerColor:"background-color",outerOpacity:"opacity"}),(T=h.borderColor1)&&a(m[0]).css({borderStyle:"solid",borderColor:T}),(T=h.borderColor2)&&a(m[1]).css({borderStyle:"dashed",borderColor:T}),k.append(l.add(m).add(p).add(o)),a.browser.msie&&((T=(n.css("filter")||"").match(/opacity=(\d+)/))&&n.css("opacity",T[1]/100),(T=(m.css("filter")||"").match(/opacity=(\d+)/))&&m.css("opacity",T[1]/100)),b.hide?gb(k.add(n)):b.show&&j&&(J=!0,k.add(n).fadeIn(h.fadeSpeed||0),fb()),I=(R=(h.aspectRatio||"").split(/:/))[0]/R[1],i.add(n).unbind("mousedown",rb),h.disable||h.enable===!1?(k.unbind("mousemove",hb).unbind("mousedown",jb),a(window).unbind("resize",sb)):((h.enable||h.disable===!1)&&((h.resizable||h.movable)&&k.mousemove(hb).mousedown(jb),a(window).resize(sb)),h.persistent||i.add(n).mousedown(rb)),h.enable=h.disable=void 0
}var j,p,q,r,t,u,v,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,Q,R,S,T,U,V,W,i=a(g),k=f(),l=f(),m=f().add(f()).add(f()).add(f()),n=f().add(f()).add(f()).add(f()),o=a([]),s={left:0,top:0},w={left:0,top:0},x=0,y="absolute",O={x1:0,y1:0,x2:0,y2:0,width:0,height:0},P=document.documentElement,ub=function(a){var e,f,b=h.keys,g=a.keyCode;if(e=isNaN(b.alt)||!a.altKey&&!a.originalEvent.altKey?!isNaN(b.ctrl)&&a.ctrlKey?b.ctrl:!isNaN(b.shift)&&a.shiftKey?b.shift:isNaN(b.arrows)?10:b.arrows:b.alt,"resize"==b.arrows||"resize"==b.shift&&a.shiftKey||"resize"==b.ctrl&&a.ctrlKey||"resize"==b.alt&&(a.altKey||a.originalEvent.altKey)){switch(g){case 37:e=-e;
case 39:f=c(K,M),K=d(K,M),M=c(f+e,K),kb();break;case 38:e=-e;case 40:f=c(L,N),L=d(L,N),N=c(f+e,L),kb(!0);break;default:return}lb()}else switch(K=d(K,M),L=d(L,N),g){case 37:nb(c(K-e,q),L);break;case 38:nb(K,c(L-e,r));break;case 39:nb(K+d(e,t-Z(M)),L);break;case 40:nb(K,L+d(e,u-$(N)));break;default:return}return!1};for(this.remove=function(){wb({disable:!0}),k.add(n).remove()},this.getOptions=function(){return h},this.setOptions=wb,this.getSelection=bb,this.setSelection=cb,this.cancelSelection=qb,this.update=fb,Q=i;Q.length;)x=c(x,isNaN(Q.css("z-index"))?x:Q.css("z-index")),"fixed"==Q.css("position")&&(y="fixed"),Q=Q.parent(":not(body)");
x=h.zIndex||x,a.browser.msie&&i.attr("unselectable","on"),a.imgAreaSelect.keyPress=a.browser.msie||a.browser.safari?"keydown":"keypress",a.browser.opera&&(p=f().css({width:"100%",height:"100%",position:"absolute",zIndex:x+2||2})),k.add(n).css({visibility:"hidden",position:y,overflow:"hidden",zIndex:x||"0"}),k.css({zIndex:x+2||2}),l.add(m).css({position:"absolute",fontSize:0}),g.complete||"complete"==g.readyState||!i.is("img")?tb():i.one("load",tb),!j&&a.browser.msie&&a.browser.version>=7&&(g.src=g.src)},a.fn.imgAreaSelect=function(b){return b=b||{},this.each(function(){a(this).data("imgAreaSelect")?b.remove?(a(this).data("imgAreaSelect").remove(),a(this).removeData("imgAreaSelect")):a(this).data("imgAreaSelect").setOptions(b):b.remove||(void 0===b.enable&&void 0===b.disable&&(b.enable=!0),a(this).data("imgAreaSelect",new a.imgAreaSelect(this,b)))
}),b.instance?a(this).data("imgAreaSelect"):this}}(c)};d(),b.resolveWith(d)};FD40.module("imgareaselect",a)}(),function(){var a=function(a){var b=this,c=function(){var b=new function(){this.countRegexp=function(a,b){var c=a.match(b);return c?c.length:0},this.getStrength=function(a,b){var c=a.length;if(b>c)return 0;var d=this.countRegexp(a,/\d/g),e=this.countRegexp(a,/[a-z]/g),f=this.countRegexp(a,/[A-Z]/g),g=c-d-e-f;if(d==c||e==c||f==c||g==c)return 1;var h=0;return d&&(h+=2),e&&(h+=f?4:3),f&&(h+=e?4:3),g&&(h+=5),c>10&&(h+=1),h
},this.getStrengthLevel=function(a,b){var c=this.getStrength(a,b),a=1;return 0>=c?a=1:c>0&&4>=c?a=2:c>4&&8>=c?a=3:c>8&&12>=c?a=4:c>12&&(a=5),a}};a.fn.password_strength=function(c){var d=a.extend({container:null,minLength:6,texts:{1:"Too weak",2:"Weak password",3:"Normal strength",4:"Strong password",5:"Very strong password"},onCheck:null},c);return this.each(function(){var c=null;d.container?c=a(d.container):(c=a("<span/>").attr("class","password_strength"),a(this).after(c)),a(this).keyup(function(){var e=a(this).val(),f=b.getStrengthLevel(e,d.minLength);
if(e.length>0){var g="password_strength_"+f;!c.hasClass(g)&&f in d.texts&&c.text(d.texts[f]).attr("class","password_strength "+g)}else c.text("").attr("class","password_strength");d.onCheck&&d.onCheck.call(this,f)})})}};c(),b.resolveWith(c)};FD40.module("passwordstrength",a)}(),function(){var a=function(a){var b=this,c=function(){var b="",c=" ",d="\xa0",e="\n",f="data-type",g="data-value",h={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,ENTER:13,ESCAPE:27,LEFT:37,RIGHT:39,SPACE:32,TAB:9,UP:38};a.fn.caret=function(a,b){if(0!=this.length){if("number"==typeof a)return b="number"==typeof b?b:a,this.each(function(){if(this.setSelectionRange){var c=this;
window.setTimeout(function(){c.setSelectionRange(a,b)},0)}else if(this.createTextRange){var d=this.createTextRange();d.collapse(!0),d.moveEnd("character",b),d.moveStart("character",a);try{d.select()}catch(e){}}});if(this[0].setSelectionRange)a=this[0].selectionStart,b=this[0].selectionEnd;else if(document.selection&&document.selection.createRange){var c=document.selection.createRange();a=0-c.duplicate().moveStart("character",-1e5),b=a+c.text.length}return{start:a,end:b}}};var i=function(b){a.extend(this,b)};
a.extend(i.prototype,{val:function(a){var b=this;return void 0===a?b.text.nodeValue:(b.text.nodeValue=a,b.end=b.start+(b.length=a.length),b)},nextSibling:function(a){for(var b=a.nextSibling;b&&1===b.nodeType&&b.hasAttribute("data-ignore");)b=b.nextSibling;return b},insert:function(f,g,h){var j=this,k=j.block,l=j.text,m=j.parent,n=j.br,o=j.val(),p=j.length,q=f==e,r=f==c,s=f==b,t=j.trigger||{},v=(t.finalize,j.finalized),w=32==o.charCodeAt(g-1),x=t.allowSpace||j.allowSpace,y=r&&(!x||x&&w);if(void 0===g&&(g=p),void 0===h&&(h=g),k&&x&&w&&!v){if(r){var z=a(j.textarea),A=z.val(),B=z.caret().end-1,C=j.start+g;
z.val(A.substring(0,C)+A.slice(C+1)).caret(B)}return j.toTextMarker(),r?(a(m).trigger("markerInsert",[j,K,f,g,h]),j):j.insert(f,g,h)}if(k&&h==p&&!s&&(y||q||n||v)){var D=j.spawn().insert(f,0);return a(m).trigger("markerExit",[j,K,D,f,g,h]),D}if(k&&0===j.index&&0===h&&1===f.length){var E=document.createTextNode(f);m.insertBefore(E,k);var F=new i({index:0,start:0,end:f.length,text:E,parent:m,textarea:j.textarea,allowSpace:!0});return a(m).trigger("markerInsert",[F,K,f,g,h]),F}var G=k?k.nextSibling:l.nextSibling,H=o.substring(0,g),I=o.slice(h),J=f.replace(/  /g," "+d).split(e),K=[],L=k||l,M=J.length;
for(J[0]=H+J[0],J[M-1]+=I;--M;){var L=document.createTextNode(J[M]),n=document.createElement("BR");K.push(m.insertBefore(L,G)),K.push(m.insertBefore(n,L)),G=n}return j.val(J[M]),a(m).trigger("markerInsert",[j,K,f,g,h]),j},remove:function(){var b=this,c=b.parent,d=b.block,e=b.text;return d&&a(d).trigger("triggerDestroy",[b]),c.removeChild(d||e),b.removed=!0,a(c).trigger("markerRemove",[b]),b},toTextMarker:function(){var b=this,c=b.block,d=b.parent;if(!c)return b;var e=b.clone();return c&&a(c).trigger("triggerDestroy",[b]),d.insertBefore(b.text,c.nextSibling),d.removeChild(c),delete b.block,delete b.trigger,a(b.parent).trigger("markerConvert",[b,e,"text"]),b
},toBlockMarker:function(){var c=this;if(!c.block){var d=c.clone(),e=c.parent,f=c.block=document.createElement("SPAN"),g=c.text;return e.insertBefore(f,g.nextSibling),f.appendChild(g),a(f).data("marker",{}),a(c.parent).trigger("markerConvert",[c,d,"block"]),c}},spawn:function(a,b){var c=this,d=c.text,e=c.parent,f=c.block,g=f?f.nextSibling:d.nextSibling;void 0===a&&(a=b=c.length),b<c.length&&(g=e.insertBefore(d.splitText(b),g)),d=e.insertBefore(d.splitText(a),g);var h=new i({index:c.index+1,start:a=c.start+a,end:b=c.start+b,length:b-a,text:d,parent:e,textarea:c.textarea,before:c,after:c.after,br:!1,allowSpace:!0,finalized:!1});
return c.end=a,c.length=c.end-c.start,c.after=h,h},clone:function(){return new i(a.pick(this,"index,start,end,length,text,parent,textarea,before,after,br,allowSpace,trigger,value,finalized".split(",")))},finalize:function(b){var c=this,d=c.block;if(d){var e=a(d).data("marker");e.value=b,e.finalized=!0,a.extend(c,e)}}}),a.Controller("Mentions",{pluginName:"mentions",hostname:"mentions",defaultOptions:{cssCloneProps:["lineHeight","textDecoration","letterSpacing","fontSize","fontFamily","fontStyle","fontWeight","textTransform","textAlign","direction","wordSpacing","fontSizeAdjust"],triggers:{},inspector:!1,"{textarea}":"[data-mentions-textarea]","{overlay}":"[data-mentions-overlay]","{block}":"[data-mentions-overlay] > span"}},function(b){return{init:function(){b._overlay=b.overlay()[0],b._textarea=b.textarea()[0],setTimeout(function(){b.cloneLayout()
},15),b.options.inspector&&b.inspect(),b.addPlugin("autocomplete"),b.initialCaret=b.textarea().data("initial")||0},inspect:function(){b.inspector=b.addPlugin("inspector"),b.inspector.showInspector()},setLayout:function(){b.normalize()},cloneLayout:function(){for(var a=b.overlay(),c=a.detach()[0],d=b.textarea(),e=b.options.cssCloneProps,f=0;prop=e[f++];)c.style[prop]=d.css(prop);c.style.opacity=1,a.insertBefore(d),b.setLayout()},reset:function(){var c=b.overlay(),d=c.data("default");void 0!==d?c.html(a("<div>").html(d).html()):c.empty();
var e=b.textarea(),f=e.data("default");void 0!==f?e.val(a("<div>").html(f).text()):e.val(""),b.caretBefore=b.caretAfter={start:0,end:0},b.previousMarker=null,b.normalize(),b.initialFocus=!0,b.trigger("triggerClear")},getTrigger:function(a){var c=b.options.triggers;if(c.hasOwnProperty(a)){var d=c[a];return d.key=a,d}},getTriggerFromType:function(c){var e,d=b.options.triggers;return a.each(d,function(a,b){return b.type===c?(e=b,!1):void 0}),e},getStopIndex:function(a,b){for(var c=b.length,d=a.length;c--;){var e=b.substr(c,1),f=a.indexOf(e);
d=0>f?d:Math.min(d,f)}return d},getMarkers:function(c){var k,d=b._textarea,h=b._overlay,j=a.makeArray(h.childNodes),l=0,m=0,n=null,o=!1,p=[],q=function(a){var b;return c&&(b=c.apply(a,[a])),null!==b&&b!==!1&&p.push(void 0!==b?b:a),b};for(a.remove(j,function(a){return 1===a.nodeType&&a.hasAttribute("data-ignore")});k=j[l++];){var t,v,w,r=k.nodeType,s=k.nodeName,u=null,x=!1,y=!1;if(3==r)t=k,y=!0;else if((u=k)&&"BR"==s)t=document.createTextNode(e),x=!0;else if(1!==r||"SPAN"!==s||!(t=k.childNodes[0])||3!==t.nodeType){h.removeChild(k);
continue}var z={index:l-1,start:m,end:v=m+(w=t.length),length:w,text:t,block:u,parent:h,textarea:d,before:n,br:x,allowSpace:y,finalized:!1};if(u){var A=a(k),B=A.data("marker");if(B||(B={})&&A.data("marker",B),k.hasAttribute(f)){var C=A.attr(f),D=b.getTriggerFromType(C);D&&(B.trigger=D),A.removeAttr(f)}k.hasAttribute(g)&&(B.value=A.attr(g),B.finalized=!0,A.removeAttr(g)),a.extend(z,B)}var E=new i(z);if(l>1&&(n.after=E,o=q(n)===!1))break;m=v,n=E}return o||q(n),p},getMarkerAt:function(a){if(void 0!==a){var c;return b.getMarkers(function(){return a>=this.start&&a<=this.end?(c=this,!1):void 0
}),c}},getMarkersBetween:function(a,c){return void 0!==a?b.getMarkers(function(){return this.start>c?!1:this.end<a?null:this}):void 0},toArray:function(a,c){var d=b.getMarkers(function(){var c=this;if(!c.block||c.br)return null;if(!c.trigger){var d=c.text.nodeValue,e=d.slice(0,1),f=b.getTrigger(e);if(!f)return null;c.trigger=f,c.value=d.slice(1)}var g={start:c.start,length:c.length,type:c.trigger.type,value:c.value};return a?JSON.stringify(g):g});return c?d:d.reverse()},insert:function(a,c,d){var e,f;if(c===d||void 0===d)e=b.getMarkerAt(c),f=e.start,e.insert(a,c-f,d-f);
else{var g=b.getMarkersBetween(c,d),h=g.length;if(1>h)return;if(1==h)e=g[0],f=e.start,e.insert(a,c-f,d-f);else{var i=h-1,e=g[i];for(e.block&&d>e.start&&e.toTextMarker(),d-e.start>0&&e.insert("",0,d-e.start);(e=g[--i])&&i>0;)e.remove();e.block&&0===e.index&&0===c&&e.toTextMarker(),e.insert(a,c-e.start,e.length),0===c&&e.br&&e.remove()}}return b.normalize(),e},textareaInsert:function(a,c,d){var e=b._textarea,f=e.value;return e.value=f.substring(0,c)+a+f.slice(d)},normalize:function(){var a=b._overlay,c=b._textarea;
a.normalize();var d=a.firstChild,e=a.lastChild,f=document.createTextNode("");e&&"BR"!==e.nodeName||a.appendChild(f),e&&e==d&&1===e.nodeType&&e.hasAttribute("data-ignore")&&a.insertBefore(f,e),a.style.height="auto",a.style.height=c.scrollHeight+"px",c.scrollTop=0,b.lengthBefore=c.value.length},lengthBefore:0,caretBefore:{start:0,end:0},caretAfter:{start:0,end:0},skipKeydown:!1,previousMarker:null,initialFocus:!0,"{textarea} focus":function(){b.initialFocus&&b.textarea().caret(b.initialCaret||0)},"{textarea} keydown":function(c,d){if(b.initialFocus=!1,!b.skipKeydown){{b.caretBefore=c.caret()
}8===d.keyCode&&a.IE<10&&b.overlay().css("opacity",0),b.skipKeydown=!0}},"{textarea} keypress":function(a,c){b.caretBefore=a.caret(),8===c.keyCode},"{textarea} input":function(a){b.reflect(),a.val().length<1&&b.reset()},"{textarea} keyup":function(c,d){if(b.skipKeydown=!1,8===d.keyCode&&a.IE<10){var e=b.caretBefore,f=b.caretAfter=b.textarea().caret();b.insert("",f.end,e.end),b.caretBefore=f,b.overlay().css("opacity",1)}},reflect:function(){var c=b._textarea,d=c.value,e=b.caretBefore,f=b.caretAfter=a(c).caret(),g=a.browser.opera&&f.end>f.start,h=b.getMarkerAt(e.start),i=b.lengthBefore-d.length,j=!1;
if(g&&e.start!==e.end&&(e.end+=i),h){var k=b.previousMarker,l=h.block;if(k){var m=k.block,n=(k.trigger||{}).finalize;if(m&&n&&!k.finalized&&m!==l)try{k.toTextMarker()}catch(o){b.previousMarker=null}}if(!h.br&&(0===i||f.end<e.start))var p=h.start,q=h.end-i,r=f.end,s=e.start,j=p!==q;else var r=p=Math.min(e.start,f.start),s=e.end,q=f.end;var t=d.substring(p,q);j?(h.val()!==t&&h.finalized&&h.toTextMarker(),h.val(t),b.overlay().trigger("markerInsert",h,[],t,p,q),b.normalize()):b.insert(t,r,s),g&&(f.start=f.end),b.caretBefore=b.caretAfter
}},"{overlay} markerInsert":function(c,d,e,f,g,h,i){var l,j=e.text,k=j.nodeValue;if(b.previousMarker=null,l=b.getTrigger(g)){var m=k.charCodeAt(h-1),n=e.before&&e.before.br;if(0===e.index||32===m||n){var o=k.slice(h),p=o.slice(1);i=l.wrap&&o.length>1?b.getStopIndex(p,l.stop)+h+1:h+1;var q=e.spawn(h,i).toBlockMarker(),p=q.val().slice(1),r=a(q.block).data("marker");r.value=p,r.trigger=l,b.previousMarker=q,b.trigger("triggerCreate",[q,l,p])}}if(e.block&&!e.br)if(e.finalized){var s=e.length;s-1>i&&e.toTextMarker()
}else{var t=k.slice(0,1),l=b.getTrigger(t);if(!l)return;var p=k.slice(1),h=b.getStopIndex(p,l.stop)+1,i=k.length,q=!1;i>h&&(q=e.spawn(h,i)),p=e.val().slice(1);var r=a(e.block).data("marker");r.value=p,r.trigger=l,b.previousMarker=e,b.trigger("triggerChange",[e,q,l,p])}},"{overlay} markerExit":function(a,c,d,e,f){var j=d.trigger;if(j){var k=j.allowSpace||d.allowSpace,l=d.val();k||d.val()!==j.key||d.toTextMarker(),b.trigger("triggerExit",[d,f,j,l])}}}}),a.template("mentions/menu",'<div class="mentions-autocomplete" data-mentions-autocomplete><b><b></b></b><div class="mentions-autocomplete-inner" data-mentions-autocomplete-viewport><div class="mentions-autocomplete-loading" data-mentions-autocomplete-loading data-mentions-autocomplete-close></div><div class="mentions-autocomplete-empty" data-mentions-autocomplete-empty></div><div class="mentions-autocomplete-search" data-mentions-autocomplete-search></div><ul class="mentions-menu" data-mentions-menu></ul></div></div>'),a.template("mentions/menuItem",'<li class="mentions-menuItem" data-mentions-menuItem>[%== html %]</li>'),a.template("mentions/loadingHint",'<i class="mentions-autocomplete-loading-indicator"></i>'),a.template("mentions/searchHint",'<span class="mentions-autocomplete-search-hint">Type a keyword to begin.</span>'),a.template("mentions/emptyHint",'<span class="mentions-autocomplete-empty-text">No items found.</span>'),a.Controller("Mentions.Autocomplete",{defaultOptions:{view:{menu:"mentions/menu",menuItem:"mentions/menuItem",searchHint:"mentions/searchHint",loadingHint:"mentions/loadingHint",emptyHint:"mentions/emptyHint"},id:"",component:"",modifier:"",shadow:!1,sticky:!1,animation:!1,query:{data:null,cache:!0,minLength:1,limit:10,highlight:!0,caseSensitive:!1,exclusive:!1,searchHint:!1,loadingHint:!1,emptyHint:!1},position:{my:"left top",at:"left bottom",collision:"none"},size:{width:"auto",height:"auto"},"{menu}":"[data-mentions-menu]","{menuItem}":"[data-mentions-menuItem]","{viewport}":"[data-mentions-autocomplete-viewport]","{loadingHint}":"[data-mentions-autocomplete-loading]","{emptyHint}":"[data-mentions-autocomplete-empty]","{searchHint}":"[data-mentions-autocomplete-search]","{closeButton}":"[data-mentions-autocomplete-close]"}},function(b,c,d){return{init:function(){setTimeout(function(){if(b.element.data(b.Class.fullName)){var e=b.mentions;
b.uid=a.uid(),e.autocomplete=b,e.pluginInstances.autocomplete=b,c.position.of||(c.position.of=b.mentions.element),b.defaultSearchHint=b.view.searchHint().toHTML(),b.defaultEmptyHint=b.view.emptyHint().toHTML(),b.defaultLoadingHint=b.view.loadingHint().toHTML(),b.element.detach()}else{b.destroy();{b.view.menu().attr("id",c.id).addClass(c.component).addClass(c.modifier).addClass(c.shadow?"has-shadow":"").addClass(c.animation?"has-animation":"").addClass(c.sticky?"is-sticky":"").appendTo("body").data(b.Class.fullName,!0).addController(b.Class,c)
}}},50)},setLayout:function(){if(!b.hidden){var c=b.options,d=c.size,e=b.mentions.element.outerWidth(),f="auto";a.isFunction(d.width)&&(e=d.width(e)),a.isFunction(d.height)&&(f=d.height(f)),b.element.css({opacity:1,width:e}).position(b.options.position),setTimeout(function(){b.viewport().addClass("active")},1)}},"{window} resize":a.debounce(function(){b.element.css("opacity",0),b.setLayout()},250),"{window} scroll":a.debounce(function(){b.element.css("opacity",0),b.setLayout()},250),"{window} dialogTransitionStart":function(){b.hidden=!0,b.element.css("opacity",0)
},"{window} dialogTransitionEnd":function(){b.hidden=!1,b.setLayout()},currentMarker:null,"{mentions} triggerCreate":function(a,c,d,e,f){b.populate(d,e,f),b.currentMarker=d},"{mentions} triggerChange":function(a,c,d,e,f,g){b.populate(d,f,g),b.currentMarker=d},"{mentions} triggerExit":function(){var h=b.activeQuery;h&&(h.aborted=!0),b.hide()},"{mentions.block} triggerDestroy":function(){b.hide()},"{mentions} triggerClear":function(){b.hide()},hidden:!0,show:function(c){clearTimeout(b.sleep),b.element.appendTo("body").show(),b.hidden=!1,b.viewport().removeClass("active"),b.setLayout();
var e=a(document),f="click.mentions."+b.uid;e.off(f).on(f,function(c){var g=a(c.target).parents().andSelf();g.filter(d).length>0||(e.off(f),b.hide())}),c&&(b.sleep=setTimeout(function(){b.hide()},c))},hide:function(){b.element.hide();var a=b.menuItem(),c=a.filter(".active");c.length>0&&(b.lastItem={keyword:"",item:c.data("item")}),b.viewport().removeClass("active"),a.removeClass("active"),b.render.reset(),b.hidden=!0,clearTimeout(b.sleep),b.sleep=setTimeout(function(){b.element.detach()},3e3)},query:function(c){if(c){var d=a.extend({},b.options.query,a.isPlainObject(c)?c:{data:c}),e=d.data;
if(e){if(a.isUrl(e)){var f=e;d.lookup=function(){return a.ajax(f+d.keyword)}}if(a.isFunction(e)){var g=e;d.lookup=function(){return g.call(b,d.keyword)}}if(a.isArray(e)){var h=e;d.lookup=function(){var b=a.Deferred(),c=d.keyword.toLowerCase();return setTimeout(function(){var d=a.grep(h,function(a){return a.title.toLowerCase().indexOf(c)>-1});b.resolve(d)},0),b}}return d}}},tasks:{},delayTask:null,activeQuery:null,populate:function(c,d,e){var f=b.activeQuery;f&&(f.aborted=!0);var f=b.query(d.query);if(f){b.activeQuery=f,f.keyword=e,f.trigger=d,f.marker=c,b.trigger("queryPrepare",[f]);
var e=f.keyword;if(""===e||e.length<f.minLength){var g=f.searchHint;return g?(b.searchHint().html(a.isString(g)?g:b.defaultSearchHint),b.element.addClass("search"),b.show()):b.hide(),void 0}var h=f.id=d.key+"|"+f.caseSensitive?e:e.toLowerCase(),i=b.tasks,j=f.task=i[h],k=!a.isDeferred(j)||!f.cache,l=function(){var a=b.trigger("queryBeforeStart",[f]);a.isDefaultPrevented()||((k||!k&&"rejected"==j.state())&&(j=i[h]=f.task=f.lookup()),j.done(b.render(function(a){return[a,f]})),b.trigger("queryStart",[f]))};k?(clearTimeout(b.delayTask),b.delayTask=setTimeout(l,250)):l()
}},"{self} queryPrepare":function(a,c,d){a.removeClass("loading empty search"),d.loadingHint&&b.hide()},"{self} queryBeforeStart":function(c,d,e){var f=e.loadingHint;f&&(b.loadingHint().html(a.isString(f)?f:b.defaultLoadingHint),c.addClass("loading"),b.show())},"{self} queryStart":function(a,c,d){d.task.fail(function(){b.hide()}).always(function(){a.removeClass("loading")})},render:a.Enqueue(function(c,d){if(d.aborted)return b.hide(),void 0;a.isArray(c)||(c=[]);var e=b.mentions,f=b,g=b.element,h=b.menu(),i=d.keyword;
if(c.length<1){var j=d.emptyHint;return j?(b.emptyHint().html(a.isString(j)?j:b.defaultEmptyHint),h.empty(),g.addClass("empty"),b.show(2e3)):b.hide(),e.trigger("menuRender",[h,d,f,e]),void 0}g.removeClass("empty"),d.cache&&h.data("keyword")===i||(h.empty(),a.each(c,function(c,g){if(e.trigger("menuCreateItem",[g,d,f,e]),a.isPlainObject(g)&&!g.discard){var i=g.menuHtml||g.title;b.view.menuItem({html:i}).data("item",g).appendTo(h)}}),h.data("keyword",i));var k=b.menuItem();return e.trigger("menuCreate",[h,k,d,f,e]),k.filter(":not(.hidden)").length<1&&(g.addClass("empty"),!d.emptyHint)?b.hide():(d.exclusive&&b.menuItem(":not(.hidden):first").addClass("active"),e.trigger("renderMenu",[h,d,f,e]),b.show(),void 0)
}),"{mentions.textarea} keydown":function(a,c){clearTimeout(b.sleep);var d=b.menuItem(".active:not(.hidden)");switch(d.length<1&&(d=!1),c.keyCode){case h.UP:b.menuItem().removeClass("active"),d?d.prev(b.menuItem.selector+":not(.hidden)").addClass("active"):b.menuItem(":not(.hidden):last").addClass("active"),b.hidden||c.preventDefault();break;case h.DOWN:b.menuItem().removeClass("active"),d?d.next(b.menuItem.selector+":not(.hidden)").addClass("active"):b.menuItem(":not(.hidden):first").addClass("active"),b.hidden||c.preventDefault();
break;case h.ESCAPE:b.hide();break;case h.ENTER:if(!b.hidden&&d){var e=d.data("item");b.use(e),c.preventDefault()}}var d=b.menuItem(".active:not(.hidden)");b.hidden||b.viewport().scrollIntoView(d)},"{menuItem} mouseup":function(a){b.hide();var c=a.data("item");b.use(c),setTimeout(function(){b.mentions.textarea().focus()},150)},use:function(a){var c=b.activeQuery;if(c){var d=c.marker,e=a.title;d.text.nodeValue=e,delete a.menuHtml;var f=a;c.use&&(f=c.use(a)),d.finalize(f),b.mentions.textareaInsert(e,d.start,d.end),b.mentions.textarea().caret(d.start+e.length),b.mentions.normalize(),b.hidden=!0,b.hide()
}},"{menuItem} mouseover":function(a){b.menuItem().removeClass("active"),a.addClass("active")},"{menuItem} mouseout":function(){b.menuItem().removeClass("active")},"{closeButton} click":function(){b.hide()},"{mentions} destroyed":function(){b.element.remove()}}}),a.template("mentions/inspector",'<div class="mentions-inspector" data-mentions-inspector><fieldset><b>Selection</b><hr/><label>Start</label><input type="text" data-mentions-selection-start/><hr/><label>End</label><input type="text" data-mentions-selection-end/><hr/><label>Length</label><input type="text" data-mentions-selection-length/><hr/></fieldset><fieldset><b>Trigger</b><hr/><label>Key</label><input type="text" data-mentions-trigger-key/><hr/><label>Type</label><input type="text" data-mentions-trigger-type/><hr/><label>Buffer</label><input type="text" data-mentions-trigger-buffer/><hr/></fieldset><hr/> <fieldset><b>Marker</b><hr/><label>Index</label><input type="text" data-mentions-marker-index/><hr/><label>Start</label><input type="text" data-mentions-marker-start/><hr/><label>End</label><input type="text" data-mentions-marker-end/><hr/><label>Length</label><input type="text" data-mentions-marker-length/><hr/><label>Text</label><input type="text" data-mentions-marker-text/><hr/></fieldset><fieldset><b>Block</b><hr/><label>Html</label><input type="text" data-mentions-block-html/><hr/><label>Text</label><input type="text" data-mentions-block-text/><hr/><label>Type</label><input type="text" data-mentions-block-type/><hr/><label>Value</label><input type="text" data-mentions-block-value/><hr/></fieldset></div>'),a.Controller("Mentions.Inspector",{defaultOptions:{view:{item:"mentions/item",inspector:"mentions/inspector"},"{inspector}":"[data-mentions-inspector]","{selectionStart}":"[data-mentions-selection-start]","{selectionEnd}":"[data-mentions-selection-end]","{selectionLength}":"[data-mentions-selection-length]","{markerIndex}":"[data-mentions-marker-index]","{markerStart}":"[data-mentions-marker-start]","{markerEnd}":"[data-mentions-marker-end]","{markerLength}":"[data-mentions-marker-length]","{markerText}":"[data-mentions-marker-text]","{blockText}":"[data-mentions-block-text]","{blockHtml}":"[data-mentions-block-html]","{blockType}":"[data-mentions-block-type]","{blockValue}":"[data-mentions-block-value]","{triggerKey}":"[data-mentions-trigger-key]","{triggerType}":"[data-mentions-trigger-type]","{triggerBuffer}":"[data-mentions-trigger-buffer]"}},function(b){return{init:function(){},showInspector:function(){b.inspector().length<1&&b.view.inspector().appendTo(b.element),b.inspector().show(),b.mentions.overlay().css("color","green")
},hideInspector:function(){b.inspector().hide(),b.mentions.overlay().css("color","transparent")},"{mentions.textarea} keyup":function(){b.inspect()},"{inspector} dblclick":function(){b.textarea().toggle()},inspect:a.debounce(function(){var c=b.mentions.textarea().caret();b.selectionStart().val(c.start),b.selectionEnd().val(c.end),b.selectionLength().val(c.end-c.start);var d=b.triggered;if(d){var e=b.getTrigger(d);b.triggerKey().val(d),b.triggerType().val(e.type),b.triggerBuffer().val(b.buffer)}else b.triggerKey().val(""),b.triggerType().val(""),b.triggerBuffer().val("");
var f=b.mentions.getMarkerAt(c.start);f?(b.markerIndex().val(f.index).data("marker",f),b.markerStart().val(f.start),b.markerEnd().val(f.end),b.markerLength().val(f.length),b.markerText().val(f.text.nodeValue)):(b.markerIndex().val("").data("marker",null),b.markerStart().val(""),b.markerEnd().val(""),b.markerLength().val(""),b.markerText().val(""));var g=(f||{}).block;g?(b.blockText().val(f.text.nodeValue),b.blockHtml().val(a(g).clone().toHTML())):(b.blockText().val(""),b.blockHtml().val(""))},25),"{markerIndex} click":function(a){console.dir(a.data("marker"))
}}})};c(),b.resolveWith(c)};FD40.module("mentions",a)}(),function(){var moduleFactory=function($){var module=this;$.require().script("ui/position","easing").done(function(){var exports=function(){$.template("dialog/default",'<div class="foundryDialog global"><div class="dialog-wrap"><div class="in"><div class="dialog-loader"><div class="loader-img"></div></div><div class="dialog-head"><span class="dialog-title"></span><a class="dialog-closeButton">Close</a></div><div class="dialog-body dialog-content"></div><div class="dialog-footer"><div class="dialog-loading"></div><div class="dialog-buttons"></div></div></div></div></div>'),$.Controller("Dialog",{pluginName:"dialog",defaultOptions:{title:"",content:void 0,buttons:{},customClass:"",width:"auto",height:"auto",css:{position:"absolute",width:"auto",height:"auto",zIndex:10001},position:{my:"center center",at:"center center",of:window},offset:100,showOverlay:!0,overlay:{css:{background:"#000",opacity:"0.4",position:"fixed",top:0,left:0,zIndex:1e4,width:"100%",height:"100%",display:"none"}},body:{css:{minWidth:0,minHeight:0,overflow:"auto"}},loader:{width:300,height:100},loading:"",iframe:{css:{width:"100%",height:"100%",border:"none"}},transition:{show:"zoom",hide:"zoom"},escapeKey:!0,beforeShow:function(){},afterShow:function(){},beforeHide:function(){},afterHide:function(){},dialogHead:".dialog-head",dialogBody:".dialog-body",dialogFooter:".dialog-footer",dialogTitle:".dialog-title",dialogContent:".dialog-content",dialogButtons:".dialog-buttons",dialogLoader:".dialog-loader",dialogLoading:".dialog-loading","{closeButton}":".dialog-closeButton"}},function(self){return{ready:!1,contentReady:!1,init:function(){self.setInitOptions(self.options),self.initElement=self.element.clone(),self.element.finalizeContent=function(){return self.finalizeContent.apply(self,arguments)
},$.each(["dialogHead","dialogBody","dialogFooter","dialogTitle","dialogContent","dialogButtons","dialogLoader","dialogLoading"],function(a,b){self[b]=self.find(self.options[b])}),void 0!==self.options.content&&self.display()},"{self} destroyed":function(){$(document).off("keydown.foundry.dialog")},setInitOptions:function(a){self.initOptions=$.extend(!0,{},a),$.each(["beforeShow","afterShow","beforeHide","afterHide"],function(a,b){self.initOptions[b]=function(){}}),$.each(["title","content","buttons","loading","selectors","bindings"],function(a,b){self.initOptions[b]=null
})},update:function(a){if(a){if(a.hasOwnProperty("{binder}"))return;var a=$.extend(!0,{},self.initOptions,a);self.setInitOptions(a),self.display(a)}return self},determineContentType:function(a){return/<dialog>(.*?)/.test(a)?"dialog":$.isUrl(a)?"iframe":$.isDeferred(a)?"deferred":"html"},displayQueue:[],display:function(options){if(self.resizing)return self.displayQueue.push(options);$.isPlainObject(options)&&(self.options=$.extend(!0,{},self.Class.defaults,options)),self.ready||self.options.showOverlay&&self.createOverlay();
var options=self.options,content=options.content;self.contentReady=null===content,self.contentType=self.determineContentType(content);var transition=options.transition;switch($.isString(transition)&&(options.transition={show:transition,hide:transition}),self.contentType){case"html":self.hideLoader(),self.show();break;case"iframe":var iframe=$(document.createElement("iframe")),iframeUrl=content,iframeCss=options.iframe.css,iframeButtons=options.buttons,dialogContent=self.dialogContent,iframeOptions=$.extend(!0,{},options,{content:iframe,buttons:iframeButtons});
self.showLoader(function(){onIframeLoaded=function(){return function(){try{iframe[0].contentWindow.parentDialog=self}catch(b){}self.update(iframeOptions)}}(),self.dialogBody.addClass("type-iframe"),iframe.appendTo(dialogContent).css(iframeCss).css({position:"absolute",visibility:"hidden"}).one("load",onIframeLoaded).attr("src",iframeUrl)});break;case"deferred":var ajax=content;self.showLoader(function(){ajax.done(function(a){if(a){var b=$.isString(a)?{content:a}:a;b.content&&self.update($.extend(!0,{},options,b))
}}).fail(function(a,b){var c=$.isString(b)?$.String.capitalize(b):"Error",d=$.isString(a)?a:"There was an error loading content.";self.update({title:c,content:d})})});break;case"dialog":var xmlOptions=$.buildHTML(content),newOptions={};$.each(xmlOptions.children(),function(i,node){var node=$(node),key=$.String.camelize(this.nodeName.toLowerCase()),val=node.html(),type=node.attr("type");switch(type){case"json":try{val=$.parseJSON(val)}catch(e){}break;case"javascript":try{val=eval("(function($){ return "+$.trim(val)+" })("+$.globalNamespace+")")
}catch(e){}break;case"text":val=node.text()}$.isNumeric(val)&&(val=parseFloat(val)),newOptions[key]=val}),self.update($.extend(!0,{},options,newOptions))}},loading:function(a){var b=self.element;return void 0===a?b.hasClass("loading"):a===!1?(b.removeClass("loading"),void 0):(a===!0&&(a=self.options.loading||""),$.isString(a)&&(b.addClass("loading"),self.dialogLoading.html(a)),void 0)},showLoader:function(a){var b=self.options.width,c=self.options.height,d=function(){return self.dialogLoader.show().css({width:self.dialogBody.outerWidth(!0),height:self.dialogBody.outerHeight(!0)}).position({my:"top left",at:"top left",of:self.options.dialogContent}),self.options.width=b,self.options.height=c,a&&a()
};return self.ready?d():self.update($.extend({title:self.options.title,content:"",width:self.initOptions.body.css.minWidth,height:self.initOptions.body.css.minHeight,afterShow:d},self.options.loader))},hideLoader:function(){self.element.removeClass("loading"),self.dialogLoader.hide()},autoSize:function(){return"auto"==self.initOptions.css.width||"auto"==self.initOptions.css.height},finalizeContent:function(a){var b=self.options,c=b.content;if(self.element.css(b.css),self.dialogContent.css(b.body.css),!self.refreshing){if(null!==b.title&&self.dialogTitle.html(b.title),null!==c){var d=!$.isString(c)&&$(c).is("iframe");
if(self.dialogBody.toggleClass("type-iframe",d),d){for(var e=c.parent()[0],f=0;e.childNodes.length>1;){var g=e.childNodes[f];g!==c[0]&&e.removeChild(g),f++}c.css({position:"relative",visibility:"visible"})}else{var h;a?(h=c,b.content=self.stripScript(h)):h=self.stripScript(c),self.dialogContent.html(h)}}return self.contentReady||self.finalizeButtons(),self.element}},stripScript:function(a){if(!$.isString(a))return a;var b=$($.parseHTML(a));return b.find("script").remove(),b},finalizeSize:function(a){var b=self.refElement,c=self.options,d=c.body,e=c.content,f=c.css,g=d.css;
if(void 0===b?b=self.refElement=self.initElement.clone().removeClass("global").insertAfter(self.element):b.insertAfter(self.element),!a){refTitle=b.find(c.dialogTitle),refBody=b.find(c.dialogBody),refFooter=b.find(c.dialogFooter),refButtons=b.find(c.dialogButtons),b.css(self.initOptions.css).css({display:"block"}),refTitle.html(c.title),$.isEmptyObject(c.buttons)?refFooter.hide():(refFooter.show(),refButtons.append("<button>test</button>"));var h=!$.isString(e)&&$(e).is("iframe"),i=h?document.createElement("div"):self.stripScript(e);
g.width=h&&"auto"==c.width?e.contents().width():c.width,g.height=h&&"auto"==c.height?e.contents().height():c.height,refBody.css(g).toggleClass("type-iframe",h).html(i);var j=refBody.width(),k=refBody.height();"border-box"!==refBody.css("boxSizing")&&(g.width=j,g.height=k),g.width<g.minWidth&&(g.width=g.minWidth),g.height<g.minHeight&&(g.height=g.minHeight);var l=c.offset,m=b.width(),n=b.height(),o=$(window).width()-l,p=$(window).height()-l,q=m>o,r=n>p;f.width=q?o:m,f.height=r?p:n,"auto"!==g.width&&(g.width-=m-f.width),g.width<=0&&(g.width="auto"),"auto"!==g.height&&(g.height-=n-f.height),g.height<=0&&(g.height="auto"),g.minWidth=g.minHeight="auto",refBody.css(g),g.overflowX=!q||h||refBody[0].scrollWidth<=g.width?"auto":"scroll",g.overflowY=!r||h||refBody[0].scrollHeight<=g.height?"auto":"scroll",refBody.html("")
}b.css(f).css("visibility","hidden").position(c.position),f.top=b.css("top"),f.left=b.css("left")},finalizeButtons:function(){var a=self.dialogFooter,b=self.dialogButtons;b.empty();var c=self.options.buttons;return $.isEmptyObject(c)?(a.hide(),void 0):($.isString(c)&&b.html(c),$.isArray(c)&&$.each(c,function(a,c){var d=$.extend({},c),e=c.classNames?c.classNames:"";delete d.name,delete d.classNames,$(document.createElement("button")).attr("type","button").addClass(e).html(c.name).bind(d).appendTo(b)}),a.show(),void 0)
},show:function(a){if(!self.ready||!self.resizing){var b=self.options;self.refElement&&self.refElement.remove(),self.contentReady||b.beforeShow.apply(self),$(document).off("keydown.foundry.dialog"),b.escapeKey&&$(document).on("keydown.foundry.dialog",function(a){27==a.keyCode&&self.close()}),self.resizing=!0,self.finalizeSize(),self.element.addClass("resizing"),$(window).trigger("dialogTransitionStart"),self.transition[b.transition.show].show.apply(self,[function(){self.ready||(self.on("resize.dialog scroll.dialog",window,$._.debounce(function(){self.refresh()
},150)),self.ready=!0),self.contentReady||(a&&a.apply(self),b.afterShow.apply(self)),self.refElement.detach(),self.element.removeClass("resizing"),self.contentReady=!0,self.element.css({width:"auto",height:"auto"}),self.removePlugin("binder");var c=b.selectors,d=b.bindings;if(c&&d){var e=$.Controller($.uid("dialogBinder"),{defaultOptions:c},function(){return d});self.addPlugin("binder",e)}self.displayQueue.length>0?setTimeout(function(){self.resizing=!1,self.display(self.displayQueue.shift())},500):(self.resizing=!1,$(window).trigger("dialogTransitionEnd"))
}])}},"{self} removePlugin":function(a,b,c,d){void 0!==d&&delete $.Controller[d.Class.fullName]},hide:function(a){self.contentReady||self.options.beforeHide.apply(self),$(window).trigger("dialogTransitionStart"),self.transition[self.options.transition.hide].hide.apply(self,[function(){a&&a.apply(self),self.options.afterHide.apply(self),$(window).trigger("dialogTransitionEnd")}])},refresh:function(){self.closing||self.resizing||(self.finalizeSize(!0),self.resizing=!0,self.refreshing=!0,$(window).trigger("dialogTransitionStart"),self.transition[self.options.transition.show].show.apply(self,[function(){$(window).trigger("dialogTransitionEnd"),self.resizing=!1,self.refreshing=!1,self.element.css({width:"auto",height:"auto"})
}]))},transition:{none:{show:function(a){self.ready||self.overlay.show(),self.element.finalizeContent().show(0,a)},hide:function(a){self.overlay.hide(),self.element.hide(0,a)}},fade:{show:function(a){return self.ready||self.overlay.fadeOut(0).fadeIn("normal"),self.contentReady?(self.element.finalizeContent(),a&&a()):(self.element.fadeOut(self.contentReady?"fast":0,function(){self.element.finalizeContent().fadeIn("normal","easeInCubic",a)}),void 0)},hide:function(a){self.overlay.fadeOut("normal","easeOutCubic"),self.element.fadeOut("normal","easeOutCubic",a)
}},zoom:{show:function(a){var b=self.dialogBody,c=self.dialogFooter,d=self.options.css;self.ready||(self.overlay.fadeIn("fast"),self.element.finalizeContent().css({top:parseInt(d.top)+parseInt(d.height)/2,left:parseInt(d.left)+parseInt(d.width)/2,width:0,height:0})),self.contentReady||(b.css({opacity:0}),c.css({opacity:0})),self.element.animate({top:d.top,left:d.left,width:d.width,height:d.height},"normal","easeInCubic",function(){return self.element.finalizeContent(!0),b.css({opacity:1}),c.css({opacity:1}),a&&a()
})},hide:function(a){var b=self.options.css;self.element.animate({top:parseInt(b.top)+parseInt(b.height)/2,left:parseInt(b.left)+parseInt(b.width)/2,width:0,height:0},"normal","easeOutCubic",function(){return self.overlay.fadeOut("fast"),a&&a()})}}},overlay:$("<div></div>"),createOverlay:function(){self.overlay.css(self.options.overlay.css).click(function(){self.close()}).appendTo("body")},closing:!1,close:function(){return self.closing?void 0:(self.closing=!0,$(document).off("keydown.foundry.dialog"),self.hide(function(){self.removePlugin("binder"),self.element.remove(),self.refElement&&self.refElement.remove()
}),self)},"{closeButton} click":function(){self.close()},content:function(){var a=self.dialogContent,b=a.find("> iframe");return b.length>0?b.contents():a},messageGroup:function(){var a=self.dialogBody,b=a.find("> [data-message-group]");return b.length<1&&(b=$("<div data-message-group></div>").prependTo(a)),b}}}),$.dialog=function(a){if(window.parentDialog)return window.parentDialog.update(a);var b=$(".foundryDialog.global"),c=b.controllers("dialog")[0];if(arguments.length<1&&c)return c;if(b.length<1&&(b=$($.View("dialog/default")).addClass("global").addClass(a.customClass).appendTo("body")),"string"==typeof a||$.isDeferred(a)){var d=arguments[1];
a={content:a,afterShow:$.isFunction(d)?d:$.noop}}return c?c.update(a):c=b.addController("Dialog",a),c}};exports(),module.resolveWith(exports)})};FD40.module("dialog",moduleFactory)}(),function(){var a=function(a){var b=this,c=a,d=function(){c.easing.jswing=c.easing.swing,c.extend(c.easing,{def:"easeOutQuad",swing:function(a,b,d,e,f){return c.easing[c.easing.def](a,b,d,e,f)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c
},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b+c:-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c
},easeInOutQuint:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return 0==b?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){return 0==b?c:b==e?c+d:(b/=e/2)<1?d/2*Math.pow(2,10*(b-1))+c:d/2*(-Math.pow(2,-10*--b)+2)+c
},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){return(b/=e/2)<1?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(1==(b/=e))return c+d;if(g||(g=.3*e),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return-(h*Math.pow(2,10*(b-=1))*Math.sin(2*(b*e-f)*Math.PI/g))+c},easeOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;
if(0==b)return c;if(1==(b/=e))return c+d;if(g||(g=.3*e),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return h*Math.pow(2,-10*b)*Math.sin(2*(b*e-f)*Math.PI/g)+d+c},easeInOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(2==(b/=e/2))return c+d;if(g||(g=.3*e*1.5),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return 1>b?-.5*h*Math.pow(2,10*(b-=1))*Math.sin(2*(b*e-f)*Math.PI/g)+c:h*Math.pow(2,-10*(b-=1))*Math.sin(2*(b*e-f)*Math.PI/g)*.5+d+c},easeInBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),d*(b/=e)*b*((f+1)*b-f)+c
},easeOutBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),d*((b=b/e-1)*b*((f+1)*b+f)+1)+c},easeInOutBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),(b/=e/2)<1?d/2*b*b*(((f*=1.525)+1)*b-f)+c:d/2*((b-=2)*b*(((f*=1.525)+1)*b+f)+2)+c},easeInBounce:function(a,b,d,e,f){return e-c.easing.easeOutBounce(a,f-b,0,e,f)+d},easeOutBounce:function(a,b,c,d,e){return(b/=e)<1/2.75?7.5625*d*b*b+c:2/2.75>b?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:2.5/2.75>b?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c
},easeInOutBounce:function(a,b,d,e,f){return f/2>b?.5*c.easing.easeInBounce(a,2*b,0,e,f)+d:.5*c.easing.easeOutBounce(a,2*b-f,0,e,f)+.5*e+d}})};d(),b.resolveWith(d)};FD40.module("easing",a)}(),function(){var a=function(a){var b=this,c=a,d=function(){!function(a){a.gritter={},a.gritter.options={position:"",class_name:"",fade_in_speed:"medium",fade_out_speed:1e3,time:6e3},a.gritter.add=function(a){try{return b.add(a||{})}catch(c){var d="Gritter Error: "+c;"undefined"!=typeof console&&console.error?console.error(d,a):alert(d)
}},a.gritter.remove=function(a,c){b.removeSpecific(a,c||{})},a.gritter.removeAll=function(a){b.stop(a||{})};var b={position:"",fade_in_speed:"",fade_out_speed:"",time:"",_custom_timer:0,_item_count:0,_is_setup:0,_tpl_close:'<a class="gritter-close" href="#" tabindex="1">Close Notification</a>',_tpl_title:'<span class="gritter-title">[[title]]</span>',_tpl_item:'<div id="gritter-item-[[number]]" class="gritter-item-wrapper [[item_class]]" style="display:none" role="alert"><div class="gritter-top"></div><div class="gritter-item">[[close]][[image]]<div class="[[class_name]]">[[title]]<p>[[text]]</p></div><div style="clear:both"></div></div><div class="gritter-bottom"></div></div>',_tpl_wrap:'<div id="gritter-notice-wrapper"></div>',add:function(c){if("string"==typeof c&&(c={text:c}),null===c.text)throw'You must supply "text" parameter.';
this._is_setup||this._runSetup();var d=c.title,e=c.text,f=c.image||"",g=c.sticky||!1,h=c.class_name||a.gritter.options.class_name,i=a.gritter.options.position,j=c.time||"";this._verifyWrapper(),this._item_count++;var k=this._item_count,l=this._tpl_item;a(["before_open","after_open","before_close","after_close"]).each(function(d,e){b["_"+e+"_"+k]=a.isFunction(c[e])?c[e]:function(){}}),this._custom_timer=0,j&&(this._custom_timer=j);var m=""!=f?'<img src="'+f+'" class="gritter-image" />':"",n=""!=f?"gritter-with-image":"gritter-without-image";
if(d=d?this._str_replace("[[title]]",d,this._tpl_title):"",l=this._str_replace(["[[title]]","[[text]]","[[close]]","[[image]]","[[number]]","[[class_name]]","[[item_class]]"],[d,e,this._tpl_close,m,this._item_count,n,h],l),this["_before_open_"+k]()===!1)return!1;a("#gritter-notice-wrapper").addClass(i).append(l);var o=a("#gritter-item-"+this._item_count);return o.fadeIn(this.fade_in_speed,function(){b["_after_open_"+k](a(this))}),g||this._setFadeTimer(o,k),a(o).bind("mouseenter mouseleave",function(c){"mouseenter"==c.type?g||b._restoreItemIfFading(a(this),k):g||b._setFadeTimer(a(this),k),b._hoverState(a(this),c.type)
}),a(o).find(".gritter-close").click(function(){return b.removeSpecific(k,{},null,!0),!1}),k},_countRemoveWrapper:function(b,c,d){c.remove(),this["_after_close_"+b](c,d),0==a(".gritter-item-wrapper").length&&a("#gritter-notice-wrapper").remove()},_fade:function(a,c,d,e){var d=d||{},f="undefined"!=typeof d.fade?d.fade:!0,g=d.speed||this.fade_out_speed,h=e;this["_before_close_"+c](a,h),e&&a.unbind("mouseenter mouseleave"),f?a.animate({opacity:0},g,function(){a.animate({height:0},300,function(){b._countRemoveWrapper(c,a,h)
})}):this._countRemoveWrapper(c,a)},_hoverState:function(a,b){"mouseenter"==b?(a.addClass("hover"),a.find(".gritter-close").show()):(a.removeClass("hover"),a.find(".gritter-close").hide())},removeSpecific:function(b,c,d,e){if(!d)var d=a("#gritter-item-"+b);this._fade(d,b,c||{},e)},_restoreItemIfFading:function(a,b){clearTimeout(this["_int_id_"+b]),a.stop().css({opacity:"",height:""})},_runSetup:function(){for(opt in a.gritter.options)this[opt]=a.gritter.options[opt];this._is_setup=1},_setFadeTimer:function(a,c){var d=this._custom_timer?this._custom_timer:this.time;
this["_int_id_"+c]=setTimeout(function(){b._fade(a,c)},d)},stop:function(b){var c=a.isFunction(b.before_close)?b.before_close:function(){},d=a.isFunction(b.after_close)?b.after_close:function(){},e=a("#gritter-notice-wrapper");c(e),e.fadeOut(function(){a(this).remove(),d()})},_str_replace:function(a,b,c,d){var e=0,f=0,g="",h="",i=0,j=0,k=[].concat(a),l=[].concat(b),m=c,n=l instanceof Array,o=m instanceof Array;for(m=[].concat(m),d&&(this.window[d]=0),e=0,i=m.length;i>e;e++)if(""!==m[e])for(f=0,j=k.length;j>f;f++)g=m[e]+"",h=n?void 0!==l[f]?l[f]:"":l[0],m[e]=g.split(k[f]).join(h),d&&m[e]!==g&&(this.window[d]+=(g.length-m[e].length)/k[f].length);
return o?m:m[0]},_verifyWrapper:function(){a("body > [id=fd].gritter").length<1&&a(document.createElement("div")).attr("id","fd").addClass("gritter").css({position:"absolute",top:0,left:0,overflow:"visible",width:0,height:0,zIndex:10003}).appendTo("body"),0==a("#gritter-notice-wrapper").length&&a("[id=fd].gritter").append(this._tpl_wrap)}}}(c)};d(),b.resolveWith(d)};FD40.module("gritter",a)}()}),FD40.installer("EasySocial","definitions",function(a){a.module(["easysocial/admin","easysocial/admin/access/discover","easysocial/progress/progress","easysocial/admin/alerts/discover","easysocial/admin/badges/discover","easysocial/admin/events/approveRecurring","easysocial/admin/events/store","easysocial/admin/events/users","easysocial/admin/grid/grid","easysocial/admin/grid/sort","easysocial/admin/grid/publishing","easysocial/admin/grid/ordering","easysocial/admin/groups/groups","easysocial/admin/groups/users","easysocial/admin/indexer/indexer","easysocial/admin/mailer/mailer","easysocial/admin/maintenance/database","easysocial/admin/maintenance/maintenance","easysocial/admin/migrators/migrator","easysocial/admin/points/discover","easysocial/admin/polls/polls","easysocial/admin/privacy/discover","easysocial/admin/profiles/avatar","easysocial/uploader/uploader","easysocial/uploader/queue","easysocial/admin/profiles/fields","easysocial/field","easysocial/admin/profiles/form","easysocial/utilities/alias","easysocial/admin/profiles/members","easysocial/admin/profiles/profile","easysocial/admin/profiles/profiles","easysocial/admin/regions/form","easysocial/admin/regions/init","easysocial/admin/reports/reporters","easysocial/admin/reports/reports","easysocial/admin/sidebar/sidebar","easysocial/admin/themes/compiler","easysocial/admin/users/form","easysocial/admin/users/privacy","easysocial/admin/users/users","easysocial/albums/album","easysocial/albums/browser","easysocial/albums/editor","easysocial/albums/editor/sortable","easysocial/albums/editor/uploader","easysocial/albums/uploader","easysocial/albums/uploader.item","easysocial/albums/item","easysocial/apps/event/discussions","easysocial/apps/event/guests","easysocial/apps/event/tasks","easysocial/apps/fields/event/description/content","easysocial/apps/fields/event/permalink/content","easysocial/apps/fields/event/permalink/sample_content","easysocial/apps/fields/event/recurring/content","easysocial/apps/fields/event/startend/content","easysocial/apps/fields/event/startend/display","easysocial/apps/fields/group/permalink/content","easysocial/apps/fields/group/permalink/sample_content","easysocial/apps/fields/user/address/content","easysocial/apps/fields/user/address/display_content","easysocial/apps/fields/user/address/maps","easysocial/apps/fields/user/autocomplete/content","easysocial/apps/fields/user/avatar/content","easysocial/apps/fields/user/avatar/sample_content","easysocial/apps/fields/user/checkbox/content","easysocial/apps/fields/user/checkbox/sample_content","easysocial/apps/fields/user/country/content","easysocial/apps/fields/user/country/sample_content","easysocial/apps/fields/user/cover/content","easysocial/apps/fields/user/currency/sample_content","easysocial/apps/fields/user/datetime/content","easysocial/apps/fields/user/datetime/display_content","easysocial/apps/fields/user/datetime/dropdown","easysocial/apps/fields/user/datetime/sample_content","easysocial/apps/fields/user/dropdown/content","easysocial/apps/fields/user/email/content","easysocial/apps/fields/user/file/content","easysocial/apps/fields/user/file/sample_content","easysocial/apps/fields/user/gender/content","easysocial/apps/fields/user/joomla_email/content","easysocial/apps/fields/user/joomla_email/registermini_content","easysocial/apps/fields/user/joomla_email/sample_content","easysocial/apps/fields/user/joomla_fullname/content","easysocial/apps/fields/user/joomla_fullname/sample_content","easysocial/apps/fields/user/joomla_password/content","easysocial/apps/fields/user/joomla_password/registermini_content","easysocial/apps/fields/user/joomla_password/sample_content","easysocial/apps/fields/user/joomla_timezone/content","easysocial/apps/fields/user/joomla_username/content","easysocial/apps/fields/user/joomla_username/registermini_content","easysocial/apps/fields/user/joomla_username/sample_content","easysocial/apps/fields/user/multidropdown/content","easysocial/apps/fields/user/multilist/content","easysocial/apps/fields/user/multitextbox/content","easysocial/apps/fields/user/permalink/content","easysocial/apps/fields/user/permalink/sample_content","easysocial/apps/fields/user/relationship/content","easysocial/site/friends/suggest","easysocial/apps/fields/user/separator/sample","easysocial/apps/fields/user/terms/content","easysocial/apps/fields/user/textarea/content","easysocial/apps/fields/user/textbox/content","easysocial/apps/fields/user/textbox/sample_content","easysocial/apps/fields/user/url/content","easysocial/apps/fields/user/url/sample_content","easysocial/apps/group/feeds","easysocial/apps/group/tasks","easysocial/avatar","easysocial/utilities/webcam","easysocial/cover","easysocial/easysocial","easysocial/site/likes/likes","easysocial/site/reports/reports","easysocial/site/blocks/blocks","easysocial/site/repost/repost","easysocial/site/share/share","easysocial/site/layout/dialog","easysocial/site/layout/responsive","easysocial/site/layout/elements","easysocial/site/photos/photos","easysocial/site/photos/popup","easysocial/site/photos/dialog","easysocial/site/photos/avatar","easysocial/site/users/login","easysocial/site/dashboard/dashboard.guest.login","easysocial/validate","easysocial/site/profile/popbox","easysocial/site/conversations/composer","easysocial/site/privacy/privacy","easysocial/site/locations/popbox","easysocial/site/sidebar/sidebar","easysocial/site/friends/api","easysocial/site/popbox/popbox","easysocial/site/conversations/api","easysocial/site/groups/api","easysocial/site/followers/api","easysocial/site/stream/video","easysocial/oauth/facebook","easysocial/groups/suggest","easysocial/libraries/lightbox","easysocial/locations","easysocial/pagination","easysocial/photos/avatar","easysocial/photos/browser","easysocial/photos/editor","easysocial/photos/item","easysocial/photos/tags","easysocial/photos/tagger","easysocial/photos/navigation","easysocial/prism","easysocial/privacy","easysocial/sharing","easysocial/site/activities/activities","easysocial/site/activities/sidebar","easysocial/site/activities/sidebar.item","easysocial/site/activities/apps","easysocial/site/activities/item","easysocial/site/activities/list","easysocial/site/albums/all","easysocial/site/apps/apps","easysocial/site/badges/badge","easysocial/site/comments/control","easysocial/site/comments/frame","easysocial/site/comments/item","easysocial/site/conversations/conversations","easysocial/site/conversations/mailbox","easysocial/site/conversations/item","easysocial/site/conversations/filter","easysocial/site/conversations/read","easysocial/site/dashboard/apps","easysocial/site/dashboard/dashboard","easysocial/site/dashboard/feeds","easysocial/site/dashboard/sidebar","easysocial/site/stream/filter","easysocial/site/stream/sidebar","easysocial/site/dashboard/groups","easysocial/site/dashboard/events","easysocial/site/events/browser","easysocial/site/events/guestState","easysocial/site/events/buttonState","easysocial/site/events/create","easysocial/site/events/createRecurring","easysocial/site/events/edit","easysocial/site/events/item","easysocial/site/events/update","easysocial/site/explorer","easysocial/site/explorer/uploader","easysocial/site/explorer/popup","easysocial/site/followers/followers","easysocial/site/friends/friends","easysocial/site/friends/list","easysocial/site/friends/item","easysocial/site/groups/groups","easysocial/site/groups/item","easysocial/site/notifications/list","easysocial/site/points/history","easysocial/site/polls/polls","easysocial/site/profile/about","easysocial/site/profile/admintool","easysocial/site/profile/edit","easysocial/site/profile/feeds","easysocial/site/profile/friends","easysocial/site/profile/header","easysocial/site/profile/subscriptions","easysocial/site/profile/miniheader","easysocial/site/profile/notifications","easysocial/site/profile/privacy","easysocial/site/profile/profile","easysocial/site/registrations/registrations","easysocial/site/search/advanced.criteria","easysocial/site/search/map","easysocial/site/search/advanced","easysocial/site/search/advanced.list.group","easysocial/site/search/advanced.list","easysocial/site/search/item","easysocial/site/search/dating","easysocial/site/search/list","easysocial/site/search/search","easysocial/site/search/sidebar","easysocial/site/search/toolbar","easysocial/site/stream/item","easysocial/site/stream/stream","easysocial/site/subscriptions/follow","easysocial/site/system/broadcast","easysocial/site/toolbar/conversations","easysocial/site/toolbar/friends","easysocial/site/toolbar/login","easysocial/site/toolbar/notifications","easysocial/site/toolbar/story","easysocial/site/toolbar/system","easysocial/site/toolbar/profile","easysocial/site/users/popbox","easysocial/site/users/users","easysocial/story","easysocial/story/blog","easysocial/story/broadcast","easysocial/story/event","easysocial/story/files","easysocial/story/friends","easysocial/story/links","easysocial/story/locations","easysocial/story/mood","easysocial/story/photos","easysocial/story/polls","easysocial/story/quickpost","easysocial/story/tasks","easysocial/story/videos","easysocial/stream","easysocial/comment","easysocial/tab","easysocial/toggle","easysocial/uploader/item","easysocial/videos/form","easysocial/videos/item","easysocial/videos/list","easysocial/videos/process"]),a.require.template.loader(["easysocial/site/loading/small","easysocial/site/uploader/queue.item","easysocial/admin/profiles/fields/editor.item","easysocial/admin/profiles/fields/step.item","easysocial/admin/profiles/fields/editor.page","easysocial/admin/profiles/fields/config","easysocial/admin/profiles/fields/dialog.move","easysocial/admin/profiles/dialog.delete.profileavatar","easysocial/site/albums/browser.list.item","easysocial/site/albums/upload.item","easysocial/fields/user/checkbox/item","easysocial/site/friends/suggest.item","easysocial/site/friends/suggest.hint.search","easysocial/site/friends/suggest.hint.empty","easysocial/site/hashtags/suggest.item","easysocial/site/hashtags/suggest.hint.search","easysocial/site/hashtags/suggest.hint.empty","easysocial/site/dialog/default","easysocial/site/photos/popup","easysocial/site/groups/suggest.item","easysocial/site/location/story.suggestion","easysocial/site/photos/tags.item","easysocial/site/photos/tags.menu.item","easysocial/admin/profiles/form.privacy.custom.item","easysocial/site/activities/loadbutton","easysocial/site/explorer/popup","easysocial/site/friends/default.empty","easysocial/site/friends/list.assign","easysocial/site/registration/dialog.error","easysocial/site/search/loadbutton","easysocial/site/stream/loadbutton","easysocial/site/notifications/system.empty","easysocial/site/users/button.following","easysocial/apps/user/links/story/attachment.item","easysocial/apps/user/files/story/attachment.item","easysocial/apps/user/files/story/progress","easysocial/site/links/story/attachment.item","easysocial/apps/group/tasks/story/attachment.item","easysocial/site/likes/item","easysocial/site/uploader/preview"]),a.require.language.loader(["COM_EASYSOCIAL_SCAN_COMPLETED","JLIB_HTML_PLEASE_MAKE_A_SELECTION_FROM_THE_LIST","COM_EASYSOCIAL_INDEXER_REINDEX_PROCESSING","COM_EASYSOCIAL_INDEXER_REINDEX_FINISHED","COM_EASYSOCIAL_INDEXER_REINDEX_RESTART","COM_EASYSOCIAL_CANCEL_BUTTON","COM_EASYSOCIAL_CLOSE_BUTTON","COM_EASYSOCIAL_POLLS_VIEW_POLLS_DIALOG_TITLE","COM_EASYSOCIAL_POLLS_ACTIONS_DIALOG_TITLE","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_ITEM_CONFIG_LOADING","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_TITLE","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_CONFIRMATION","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_CONFIRM","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_CANCEL","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_DELETING","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_TITLE","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_CONFIRMATION","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_CONFIRM","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_CANCEL","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_DELETING","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_PARAMS_CORE_UNIQUE_KEY_SAVE_FIRST","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_CONFIGURE_PAGE","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_CONFIGURE_FIELD","COM_EASYSOCIAL_FIELDS_REQUIRE_MANDATORY_FIELDS","COM_EASYSOCIAL_FIELDS_UNSAVED_CHANGES","COM_EASYSOCIAL_FIELDS_INVALID_VALUES","COM_EASYSOCIAL_ASSIGN_BUTTON","COM_EASYSOCIAL_PROFILES_ASSIGN_USER_DIALOG_TITLE","COM_EASYSOCIAL_PROFILES_FORM_CLEAR_AVATAR","COM_EASYSOCIAL_REGIONS_FORM_INCOMPLETE","COM_EASYSOCIAL_REPORTS_VIEW_REPORTS_DIALOG_TITLE","COM_EASYSOCIAL_REPORTS_ACTIONS_DIALOG_TITLE","PLG_FIELDS_EVENT_DESCRIPTION_VALIDATION_INPUT_REQUIRED","FIELDS_EVENT_PERMALINK_EXCEEDED_MAX_LENGTH","FIELDS_EVENT_PERMALINK_REQUIRED","FIELDS_EVENT_STARTEND_VALIDATION_DATETIME_START_REQUIRED","FIELDS_EVENT_STARTEND_VALIDATION_DATETIME_END_REQUIRED","FIELDS_USER_DATETIME_LOCAL_TIMEZONE","FIELDS_USER_DATETIME_TIMEZONE_CHECKING","PLG_FIELDS_GROUP_PERMALINK_EXCEEDED_MAX_LENGTH","PLG_FIELDS_GROUP_PERMALINK_REQUIRED","PLG_FIELDS_ADDRESS_PLEASE_ENTER_ADDRESS1","PLG_FIELDS_ADDRESS_PLEASE_ENTER_ADDRESS2","PLG_FIELDS_ADDRESS_PLEASE_ENTER_CITY","PLG_FIELDS_ADDRESS_PLEASE_ENTER_STATE","PLG_FIELDS_ADDRESS_PLEASE_ENTER_ZIP","PLG_FIELDS_ADDRESS_PLEASE_ENTER_COUNTRY","COM_EASYSOCIAL_LOCATION_PERMISSION_ERROR","COM_EASYSOCIAL_LOCATION_TIMEOUT_ERROR","COM_EASYSOCIAL_LOCATION_UNAVAILABLE_ERROR","COM_EASYSOCIAL_STREAM_AT","PLG_FIELDS_AVATAR_VALIDATION_EMPTY_PROFILE_PICTURE","PLG_FIELDS_CHECKBOX_CHECK_AT_LEAST_ONE_ITEM","PLG_FIELDS_COUNTRY_VALIDATION_REQUIRED","PLG_FIELDS_COUNTRY_VALIDATION_MINIMUM_ERROR","PLG_FIELDS_COUNTRY_VALIDATION_MAXIMUM_ERROR","PLG_FIELDS_COVER_VALIDATION_REQUIRED","PLG_FIELDS_DATETIME_VALIDATION_INVALID_DATETIME_FORMAT","PLG_FIELDS_DATETIME_VALIDATION_PLEASE_SELECT_DATETIME","PLG_FIELDS_DATETIME_DAY","PLG_FIELDS_DROPDOWN_VALIDATION_PLEASE_SELECT_A_VALUE","PLG_FIELDS_EMAIL_VALIDATION_REQUIRED","PLG_FIELDS_EMAIL_VALIDATION_INVALID_FORMAT","PLG_FIELDS_FILE_ERROR_UNKNOWN_ERROR_OCCURED","COM_EASYSOCIAL_WORKING","PLG_FIELDS_GENDER_VALIDATION_GENDER_REQUIRED","PLG_FIELDS_JOOMLA_EMAIL_VALIDATION_REQUIRED","PLG_FIELDS_JOOMLA_EMAIL_VALIDATION_RECONFIRM_REQUIRED","PLG_FIELDS_JOOMLA_EMAIL_VALIDATION_NOT_MATCHING","PLG_FIELDS_JOOMLA_EMAIL_CHECKING","PLG_FIELDS_JOOMLA_EMAIL_VALIDATION_INVALID_FORMAT","PLG_FIELDS_JOOMLA_FULLNAME_VALIDATION_EMPTY_NAME","PLG_FIELDS_JOOMLA_PASSWORD_EMPTY_PASSWORD","PLG_FIELDS_JOOMLA_PASSWORD_EMPTY_RECONFIRM_PASSWORD","PLG_FIELDS_JOOMLA_PASSWORD_NOT_MATCHING","PLG_FIELDS_JOOMLA_PASSWORD_MINIMUM_CHAR","PLG_FIELDS_JOOMLA_PASSWORD_MAXIMUM_CHAR","PLG_FIELDS_JOOMLA_PASSWORD_MINIMUM_INTEGER","PLG_FIELDS_JOOMLA_PASSWORD_MINIMUM_SYMBOLS","PLG_FIELDS_JOOMLA_PASSWORD_MINIMUM_UPPERCASE","PLG_FIELDS_JOOMLA_PASSWORD_STRENGTH_VERY_WEAK","PLG_FIELDS_JOOMLA_PASSWORD_STRENGTH_WEAK","PLG_FIELDS_JOOMLA_PASSWORD_STRENGTH_NORMAL","PLG_FIELDS_JOOMLA_PASSWORD_STRENGTH_STRONG","PLG_FIELDS_JOOMLA_PASSWORD_STRENGTH_VERY_STRONG","PLG_FIELDS_JOOMLA_PASSWORD_EMPTY_ORIGINAL_PASSWORD","PLG_FIELDS_JOOMLA_PASSWORD_TOO_SHORT","PLG_FIELDS_JOOMLA_PASSWORD_TOO_LONG","PLG_FIELDS_JOOMLA_TIMEZONE_VALIDATION_SELECT_TIMEZONE","PLG_FIELDS_JOOMLA_USERNAME_CHECKING","PLG_FIELDS_JOOMLA_USERNAME_EMPTY_USERNAME","PLG_FIELDS_MULTIDROPDOWN_VALIDATION_REQUIRED_FIELD","PLG_FIELDS_MULTILIST_VALIDATION_PLEASE_SELECT_A_VALUE","PLG_FIELDS_MULTITEXTBOX_VALIDATION_REQUIRED_FIELD","PLG_FIELDS_PERMALINK_EXCEEDED_MAX_LENGTH","PLG_FIELDS_PERMALINK_REQUIRED","COM_EASYSOCIAL_FRIENDS_REQUEST_SENT","PLG_FIELDS_RELATIONSHIP_APPROVE_CONFIRM","PLG_FIELDS_RELATIONSHIP_ACTION_APPROVE","PLG_FIELDS_TERMS_VALIDATION_REQUIRED","PLG_FIELDS_TEXTAREA_VALIDATION_INPUT_REQUIRED","PLG_FIELDS_TEXTAREA_VALIDATION_INPUT_TOO_SHORT","PLG_FIELDS_TEXTAREA_VALIDATION_INPUT_TOO_LONG","PLG_FIELDS_TEXTBOX_VALIDATION_INPUT_REQUIRED","PLG_FIELDS_TEXTBOX_VALIDATION_INPUT_TOO_SHORT","PLG_FIELDS_TEXTBOX_VALIDATION_INPUT_TOO_LONG","PLG_FIELDS_TEXTBOX_VALIDATION_INPUT_INVALID_FORMAT","PLG_FIELDS_URL_VALIDATION_EMPTY_URL","COM_EASYSOCIAL_CONVERSATIONS_ERROR_EMPTY_RECIPIENTS","COM_EASYSOCIAL_CONVERSATIONS_ERROR_EMPTY_MESSAGE","COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_PUBLIC","COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_MEMBER","COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_FRIENDS_OF_FRIEND","COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_FRIEND","COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_ONLY_ME","COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_CUSTOM","COM_EASYSOCIAL_AT_LOCATION","COM_EASYSOCIAL_ACTIVITY_APPS_UNHIDE_SUCCESSFULLY","COM_EASYSOCIAL_ACTIVITY_USERS_UNHIDE_SUCCESSFULLY","COM_EASYSOCIAL_ACTIVITY_LOG_LOAD_PREVIOUS_STREAM_ITEMS","COM_EASYSOCIAL_COMMENTS_STATUS_SAVE_ERROR","COM_EASYSOCIAL_COMMENTS_STATUS_LOADING","COM_EASYSOCIAL_COMMENTS_STATUS_LOAD_ERROR","COM_EASYSOCIAL_COMMENTS_STATUS_DELETING","COM_EASYSOCIAL_COMMENTS_STATUS_DELETE_ERROR","COM_EASYSOCIAL_LIKES_LIKE","COM_EASYSOCIAL_LIKES_UNLIKE","COM_EASYSOCIAL_COMMENTS_LOADED_OF_TOTAL","COM_EASYSOCIAL_COMMENTS_STATUS_SAVING","COM_EASYSOCIAL_COMMENTS_STATUS_SAVED","COM_EASYSOCIAL_NO_BUTTON","COM_EASYSOCIAL_CONVERSATION_REPLY_POSTED_SUCCESSFULLY","COM_EASYSOCIAL_CONVERSATION_REPLY_FORM_EMPTY","COM_EASYSOCIAL_STREAM_FILTER_WARNING_TITLE_EMPTY","COM_EASYSOCIAL_STREAM_FILTER_WARNING_HASHTAG_EMPTY","COM_EASYSOCIAL_EVENTS_GUEST_PENDING","COM_EASYSOCIAL_EVENTS_DETECTING_LOCATION","COM_EASYSOCIAL_EXPLORER_ENTER_FOLDER_NAME","COM_EASYSOCIAL_EXPLORER_INVALID_FOLDER_NAME","COM_EASYSOCIAL_FRIENDS_REQUEST_SENT_PENDING_APPROVAL","COM_EASYSOCIAL_FRIENDS_REQUEST_DIALOG_TITLE","COM_EASYSOCIAL_FRIENDS_CANCEL_REQUEST_DIALOG_CANCELLED","COM_EASYSOCIAL_FRIENDS_DIALOG_CANCEL_REQUEST","COM_EASYSOCIAL_YES_CANCEL_MY_REQUEST_BUTTON","COM_EASYSOCIAL_REGISTRATION_ERROR_DIALOG_TITLE","COM_EASYSOCIAL_ADVANCED_SEARCH_ADDRESS_DISTANCE_NOTICE","COM_EASYSOCIAL_STREAM_LOAD_PREVIOUS_STREAM_ITEMS","COM_EASYSOCIAL_SEARCH_LOAD_MORE_ITEMS","COM_EASYSOCIAL_FRIENDS_REQUEST_SENT_NOTICE","COM_EASYSOCIAL_SUBSCRIPTION_INFO","COM_EASYSOCIAL_FRIENDS_REQUEST_REJECTED","COM_EASYSOCIAL_STREAM_META_JOINER","COM_EASYSOCIAL_STORY_SUBMIT_ERROR","COM_EASYSOCIAL_STORY_CONTENT_EMPTY","COM_EASYSOCIAL_STORY_NOT_ON_STREAM_FILTER","COM_EASYSOCIAL_STORY_EVENT_INSUFFICIENT_DATA","COM_EASYSOCIAL_STORY_EVENT_INVALID_START_END_DATETIME","COM_EASYSOCIAL_STREAM_STORY_WITH","COM_EASYSOCIAL_STREAM_STORY_WITH_JOINER","COM_EASYSOCIAL_STREAM_STORY_WITH_LAST_JOINER","COM_EASYSOCIAL_AND","COM_EASYSOCIAL_MOOD_FEELING_CUSTOM","COM_EASYSOCIAL_VIDEOS_STORY_SELECT_CATEGORY","COM_EASYSOCIAL_VIDEOS_STORY_ENTER_VIDEO","COM_EASYSOCIAL_VIDEOS_STORY_PROCESSING_VIDEO","COM_EASYSOCIAL_VIDEOS_STORY_CLICK_INSERT_VIDEO","COM_EASYSOCIAL_VIDEOS_STORY_NO_VIDEO_DETECTED","COM_EASYSOCIAL_SUBSCRIPTION_DIALOG_UNSUBSCRIBE","COM_EASYSOCIAL_SUBSCRIPTION_DIALOG_SUBSCRIBE","COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_OK","COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_SUBMIT","COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_CANCEL","COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_UNSUBSCRIBE","COM_EASYSOCIAL_SUBSCRIPTION_ARE_YOU_SURE_UNSUBSCRIBE","COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_SUBSCRIBE","COM_EASYSOCIAL_STREAM_DIALOG_FEED","COM_EASYSOCIAL_STREAM_BUTTON_CLOSE"]),function(){var b=["easysocial/imgareaselect/default"],c=a.stylesheet({content:""})?"resolve":"reject";
a.each(b,function(b,d){a.require.stylesheet.loader(d)[c]()})}()}),FD40.installer("EasySocial","scripts",function(){EasySocial.module("admin",function(){var b=this;EasySocial.require().library("uniform","chosen","flot").done(function(a){a(".uniform, .check :checkbox, .radio :radio, input:file[data-uniform], .usergroups :checkbox").uniform(),a("[data-chosen]").chosen({disable_search:!0}),a("[data-chosen-search]").chosen({disable_search:!1}),a("[data-sidebar-menu-toggle]").on("click",function(){var b=a(this).parent("li"),c=b.find("ul"),d=a(this).parent("li").hasClass("active");
d?(b.removeClass("active"),c.removeClass("in")):(b.addClass("active"),c.addClass("in"))}),b.resolve()})}),EasySocial.module("admin/access/discover",function(){var b=this;EasySocial.require().script("progress/progress").language("COM_EASYSOCIAL_SCAN_COMPLETED").done(function(a){EasySocial.Controller("Access.Discover",{defaultOptions:{files:[],progressController:null,"{progressBar}":".discoverProgress","{results}":"[data-access-discovery-result]"}},function(b){return{init:function(){b.options.progressController=b.progressBar().addController(EasySocial.Controller.Progress),a.Joomla("submitbutton",function(a){"discover"==a&&b.startDiscovering()
})},reset:function(){b.results().html(""),b.options.progressController.reset()},addLog:function(c){a("<tr></tr>").append(a("<td></td>").html(c)).appendTo(b.results())},startDiscovering:function(){b.reset(),EasySocial.ajax("admin/controllers/access/scanFiles").done(function(c,d){b.reset(),b.options.files=c,b.options.files.length>0?(b.options.progressController.begin(b.options.files.length),b.addLog(d),b.startIterating()):(b.options.progressController.begin(1),b.options.progressController.completed("Discover Completed"),b.addLog(a.language("COM_EASYSOCIAL_SCAN_COMPLETED")))
})},startIterating:function(){var c=b.options.files.shift();EasySocial.ajax("admin/controllers/access/installFile",{file:c}).always(function(c){b.options.files.length>0?(b.options.progressController.touch("..."),b.addLog(c),b.startIterating()):(b.options.progressController.touch("..."),b.addLog(c),b.addLog(a.language("COM_EASYSOCIAL_SCAN_COMPLETED")))})}}}),b.resolve()})}),EasySocial.module("progress/progress",function(){var b=this;EasySocial.Controller("Progress",{defaultOptions:{current:0,eachWidth:null,total:null,progressClass:"progress progress-info progress-striped","{progressBar}":".bar","{progressResult}":".progress-result",view:{}}},function(a){return{init:function(){},reset:function(){a.options.current=0,a.eachWidth=null,a.total=null,a.progressBar().css("width","0%").html("")
},begin:function(b){a.options.total=b,a.options.eachWidth=100/b,b>0&&a.element.addClass(a.options.progressClass).show()},touch:function(){a.options.current+=a.options.eachWidth,a.options.current>100&&(a.options.current=100),a.progressBar().css("width",a.options.current+"%"),a.progressResult().html(Math.round(a.options.current)+"%")},completed:function(){a.options.current=100,a.progressBar().css("width",a.options.current+"%"),a.progressResult().html(Math.round(a.options.current)+"%")}}}),b.resolve()}),EasySocial.module("admin/alerts/discover",function(){var b=this;
EasySocial.require().script("progress/progress").language("COM_EASYSOCIAL_SCAN_COMPLETED").done(function(a){EasySocial.Controller("Alerts.Discover",{defaultOptions:{files:[],progressController:null,"{progressBar}":"[data-alerts-discovery-progress]","{results}":"[data-alerts-discovery-result]"}},function(b){return{init:function(){b.initProgressBar(),a.Joomla("submitbutton",function(a){"discover"==a&&b.startDiscovering()})},startDiscovering:function(){b.reset(),EasySocial.ajax("admin/controllers/alerts/discoverFiles",{}).done(function(a,c){b.reset(),b.options.files=a,b.options.files.length>0&&(b.options.progressController.begin(b.options.files.length),b.addLog(c),b.startIterating())
})},reset:function(){b.results().html(""),b.options.progressController.reset()},initProgressBar:function(){b.progressBar().implement(EasySocial.Controller.Progress),b.options.progressController=b.progressBar().controller()},addLog:function(c){a("<tr>").append(a("<td>").html(c)).appendTo(b.results())},startIterating:function(){var c=b.options.files.shift();EasySocial.ajax("admin/controllers/alerts/scan",{file:c}).always(function(c,d){b.options.files.length>0?(b.options.progressController.touch("..."),b.addLog(d),b.startIterating()):(b.options.progressController.touch("..."),b.addLog(a.language("COM_EASYSOCIAL_SCAN_COMPLETED")))
})}}}),b.resolve()})}),EasySocial.module("admin/badges/discover",function(){var b=this;EasySocial.require().script("progress/progress").language("COM_EASYSOCIAL_SCAN_COMPLETED").done(function(a){EasySocial.Controller("Badges.Discover",{defaultOptions:{files:[],progressController:null,"{progressBar}":"[data-badgesDiscover-progress]","{results}":"[data-badgesDiscover-result]","{viewLog}":"[data-badgesDiscover-viewLog]"}},function(b){return{init:function(){b.initProgressBar(),b.initLogging(),a.Joomla("submitbutton",function(a){"discover"==a&&b.startDiscovering()
})},reset:function(){b.results().html(""),b.initLogging(),b.options.progressController.reset()},initLogging:function(){b.viewLog().hide()},initProgressBar:function(){b.progressBar().implement(EasySocial.Controller.Progress),b.options.progressController=b.progressBar().controller()},addLog:function(c){a("<tr>").append(a("<td>").html(c)).appendTo(b.results())},startIterating:function(){var c=b.options.files.shift();EasySocial.ajax("admin/controllers/badges/scan",{file:c}).always(function(c,d){b.options.files.length>0?(b.options.progressController.touch("..."),b.addLog(d),b.startIterating()):(b.options.progressController.touch("..."),b.addLog(d),b.addLog(a.language("COM_EASYSOCIAL_SCAN_COMPLETED")),b.viewLog().show())
})},startDiscovering:function(){b.reset(),EasySocial.ajax("admin/controllers/badges/discoverFiles",{}).done(function(c,d){b.options.files=c,b.options.files.length>0?(b.options.progressController.begin(b.options.files.length),b.addLog(d),b.startIterating()):(b.options.progressController.begin(1),b.options.progressController.completed("Discover Completed"),b.addLog(a.language("COM_EASYSOCIAL_SCAN_COMPLETED")))})},"{viewLog} click":function(){b.results().toggle()}}}),b.resolve()})}),EasySocial.module("admin/events/approveRecurring",function(a){var b=this;
EasySocial.Controller("Events.ApproveRecurring",{defaultOptions:{postdatas:{},schedules:{},eventids:[],"{progress}":"[data-progress-bar]","{form}":"[data-form]"}},function(b){return{init:function(){var c=0;a.each(b.options.schedules,function(a,b){c+=b.length}),b.total=c,b.startCreate()},total:0,doneCounter:0,eventCounter:0,createCounter:0,updateProgressBar:function(){var a=Math.ceil(b.doneCounter/b.total*100);b.progress().css({width:a+"%"})},startCreate:function(){return void 0===b.options.eventids[b.eventCounter]?b.completed():(b.create().done(function(){b.doneCounter++,b.createCounter++,void 0===b.options.schedules[b.options.eventids[b.eventCounter]][b.createCounter]&&(b.eventCounter++,b.createCounter=0),b.updateProgressBar(),b.startCreate()
}).fail(function(a,b){console.log(a,b)}),void 0)},create:function(){var a=b.options.eventids[b.eventCounter],c=b.options.schedules[a][b.createCounter],d=b.options.postdatas[a];return EasySocial.ajax("admin/controllers/events/createRecurring",{eventId:a,datetime:c,postdata:d})},completed:function(){b.progress().parent().removeClass("progress-info").addClass("progress-success"),b.form().submit()}}}),b.resolve()}),EasySocial.module("admin/events/store",function(a){var b=this;EasySocial.Controller("Events.Update",{defaultOptions:{postdata:{},updateids:[],schedule:[],eventId:null,"{progress}":"[data-progress-bar]","{form}":"[data-form]"}},function(b){return{init:function(){b.startUpdate()
},updateCounter:0,createCounter:0,updateProgressBar:function(){var a=Math.ceil((b.updateCounter+b.createCounter)/(b.options.updateids.length+b.options.schedule.length)*100);b.progress().css({width:a+"%"})},startUpdate:function(){return void 0===b.options.updateids[b.updateCounter]?b.startCreate():(b.update(b.options.updateids[b.updateCounter]).done(function(){b.updateCounter++,b.updateProgressBar(),b.startUpdate()}).fail(function(a,b){console.log(a,b)}),void 0)},update:function(c){var d=a.extend({},b.options.postdata,{id:c,applyRecurring:1});
return EasySocial.ajax("admin/controllers/events/store",d)},startCreate:function(){return void 0===b.options.schedule[b.createCounter]?b.completed():(b.create(b.options.schedule[b.createCounter]).done(function(){b.createCounter++,b.updateProgressBar(),b.startCreate()}).fail(function(a,b){console.log(a,b)}),void 0)},create:function(a){return EasySocial.ajax("admin/controllers/events/createRecurring",{eventId:b.options.eventId,datetime:a,postdata:b.options.postdata})},completed:function(){b.progress().parent().removeClass("progress-info").addClass("progress-success"),b.form().submit()
}}}),b.resolve()}),EasySocial.module("admin/events/users",function(){var b=this;EasySocial.require().language("JLIB_HTML_PLEASE_MAKE_A_SELECTION_FROM_THE_LIST").done(function(a){EasySocial.Controller("Events.Users",{defaultOptions:{eventid:null,"{inviteGuest}":"[data-event-invite-guest]","{removeGuest}":"[data-event-remove-guest]","{approveGuest}":"[data-event-approve-guest]","{promoteGuest}":"[data-event-promote-guest]","{demoteGuest}":"[data-event-demote-guest]"}},function(b){return{init:function(){},"{inviteGuest} click":function(){var d={};
window.inviteGuests=function(a){a.state?d[a.id]=a:delete d[a.id]};var e=function(){EasySocial.dialog({content:EasySocial.ajax("admin/views/events/confirmInviteGuests",{guests:d,eventid:b.options.eventid}),bindings:{"{submitButton} click":function(){this.inviteGuestsForm().submit()}}})};EasySocial.dialog({content:EasySocial.ajax("admin/views/events/inviteGuests"),bindings:{"{submitButton} click":function(){e()}}})},"{removeGuest} click":function(){0==document.adminForm.boxchecked.value?alert(a.language("JLIB_HTML_PLEASE_MAKE_A_SELECTION_FROM_THE_LIST")):a.Joomla("submitform",["removeGuests"])
},"{approveGuest} click":function(){0==document.adminForm.boxchecked.value?alert(a.language("JLIB_HTML_PLEASE_MAKE_A_SELECTION_FROM_THE_LIST")):a.Joomla("submitform",["approveGuests"])},"{promoteGuest} click":function(){0==document.adminForm.boxchecked.value?alert(a.language("JLIB_HTML_PLEASE_MAKE_A_SELECTION_FROM_THE_LIST")):a.Joomla("submitform",["promoteGuests"])},"{demoteGuest} click":function(){0==document.adminForm.boxchecked.value?alert(a.language("JLIB_HTML_PLEASE_MAKE_A_SELECTION_FROM_THE_LIST")):a.Joomla("submitform",["demoteGuests"])
}}}),b.resolve()})}),EasySocial.module("admin/grid/grid",function(){var b=this;EasySocial.require().script("admin/grid/sort","admin/grid/publishing").done(function(a){EasySocial.Controller("Grid",{defaultOptions:{"{sortColumns}":"[data-table-grid-sort]","{ordering}":"[data-table-grid-ordering]","{saveorder}":"[data-table-grid-saveorder]","{direction}":"[data-table-grid-direction]","{task}":"[data-table-grid-task]","{searchInput}":"[data-table-grid-search-input]","{search}":"[data-table-grid-search]","{resetSearch}":"[data-table-grid-search-reset]","{checkAll}":"[data-table-grid-checkall]","{checkboxes}":"[data-table-grid-id]","{publishItems}":"[data-table-grid-publishing]","{itemRow}":"tr","{boxChecked}":"[data-table-grid-box-checked]","{filters}":"[data-table-grid-filter]"}},function(b){return{init:function(){b.implementSortable(),b.implementPublishing()
},"{filters} change":function(){b.setTask(""),b.submitForm()},"{search} click":function(){b.submitForm()},"{saveorder} click":function(){b.setTask("saveorder"),b.checkAll().click(),b.submitForm()},"{resetSearch} click":function(){b.searchInput().val(""),b.submitForm()},submitForm:function(){b.element.submit()},setTask:function(a){b.task().val(a)},setOrdering:function(a){b.ordering().val(a)},setDirection:function(a){b.direction().val(a)},setTotalChecked:function(a){b.boxChecked().val(a)},toggleSelectRow:function(b){var c=b.find("input[name=cid\\[\\]]");
1==a(c).prop("checked")?a(c).prop("checked",!1):a(c).prop("checked",!0)},selectRow:function(b){var c=b.find("input[name=cid\\[\\]]");a(c).prop("checked",!0)},implementSortable:function(){b.sortColumns().implement(EasySocial.Controller.Grid.Sort,{"{parent}":b})},implementPublishing:function(){b.publishItems().implement(EasySocial.Controller.Grid.Publishing,{"{parent}":b})},"{checkAll} change":function(c){b.checkboxes().prop("checked",a(c).is(":checked"));var e=a(c).is(":checked")?b.checkboxes().length:0;b.setTotalChecked(e)
}}}),b.resolve()})}),EasySocial.module("admin/grid/sort",function(){var b=this;EasySocial.Controller("Grid.Sort",{defaultOptions:{items:"[data-grid-sort-item]"}},function(a){return{init:function(){},"{self} click":function(){var b=a.element.data("direction"),c=a.element.data("sort");a.parent.setOrdering(c),a.parent.setDirection(b),a.parent.setTask(""),a.parent.submitForm()}}}),b.resolve()}),EasySocial.module("admin/grid/publishing",function(){var b=this;EasySocial.Controller("Grid.Publishing",{defaultOptions:{}},function(a){return{init:function(){},"{self} click":function(){var c=a.element.parents("tr"),d=a.element.data("task");
a.parent.selectRow(c),a.parent.setTask(d),a.parent.submitForm()}}}),b.resolve()}),EasySocial.module("admin/grid/ordering",function(a){var b=this;EasySocial.Controller("Grid.Ordering",{defaultOptions:{"{moveUp}":"[data-grid-order-up]","{moveDown}":"[data-grid-order-down]",row:null}},function(b){return{init:function(){b.options.row=b.element.parents("tr")},selectRow:function(){var c=b.options.row.find("input[name=cid\\[\\]]");a(c).prop("checked",!0)},"{moveUp} click":function(){b.selectRow(),a.Joomla("submitform",["moveUp"])
},"{moveDown} click":function(){b.selectRow(),a.Joomla("submitform",["moveDown"])}}}),b.resolve()}),EasySocial.module("admin/groups/groups",function(){var b=this;EasySocial.require().library("expanding").done(function(){EasySocial.Controller("Groups.Pending.Item",{defaultOptions:{"{approve}":"[data-pending-approve]","{reject}":"[data-pending-reject]"}},function(a){return{init:function(){a.options.id=a.element.data("id")},"{approve} click":function(){EasySocial.dialog({content:EasySocial.ajax("admin/views/groups/approveGroup",{ids:a.options.id})})
},"{reject} click":function(){EasySocial.dialog({content:EasySocial.ajax("admin/views/groups/rejectGroup",{ids:a.options.id})})}}}),b.resolve()})}),EasySocial.module("admin/groups/users",function(){var b=this;EasySocial.require().language("JLIB_HTML_PLEASE_MAKE_A_SELECTION_FROM_THE_LIST").done(function(a){EasySocial.Controller("Groups.Users",{defaultOptions:{groupid:null,"{addMember}":"[data-group-add-member]","{removeMember}":"[data-group-remove-member]","{approveMember}":"[data-group-approve-member]","{promoteMember}":"[data-group-promote-member]","{demoteMember}":"[data-group-demote-member]"}},function(b){return{init:function(){},"{addMember} click":function(){var d={};
window.addMembers=function(a){a.state?d[a.id]=a:delete d[a.id]};var e=function(){EasySocial.dialog({content:EasySocial.ajax("admin/views/groups/confirmAddMembers",{members:d,groupid:b.options.groupid}),bindings:{"{submitButton} click":function(){this.addMembersForm().submit()}}})};EasySocial.dialog({content:EasySocial.ajax("admin/views/groups/addMembers"),bindings:{"{submitButton} click":function(){e()}}})},"{removeMember} click":function(){0==document.adminForm.boxchecked.value?alert(a.language("JLIB_HTML_PLEASE_MAKE_A_SELECTION_FROM_THE_LIST")):a.Joomla("submitform",["removeMembers"])
},"{approveMember} click":function(){0==document.adminForm.boxchecked.value?alert(a.language("JLIB_HTML_PLEASE_MAKE_A_SELECTION_FROM_THE_LIST")):a.Joomla("submitform",["publishUser"])},"{promoteMember} click":function(){0==document.adminForm.boxchecked.value?alert(a.language("JLIB_HTML_PLEASE_MAKE_A_SELECTION_FROM_THE_LIST")):a.Joomla("submitform",["promoteMembers"])},"{demoteMember} click":function(){0==document.adminForm.boxchecked.value?alert(a.language("JLIB_HTML_PLEASE_MAKE_A_SELECTION_FROM_THE_LIST")):a.Joomla("submitform",["demoteMembers"])
}}}),b.resolve()})}),EasySocial.module("admin/indexer/indexer",function(){var b=this;EasySocial.require().language("COM_EASYSOCIAL_INDEXER_REINDEX_PROCESSING","COM_EASYSOCIAL_INDEXER_REINDEX_FINISHED","COM_EASYSOCIAL_INDEXER_REINDEX_RESTART").view("site/loading/small").done(function(a){EasySocial.Controller("Indexer",{defaultOptions:{"{startButton}":"[data-start-button]","{indexerBar}":"[data-indexer-bar]","{indexerResult}":"[data-indexer-result]","{indexerMessage}":"[data-indexer-message]","{resultsButton}":"[data-results-button]",view:{loadingContent:"site/loading/small"}}},function(b){return{init:function(){},"{startButton} click":function(){b.runIndex(0),b.indexerMessage().html(a.language("COM_EASYSOCIAL_INDEXER_REINDEX_PROCESSING")),b.indexerMessage().show(),b.startButton().hide()
},runIndex:function(a){EasySocial.ajax("admin/controllers/indexer/indexing",{max:a},{beforeSend:function(){}}).done(function(a,c){0>a&&(c="100"),b.updateProgress(c),a>=0&&b.runIndex(a)}).fail(function(a){b.setMessage(a)}).always(function(){})},updateProgress:function(c){b.indexerBar().css("width",c+"%"),b.indexerResult().html(c+"%"),100==c&&(b.indexerMessage().html(a.language("COM_EASYSOCIAL_INDEXER_REINDEX_FINISHED")),b.startButton().html(a.language("COM_EASYSOCIAL_INDEXER_REINDEX_RESTART")),b.startButton().show(),b.resultsButton().removeClass("hide"))
}}}),b.resolve()})}),EasySocial.module("admin/mailer/mailer",function(){var b=this;EasySocial.Controller("Mailer",{defaultOptions:{"{item}":"[data-mailer-item]"}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Mailer.Item)}}}),EasySocial.Controller("Mailer.Item",{defaultOptions:{"{preview}":"[data-mailer-item-preview]"}},function(a){return{init:function(){a.options.id=a.element.data("id")},"{preview} click":function(){EasySocial.dialog({content:EasySocial.ajax("admin/views/mailer/preview",{id:a.options.id})})
}}}),b.resolve()}),EasySocial.module("admin/maintenance/database",function(a){var b=this;EasySocial.Controller("Maintenance.Database",{defaultOptions:{"{start}":"[data-start]","{progress}":"[data-progress]","{progressBox}":"[data-progress-box]","{progressBar}":"[data-progress-bar]","{progressPercentage}":"[data-progress-percentage]"}},function(a){return{init:function(){},"{start} click":function(b){b.hide(),a.progress().show(),a.process()},counter:0,versions:[],process:function(){a.getStats().done(function(b){a.versions=b,a.execute()
})},getStats:function(){return EasySocial.ajax("admin/controllers/maintenance/getDatabaseStats")},execute:function(){return void 0===a.versions[a.counter]?a.completed():(EasySocial.ajax("admin/controllers/maintenance/synchronizeDatabase",{version:a.versions[a.counter]}).done(function(){a.counter++;var b=Math.floor(a.counter/a.versions.length*100)+"%";a.progressBar().css("width",b),a.progressPercentage().text(b),a.execute()}),void 0)},completed:function(){a.progressBar().css("width","100%"),a.progressPercentage().text("100%"),a.progressBox().removeClass("progress-info").addClass("progress-success")
}}}),a("[data-base]").addController("EasySocial.Controller.Maintenance.Database"),b.resolve()}),EasySocial.module("admin/maintenance/maintenance",function(){var b=this;EasySocial.Controller("Maintenance.Execute",{defaultOptions:{"{row}":"[data-row]"}},function(a){return{init:function(){a.runscript()},counter:0,success:0,fail:0,runscript:function(){var b=a.row().eq(a.counter);if(0===b.length)return a.completed();var c=b.data("key");EasySocial.ajax("admin/controllers/maintenance/runscript",{key:c}).done(function(){a.setStatus(b,1),a.success++
}).fail(function(){a.setStatus(b,0),a.fail++}).always(function(){a.counter++,a.runscript()})},completed:function(){a.fail<1&&(window.location="index.php?option=com_easysocial&view=maintenance&success="+a.success)},setStatus:function(a,b){var c=a.find("[data-status]"),d=a.find("[data-icon]"),e=["label-danger","label-success","label-warning"],f=["fa-exclamation-triangle","fa-check","fa-wrench"];for(i=0;3>i;i++)c.toggleClass(e[i],b==i),d.toggleClass(f[i],b==i)}}}),b.resolve()}),EasySocial.module("admin/migrators/migrator",function(){var b=this;
EasySocial.require().script("progress/progress").done(function(a){EasySocial.Controller("Migrators.Migrator",{defaultOptions:{component:null,processState:0,progressController:null,mapping:null,updateconfig:0,"{initiateButton}":"[data-initiate-migration]","{progressBar}":".discoverProgress","{results}":".scannedResult","{viewLog}":".viewLog","{customFieldsMap}":"[data-custom-fields-map]","{resultForm}":"[data-migration-result]","{startWidget}":"[data-start-widget]","{fieldItem}":"[data-field-item]","{startMigrationButton}":"[data-start-migration]","{rows}":"[data-row-item]","{selection}":"[data-field-item]","{jomsocialBackButton}":"[data-jomsocial-back-button]"}},function(b){return{init:function(){b.initProgressBar(),b.initLogging()
},showCustomFields:function(){b.startWidget().slideUp(),b.customFieldsMap().slideDown()},showResultForm:function(){b.customFieldsMap().slideUp(),"com_community"!=b.options.component&&b.startWidget().slideUp(),b.resultForm().slideDown()},startMigration:function(){b.showResultForm(),1!=b.options.processState&&(b.options.processState=1,b.reset(),EasySocial.ajax("admin/controllers/migrators/check",{component:b.options.component}).done(function(a){a.isvalid?(b.options.progressController.begin(a.count),b.startIterating("")):(b.results().show(),b.addLog("Error: "+a.message),b.options.processState=0)
}))},reset:function(){b.results().html(""),b.initLogging(),b.options.progressController.reset()},initLogging:function(){b.viewLog().hide()},initProgressBar:function(){b.progressBar().implement(EasySocial.Controller.Progress),b.options.progressController=b.progressBar().controller()},addLog:function(c){a("<li>").html(c).appendTo(b.results())},startIterating:function(c){null==b.options.mapping&&b.selection().length>0&&(b.options.mapping=a("#adminForm").serializeArray()),EasySocial.ajax("admin/controllers/migrators/process",{component:b.options.component,item:c,mapping:b.options.mapping,updateconfig:b.options.updateconfig}).always(function(a,c){b.options.updateconfig=c,a["continue"]?(b.options.progressController.touch("Discovering..."),b.addLog(a.message),b.startIterating(a.item)):(b.options.progressController.touch("Discover Completed"),b.addLog(a.message),b.addLog("migration process completed."),b.viewLog().show(),b.jomsocialBackButton().show(),b.options.processState=0)
})},"{fieldItem} change":function(b){var c=a(b).val();""==c?a(b).parents("[data-row-item]").removeClass("success").addClass("error"):a(b).parents("[data-row-item]").removeClass("error").addClass("success")},"{startMigrationButton} click":function(){b.selection().length>0&&b.selection().each(function(b,c){""==a(c).val()?a(c).parents("[data-row-item]").removeClass("success").addClass("error"):a(c).parents("[data-row-item]").removeClass("error").addClass("success")});var c=b.rows().hasClass("error");c?EasySocial.dialog({content:EasySocial.ajax("admin/views/migrators/confirmMigration"),bindings:{"{submitButton} click":function(){b.startMigration(),EasySocial.dialog().close()
}}}):b.startMigration()},"{initiateButton} click":function(){b.showCustomFields()},"{viewLog} click":function(){b.results().toggle()}}}),b.resolve()})}),EasySocial.module("admin/points/discover",function(){var b=this;EasySocial.require().script("progress/progress").language("COM_EASYSOCIAL_SCAN_COMPLETED").done(function(a){EasySocial.Controller("Points.Discover",{defaultOptions:{files:[],progressController:null,"{progressBar}":".discoverProgress","{results}":"[data-points-discovery-result]"}},function(b){return{init:function(){b.initProgressBar(),a.Joomla("submitbutton",function(a){"discover"==a&&b.startDiscovering()
})},reset:function(){b.results().html(""),b.options.progressController.reset()},initProgressBar:function(){b.progressBar().implement(EasySocial.Controller.Progress),b.options.progressController=b.progressBar().controller()},addLog:function(c){a("<tr>").append(a("<td>").html(c)).appendTo(b.results())},startIterating:function(){var c=b.options.files.shift();EasySocial.ajax("admin/controllers/points/scan",{file:c}).always(function(c,d){b.options.files.length>0?(b.options.progressController.touch("..."),b.addLog(d),b.startIterating()):(b.options.progressController.touch("..."),b.addLog(d),b.addLog(a.language("COM_EASYSOCIAL_SCAN_COMPLETED")))
})},startDiscovering:function(){b.reset(),EasySocial.ajax("admin/controllers/points/discoverFiles",{}).done(function(c,d){b.reset(),b.options.files=c,b.options.files.length>0?(b.options.progressController.begin(b.options.files.length),b.addLog(d),b.startIterating()):(b.options.progressController.begin(1),b.options.progressController.completed("Discover Completed"),b.addLog(a.language("COM_EASYSOCIAL_SCAN_COMPLETED")))})}}}),b.resolve()})}),EasySocial.module("admin/polls/polls",function(){var b=this;EasySocial.require().language("COM_EASYSOCIAL_CANCEL_BUTTON","COM_EASYSOCIAL_CLOSE_BUTTON","COM_EASYSOCIAL_POLLS_VIEW_POLLS_DIALOG_TITLE","COM_EASYSOCIAL_POLLS_ACTIONS_DIALOG_TITLE").done(function(a){EasySocial.Controller("Polls",{defaultOptions:{"{item}":"[data-poll-item]"}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Polls.Item)
}}}),EasySocial.Controller("Polls.Item",{defaultOptions:{"{action}":"[data-polls-item-view-actions]"}},function(b){return{init:function(){b.options.id=b.element.data("id"),b.options.extension=b.element.data("extension"),b.options.uid=b.element.data("uid"),b.options.type=b.element.data("type")},"{action} click":function(){EasySocial.dialog({title:a.language("COM_EASYSOCIAL_REPORTS_ACTIONS_DIALOG_TITLE"),content:"<div>Perform some actions on the item</div>",width:500,height:250,buttons:[{name:a.language("COM_EASYSOCIAL_CLOSE_BUTTON"),classNames:"btn btn-es",click:function(){EasySocial.dialog().close()
}}]})}}}),b.resolve()})}),EasySocial.module("admin/privacy/discover",function(){var b=this;EasySocial.require().script("progress/progress").done(function(a){EasySocial.Controller("Privacy.Discover",{defaultOptions:{files:[],progressController:null,"{startButton}":".scanRules","{progressBar}":".discoverProgress","{results}":".scannedResult","{viewLog}":".viewLog",view:{}}},function(b){return{init:function(){b.initProgressBar(),b.initLogging()},reset:function(){b.results().html(""),b.initLogging(),b.options.progressController.reset()
},initLogging:function(){b.viewLog().hide()},initProgressBar:function(){b.progressBar().implement(EasySocial.Controller.Progress),b.options.progressController=b.progressBar().controller()},addLog:function(c){a("<li>").html(c).appendTo(b.results())},startIterating:function(){var a=b.options.files.shift();EasySocial.ajax("admin/controllers/privacy/scan",{file:a}).always(function(a){b.options.files.length>0?(b.options.progressController.touch("Discovering..."),b.addLog("Scanned "+a.file+" : "+a.rules.length+" rules installed."),b.startIterating()):(b.options.progressController.touch("Discover Completed"),b.addLog("Scanned "+a.file+" : "+a.rules.length+" rules installed."),b.addLog("Scanning completed."),b.viewLog().show(),b.startButton().removeAttr("disabled"))
})},"{startButton} click":function(){b.reset(),b.startButton().attr("disabled","disabled"),EasySocial.ajax("admin/controllers/privacy/discoverFiles",{}).done(function(c){b.options.files=c,b.options.files.length>0?(b.options.progressController.begin(b.options.files.length),b.results().hide(),b.addLog("Found a total of "+c.length+" rules file in the site."),b.startIterating()):(b.options.progressController.begin(1),b.options.progressController.completed("Discover Completed"),b.addLog(a.language("COM_EASYSOCIAL_SCAN_COMPLETED")),b.startButton().removeAttr("disabled"))
})},"{viewLog} click":function(){b.results().toggle()}}}),b.resolve()})}),EasySocial.module("admin/profiles/avatar",function(a){var b=this;EasySocial.require().script("uploader/uploader").done(function(){EasySocial.Controller("Profiles.Avatar",{defaultOptions:{token:null,"{fileUploader}":"[data-profile-avatars-uploader]","{startUploadButton}":"[data-profile-avatars-startupload]","{avatarList}":"[data-profile-avatars-list]","{avatarEmpty}":"[data-profile-avatars-empty]","{avatarItem}":"[data-profile-avatars-item]","{messagePlaceholder}":"[data-profile-avatars-message]","{removeFile}":".removeFile","{clearUploadedItems}":"[data-uploader-clear]"}},function(b){return{init:function(){b.options.id=b.element.data("id"),b.initUploader(),b.initAvatar()
},initUploader:function(){b.fileUploader().implement(EasySocial.Controller.Uploader,{url:a.indexUrl+"?option=com_easysocial&namespace=admin/controllers/profiles/uploadDefaultAvatars&"+b.options.token+"=1&tmpl=component&format=ajax&uid="+b.options.id})},initAvatar:function(){b.avatarItem().implement("EasySocial.Controller.Profiles.Avatar.Item",{"{parent}":b,items:b.avatarItem})},addMessage:function(a){b.clearMessage(),b.setMessage(a)},"{removeFile} click":function(c){var e=a(c).parents("li").attr("id");b.fileUploader().controller().removeItem(e)
},"{startUploadButton} click":function(){var a=b.fileUploader().controller();a.startUpload()},"{fileUploader} UploadProgress":function(b,c,d){var e=d.percent,f="#"+d.id,g=a(f).find(".progressBar");g.show(),g.find(".bar").css("width",e+"%")},"{fileUploader} FileUploaded":function(a,c,d,e){if(void 0!=e[0]){var f=e[0].data[0];b.avatarEmpty().hide(),b.avatarList().prepend(f),b.clearUploadedItems().show(),b.initAvatar()}},"{clearUploadedItems} click":function(){var a=b.fileUploader().controller();a.reset(),b.clearUploadedItems().hide()
}}}),EasySocial.Controller("Profiles.Avatar.Item",{defaultOptions:{id:null,"{deleteLink}":"[data-avatar-delete]","{setDefaultAvatar}":"[data-avatar-default]"}},function(b){return{init:function(){b.options.id=b.element.data("id")},"{setDefaultAvatar} click":function(){EasySocial.ajax("admin/controllers/avatars/setDefault",{id:b.options.id}).done(function(a){b.parent.avatarItem().removeClass("default"),b.element.addClass("default"),b.parent.addMessage(a)})},"{deleteLink} click":function(){EasySocial.dialog({content:EasySocial.ajax("admin/views/profiles/confirmDeleteAvatar"),bindings:{"{deleteButton} click":function(c){a(c).addClass("btn-loading"),EasySocial.ajax("admin/controllers/avatars/delete",{id:b.options.id}).done(function(a){b.element.remove(),0==b.parent.avatarList().children().length&&b.parent.avatarEmpty().show(),b.parent.addMessage(a),EasySocial.dialog().close()
})}}})}}}),b.resolve()})}),EasySocial.module("uploader/uploader",function(a){var b=this;EasySocial.require().library("plupload").view("site/uploader/queue.item").script("uploader/queue").done(function(){EasySocial.Controller("Uploader",{defaults:{url:a.indexUrl+"?option=com_easysocial&controller=uploader&task=uploadTemporary&format=json&tmpl=component&"+EasySocial.token()+"=1",uploaded:[],query:"",plupload:"",dropArea:"uploaderDragDrop",extensionsAllowed:"jpg,jpeg,png,gif",temporaryUpload:!1,files:[],"{uploaderForm}":"[data-uploader-form]","{uploadButton}":"[data-uploader-browse]","{uploadArea}":".uploadArea","{queue}":"[data-uploaderQueue]","{queueItem}":"[data-uploaderQueue-item]","{emptyFiles}":"[data-uploader-empty]","{removeFile}":"[data-uploaderQueue-remove]","{uploadCounter}":".uploadCounter",view:{queueItem:"site/uploader/queue.item"}}},function(b,c){return{init:function(){b.queue().implement(EasySocial.Controller.Uploader.Queue),c.temporaryUpload&&(c.url=a.indexUrl+"?option=com_easysocial&controller=uploader&task=uploadTemporary&format=json&tmpl=component&"+EasySocial.token()+"=1"),""!=c.query&&(c.url=c.url+"&"+c.query),b.uploaderForm().implement("plupload",{settings:{url:c.url,drop_element:c.dropArea,filters:[{title:"Allowed File Type",extensions:c.extensionsAllowed}]},"{uploader}":"[data-uploader-form]","{uploadButton}":"[data-uploader-browse]"},function(){c.plupload=this.plupload
})},createFileItem:function(d){a.each(d,function(d,e){e.size=b.formatSize(e.size);var f=b.view.queueItem({file:e,temporaryUpload:b.options.temporaryUpload});a(f).implement(EasySocial.Controller.Uploader.Queue.Item,{"{uploader}":b}),c.files.push(e),b.emptyFiles().hide(),b.queue().append(f)})},formatSize:function(a){var b=parseInt(a/1024);return b},reset:function(){b.queueItem().remove()},removeItem:function(c){var d=a("#"+c),e=a(d).find("input[name=upload-id\\[\\]]").val();EasySocial.ajax("site/controllers/uploader/delete",{id:e}).done(function(){a("#"+c).remove(),b.options.plupload.removeFile(b.options.plupload.getFile(c))
})},startUpload:function(){b.upload()},upload:function(){b.options.plupload.files.length>0&&(b.options.uploading=!0,b.options.plupload.start())},hasFiles:function(){return b.options.files.length>0},"{uploaderForm} FilesAdded":function(a,d,e,f){b.createFileItem(f),c.temporaryUpload&&b.startUpload()},"{uploaderForm} UploadProgress":function(a,c,d,e){e&&b.queueItem("#"+e.id).trigger("UploadProgress",e)},"{uploaderForm} FileUploaded":function(a,c,d,e,f){b.queueItem("#"+e.id).trigger("FileUploaded",[e,f])},"{uploaderForm} UploadComplete":function(){b.options.uploading=!1
},"{uploaderForm} Error":function(a,c,d,e){b.clearMessage();var f={message:e.message,type:"error"};b.setMessage(f)},"{uploaderForm} FileError":function(a,c,d,e,f){var g={message:f.message,type:"error"};b.setMessage(g),b.queueItem("#"+e.id).trigger("FileError",[e,f])}}}),b.resolve()})}),EasySocial.module("uploader/queue",function(){var b=this;EasySocial.require().view("site/uploader/queue.item").done(function(a){EasySocial.Controller("Uploader.Queue",{defaults:{"{item}":"[data-uploaderQueue-item]"}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Uploader.Queue.Item)
}}}),EasySocial.Controller("Uploader.Queue.Item",{defaultOptions:{"{delete}":"[data-uploaderQueue-remove]","{progress}":"[data-uploaderQueue-progress]","{progressBar}":"[data-uploaderQueue-progressBar]","{status}":"[data-uploaderQueue-status]","{id}":"[data-uploaderQueue-id]"}},function(b){return{init:function(){b.uploader.options.temporaryUpload&&(b.idTemplate=b.id().toHTML(),b.id().remove())},"{delete} click":function(){b.uploader.removeItem(b.element.attr("id"))},"{self} FileUploaded":function(c,d,e,f){b.uploader.options.temporaryUpload&&a.buildHTML(b.idTemplate).val(f.id).appendTo(b.element),5==e.status&&(b.element.addClass("is-done"),b.status().html("Done"))
},"{self} UploadProgress":function(a,c,d){b.status().html(d.percent+"%"),b.progressBar().css("width",d.percent+"%")},"{self} FileError":function(){b.element.removeClass("is-done is-queue").addClass("is-error"),b.progress().removeClass("progress-danger progress-success progress-info progress-warning").addClass("progress-danger"),b.status().html("Error")}}}),b.resolve()})}),EasySocial.module("admin/profiles/fields",function(a){var b=this;EasySocial.require().library("ui/draggable","ui/sortable","ui/droppable").script("field").view("admin/profiles/fields/editor.item","admin/profiles/fields/step.item","admin/profiles/fields/editor.page","admin/profiles/fields/config","admin/profiles/fields/dialog.move").language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_ITEM_CONFIG_LOADING","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_TITLE","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_CONFIRMATION","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_CONFIRM","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_CANCEL","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_DELETING","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_TITLE","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_CONFIRMATION","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_CONFIRM","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_CANCEL","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_DELETING","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_PARAMS_CORE_UNIQUE_KEY_SAVE_FIRST","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_CONFIGURE_PAGE","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_CONFIGURE_FIELD","COM_EASYSOCIAL_FIELDS_REQUIRE_MANDATORY_FIELDS","COM_EASYSOCIAL_FIELDS_UNSAVED_CHANGES","COM_EASYSOCIAL_FIELDS_INVALID_VALUES").done(function(){var c,d,e,f,g,h={},i={},j={},k={},l={},m={pages:[],fields:[]};
EasySocial.Controller("Fields",{defaultOptions:{id:0,group:null,"{wrap}":"[data-fields-wrap]","{browser}":"[data-fields-browser]","{editor}":"[data-fields-editor]","{steps}":"[data-fields-steps]","{config}":"[data-fields-config]","{saveForm}":"[data-fields-save]",view:{config:"admin/profiles/fields/config"}}},function(b){return{init:function(){c=b,b.options.id=b.element.data("id"),d=b.addPlugin("browser"),e=b.addPlugin("editor"),f=b.addPlugin("steps");var g=[d.state,e.state,f.state];a.when.apply(null,g).done(function(){c.trigger("controllersReady")
}),a(".profileForm").on("save",function(a,c,d){var e=b.save(c);d.push(e)})},changed:!1,customFieldChanged:function(){b.changed=!0},"{window} beforeunload":function(){return b.changed?a.language("COM_EASYSOCIAL_FIELDS_UNSAVED_CHANGES"):void 0},"{saveForm} click":function(){b.save()},save:function(d){var h=a.Deferred();if(b.element.find("input,select").not(b.saveForm()).prop("disabled",!0),b.saveForm().val(""),"savecopy"===d&&(b.changed=!0),!b.changed)return h.resolve(),h;if(c.trigger("saving"),g&&g.state&&!g.checkConfig())return EasySocial.dialog({content:a.language("COM_EASYSOCIAL_FIELDS_INVALID_VALUES")}),h.reject(),h;
j=a.extend(!0,{},i);var k=[];if(a.each(f.step(),function(b,c){c=a(c);var d=e.getPage(c.data("id"));k.push(d._export())}),a._.keys(j).length>0)return c.trigger("saved",[!1]),EasySocial.dialog({content:a.language("COM_EASYSOCIAL_FIELDS_REQUIRE_MANDATORY_FIELDS")}),h.reject(),h;c.changed=!1;var l={data:k,deleted:m};return b.injectSaveData(l),h.resolve(),h},injectSaveData:function(a){a=JSON.stringify(a),b.saveForm().val(a)},updateResult:function(b){a.each(b,function(a,b){var c=f.step().eq(a),d=c.data("id"),g=e.getPage(d);
f.updateResult(a,b.id),g.updateResult(d,b)})},"{self} doneConfiguring":function(){b.element.removeClass("editting")},loadConfiguration:function(c,d){b.element.addClass("editting");var e=a(b.view.config());g=e.addController("EasySocial.Controller.Fields.Config",{controller:{item:c}}),"page"===d?c.pageHeader().append(e):c.element.append(e),b.element.trigger("loadingConfig",[d])}}}),EasySocial.Controller("Fields.Browser",{defaultOptions:{"{browser}":"[data-fields-browser]","{mandatory}":"[data-fields-browser-group-mandatory]","{unique}":"[data-fields-browser-group-unique]","{standard}":"[data-fields-browser-group-standard]","{list}":"[data-fields-browser-list]","{item}":"[data-fields-browser-item]",affixClass:"es-browser-affix"}},function(b){return{state:a.Deferred(),init:function(){b.registerApps(),b.ready(),b.affixHandler(),b.initAffix()
},ready:function(){b.state.resolve()},"{parent} controllersReady":function(){var a=f.getCurrentStep().data("id");b.initDraggable(a)},"{parent} pageChanged":function(a,c,d,e){b.item().draggable("destroy"),b.initDraggable(e)},"{parent} pageAdded":function(a,c,d,e){b.item().draggable("destroy"),b.initDraggable(e)},initDraggable:function(a){b.item().draggable({revert:"invalid",helper:"clone",connectToSortable:"[data-fields-editor-page-items-"+a+"]"})},affixHandler:function(){var c=a(window),d=b.parent.wrap(),e=d.offset().top,f=c.scrollTop();
f>e&&!b.browser().hasClass(b.options.affixClass)&&b.browser().addClass(b.options.affixClass),e>=f&&b.browser().hasClass(b.options.affixClass)&&b.browser().removeClass(b.options.affixClass)},initAffix:function(){a(window).scroll(b.affixHandler)},registerApps:function(){a.each(b.item(),function(b,c){c=a(c);var d=c.data("id");h[d]={id:d,element:c.data("element"),title:c.data("title"),params:c.data("params"),core:c.data("core"),unique:c.data("unique"),item:c},c.data("core")&&(i[d]=h[d])})},checkout:function(a){void 0!==j[a]&&delete j[a]
},"{item} click":function(a){var b=e.currentPage(),c=a.data("id");b.addNewField(c)},"{parent} fieldAdded":function(a,c,d){var e=h[d];if(e&&e.core){e.item.hide();var f=b.mandatory().find(b.item.selector).filter(":visible");b.mandatory().toggle(f.length>0)}if(e&&e.unique){e.item.hide();var f=b.unique().find(b.item.selector).filter(":visible");b.unique().toggle(f.length>0)}},"{parent} fieldDeleted":function(a,c,d){var f=h[d];return f&&f.core?(f.item.show(),b.mandatory().show(),void 0):f&&f.unique?(f.item.show(),b.unique().show(),void 0):void 0
}}}),EasySocial.Controller("Fields.Config",{defaultOptions:{"{config}":"[data-fields-config]","{header}":"[data-fields-config-header]","{close}":"[data-fields-config-close]","{form}":"[data-fields-config-form]","{param}":"[data-fields-config-param]","{tabnav}":"[data-fields-config-tab-nav]","{tabcontent}":"[data-fields-config-tab-content]","{done}":"[data-fields-config-done]"}},function(b){return{init:function(){},state:!1,load:function(d){if(b.state=!0,d.find("[data-fields-config-param-choices]").addController("EasySocial.Controller.Config.Choices",{controller:{item:b.item}}),d.find("h4").hide(),b.header().html(d.find("h4").html()),b.form().html(d),b.item.options.newfield&&b.param("[data-fields-config-param-field-unique_key]").attr("disabled",!0).val(a.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_PARAMS_CORE_UNIQUE_KEY_SAVE_FIRST")),b.tabnav().length>0){var e=b.tabnav().find('a[data-tabname="core"]');
e.length>0?e.tab("show"):b.tabnav().find("a:first").tab("show")}b.populateConfig();var f=b.element.height();c.wrap().css("padding-bottom",f+"px"),c.trigger("configLoaded")},"{close} click":function(){b.closeConfig()},"{done} click":function(){b.closeConfig()},closeConfig:function(){var d=b.populateConfig(),e=b.checkConfig(d);e?(b.item.updateHtml(b.form().html()),b.item.content().trigger("onConfigSave",[d]),b.element.remove(),g=null,c.trigger("doneConfiguring")):EasySocial.dialog({content:a.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_INVALID_VALUES"),width:400,height:100})
},"{parent} loadingConfig":function(c,d,e){if(void 0!==e&&"field"!=e){var f=a.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_CONFIGURE_"+e.toUpperCase());b.header().html(f)}b.config().show(),b.close().hide(),b.form().html(a.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_ITEM_CONFIG_LOADING"))},"{parent} configLoaded":function(){b.close().show()},"{param} change":function(a){b.paramChanged(a)},"{param} keyup":function(a){b.paramChanged(a)},paramChanged:function(a){var d=a.data("name"),e=b.getConfigValue(d),f=b.item.appParams[d];
"boolean"===f.type&&(e=!!e),b.item.fieldItem().trigger("onConfigChange",[d,e]),c.customFieldChanged()},getConfigValue:function(c){var d=b.item.appParams[c],e=b.param().filterBy("name",c);if(0===e.length)return void 0;var f="";switch(d.type){case"choices":f=[],a.each(e.find("li"),function(b,c){c=a(c);var d=c.find("[data-fields-config-param-choice-title]"),e=c.find("[data-fields-config-param-choice-value]"),g=c.find("[data-fields-config-param-choice-default]");f.push({id:c.data("id"),title:d.val(),value:e.val(),"default":g.val()}),d.attr("value",d.val()),e.attr("value",e.val()),g.attr("value",g.val())
});break;case"boolean":var g=e.val();f="true"===g||"1"===g||1===g?1:0,e.attr("value",f);break;case"checkbox":f=[],a.each(d.option,function(a,b){var c=e.filter("[data-fields-config-param-option-"+b.value+"]");c.length>0&&c.is(":checked")?(f.push(b.value),c.attr("checked","checked")):c.removeAttr("checked")});break;case"list":case"select":case"dropdown":f=e.length>0?e.val():d["default"]||"",e.find("option").prop("selected",!1),e.find('option[value="'+f+'"]').prop("selected",!0);break;case"input":case"text":default:f=e.length>0?e.val():d["default"]||"",e.attr("value",f)
}return f},populateConfig:function(){var c={};return a.each(b.item.appParams,function(a){var e=b.getConfigValue(a);return void 0===e?!1:(c[a]=e,void 0)}),b.item.trigger("onPopulateConfig",[c]),c},checkConfig:function(c){void 0===c&&(c=b.populateConfig());var d=!0;return a.each(c,function(c,e){var f=b.item.appParams[c];switch(f.type){case"choices":var g=[];a.each(e,function(b,c){return a.isEmpty(c.value)&&!a.isEmpty(c.title)&&(c.value=c.title.toLowerCase().replace(" ","")),!a.isEmpty(c.value)&&a.inArray(c.value,g)>-1?(d=!1,!1):(g.push(c.value),void 0)
})}return d===!1?!1:void 0}),d},"{parent} fieldDeleted":function(){b.state&&c.trigger("doneConfiguring")},"{parent} pageDeleted":function(){b.state&&c.trigger("doneConfiguring")},"{parent} pageAdded":function(){b.state&&c.trigger("doneConfiguring")},"{parent} pageChanged":function(){b.state&&c.trigger("doneConfiguring")}}}),EasySocial.Controller("Fields.Steps",{defaultOptions:{"{steps}":"[data-fields-step]","{step}":"[data-fields-step-item]","{stepLink}":"[data-fields-step-item-link]","{add}":"[data-fields-step-add]",view:{stepItem:"admin/profiles/fields/step.item"}}},function(b){return{state:a.Deferred(),init:function(){b.ready()
},ready:function(){b.state.resolve()},"{parent} controllersReady":function(){b.initSort()},initSort:function(){b.steps().sortable({items:b.step.selector,placeholder:"ui-state-highlight",cursor:"move",helper:"clone",forceHelperSize:!0,stop:function(){a(".tooltip-es").remove(),c.customFieldChanged()}})},"{parent} pageDeleted":function(a,c,d){b.deleteStep(d),f.step().length>0&&f.stepLink(":first").tab("show")},"{step} click":function(a){if(!a.hasClass("active")){var d=a.data("id");c.trigger("pageChanged",[e.getPage(d),d])
}},"{add} click":function(){var c=a.uid("step");b.addStep(c),e.addPage(c),b.stepLink(":last").tab("show")},addStep:function(a){b.add().before(b.view.stepItem({uid:a}))},getStep:function(a){return b.step().filterBy("id",a)},getStepLink:function(a){return b.stepLink().filterBy("id",a)},deleteStep:function(a){b.getStep(a).remove()},getCurrentStep:function(){return b.step(".active")},currentStepIndex:function(){return b.step().index(b.step(".active"))+1},updateResult:function(a,c){var d=b.step(":eq("+a+")");if(d.data("id")!=c){var e=d.data("id");
d.removeAttr("data-fields-step-item-"+e),d.attr("data-fields-step-item-"+c,!0),d.data("id",c),d.attr("data-id",c);var f=b.stepLink().eq(a);f.removeAttr("data-fields-step-item-link-"+e),f.attr("data-fields-step-item-link-"+c,!0),f.attr("href","#formStep_"+c)}},toObject:function(){var c=[];return a.each(b.stepLink(),function(b,d){d=a(d),c.push({uid:d.data("id"),title:d.text(),description:d.attr("data-original-title")})}),c}}}),EasySocial.Controller("Fields.Editor",{defaultOptions:{"{editor}":"[data-fields-editor]","{page}":"[data-fields-editor-page]","{items}":"[data-fields-editor-page-items]","{item}":"[data-fields-editor-page-item]",view:{editorPage:"admin/profiles/fields/editor.page"}}},function(b){return{state:a.Deferred(),init:function(){b.ready()
},ready:function(){b.state.resolve()},"{parent} controllersReady":function(){b.page().addController("EasySocial.Controller.Fields.Editor.Page")},currentPage:function(){return b.page(".active").controller()},addPage:function(a){var d=b.view.editorPage({uid:a});d.addController("EasySocial.Controller.Fields.Editor.Page",{uid:a,newpage:!0}),b.editor().append(d),b.page().trigger("pageAdded",[d,a]),c.customFieldChanged()},getPage:function(a){return b.page().filterBy("id",a).controller()},"{parent} saving":function(){b.element.addClass("saving")
},"{parent} saved":function(a,c,d){b.element.removeClass("saving")}}}),EasySocial.Controller("Fields.Editor.Page",{defaultOptions:{pageid:0,uid:0,newpage:!1,"{items}":"[data-fields-editor-page-items]","{item}":"[data-fields-editor-page-item]","{pageHeader}":"[data-fields-editor-page-header]","{content}":"[data-fields-editor-page-header]","{fieldItem}":"[data-fields-editor-page-header]","{pageTitle}":"[data-fields-editor-page-title]","{pageDescription}":"[data-fields-editor-page-description]","{inputTitle}":"[data-fields-editor-page-title-input]","{inputDescription}":"[data-fields-editor-page-description-input]","{pageVisibleRegistration}":"[data-fields-editor-page-visible-registration]","{pageVisibleEdit}":"[data-fields-editor-page-visible-edit]","{pageVisibleView}":"[data-fields-editor-page-visible-view]","{pageDelete}":"[data-fields-editor-page-delete]","{pageEdit}":"[data-fields-editor-page-edit]","{pageInfo}":"[data-fields-editor-page-info]","{pageInfoDone}":"[data-fields-editor-page-done]",view:{editorItem:"admin/profiles/fields/editor.item"}}},function(b){return{init:function(){b.options.newpage||(b.options.uid=b.options.pageid=b.element.data("id")),b.registerPage(),b.item().addController("EasySocial.Controller.Fields.Editor.Item",{pageid:b.options.uid}),b.checkPageDeleteButton(),b.initSort()
},fields:{},getStep:function(){return f.getStep(b.options.uid)},registerPage:function(){l[b.options.uid]=b},initSort:function(){b.items().sortable({items:b.item.selector,handle:"[data-fields-editor-page-item-handle]",placeholder:"ui-state-highlight",cursor:"move",helper:"clone",forceHelperSize:!0,stop:function(a,e){if(e.item.is(d.item.selector)){var f=e.item.data("id"),g=b.createPlaceholder();e.item.replaceWith(g),b.createNewField(f,g)}c.customFieldChanged()}})},addNewField:function(d){var e=b.createPlaceholder();
b.items().append(e),a.scrollTo(e,200),b.createNewField(d,e),c.customFieldChanged()},createPlaceholder:function(){var c=a.uid("newfield"),d=b.view.editorItem({uid:c});return d},createNewField:function(d,e){c.trigger("fieldAdded",[d]),b.getFieldHtml(d).done(function(c){c=a.parseHTML(c,document,!0),c=a(c),e.replaceWith(c);var f=c.filter('[data-appid="'+d+'"]');f.addController("EasySocial.Controller.Fields.Editor.Item",{controller:{page:b},appid:d,pageid:b.options.uid,newfield:!0})}).fail(function(a){e.html(a)})
},getFieldHtml:function(b){var d=a.Deferred();return void 0===h[b].html?EasySocial.ajax("admin/controllers/fields/renderSample",{appid:b,profileid:c.options.id,group:c.options.group}).done(function(a){h[b].html=a,d.resolve(a)}).fail(function(a){d.reject(a)}):d.resolve(h[b].html),d},"{pageHeader} click":function(c,d){var e=a(d.target);if(e.not("[data-fields-editor-page-delete]")&&!c.hasClass("editting")){if(g&&g.state){var f=g.checkConfig();if(!f)return EasySocial.dialog({content:a.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_INVALID_VALUES"),width:400,height:100}),void 0;
g.closeConfig()}b.loadConfiguration()}},loadConfiguration:function(){c.loadConfiguration(b,"page"),b.pageHeader().addClass("editting"),b.getPageConfig().done(function(){var c=a(b.html);g.load(c)}).fail(function(a){g.load(a)})},updateHtml:function(a){b.html=a},getPageConfig:function(){var c=a.Deferred();return a.isEmptyObject(b.params)?EasySocial.ajax("admin/controllers/fields/renderPageConfig",{pageid:b.options.pageid}).done(function(a,d,e){b.params=a,b.values=d,b.html=e,b.appParams=a,c.resolve()}).fail(function(a){c.reject(a)
}):c.resolve(),c},getConfigValues:function(){return b.values},"{fieldItem} onConfigChange":function(a,d,e,g){b.values[e]=g;var h=f.getStepLink(b.options.uid);"title"===e&&(h.text(g),b.pageTitle().html(g)),"description"===e&&(h.attr("data-original-title",g),b.pageDescription().html(g)),c.customFieldChanged()},"{pageDelete} click":function(c){if(c.enabled()){if(c.disabled(!0),1==e.page().length)return c.enabled(!0),!1;EasySocial.dialog({width:400,height:150,title:a.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_TITLE"),content:a.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_CONFIRMATION"),showOverlay:!1,buttons:[{name:a.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_CANCEL"),classNames:"btn btn-es",click:function(){c.enabled(!0),EasySocial.dialog().close()
}},{name:a.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_CONFIRM"),classNames:"btn btn-es-danger",click:function(){EasySocial.dialog().update({content:a.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_DELETING")}),b.deletePage(),EasySocial.dialog().close()}}]})}},deletePage:function(){b.item().trigger("pageDeleted"),c.trigger("pageDeleted",[b.options.uid]),delete l[b.options.uid],b.options.newpage||m.pages.push(b.options.uid),b.element.remove(),a.each(e.page(),function(b,c){a(c).controller().checkPageDeleteButton()
}),c.customFieldChanged()},_export:function(){var c=[];a.each(b.item(),function(b,d){d=a(d).controller(),void 0!==d&&c.push(d._export())});var d={fields:c,newpage:b.options.newpage,id:b.options.uid};if(void 0!==b.values)var d=a.extend(d,b.values);return d},updateResult:function(c,d){b.options.newpage&&(b.element.attr("id","formStep_"+d.id),b.element.removeAttr("data-fields-editor-page-"+c),b.element.attr("data-fields-editor-page-"+d.id,!0),b.options.pageid=b.options.uid=d.id,l[d.id]=a.extend(!0,{},l[c]),delete l[c],b.options.newpage=!1),void 0!==d.fields&&a.each(d.fields,function(a,c){var d=b.item().eq(a).controller();
d.updateResult(c)})},"{self} pageAdded":function(){b.checkPageDeleteButton(),c.customFieldChanged()},checkPageDeleteButton:function(){e.page().length>1?b.pageDelete().show():b.pageDelete().hide()},"{parent} loadingConfig":function(){b.pageHeader().removeClass("editting"),b.item().removeClass("editting")},"{parent} doneConfiguring":function(){b.pageHeader().removeClass("editting"),b.item().removeClass("editting")}}}),EasySocial.Controller("Fields.Editor.Item",{defaultOptions:{appid:0,fieldid:0,pageid:0,newfield:!1,"{edit}":"[data-fields-editor-page-item-edit]","{deleteButton}":"[data-fields-editor-page-item-delete]","{moveButton}":"[data-fields-editor-page-item-move]","{content}":"[data-fields-editor-page-item-content]","{fieldItem}":"[data-field]","{config}":"[data-fields-config]","{closeConfig}":"[data-fields-config-close]",view:{moveDialog:"admin/profiles/fields/dialog.move"}}},function(b){return{app:{},field:{id:0,appid:0,params:{}},state:a.Deferred(),appParams:{},init:function(){0==b.options.appid&&void 0!==b.element.data("appid")&&(b.options.appid=b.element.data("appid")),void 0!==h[b.options.appid]&&(b.app=h[b.options.appid]),0==b.options.fieldid&&void 0!==b.element.data("id")&&(b.options.fieldid=b.element.data("id")),b.registerFields(),b.uniqueid=a.uid(b.app.id+"_"),b.loadedInit()
},registerFields:function(){0!=b.options.fieldid&&(k[b.options.fieldid]={id:b.options.fieldid,appid:b.options.appid,params:b.field.params||{}},b.field=k[b.options.fieldid])},loadedInit:function(){b.element.addController("EasySocial.Controller.Field.Base",{mode:"sample",element:b.app.element}),b.content().addController("EasySocial.Controller.Fields.Editor.Item.Config")},_export:function(){d.checkout(b.options.appid);var c={fieldid:b.options.fieldid,appid:b.options.appid,newfield:b.options.newfield};return c=a.extend(c,b.expandConfig(b.field.params))
},"{self} click":function(c,d){var e=a(d.target);if(!(e.is(b.deleteButton.selector)||e.is(b.moveButton.selector)||e.is(b.config.selector)||e.is(b.closeConfig.selector)||c.hasClass("editting"))){if(g&&g.state){var f=g.checkConfig();if(!f)return EasySocial.dialog({content:a.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_INVALID_VALUES"),width:400,height:100}),void 0;g.closeConfig()}b.loadConfiguration()}},loadConfiguration:function(){c.loadConfiguration(b,"field"),b.element.addClass("editting"),b.getAppParams().done(function(){var c=a(b.field.html);
g.load(c)}).fail(function(){})},updateHtml:function(a){b.field.html=a},getAppParams:function(){var c=a.Deferred();return b.field.html?c.resolve():EasySocial.ajax("admin/controllers/fields/renderConfiguration",{appid:b.options.appid,fieldid:b.options.fieldid}).done(function(a,d,e){b.app.params=a,b.field.params=d,b.field.html=e,b.populateAppParams(),c.resolve()}).fail(function(a){c.reject(a)}),c},populateAppParams:function(){a.each(b.app.params,function(c,d){a.each(d.fields,function(c,d){d.subfields?a.each(d.subfields,function(a,d){b.appParams[c+"_"+a]=d
}):b.appParams[c]=d})})},getConfigValues:function(){return b.field.params},expandConfig:function(){var c={params:{},choices:{}};return a.each(b.field.params,function(a,d){var e=b.appParams[a];if(!e)return!1;var f="choices"==e.type?"choices":"params";c[f][a]=d}),b.options.newfield&&(c.params.unique_key=""),c},"{moveButton} click":function(d){var g=f.toObject(),h=d.parents(e.page.selector).data("id"),i=[];a.each(g,function(a,b){b.uid!=h&&i.push(b)}),EasySocial.dialog({content:b.view.moveDialog(!0,{pages:i}),selectors:{"{selection}":"[data-move-selection]","{confirmButton}":"[data-move-confirm]","{cancelButton}":"[data-move-cancel]"},bindings:{"{cancelButton} click":function(){EasySocial.dialog().close()
},"{confirmButton} click":function(){var a=this.selection().val(),d=e.getPage(a);d.items().append(b.element),c.customFieldChanged(),EasySocial.dialog().close()}}})},"{deleteButton} click":function(c){c.enabled()&&(c.disabled(!0),EasySocial.dialog({width:400,height:150,title:a.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_TITLE"),content:a.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_CONFIRMATION"),showOverlay:!1,buttons:[{name:a.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_CANCEL"),classNames:"btn btn-es btn-sm",click:function(){c.enabled(!0),EasySocial.dialog().close()
}},{name:a.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_CONFIRM"),classNames:"btn btn-es-danger btn-sm",click:function(){EasySocial.dialog().update({content:a.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_DELETING")}),b.deleteField(),EasySocial.dialog().close()}}]}))},deleteField:function(){c.trigger("fieldDeleted",[b.options.appid,b.options.fieldid]),b.options.newfield||(delete k[b.options.fieldid],m.fields.push(b.options.fieldid)),b.element.remove(),c.customFieldChanged()
},"{self} pageDeleted":function(){b.deleteField()},"{content} onConfigChange":function(a,c,d,e){b.field.params[d]=e},"{self} onPopulateConfig":function(a,c,d){b.field.params=d},updateResult:function(c){b.field.params.unique_key=c.unique_key,b.itemParam("[data-fields-config-param-field-unique_key]").val(c.unique_key),b.options.newfield&&(b.options.newfield=!1,b.options.fieldid=c.fieldid,b.element.data("id",c.fieldid),b.itemParam("[data-fields-editor-page-item-param-field-unique_key]").removeAttr("disabled"),b.registerFields()),void 0!==c.choices&&a.each(c.choices,function(c,d){var e=b.itemParam("[data-fields-config-param-field-"+c+"]");
a.each(d,function(a,b){var c=e.find("li").eq(a);c.data("id")||(c.attr("data-id",b.id),c.data("id",b.id))})})}}}),EasySocial.Controller("Config.Choices",{defaultOptions:{"{choiceItems}":"[data-fields-config-param-choice]",unique:1}},function(b){return{init:function(){b.options.unique=void 0!==b.element.data("unique")?b.element.data("unique"):1,b.choiceItems().implement(EasySocial.Controller.Config.Choices.Choice,{controller:{item:b.item,choices:b}}),b.initSortable()},initSortable:function(){b.element.sortable({items:b.choiceItems.selector,placeholder:"ui-state-highlight",cursor:"move",forceHelperSize:!0,handle:"[data-fields-config-param-choice-drag]",stop:function(){a(".tooltip-es").remove(),c.customFieldChanged()
}})}}}),EasySocial.Controller("Config.Choices.Choice",{defaultOptions:{"{choiceValue}":"[data-fields-config-param-choice-value]","{choiceTitle}":"[data-fields-config-param-choice-title]","{choiceDefault}":"[data-fields-config-param-choice-default]","{addChoice}":"[data-fields-config-param-choice-add]","{removeChoice}":"[data-fields-config-param-choice-remove]","{setDefault}":"[data-fields-config-param-choice-setdefault]","{defaultIcon}":"[data-fields-config-param-choice-defaulticon]"}},function(b){return{init:function(){},"{choiceTitle} keyup":a._.debounce(function(a){var e=b.element.index();
b.item.fieldItem().trigger("onChoiceTitleChanged",[e,a.val()]),c.customFieldChanged()},500),"{choiceValue} keyup":a._.debounce(function(a){var e=b.element.index();b.item.fieldItem().trigger("onChoiceValueChanged",[e,a.val()]),c.customFieldChanged()},500),"{addChoice} click":function(){var a=b.element.clone(),d=a.find('input[type="text"]');d.attr("value",""),d.val("");var e=a.find('input[type="hidden"]');e.attr("value",0),e.val(0);var f=a.find("[data-fields-config-param-choice-defaulticon]");f.removeClass("es-state-featured").addClass("es-state-default"),a.attr("data-id",0),a.data("id",0),a.implement(EasySocial.Controller.Config.Choices.Choice,{controller:{item:b.item,choices:b.choices}}),b.element.after(a);
var g=a.index();b.item.fieldItem().trigger("onChoiceAdded",[g]),c.customFieldChanged()},"{removeChoice} click":function(){var d=b.choices.choiceItems().length-1;if(d>=1){var e=b.element.index();b.item.fieldItem().trigger("onChoiceRemoved",[e]),b.element.remove(),a(".tooltip-es").remove()}c.customFieldChanged()},"{setDefault} click":function(){{var a=b.element.index();b.choiceTitle().val(),b.choiceValue().val()}b.choices.choiceItems().trigger("toggleDefault",[a]),b.item.fieldItem().trigger("onChoiceToggleDefault",[a,parseInt(b.choiceDefault().val())]),c.customFieldChanged()
},"{self} toggleDefault":function(a,c,d){var e=b.element.index(),f=parseInt(b.choiceDefault().val());e===d?f?(b.defaultIcon().removeClass("es-state-featured").addClass("es-state-default"),b.choiceDefault().val(0)):(b.defaultIcon().removeClass("es-state-default").addClass("es-state-featured"),b.choiceDefault().val(1)):b.choices.options.unique&&(b.defaultIcon().removeClass("es-state-featured").addClass("es-state-default"),b.choiceDefault().val(0))}}}),EasySocial.Controller("Fields.Editor.Item.Config",{defaultOptions:{"{required}":"[data-required]","{title}":"[data-title]","{description}":"[data-description]","{displayTitle}":"[data-display-title]","{displayDescription}":"[data-display-description]"}},function(a){return{init:function(){},"{self} onConfigChange":function(b,c,d,e){switch(d){case"display_title":a.displayTitle().toggle(!!e);
break;case"title":a.title().text(e);break;case"display_description":a.displayDescription().toggle(!!e);break;case"description":a.description().text(e);break;case"required":a.required().toggle(!!e)}}}}),b.resolve()})}),EasySocial.module("field",function(a){var b=this;EasySocial.Controller("Field.Base",{defaultOptions:{regPrefix:"easysocial/",modPrefix:"field.",ctrlPrefix:"EasySocial.Controller.Field.",fieldname:"",element:null,id:null,required:!1,mode:"edit","{field}":"[data-field]","{content}":"[data-content]","{notice}":"[data-check-notice]"}},function(b){return{init:function(){b.options.fieldname=b.element.data("fieldname"),b.options.element=b.options.element||b.element.data("element"),b.options.id=b.element.data("id"),b.options.required=!!b.element.data("required"),b.initMode(),b.notice().text().trim().length>0&&(b.content().popover({animation:!1,content:b.notice().text().trim(),html:!0,placement:"left-top",trigger:"manual",container:"body",template:'<div id="fd" class="fd-popover es es-field-error"><div class="arrow"></div><h3 class="fd-popover-title"></h3><div class="fd-popover-content"></div></div>'}),b.content().popover("show"))
},initMode:function(){switch(b.options.mode){case"registermini":b.field().trigger("onRegisterMini");break;case"register":b.field().trigger("onRegister");break;case"edit":b.field().trigger("onEdit");break;case"adminedit":b.field().trigger("onAdminEdit");break;case"sample":b.field().trigger("onSample");break;case"display":b.field().trigger("onDisplay")}},"{field} error":function(c,d,e,f){e=void 0!==e?e:!0,a.isString(e)&&(f=e,e=!0),a.isBoolean(e)&&b.field().toggleClass("has-error",e),void 0!==f&&(b.content().popover({animation:!1,content:f,html:!0,placement:"left-top",trigger:"manual",container:"body",template:'<div id="fd" class="fd-popover es es-field-error"><div class="arrow"></div><h3 class="fd-popover-title"></h3><div class="fd-popover-content"></div></div>'}),b.content().popover("show"))
},"{field} clear":function(){b.field().removeClass("has-error"),b.field().removeClass("is-loading"),b.content().popover("destroy")},"{self} show":function(){b.field().trigger("onShow")},"{field} loading":function(a,c,d){b.field().addClass("is-loading"),b.notice().html(d)},"{field} loaded":function(){b.field().removeClass("is-loading")}}}),b.resolve()}),EasySocial.module("admin/profiles/form",function(){var b=this;EasySocial.require().script("utilities/alias").done(function(a){EasySocial.Controller("Profiles.Profile",{defaultOptions:{id:null,hasAvatar:!1,defaultAvatar:null,"{profileAvatar}":"[data-profile-avatar]","{profileAvatarImage}":"[data-profile-avatar-image]","{profileAvatarRemoveWrap}":"[data-profile-avatar-remove-wrap]","{profileAvatarRemoveButton}":"[data-profile-avatar-remove-button]","{profileAvatarUpload}":"[data-profile-avatar-upload]"}},function(b){return{init:function(){b.element.addController("EasySocial.Controller.Utilities.Alias",{"{source}":"#title","{target}":"#alias"}),b.options.hasAvatar=b.profileAvatar().data("hasavatar"),b.options.defaultAvatar=b.profileAvatar().data("defaultavatar")
},"{profileAvatarUpload} change":function(c){var d=c.val();a.isEmpty(d)?b.options.hasAvatar||b.profileAvatarRemoveWrap().hide():b.profileAvatarRemoveWrap().show()},"{profileAvatarRemoveButton} click":function(){return b.options.hasAvatar?(EasySocial.dialog({content:EasySocial.ajax("admin/views/profiles/confirmRemoveProfileAvatar"),bindings:{"{deleteButton} click":function(){EasySocial.ajax("admin/controllers/profiles/deleteProfileAvatar",{id:b.options.id}).done(function(){b.profileAvatarImage().attr("src",b.options.defaultAvatar),b.profileAvatarRemoveWrap().hide(),b.options.hasAvatar=!1,EasySocial.dialog().close()
})}}}),void 0):(b.profileAvatarUpload().val("").trigger("change"),void 0)}}}),b.resolve()})}),EasySocial.module("utilities/alias",function(){var b=this;EasySocial.Controller("Utilities.Alias",{defaultOptions:{"{target}":"","{source}":""}},function(a){return{init:function(){},convertToPermalink:function(a){return a.replace(/\s/g,"-").replace(/[^\w/-]/g,"").toLowerCase()},"{source} keyup":function(){var d=a.convertToPermalink(a.source().val());a.target().val(d)},"{target} keyup":function(){var d=a.convertToPermalink(a.target().val());
a.target().val(d)}}}),b.resolve()}),EasySocial.module("admin/profiles/members",function(){var b=this;EasySocial.require().language("COM_EASYSOCIAL_CANCEL_BUTTON","COM_EASYSOCIAL_ASSIGN_BUTTON","COM_EASYSOCIAL_PROFILES_ASSIGN_USER_DIALOG_TITLE").done(function(a){EasySocial.Controller("Profiles.Members",{defaultOptions:{"{addUser}":"[data-profiles-addUser]","{row}":"[data-profiles-members-row]"}},function(b){return{init:function(){b.options.id=b.element.data("id")},"{memberList} userSelected":function(a,c,d){EasySocial.ajax("admin/controllers/profiles/insertMember",{id:d,profile_id:b.options.id}).done(function(a){b.row().append(a),EasySocial.dialog().close()
})},"{addUser} click":function(){var c=a.callback(function(a){b.addPlugin("memberList",a)}),d=a.indexUrl+"?option=com_easysocial&view=users&tmpl=component&callback="+c;EasySocial.dialog({title:a.language("COM_EASYSOCIAL_PROFILES_ASSIGN_USER_DIALOG_TITLE"),content:d,showOverlay:!1,width:700,height:600,buttons:[{name:a.language("COM_EASYSOCIAL_CANCEL_BUTTON"),classNames:"btn btn-es",click:function(){EasySocial.dialog().close()}}]})}}}),b.resolve()})}),EasySocial.module("admin/profiles/profile",function(){var b=this;
EasySocial.require().script("utilities/alias").view("admin/profiles/dialog.delete.profileavatar").language("COM_EASYSOCIAL_PROFILES_FORM_CLEAR_AVATAR").done(function(a){EasySocial.Controller("Profiles.Profile",{defaultOptions:{id:null,hasAvatar:!1,defaultAvatar:null,"{profileAvatar}":"[data-profile-avatar]","{profileAvatarImage}":"[data-profile-avatar-image]","{profileAvatarRemoveWrap}":"[data-profile-avatar-remove-wrap]","{profileAvatarRemoveButton}":"[data-profile-avatar-remove-button]","{profileAvatarUpload}":"[data-profile-avatar-upload]",view:{deleteProfileAvatar:"admin/profiles/dialog.delete.profileavatar"}}},function(b){return{init:function(){b.element.addController("EasySocial.Controller.Utilities.Alias",{"{source}":"#title","{target}":"#alias"}),b.options.hasAvatar=b.profileAvatar().data("hasavatar"),b.options.defaultAvatar=b.profileAvatar().data("defaultavatar")
},"{profileAvatarUpload} change":function(c){var d=c.val();a.isEmpty(d)?b.options.hasAvatar||b.profileAvatarRemoveWrap().hide():b.profileAvatarRemoveWrap().show()},"{profileAvatarRemoveButton} click":function(){b.options.hasAvatar?EasySocial.dialog({content:b.view.deleteProfileAvatar(!0),bindings:{"{deleteButton} click":function(){var c=this.parent;c.loading(!0),EasySocial.ajax("admin/controllers/profiles/deleteProfileAvatar",{id:b.options.id}).done(function(){c.loading(!1),c.close(),b.profileAvatarImage().attr("src",b.options.defaultAvatar),b.profileAvatarRemoveWrap().hide(),b.profileAvatarRemoveButton().text(a.language("COM_EASYSOCIAL_PROFILES_FORM_CLEAR_AVATAR")),b.options.hasAvatar=!1
})}}}):b.profileAvatarUpload().val("").trigger("change")}}}),b.resolve()})}),EasySocial.module("admin/profiles/profiles",function(){var b=this;EasySocial.require().done(function(a){EasySocial.Controller("Profiles",{defaultOptions:{"{updateOrdering}":"[data-profiles-update-ordering]","{item}":"[data-profiles-item]",view:{deleteConfirmation:"admin/profiles/dialog.delete.confirm"}}},function(b){return{init:function(){b.item().implement(EasySocial.Controller.Profiles.Item)},"{updateOrdering} click":function(){a("[data-table-checkall]").prop("checked",!0).trigger("change"),a.Joomla("submitform",["updateOrdering"])
}}}),EasySocial.Controller("Profiles.Item",{defaultOptions:{"{insertLink}":"[data-profile-insert]"}},function(a){return{init:function(){a.options.title=a.element.data("title"),a.options.id=a.element.data("id")},"{insertLink} click":function(){a.trigger("profileSelected",[a.options.id,a.options.title])}}}),b.resolve()})}),EasySocial.module("admin/regions/form",function(a){var b=this;EasySocial.require().language("COM_EASYSOCIAL_REGIONS_FORM_INCOMPLETE").done(function(){a.template("easysocial/parents.select",'<select name="parent_uid" data-parent-uid></select>'),a.template("easysocial/parents.option",'<option value="[%= uid %]">[%= name %]</option>'),EasySocial.Controller("Regions.Form",{defaultOptions:{"{type}":"[data-type]","{parentBase}":"[data-parent-base]","{parentContent}":"[data-parent-content]","{parentUid}":"[data-parent-uid]","{parentType}":"[data-parent-type]",view:{parentsSelect:"parents.select",parentsOption:"parents.option"}}},function(b){return{init:function(){b.element.find('input[type="text"]').prop("disabled",!b.type().val()),b.element.find('[data-bs-toggle="radio-buttons"]').toggleClass("disabled",!b.type().val()),a.Joomla("submitbutton",function(c){return"cancel"==c?(window.location="index.php?option=com_easysocial&view=regions",!1):(b.validate()?a.Joomla("submitform",[c]):alert(a.language("COM_EASYSOCIAL_REGIONS_FORM_INCOMPLETE")),void 0)
})},"{type} change":function(c){var d=c.find(":selected").data("parent");b.parentType().val(d),b.element.find('input[type="text"]').prop("disabled",!c.val()),b.element.find('[data-bs-toggle="radio-buttons"]').toggleClass("disabled",!c.val()),d?(b.parentBase().show(),!b.parentContent().data("loaded")&&b.getParents(d).done(function(c){var d=a(b.view.parentsSelect());a.each(c,function(a,c){b.view.parentsOption({uid:c.uid,name:c.name}).appendTo(d)}),b.parentContent().html(d)})):b.parentBase().hide()},getParents:a.memoize(function(a){return EasySocial.ajax("admin/controllers/regions/getParents",{type:a})
}),validate:function(){return b.type().val()&&b.element.find('input[name="name"]').val()&&b.element.find('input[name="code"]').val()}}}),b.resolve()})}),EasySocial.module("admin/regions/init",function(a){var b=this;EasySocial.Controller("Region.Init",{defaultOptions:{callback:function(){},"{startButton}":"[data-start]","{table}":"[data-table]","{tableBody}":"[data-table-body]","{row}":"[data-table-row]"}},function(b){return{init:function(){b.row().addController("EasySocial.Controller.Region.Init.Row")},"{startButton} click":function(c){c.hide(),b.table().show(),b.counter=0,b.progress=a.Deferred().done(function(){b.options.callback()
}),b.process()},process:function(){var a=b.row().eq(b.counter);return 0===a.length?b.progress.resolve():(a.show(),EasySocial.ajax("admin/controllers/regions/initialise",{key:a.data("key")}).done(function(){a.trigger("updateStatus",[1]),b.counter++,b.process()}),void 0)}}}),EasySocial.Controller("Region.Init.Row",{defaultOptions:{"{title}":"[data-row-title]","{status}":"[data-row-status]","{icon}":"[data-row-icon]"}},function(a){return{init:function(){},statuses:["label-danger","label-success","label-warning"],icons:["fa-exclamation-triangle","fa-check","fa-wrench"],"{self} updateStatus":function(b,c,d){var e=a.status(),f=a.icon();
for(i=0;3>i;i++)e.toggleClass(a.statuses[i],d==i),f.toggleClass(a.icons[i],d==i)}}}),b.resolve()}),EasySocial.module("admin/reports/reporters",function(){var b=this;EasySocial.Controller("Reports.Reporters",{defaultOptions:{"{item}":"[data-reporters-item]"}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Reports.Reporters.Item,{"{parent}":a})}}}),EasySocial.Controller("Reports.Reporters.Item",{defaultOptions:{"{removeItem}":"[data-remove-item]"}},function(a){return{init:function(){a.options.id=a.element.data("id")
},"{removeItem} click":function(){a.parent.clearMessage(),EasySocial.ajax("admin/controllers/reports/removeItem",{id:a.options.id}).done(function(b){a.parent.setMessage(b.message,b.type),a.element.remove()})}}}),b.resolve()}),EasySocial.module("admin/reports/reports",function(){var b=this;EasySocial.require().language("COM_EASYSOCIAL_CANCEL_BUTTON","COM_EASYSOCIAL_CLOSE_BUTTON","COM_EASYSOCIAL_REPORTS_VIEW_REPORTS_DIALOG_TITLE","COM_EASYSOCIAL_REPORTS_ACTIONS_DIALOG_TITLE").done(function(a){EasySocial.Controller("Reports",{defaultOptions:{"{item}":"[data-reports-item]"}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Reports.Item)
}}}),EasySocial.Controller("Reports.Item",{defaultOptions:{"{action}":"[data-reports-item-view-actions]","{viewReports}":"[data-reports-item-view-reports]"}},function(b){return{init:function(){b.options.id=b.element.data("id"),b.options.extension=b.element.data("extension"),b.options.uid=b.element.data("uid"),b.options.type=b.element.data("type")},"{viewReports} click":function(){EasySocial.dialog({title:a.language("COM_EASYSOCIAL_REPORTS_VIEW_REPORTS_DIALOG_TITLE"),content:EasySocial.ajax("admin/controllers/reports/getReporters",{id:b.options.id}),width:600,height:450})
},"{action} click":function(){EasySocial.dialog({title:a.language("COM_EASYSOCIAL_REPORTS_ACTIONS_DIALOG_TITLE"),content:"<div>Perform some actions on the item</div>",width:500,height:250,buttons:[{name:a.language("COM_EASYSOCIAL_CLOSE_BUTTON"),classNames:"btn btn-es",click:function(){EasySocial.dialog().close()}}]})}}}),b.resolve()})}),EasySocial.module("admin/sidebar/sidebar",function(){var b=this;EasySocial.require().done(function(){EasySocial.Controller("Sidebar.Sidebar",{defaultOptions:{intervalPendingUsers:5e3,"{usersBadge}":".menu-user > a .badge","{pendingUsersBadge}":".menu-user .menu-ies-vcard > .badge"}},function(a){return{init:function(){a.checkPendingUsers()
},monitorPendingUsers:function(){a.options.state=setTimeout(a.checkPendingUsers,a.options.intervalPendingUsers)},checkPendingUsers:function(){a.stopMonitorPendingUsers(),setTimeout(function(){EasySocial.ajax("admin/controllers/users/getTotalPending").done(function(b){b>0?(a.usersBadge().html(b),a.pendingUsersBadge().html(b)):a.usersBadge().html(""),a.monitorPendingUsers()})},a.options.intervalPendingUsers)},stopMonitorPendingUsers:function(){clearTimeout(a.options.state)}}}),b.resolve()})}),EasySocial.module("admin/themes/compiler",function(a){var b=this;
a.fn.at=function(a){return this.find("[data-"+a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()+"]")},a.template("easysocial/compiler/detail",'<tr class="[%= type %]"><td>[%= timestamp %]</td><td width="100%">[%= message %]</td></tr>'),EasySocial.Controller("Themes.Compiler",{defaultOptions:{view:{detail:"compiler/detail"},"{section}":"[data-section]","{compileButton}":"[data-compile-button]","{minifyButton}":"[data-minify-button]","{buildButton}":"[data-build-button]","{filesButton}":"[data-files-button]","{purgeButton}":"[data-purge-button]","{resetButton}":"[data-reset-button]","{forceCompileButton}":"[data-force-compile-button]","{clearLogButton}":"[data-clear-log-button]","{toggleLogButton}":"[data-toggle-log-button]","{refreshButton}":"[data-refresh-button]","{refreshSectionButton}":"[data-refresh-section-button]","{buildWithoutMinifyButton}":"[data-build-without-minify-button]","{log}":"[data-log]","{details}":"[data-details]","{status}":"[data-status]","{imports}":"[data-imports]","{progress}":"[data-progress]","{progressBar}":"[data-progress-bar]","{progressStatus}":"[data-progress-status]","{tabItem}":".tab-item"}},function(b,c,d){return{init:function(){b.location=d.data("location"),b.name=d.data("name"),b.override=d.data("override")
},sections:function(){var c=a.map(b.section(),function(c){var d=a(c).data("sectionName"),e=b.sectionId(d);return{id:e,name:d}});return c},sectionId:function(a){return b.location+"-"+b.name+"-"+a},sectionTab:function(a){return b.tabItem({sectionId:b.sectionId(a)}).find("> a")},sectionNameOf:function(a){var c=b.section.of(a),d=c.data("sectionName");return d},getLog:function(a){return a?b.section({sectionName:a}).at("log"):b.log(":first")},addLog:function(c,d){var e=b.getLog(d),f=e.find("tbody");a.isString(c)&&(c={timestamp:new Date,message:c,type:"info"});
var g=c.type;/warning|warn/.test(g)&&(g="warning"),/danger|error|failed|fail/.test(g)&&(g="danger"),/pending|default|primary/.test(g)&&(g="");var h=c.timestamp,i=h instanceof Date?h:new Date(parseFloat(h));h=i.getHours()+":"+i.getMinutes()+":"+i.getSeconds();var j=c.message;b.view.detail({type:g,timestamp:h,message:j}).appendTo(f),f[0].scrollTop=f[0].scrollHeight},appendLog:function(c,d){a.each(c,function(a,c){b.addLog(c,d)})},clearLog:function(a){var c=b.getLog(a),d=c.find("tbody");d.empty(),c.at("timeTotal").data("value",0).html("0s"),c.at("memoryUsage").data("value",0).html("0mb")
},generateLog:function(a,c){b.clearLog(c),b.appendLog(a.details,c);var d=b.getLog(c),e=parseFloat(a.time_total),f=e.toFixed(2)+"s",g=parseInt(a.mem_peak),h=(g/1024/1024).toFixed(2)+"mb";d.at("timeTotal").data("value",e).html(f),d.at("memoryUsage").data("value",g).html(h),b.addLog({type:a.failed?"danger":"success",timestamp:a.time_end,message:a.failed?"Task failed.":"Task completed."},c)},updateLog:function(a,c){var d=b.getLog(c),e=d.at("timeTotal"),f=d.at("memoryUsage");b.appendLog(a.details,c);var g=e.data("value")+parseFloat(a.time_total),h=g.toFixed(2)+"s",i=Math.max(f.data("value"),parseInt(a.mem_peak)),j=(i/1024/1024).toFixed(2)+"mb";
e.data("value",g).html(h),f.data("value",i).html(j)},perform:function(c,d){return EasySocial.ajax("admin/controllers/themes/"+c,a.extend({location:b.location,name:b.name,override:b.override},d))},build:function(a){var c=b.sections(),a=a||"cache",e="cache"==a,f=0,g=c.length-1,h=f+1,i=(g+1)*(e?2:1)+1,j=100,k=!1,n=(b.log(":first"),b.progress(":first"),b.progressBar(":first")),o=b.progressStatus(":first"),p=function(){h++,progressValue=h/i*j,n.show().width(progressValue+"%")},q=function(){var a=c[f],g=(a.id,a.name),h=b.sectionTab(g),i="Compiling section '"+g+"'.";
p(),o.html(i),h.tab("show"),b.compile(g,{force:!0}).done(function(a){b.updateLog(a.task)}).fail(function(a){b.updateLog(a.task),k=!0}).always(function(){if(e){var a="Minifying section '"+g+"'.";p(),o.html(a),b.minify(g).done(function(a){b.updateLog(a.task)}).fail(function(a){b.updateLog(a.task),k=!0}).always(function(){r()})}else r()})},r=function(){return g>f++?q():(s(),void 0)},s=function(){o.html("Building stylesheets."),p();var c;b.perform("build",{preset:a}).done(function(a){b.status(":first").replaceWith(a.status),c=a.task
}).fail(function(a){c=a.task}).always(function(){c||(c={failed:!0,details:[],time_end:new Date}),b.updateLog(c),b.addLog({type:c.failed?"danger":"success",timestamp:c.time_end,message:c.failed?"Build failed.":"Build completed."}),o.html("Build completed!"),n.width("100%"),d.removeClass("is-busy")})};n.hide().width("0%"),d.addClass("is-busy"),b.clearLog(),c.length>0?(b.addLog("Compiling all sections."),q()):s()},minify:function(c,d){var e=b.perform("minify",a.extend({section:c},d));return b.trigger("minify",[c,e]),e
},"{self} minify":function(a,c,d,e){var f=b.section({sectionName:d}),g=f.at("progressStatus"),h=f.at("progressBar"),i="Minifying section '"+d+"'.";f.addClass("is-busy"),g.html(i),h.hide().width("0%").show().width("100%"),e.done(function(a){f.at("imports").replaceWith(a.imports),f.at("status").replaceWith(a.status),b.appendLog(a.task.details,d),b.addLog({type:e.failed?"danger":"success",timestamp:a.task.time_end,message:e.failed?"Task failed.":"Task completed."},d)}).always(function(){f.removeClass("is-busy")
})},compile:function(c,d){var e=b.perform("compile",a.extend({section:c},d));return b.trigger("compile",[c,e]),e},"{self} compile":function(a,c,d,e){var f=b.section({sectionName:d}),g=f.at("progressStatus"),h=f.at("progressBar"),i="Compiling section '"+d+"'.";f.addClass("is-busy"),g.html(i),h.hide().width("0%").show().width("100%"),b.clearLog(d),b.addLog(i,d),e.done(function(a){f.at("imports").replaceWith(a.imports),f.at("status").replaceWith(a.status),b.generateLog(a.task,d)}).fail(function(a){b.generateLog(a.task,d)
}).always(function(){f.removeClass("is-busy")})},purge:function(){var c=(b.progress(":first"),b.progressBar(":first")),e=b.progressStatus(":first");d.addClass("is-busy"),b.clearLog(),c.hide().width("0%").show().width("100%"),e.html("Purging cache and log files."),b.perform("purge").done(function(a){b.generateLog(a)}).fail(function(){}).always(function(){d.removeClass("is-busy")})},"{buildButton} click":function(){b.build("cache")},"{buildWithoutMinifyButton} click":function(){b.build("development")},"{compileAllButton} click":function(){},"{compileButton} click":function(a){var c=b.sectionNameOf(a);
return b.compile(c)},"{forceCompileButton} click":function(a){var c=b.sectionNameOf(a);return b.compile(c,{force:!0})},"{minifyButton} click":function(a){var c=b.sectionNameOf(a);return b.minify(c)},"{refreshButton} click":function(){d.addClass("is-busy"),b.progressBar(":first").show().width("100%"),b.progressStatus(":first").html("Refreshing"),EasySocial.ajax("admin/views/themes/compiler",{location:b.location,name:b.name,override:b.override}).done(function(a){d.replaceWith(a)}).fail(function(){alert("Unable to refresh section.")
}).always(function(){d.removeClass("is-busy")})},"{refreshSectionButton} click":function(a){var c=b.sectionNameOf(a),d=b.section({sectionName:c});d.addClass("is-busy"),d.at("progressStatus").html("Refreshing"),EasySocial.ajax("admin/views/themes/section",{location:b.location,name:b.name,override:b.override,section:c}).done(function(a){d.html(a)}).fail(function(){alert("Unable to refresh section.")}).always(function(){d.removeClass("is-busy")})},"{resetButton} click":function(){alert("TODO: Restore to factory default.")
},"{purgeButton} click":function(){b.purge()}}}),b.resolve()}),EasySocial.module("admin/users/form",function(){var b=this;EasySocial.require().script("field").done(function(a){EasySocial.Controller("Users.Form",{defaultOptions:{userid:null,mode:"adminedit","{selectProfile}":"[data-user-select-profile]","{content}":"[data-user-new-content]","{profileTitle}":"[data-profile-title]","{fieldItem}":"[data-profile-adminedit-fields-item]","{tabnav}":"[data-tabnav]","{tabcontent}":"[data-tabcontent]","{stepnav}":"[data-stepnav]","{stepcontent}":"[data-stepcontent]",view:{loading:"site/loading/large"}}},function(b){return{init:function(){window.selectedProfile=b.selectedProfile,b.fieldItem().addController("EasySocial.Controller.Field.Base",{userid:b.options.userid,mode:b.options.mode})
},selectedProfile:function(a){EasySocial.dialog().close(),window.location.href="index.php?option=com_easysocial&view=users&layout=form&profileId="+a},"{selectProfile} click":function(){EasySocial.dialog({content:EasySocial.ajax("admin/views/profiles/browse")})},errorFields:[],"{fieldItem} error":function(c){var e=c.data("id");a.inArray(e,b.errorFields)<0&&b.errorFields.push(e);var f=c.parents(b.stepcontent.selector).data("for");b.stepnav().filterBy("for",f).trigger("error");var g=c.parents(b.tabcontent.selector).data("for");
b.tabnav().filterBy("for",g).trigger("error")},"{fieldItem} clear":function(c){var e=c.data("id");b.errorFields=a.without(b.errorFields,e);var f=c.parents(b.stepcontent.selector).data("for");b.stepnav().filterBy("for",f).trigger("clear");var g=c.parents(b.tabcontent.selector).data("for");b.tabnav().filterBy("for",g).trigger("clear")},"{stepnav} error":function(a){a.addClass("error")},"{tabnav} error":function(a){a.addClass("error")},"{stepnav} clear":function(a){b.errorFields.length<1&&a.removeClass("error")
},"{tabnav} clear":function(a){b.errorFields.length<1&&a.removeClass("error")},"{stepnav} click":function(a){var c=a.data("for");b.stepcontent().filterBy("for",c).find(b.fieldItem.selector).trigger("show")}}}),b.resolve()})}),EasySocial.module("admin/users/privacy",function(){var b=this;EasySocial.require().library("textboxlist").view("site/loading/small").done(function(a){EasySocial.Controller("Profile.Privacy",{defaultOptions:{userId:"","{privacyItem}":"[data-privacy-item]","{privacyForm}":"[data-profile-privacy-form]",view:{loading:"site/loading/small"}}},function(a){return{init:function(){a.privacyItem().implement(EasySocial.Controller.Profile.Privacy.Item,{"{parent}":a})
}}}),EasySocial.Controller("Profile.Privacy.Item",{defaultOptions:{"{selection}":"[data-privacy-select]","{hiddenCustom}":"[data-hidden-custom]","{customForm}":"[data-privacy-custom-form]","{customTextInput}":"[data-textfield]","{customItems}":"input[]","{customHideBtn}":"[data-privacy-custom-hide-button]","{customInputItem}":"[data-textboxlist-item]","{customEditBtn}":"[data-privacy-custom-edit-button]"}},function(b){return{init:function(){b.customTextInput().textboxlist({component:"es",unique:!0,plugin:{autocomplete:{exclusive:!0,minLength:2,cache:!1,query:function(a){var c=b.getTaggedUsers(),d=EasySocial.ajax("site/views/privacy/getfriends",{q:a,userid:b.parent.options.userId,exclude:c});
return d}}}}),b.textboxlistLib=b.customTextInput().textboxlist("controller")},getTaggedUsers:function(){var c=[],d=b.customInputItem();return d.length>0&&a.each(d,function(b,d){c.push(a(d).data("id"))}),c},"{customTextInput} addItem":function(a,c,d){var e=b.hiddenCustom().val(),f="";if(""==e)f=d.id;else{var g=e.split(",");g.push(d.id),f=g.join(",")}b.hiddenCustom().val(f)},"{customTextInput} removeItem":function(a,c,d){for(var e=b.hiddenCustom().val(),f="",g=[],h=e.split(","),i=0;i<h.length;i++)h[i]!=d.id&&g.push(h[i]);
f=g.length<=0?"":g.join(","),b.hiddenCustom().val(f)},"{customEditBtn} click":function(){b.customForm().toggle()},"{selection} change":function(a){var c=a.val();"custom"==c?(b.customForm().show(),b.customEditBtn().show()):(b.customForm().hide(),b.customEditBtn().hide())},"{customHideBtn} click":function(){b.customForm().hide(),b.customEditBtn().show(),b.textboxlistLib.autocomplete.hide()}}}),b.resolve()})}),EasySocial.module("admin/users/users",function(){var b=this;EasySocial.require().library("expanding").done(function(a){EasySocial.Controller("Users",{defaultOptions:{"{item}":"[data-user-item]"}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Users.Item)
}}}),EasySocial.Controller("Users.Item",{defaultOptions:{"{insertLink}":"[data-user-item-insertLink]"}},function(a){return{init:function(){a.options.name=a.element.data("name"),a.options.avatar=a.element.data("avatar"),a.options.email=a.element.data("email"),a.options.id=a.element.data("id")},"{insertLink} click":function(){a.trigger("userSelected",[a.options.id,a.options.name,a.options.avatar,a.options.email])}}}),EasySocial.Controller("Users.Pending",{defaultOptions:{"{item}":"[data-pending-item]"}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Users.Pending.Item)
}}}),EasySocial.Controller("Users.Pending.Item",{defaultOptions:{"{approve}":"[data-pending-approve]","{reject}":"[data-pending-reject]"}},function(b){return{init:function(){b.options.id=b.element.data("id")},"{approve} click":function(){EasySocial.dialog({content:EasySocial.ajax("admin/views/users/confirmApprove",{id:b.options.id}),bindings:{"{approveButton} click":function(){a("[data-users-approve-form]").submit()}}})},"{reject} click":function(){EasySocial.dialog({content:EasySocial.ajax("admin/views/users/confirmReject",{id:b.options.id})})
}}}),b.resolve()})}),EasySocial.module("albums/album",function(a){var b=this;EasySocial.require().library("tinyscrollbar").done(function(){EasySocial.Controller("Albums.Album",{defaultOptions:{"{title}":"[data-album-title]","{count}":"[data-album-count]","{privacy}":"[data-album-privacy]","{cover}":"[data-album-cover]","{coverImage}":"[data-album-cover-image]","{link}":"[data-album-link]","{menu}":"[data-album-menu]","{menuActions}":"[data-album-menu-actions]","{shareButton}":"[data-album-share-button]","{shareContent}":"[data-sharing]","{followButton}":"[data-album-follow-button]","{reportButton}":"[data-album-report-button]","{deleteButton}":"[data-album-delete-button]","{likeButton}":"[data-album-like-button]","{commentButton}":"[data-album-comment-button]","{countsButton}":"[data-album-counts-button]","{commentCount}":"[data-album-comment-count]","{likeCount}":"[data-album-like-count]","{actions}":"[data-item-actions]","{actionContent}":"[data-item-action-content]","{actionCloseButton}":"[data-item-action-close-button]","{actionsMenu}":"[data-item-actions-menu]","{likesHolder}":"[data-album-likes-holder]","{commentsHolder}":"[data-album-comments-holder]","{responseHolder}":"[data-album-response-holder]","{comments}":"[data-comments]"}},function(b){return{init:function(){b.id=b.element.data("album-id"),b.actionContent().tinyscrollbar(),b.actions().hasClass("open")&&(b.loadResponse(),b.element.addClass("show-all"))
},remove:function(){b.element.remove()},"{coverImage} click":function(){window.location=b.link().attr("href")},"{shareButton} click":function(){b.shareContent().show()},"{deleteButton} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/albums/confirmDelete",{id:b.id})})},like:function(){EasySocial.ajax("site/controllers/albums/like",{id:b.id}).done(function(a){b.likeCount().html(a.count),a.state?b.likeButton().addClass("liked"):b.likeButton().removeClass("liked"),b.likesHolder().html(a.html)
})},loadResponse:function(){var a=b.loadResponse.loader;a&&"rejected"!=a.state()||(b.loadResponse.loader=EasySocial.ajax("site/views/albums/response",{id:b.id}).done(function(a){b.responseHolder().html(a),b.actionContent().removeClass("loading").tinyscrollbar_update()}))},getButton:function(c){var c=a(c),d=b.countsButton(),e=b.commentButton();return c.is(d)||c.parents().filter(d).length>0?d:c.is(e)||c.parents().filter(e).length>0?e:a()},lastButton:a(),"{actions} shown.bs.dropdown":function(a,c,d){b.loadResponse(),b.element.addClass("show-all");
var e=b.actionContent(),f=b.lastButton=b.getButton(d),g=f.position().left+f.width()/2-e.width()/2;e.css("margin-left",g).tinyscrollbar_update()},"{actions} hide.bs.dropdown":function(a,c,d){b.element.removeClass("show-all");var e=b.getButton(d),f=b.lastButton;e.is(f)||setTimeout(function(){e.trigger("click")},0)},"{actionCloseButton} click":function(){b.hideActionContent()},"{likeButton} click":function(){b.like()},"{comments} newCommentSaved":function(){var a=b.comments().controller("EasySocial.Controller.Comments.Stat");
b.commentCount().html(a.total()),b.actionContent().tinyscrollbar_update("bottom")},"{comments} commentDeleted":function(){var a=b.comments().controller("EasySocial.Controller.Comments.Stat");b.commentCount().html(a.total()),b.actionContent().tinyscrollbar_update()},"{actionsMenu} shown.bs.dropdown":function(){b.element.addClass("show-all")},"{actionsMenu} hidden.bs.dropdown":function(){b.element.removeClass("show-all")}}}),b.resolve()})}),EasySocial.module("albums/browser",function(a){var b=this;EasySocial.require().library("history").view("site/albums/browser.list.item").done(function(){EasySocial.Controller("Albums.Browser",{hostname:"browser",defaultOptions:{view:{listItem:"site/albums/browser.list.item"},itemRenderOptions:{},"{sidebar}":"[data-album-browser-sidebar]","{content}":"[data-album-browser-content]","{createAlbumButton}":"[data-album-create-button]","{createAlbumButtonLink}":"[data-album-create-button] > a","{listItemGroup}":"[data-album-list-item-group]","{listItemRegularGroup}":"[data-album-list-item-group=regular]","{listItemCoreGroup}":"[data-album-list-item-group=core]","{listItem}":"[data-album-list-item]","{listItemLink}":"[data-album-list-item] > a","{listItemTitle}":"[data-album-list-item-title]","{listItemCover}":"[data-album-list-item-cover]","{listItemCount}":"[data-album-list-item-count]","{albumItem}":"[data-album-item]","{photoBrowser}":"[data-photo-browser]"}},function(b){return{init:function(){b.albumItem().each(function(){b.addSubscriber(a(this).controller("EasySocial.Controller.Albums.Item"))
})},setLayout:function(a){b.element.hasClass("layout-dialog")||b.element.data("layout",a).switchClass("layout-"+a)},open:function(c){var d=a.makeArray(arguments);b.trigger("contentload",d);var e="view"+a.String.capitalize(c),f=b[e].apply(b,d.slice(1));return f.done(b.displayContent(function(){return b.trigger("contentdisplay",d),arguments})).fail(function(){b.trigger("contentfail",d)}).always(function(){b.trigger("contentcomplete",d)}),f},"{self} contentdisplay":function(a,c,d){/album|albumform/gi.test(d)&&b.setLayout("album"),/photo/gi.test(d)&&b.setLayout("photo")
},displayContent:a.Enqueue(function(c){var d=[],e=a(a.buildFragment([c],document,d));b.content().html(e),a(d).remove()}),viewAlbum:function(a){b.listItem().removeClass("active loading");var c=b.getListItem(a).addClass("active loading");"dialog"!==b.element.data("layout")&&c.find("> a").route();var d=EasySocial.ajax("site/views/albums/item",{id:a,renderOptions:b.options.itemRenderOptions}).fail(function(){}).always(function(){c.removeClass("loading")});return d},viewAlbumForm:function(){var c=(b.listItem().removeClass("active loading"),b.view.listItem({}).addClass("active loading new").prependTo(b.listItemRegularGroup())),d=EasySocial.ajax("site/views/albums/form",{uid:b.options.uid,type:b.options.type}).fail(function(){}).always(function(){c.removeClass("loading")
});return d},viewPhoto:function(a){var b=EasySocial.ajax("site/views/photos/item",{id:a,browser:1}).fail(function(){}).always(function(){});return b},"{listItem} click":function(a){if(!a.hasClass("new")){var c=a.data("albumId");b.open("Album",c)}},"{listItemLink} click":function(a,b){b.preventDefault(),a.blur()},"{createAlbumButton} click":function(){b.open("AlbumForm"),"dialog"!==b.element.data("layout")&&b.createAlbumButtonLink().route()},"{createAlbumButtonLink} click":function(a,b){b.preventDefault()},"{albumItem} init.albums.item":function(a,c,d){b.addSubscriber(d)
},getListItem:function(c,d){var e=c?b.listItem().filterBy("albumId",c):b.listItem(".new");return d?e.find(b["listItem"+a.String.capitalize(d)].selector):e},updateListItemCount:function(a,c,d){var e=b.getListItem(a,"count");if(!(e.length<0)){var f;f=d?(parseInt(e.text())||0)+(parseInt(c)||0):c,0>f&&(f=0),e.text(f)}},"{albumItem} albumSave":function(a,c,d){d.done(function(a){b.getListItem().attr("data-album-id",a.id).removeClass("new"),b.getListItem(a.id).find("> a").attr({href:a.permalink,title:a.title}).route(),b.getListItem(a.id,"title").html(a.title)
})},"{albumItem} titleChange":function(c,d,e,f){b.getListItem(f.id,"title").html(a.trim(e)||"&nbsp;")},"{albumItem} coverChange":function(c,d,e,f){b.getListItem(f.id,"cover").css("backgroundImage",a.cssUrl(e.sizes.thumbnail.url))},"{albumItem} coverRemove":function(a,c,d){b.getListItem(d.id,"cover").css("backgroundImage","")},"{albumItem} photoAdd":function(a,c,d,e,f){b.updateListItemCount(f.id,1,!0)},"{albumItem} photoMove":function(a,c,d,e){d.done(function(){b.updateListItemCount(e.album.id,-1,!0)})},"{albumItem} photoDelete":function(a,c,d,e){d.done(function(){b.updateListItemCount(e.album.id,-1,!0)
})},"{photoBrowser} init.photos.browser":function(a,c,d){b.addSubscriber(d)},"{self} contentload":function(){b.listItem(".new").remove()}}}),b.resolve()})}),EasySocial.module("albums/editor",function(a){var b=this;EasySocial.require().script("albums/editor/sortable","albums/editor/uploader").done();var d=EasySocial.Controller("Albums.Editor",{hostname:"editor",defaultOptions:{view:{uploadItem:"site/albums/upload.item"},canReorder:!1,canUpload:!0,"{titleField}":"[data-album-title-field]","{captionField}":"[data-album-caption-field]","{coverField}":"[data-album-cover-field]","{type}":"[data-album-type]","{uid}":"[data-album-uid]","{location}":"[data-album-location]","{locationCaption}":"[data-album-location-caption]","{addLocationButton}":"[data-album-addLocation-button]","{date}":"[data-album-date]","{dateCaption}":"[data-album-date-caption]","{addDateCaption}":"[data-album-addDate-button]","{privacy}":"[data-album-privacy]","{uploadButton}":"[data-album-upload-button]","{deleteButton}":"[data-album-delete-button]","{moreButton}":"[data-album-more-button]","{privacy}":"[data-privacy-hidden]","{privacycustom}":"[data-privacy-custom-hidden]","{uploadItem}":"[data-photo-upload-item]","{dateDay}":"[data-date-day]","{dateMonth}":"[data-date-month]","{dateYear}":"[data-date-year]","{editButton}":"[data-album-edit-button]","{editButtonLink}":"[data-album-edit-button] > a","{doneButton}":"[data-album-done-button]","{doneButtonLink}":"[data-album-done-button] > a","{cancelButton}":"[data-album-cancel-button]","{cancelButtonLink}":"[data-album-cancel-button] > a","{locationWidget}":".es-album-location-form .es-locations","{latitude}":"[data-location-lat]","{longitude}":"[data-location-lng]"}},function(b){return{init:function(){b.id=b.element.data("album-id");
var c=b.options;c.canReorder&&EasySocial.module("albums/sortable").done(function(a){b.addPlugin("sortable",a)}),c.canUpload&&EasySocial.module("albums/editor/uploader").done(function(a){b.uploader=b.addPlugin("uploader",a)}),b.id?(b.createAlbum.task=a.Deferred().resolve(),b.createStream=0):b.createStream=1},data:function(){var a=b.titleField().val(),c=b.captionField().val(),d=b.formatDate(),e=b.locationCaption().html(),f=b.latitude().val(),g=b.longitude().val(),h=b.privacy().val(),i=b.privacycustom().val();return uid=b.element.data("album-uid"),type=b.element.data("album-type"),{id:b.id,uid:uid,type:type,title:a,caption:c,date:d,address:e,latitude:f,longitude:g,privacy:h,privacycustom:i,createStream:b.createStream}
},createAlbum:function(){var a=b.createAlbum.task;return a||(a=b.createAlbum.task=b.save({createStream:0}).done(function(a){b.deleteButton().disabled(!1),b.element.attr("data-album-id",b.id=a.id)}).fail(function(a,c){b.setMessage(a,c)})),a},save:function(c){b.trigger("beforeAlbumSave",[b]);var d=a.extend(b.data(),c);d.photos=a.map(b.album.photoItem(),function(b){var d=a(b).controller("EasySocial.Controller.Photos.Editor");return d?d.data():null}),b.clearMessage();var e=EasySocial.ajax("site/controllers/albums/store",d);
return b.trigger("albumSave",[e,b]),e},"{self} photoAdd":function(a,c,d,e){b.album.photoItem().length<=1&&b.changeCover(e)},setCover:function(a){var c=EasySocial.ajax("site/controllers/albums/setCover",{albumId:b.id,coverId:a}).done(function(a){b.changeCover(a)}).fail(function(){});return c},removeCover:function(){b.trigger("coverRemove",[b.album])},changeCover:function(a){b.trigger("coverChange",[a,b])},"{self} coverChange":function(c,d,e){b.coverField().removeClass("no-cover").css("backgroundImage",a.cssUrl(e.sizes.thumbnail.url))
},"{self} coverRemove":function(){b.coverField().addClass("no-cover").css("backgroundImage","")},"{editButton} click":function(){b.album.setLayout("form"),b.editButtonLink().route()},"{editButtonLink} click":function(a,b){b.preventDefault()},"{cancelButton} click":function(){b.album.setLayout("item"),b.cancelButtonLink().route()},"{cancelButtonLink} click":function(a,b){b.preventDefault()},"{doneButton} click":function(){b.doneButtonLink().addClass("btn-loading"),b.save().done(function(c,d){b.doneButtonLink().removeClass("btn-loading"),a.buildHTML(d).replaceAll(b.element)
}).progress(function(a,c){b.setMessage(a,c)})},"{doneButtonLink} click":function(a,b){b.preventDefault()},"{deleteButton} click":function(a){a.disabled()||EasySocial.dialog({content:EasySocial.ajax("site/views/albums/confirmDelete",{id:b.id})})},formatDate:function(){var a=b.dateDay().val()||b.dateDay().data("date-default"),c=b.dateMonth().val()||b.dateMonth().data("date-default"),d=b.dateYear().val()||b.dateYear().data("date-default");return d+"-"+c+"-"+a},updateDate:function(){b.date().addClass("has-data");
var c=b.dateDay().val()+" "+a.trim(b.dateMonth().find(":selected").html())+" "+b.dateYear().val();b.dateCaption().html(c)},"{dateDay} keyup":function(){b.updateDate()},"{dateMonth} change":function(){b.updateDate()},"{dateYear} keyup":function(){b.updateDate()},"{titleField} keyup":function(a){b.trigger("titleChange",[a.val(),b])},"{locationWidget} locationChange":function(a,c,d){var e=d.address||d.fulladdress||d.formatted_address;b.locationCaption().html(e),b.location().addClass("has-data")}}});b.resolve(d)
}),EasySocial.module("albums/editor/sortable",function(a){var b=this;EasySocial.require().library("ui/sortable").done(function(){var c=EasySocial.Controller("Albums.Editor.Sortable",{defaultOptions:{}},function(b){return{init:function(){},getPhotoOrdering:function(){var c={};return b.photoItem().each(function(b){var d=a(this).data("photoId");c[d]=b}),c},"{parent.photoItemGroup} sortstart":function(a,c,d){d.item.addClass("dragging"),a.addClass("ordering"),b.setLayout()},"{parent.photoItemGroup} sortchange":function(){b.setLayout()
},"{parent.photoItemGroup} sortstop":function(a,c,d){d.item.removeClass("dragging"),a.removeClass("ordering"),b.setLayout(),EasySocial.ajax("site/controllers/photos/reorder",{id:d.item.controller().id,order:d.item.index()})}}});b.resolve(c)})}),EasySocial.module("albums/editor/uploader",function(a){var b=this;EasySocial.require().script("albums/uploader").view("site/albums/upload.item").done(function(){var c=EasySocial.Controller("Albums.Editor.Uploader",{defaultOptions:{}},function(b){return{init:function(){b.album=b.editor.album;
var a=b.album.options.uploader;b.uploader=b.addPlugin("uploader",EasySocial.Controller.Albums.Uploader,{settings:a,"{uploadButton}":b.editor.uploadButton.selector,"{uploadItemGroup}":b.album.photoItemGroup.selector,"{uploadDropsite}":b.album.content.selector})},setLayout:function(){b.album.setLayout_()},"{self} beforeAlbumSave":function(){b.uploader.stop()},"{self} albumSave":function(c,d,e){e.done(function(c){var d=a.uri(b.uploader.settings("url")).replaceQueryParam("albumId",c.id).toString();b.uploader.settings("url",d)
})},"{self} layoutChange":function(c,d,e){b.uploader.stop(),b.uploader.clear();var f=a.uri(b.uploader.settings("url")).replaceQueryParam("createStream","form"==e?0:1).replaceQueryParam("layout",e).toString();b.uploader.settings("url",f)},"{self} QueueCreated":function(a,c,d){"form"==b.album.currentLayout()&&d.element.addClass("layout-form"),b.setLayout()},startUpload:a.Enqueue(),"{uploader} FilesAdded":function(){b.id?b.uploader.start():b.editor.createAlbum().done(b.startUpload(function(){b.uploader.start()})),b.setLayout()
},"{uploader} FilesRemoved":function(){b.setLayout()},"{uploader} FileUploaded":function(c,d,e,f,g){var h=b.uploader.getItem(f),i=a.buildHTML(g.html),j=g.data;i.addClass("new-item").insertAfter(h.element),setTimeout(function(){i.removeClass("new-item")},1),b.uploader.removeItem(f.id),b.trigger("photoAdd",[i,j,b.album]),b.setLayout()}}});b.resolve(c)})}),EasySocial.module("albums/uploader",function(a){var b=this;EasySocial.require().library("plupload").script("albums/uploader.item").view("site/albums/upload.item").done(function(){EasySocial.Controller("Albums.Uploader",{defaultOptions:{view:{uploadItem:"site/albums/upload.item"},direction:"prepend","{uploadButton}":"[data-upload-button]","{uploadItemGroup}":"[data-upload-item-group]","{uploadItem}":"[data-upload-item]","{uploadDropsite}":"[data-upload-dropsite]"}},function(b,c,d){return{init:function(){var c=b.element;
b.pluploadController=b.element.addController("plupload",a.extend({"{uploadButton}":b.uploadButton.selector,"{uploadDropsite}":b.uploadDropsite.selector},b.options.settings)),b.plupload=b.pluploadController.plupload,a.IE||"html5"!=b.plupload.runtime||c.addClass("can-drop-file"),c.addClass("can-upload")},setLayout:function(){b.uploadItemGroup().toggleClass("no-upload-items",b.uploadItem().length<1)},items:{},getItem:function(c){var d;return a.isString(c)&&(d=c),c&&c.id&&(d=c.id),b.items[d]},createItem:function(a){var e=b.view.uploadItem({file:a}).switchClass("layout-"+(d.data("albumLayout")||"form")).addController("EasySocial.Controller.Albums.Uploader.Item",{"{uploader}":b,file:a});
return e.element["append"==c.direction?"appendTo":"prependTo"](b.uploadItemGroup()),b.items[a.id]=e,b.setLayout(),b.trigger("QueueCreated",[e]),e},settings:function(a,c){var d=b.plupload.settings;return void 0!==c&&(d[a]=c),a?d[a]:d},start:function(){return b.plupload.start()},stop:function(){return b.plupload.stop()},"{self} FilesAdded":function(c,d,e,f){try{f.reverse(),a.each(f,function(a,c){b.getItem(c)||b.createItem(c)})}catch(g){console.error(g)}},"{self} BeforeUpload":function(a,c,d,e){var f=b.getItem(e);
f&&f.setState("preparing")},"{self} UploadFile":function(a,c,d,e){var f=b.getItem(e);f&&f.setState("uploading")},"{self} UploadProgress":function(a,c,d,e){var f=b.getItem(e);f&&(f.setState("uploading"),f.setProgress())},"{self} FileUploaded":function(c,d,e,f,g){var h=b.getItem(f);if(h)return a.isPlainObject(g)?(h.setState("done"),void 0):(h.setState("failed"),void 0)},"{self} FileError":function(a,c,d,e,f){var g=b.getItem(e);g||(g=b.createItem(e)),g.setState("failed"),g.setMessage(f.message)},"{self} Error":function(a,c,d,e){if(e.file){var f=e.file,g=b.getItem(f);
g||(g=b.createItem(f)),g.setState("failed"),g.setMessage(e.message)}},removeItem:function(a){var c=b.getItem(a);c&&(b.plupload.removeFile(c.file()),c.element.remove(),delete b.items[a],b.setLayout())},clear:function(){a.each(b.items,function(a,c){b.plupload.removeFile(c.file()),c.element.remove(),delete b.items[a]}),b.items={}}}}),b.resolve()})}),EasySocial.module("albums/uploader.item",function(a){var b=this;EasySocial.Controller("Albums.Uploader.Item",{defaultOptions:{"{status}":".upload-status","{filename}":".upload-filename","{progressBar}":".upload-progress-bar","{percentage}":".upload-percentage","{filesizeTotal}":".upload-filesize-total","{filesizeLeft}":".upload-filesize-left","{details}":".upload-details","{detailsButton}":".upload-details-button","{removeButton}":".upload-remove-button","{message}":".upload-message"}},function(b){return{init:function(){b.id=b.element.attr("id");
var c=b.file();b.filename().html(c.name),b.setState("pending"),b.setProgress();var d="html4"==b.uploader.plupload.runtime;(a.IE<10||d)&&b.element.addClass("indefinite-progress"),d&&b.element.addClass("no-filesize")},file:function(){var c=b.uploader.plupload.getFile(b.id)||b.options.file;if(c){var d=void 0===c.size||"N/A"==c.size;c.percentage=c.percent+"%",c.filesize=d?"":a.plupload.formatSize(c.size),c.remaining=d?"":a.plupload.formatSize(c.size-(c.loaded||0))}return c},setProgress:function(){var a=b.file(),c=a.percentage;
"100%"==c&&(c="99%"),"0%"==c&&(c="1%"),b.progressBar().width(c),b.percentage().html(c),b.filesizeTotal().html(a.filesize),b.filesizeLeft().html(a.remaining)},setState:function(a){b.element.removeClass("pending preparing uploading failed done").addClass(a),b.state=a},setMessage:function(a){b.detailsButton().attr("data-popbox",a)},"{removeButton} click":function(){b.uploader.removeItem(b.id)}}}),b.resolve()}),EasySocial.module("albums/item",function(a){var b=this;EasySocial.require().script("albums/editor").done(),EasySocial.require().library("masonry").done(function(){EasySocial.Controller("Albums.Item",{hostname:"album",defaultOptions:{tilesPerRow:4,editable:!1,multipleSelection:!1,"{header}":"[data-album-header]","{content}":"[data-album-content]","{footer}":"[data-album-footer]","{info}":"[data-album-info]","{title}":"[data-album-title]","{caption}":"[data-album-caption]","{location}":"[data-album-location]","{date}":"[data-album-date]","{cover}":"[data-album-cover]","{favouriteButton}":"[data-album-favourite-button]","{photoItemGroup}":"[data-photo-item-group]","{photoItem}":"[data-photo-item]","{photoImage}":"[data-photo-image]","{photoImageCss}":"[data-photo-image-css]","{featuredItem}":"[data-photo-item].featured","{featuredImage}":"[data-photo-item].featured [data-photo-image]","{featuredImageCss}":"[data-photo-item].featured [data-photo-image-css]","{uploadItem}":"[data-photo-upload-item]","{moreButton}":"[data-album-more-button]","{viewButton}":"[data-album-view-button]","{share}":"[data-repost-action]","{likes}":"[data-likes-action]","{likeContent}":"[data-likes-content]","{repostContent}":"[data-repost-content]","{counterBar}":"[data-stream-counter]"}},function(b,c,d){return{init:function(){b.id=d.data("album-id"),b.nextStart=d.data("album-nextstart")||-1,b.options.editable&&EasySocial.module("albums/editor").done(function(a){b.editor=b.addPlugin("editor",a)
}),b.setLayout(),b.moreButton().show(),b.addSubscriber(b.photoItem().controllers("EasySocial.Controller.Photos.Item"))},"{window} resize":a.debounce(function(){b.setLayout()},250),currentLayout:function(){return d.data("albumLayout")},setLayout_:a.debounce(function(){b.setLayout()},100),setLayout:function(c){var e=b.photoItemGroup(),f=b.currentLayout(),c=c||f,g=b.setLayout.seed,h=g==e.width()&&f==c;hasPhotoItem=b.photoItem().length>0,hasUploadItem=b.uploadItem().length>0,hasItem=hasPhotoItem||hasUploadItem,masonry=a.data(e[0],"masonry"),layout={currentLayout:f,seed:g,intact:h,hasPhotoItem:hasPhotoItem,hasUploadItem:hasUploadItem,hasItem:hasItem,masonry:masonry},h||(d.data("albumLayout",c).switchClass("layout-"+c),b.photoItem().switchClass("layout-"+c),b.setLayout.seed=layout.seed=null,f!==c&&b.trigger("layoutChange",[c,layout])),d.toggleClass("has-photos",hasItem),hasItem||e.css("opacity",1);
var i="set"+a.String.capitalize(c)+"Layout";b[i](layout),b.setLayout.seed=e.width()},setItemLayout:function(a){b.photoItem().attr("data-es-photo-disabled",0);var c=4,e=b.photoItemGroup(),f=d.width(),g=Math.floor(f/c)*c;b.photoItemGroup().width(g),a.masonry?e.masonry("reloadItems").masonry("layout"):e.masonry({columnWidth:".es-photo-item.grid-sizer",itemSelector:b.photoItem.selector+", "+b.uploadItem.selector,isOriginLeft:!b.options.rtl})},setFormLayout:function(a){b.photoItem().attr("data-es-photo-disabled",1),a.masonry&&a.masonry.destroy(),b.clearLayout()
},setDialogLayout:function(){b.photoItem().attr("data-es-photo-disabled",1),layout.masonry&&layout.masonry.destroy(),b.clearLayout()},setThumbnailLayout:function(){},setRowLayout:function(){b.photoItem().attr("data-es-photo-disabled",0),b.clearLayout()},clearLayout:function(){b.photoItemGroup().addClass("no-transition"),b.photoItem.css().remove(),b.photoImage.css().remove(),b.photoImageCss.css().remove(),b.featuredItem.css().remove(),b.featuredImage.css().remove(),b.featuredImageCss.css().remove(),b.uploadItem.css().remove(),b.setLayout.seed=null
},getSelectedItems:function(){var c=b.photoItem(".selected"),d=[];return c.each(function(b,c){d.push(a(c).controller("EasySocial.Controller.Photos.Item").data())}),d},"{photoItem} init.photos.item":function(a,c,d){b.addSubscriber(d)},"{photoItem} destroyed":function(){b.setLayout()},"{photoItem} activate":function(a,c,d){if(d){var e=b.currentLayout();switch(e){case"item":case"row":a.addClass("loading"),b.browser?(b.browser.open("photo",d.id).always(function(){a.removeClass("loading")}),d.imageLink().route()):window.location=d.imageLink().attr("href");
break;case"form":break;case"dialog":var f=b.photoItem(".selected");if(b.options.multipleSelection)a.toggleClass("selected");else{var g=a.hasClass("selected");f.removeClass("selected"),a.toggleClass("selected",!g)}}}},"{photoItem} photoFeature":function(a,c,d){b.setLayout(),d.fail(function(){b.setLayout()})},"{photoItem} photoMove":function(a,c,d,e){b.clearMessage(),d.done(function(){e.element.remove(),b.setLayout(),b.photoItem().length<1&&b.trigger("coverRemove",[b])}).fail(function(a,c){b.setMessage(a,c)})},"{photoItem} photoDelete":function(a,c,d,e){b.clearMessage(),d.done(function(){e.element.remove(),b.setLayout(),b.photoItem().length<1&&b.trigger("coverRemove",[b])
}).fail(function(a,c){b.setMessage(a,c)})},"{self} albumSave":function(a,c,d){d.done(function(a){b.id=a.id})},"{self} coverChange":function(c,d,e){b.cover().css("backgroundImage",a.cssUrl(e.sizes.thumbnail.url))},"{self} coverRemove":function(){b.cover().css("backgroundImage","")},"{viewButton} click":function(a,c){b.browser&&(c.preventDefault(),d.addClass("loading"),b.browser.open("Album",b.id))},"{moreButton} click":function(c){-1!=b.nextStart&&(c.disabled()||(c.toggleClass("loading"),c.disabled(!0),EasySocial.ajax("site/controllers/albums/loadMore",{albumId:b.id,start:b.nextStart,layout:b.currentLayout()}).done(function(d,e){b.nextStart=e;
var f=b.photoItemGroup();a.each(d,function(b,c){a.buildHTML(c).appendTo(f)}),c.toggleClass("loading"),0>e&&c.hide(),b.setLayout()}).always(function(){c.disabled(!1)})))},"{share} create":function(){b.counterBar().removeClass("hide")},"{likes} onLiked":function(){b.counterBar().removeClass("hide")},"{likes} onUnliked":function(){var e=b.likeContent().hasClass("hide"),f=b.repostContent().hasClass("hide");e&&f&&b.counterBar().addClass("hide")},"{favouriteButton} click":function(){EasySocial.ajax("site/controllers/albums/favourite",{id:b.id}).done(function(){b.favouriteButton().toggleClass("is-fav btn-es-primary")
})}}}),b.resolve()})}),EasySocial.module("apps/event/discussions",function(){var b=this;EasySocial.Controller("Events.Item.Discussions",{defaultOptions:{"{filter}":"[data-event-discussions-filter]","{contents}":"[data-event-discussion-contents]"}},function(a){return{init:function(){a.options.id=a.element.data("id")},setContent:function(b){a.contents().removeClass("is-loading"),a.contents().html(b)},setActiveFilter:function(b){a.filter().removeClass("active"),b.addClass("active")},"{filter} click":function(b){var d=b.data("filter");
a.contents().html("&nbsp;").addClass("is-loading"),a.setActiveFilter(b),EasySocial.ajax("apps/event/discussions/controllers/discussion/getDiscussions",{id:a.options.id,filter:d}).done(function(b,c){c?a.contents().addClass("is-empty"):a.contents().removeClass("is-empty"),a.setContent(b)})}}}),EasySocial.Controller("Events.Item.Discussion",{defaultOptions:{"{form}":"[data-reply-form]","{list}":"[data-reply-list]","{replies}":"[data-reply-item]","{repliesWrap}":"[data-replies-wrapper]","{replyCounter}":"[data-reply-count]","{lock}":"[data-discussion-lock]","{unlock}":"[data-discussion-unlock]","{delete}":"[data-discussion-delete]"}},function(a){return{init:function(){a.options.id=a.element.data("id"),a.options.eventId=a.element.data("eventid"),a.implementReply(a.replies()),a.form().implement(EasySocial.Controller.Events.Item.Discussion.Form,{"{parent}":a})
},implementReply:function(){a.replies().implement(EasySocial.Controller.Events.Item.Discussion.Reply,{"{parent}":a})},insertReply:function(b){a.element.removeClass("is-unanswered"),a.repliesWrap().removeClass("is-empty"),a.list().append(b),a.implementReply()},updateReplyCounter:function(b){0==b&&a.repliesWrap().addClass("is-empty"),a.replyCounter().html(b)},setResolved:function(){a.element.addClass("is-resolved")},"{unlock} click":function(){EasySocial.ajax("apps/event/discussions/controllers/discussion/unlock",{id:a.options.id}).done(function(){a.element.removeClass("is-locked")
})},"{delete} click":function(){EasySocial.dialog({content:EasySocial.ajax("apps/event/discussions/controllers/discussion/confirmDelete",{id:a.options.id,eventId:a.options.eventId})})},"{lock} click":function(){EasySocial.dialog({content:EasySocial.ajax("apps/event/discussions/controllers/discussion/confirmLock"),bindings:{"{lockButton} click":function(){EasySocial.ajax("apps/event/discussions/controllers/discussion/lock",{id:a.options.id}).done(function(){EasySocial.dialog().close(),a.element.addClass("is-locked")
})}}})}}}),EasySocial.Controller("Events.Item.Discussion.Reply",{defaultOptions:{"{acceptAnswer}":"[data-reply-accept-answer]","{delete}":"[data-reply-delete]","{edit}":"[data-reply-edit]","{cancelEdit}":"[data-reply-edit-cancel]","{update}":"[data-reply-edit-update]","{textarea}":"[data-reply-content]","{content}":"[data-reply-display-content]","{alertDiv}":"div.alert-error"}},function(a){return{init:function(){console.log(a.element),a.options.id=a.element.data("id")},"{acceptAnswer} click":function(){EasySocial.ajax("apps/event/discussions/controllers/reply/accept",{id:a.options.id}).done(function(){a.parent.setResolved()
})},cancelEditing:function(){a.element.removeClass("is-editing")},"{cancelEdit} click":function(){a.cancelEditing()},"{edit} click":function(){a.element.addClass("is-editing")},"{update} click":function(){var b=a.textarea().val();return""==b?(a.element.addClass("is-empty"),a.alertDiv().show(),!1):(EasySocial.ajax("apps/event/discussions/controllers/reply/update",{id:a.options.id,eventId:a.parent.options.eventId,content:b}).done(function(b){a.content().html(b),a.element.removeClass("is-empty"),a.alertDiv().hide(),a.cancelEditing()
}),void 0)},"{delete} click":function(){EasySocial.dialog({content:EasySocial.ajax("apps/event/discussions/controllers/reply/confirmDelete",{id:a.options.id}),bindings:{"{deleteButton} click":function(){EasySocial.ajax("apps/event/discussions/controllers/reply/delete",{id:a.options.id}).done(function(b){a.parent.updateReplyCounter(b.total_replies),EasySocial.dialog().close(),a.element.remove()})}}})}}}),EasySocial.Controller("Events.Item.Discussion.Form",{defaultOptions:{"{textarea}":"[data-reply-content]","{submitReply}":"[data-reply-submit]"}},function(a){return{init:function(){},"{submitReply} click":function(){var d=a.textarea().val();
return""==d?(a.element.addClass("is-empty"),!1):(EasySocial.ajax("apps/event/discussions/controllers/reply/submit",{id:a.parent.options.id,eventId:a.parent.options.eventId,content:d}).done(function(b){a.parent.insertReply(b),a.textarea().val("")}),void 0)}}}),b.resolve()}),EasySocial.module("apps/event/guests",function(){var b=this;EasySocial.Controller("Events.Item.Guests",{defaultOptions:{"{filters}":"[data-event-guests-filter]","{content}":"[data-event-guests-content]"}},function(a){return{init:function(){a.options.id=a.element.data("id"),a.items=a.addPlugin("Item")
},"{filters} click":function(b,c){c.preventDefault(),b.route(),a.filters().removeClass("active"),b.addClass("active");var d=b.data("filter");a.content().html("&nbsp;"),a.content().addClass("is-loading"),EasySocial.ajax("apps/event/guests/controllers/events/filterGuests",{id:a.options.id,filter:d}).done(function(b,c){a.content().removeClass("is-loading"),0==c?a.content().addClass("is-empty"):a.content().removeClass("is-empty"),a.content().html(b)})},"{self} emptyGuest":function(){a.content().addClass("is-empty")
}}}),EasySocial.Controller("Events.Item.Guests.Item",{defaultOptions:{"{item}":"[data-event-guest-item]","{promote}":"[data-guest-promote]","{demote}":"[data-guest-demote]","{approve}":"[data-guest-approve]","{reject}":"[data-guest-reject]","{remove}":"[data-guest-remove]"}},function(a){return{init:function(){},getItem:function(b){var c=a.item.of(b);return c},"{approve} click":function(b){var c=a.getItem(b),d=c.data("guestId");EasySocial.dialog({content:EasySocial.ajax("site/views/events/confirmApproveGuest",{id:d}),bindings:{"{approveButton} click":function(){EasySocial.ajax("site/controllers/events/approveGuest",{id:d}).done(function(){EasySocial.dialog().close(),c.remove(),0===a.item().length&&a.element.trigger("emptyGuest")
})}}})},"{reject} click":function(b){var c=a.getItem(b),d=c.data("guestId");EasySocial.dialog({content:EasySocial.ajax("site/views/events/confirmRejectGuest",{id:d}),bindings:{"{rejectButton} click":function(){EasySocial.ajax("site/controllers/events/rejectGuest",{id:d}).done(function(){EasySocial.dialog().close(),c.remove(),0===a.item().length&&a.element.trigger("emptyGuest")})}}})},"{promote} click":function(b){var c=a.getItem(b),d=c.data("guestId");EasySocial.dialog({content:EasySocial.ajax("site/views/events/confirmPromoteGuest",{id:d}),bindings:{"{promoteButton} click":function(){EasySocial.ajax("site/controllers/events/promoteGuest",{id:d}).done(function(){EasySocial.dialog().close(),c.removeClass("is-member").addClass("is-admin")
})}}})},"{demote} click":function(b){var c=a.getItem(b),d=c.data("guestId");EasySocial.dialog({content:EasySocial.ajax("site/views/events/confirmDemoteGuest",{id:d}),bindings:{"{demoteButton} click":function(){EasySocial.ajax("site/controllers/events/demoteGuest",{id:d}).done(function(){EasySocial.dialog().close(),"admin"==a.parent.filters(".active").data("filter")?(c.remove(),0===a.item().length&&a.element.trigger("emptyGuest")):c.removeClass("is-admin").addClass("is-member")})}}})},"{remove} click":function(b){var d=a.getItem(b),e=d.data("guestId");
EasySocial.dialog({content:EasySocial.ajax("site/views/events/confirmRemoveGuest",{id:e}),bindings:{"{removeButton} click":function(){EasySocial.ajax("site/controllers.events/removeGuest",{id:e}).done(function(){EasySocial.dialog().close(),d.remove(),0===a.item().length&&a.element.trigger("emptyGuest")})}}})}}}),b.resolve()}),EasySocial.module("apps/event/tasks",function(a){var b=this;EasySocial.Controller("Events.Apps.Tasks.Milestones.Browse",{defaultOptions:{eventId:null,"{milestone}":"[data-tasks-milestone-item]"}},function(a){return{init:function(){a.options.eventId=a.element.data("eventid"),a.milestone().addController(EasySocial.Controller.Events.Apps.Tasks.Milestones.Item,{"{parent}":a})
}}}),EasySocial.Controller("Events.Apps.Tasks.Milestones.Item",{defaultOptions:{"{complete}":"[data-milestone-mark-complete]","{incomplete}":"[data-milestone-mark-incomplete]","{delete}":"[data-milestone-delete]","{milestone}":"[data-event-tasks-milestone-item]"}},function(a){return{init:function(){a.options.id=a.element.data("id")},"{incomplete} click":function(b){EasySocial.ajax("apps/event/tasks/controllers/milestone/unresolve",{id:a.options.id,eventId:a.parent.options.eventId}).done(function(){a.element.removeClass("is-due").removeClass("is-completed"),b.hide(),a.complete().show()
})},"{complete} click":function(b){EasySocial.ajax("apps/event/tasks/controllers/milestone/resolve",{id:a.options.id,eventId:a.parent.options.eventId}).done(function(){a.element.removeClass("is-due").addClass("is-completed"),b.hide(),a.incomplete().show()})},"{delete} click":function(){EasySocial.dialog({content:EasySocial.ajax("apps/event/tasks/controllers/milestone/confirmDelete",{id:a.options.id,eventId:a.parent.options.eventId}),bindings:{"{deleteButton} click":function(){EasySocial.ajax("apps/event/tasks/controllers/milestone/delete",{id:a.options.id,eventId:a.parent.options.eventId}).done(function(){EasySocial.dialog().close(),a.element.remove()
})}}})}}}),EasySocial.Controller("Events.Apps.Tasks",{defaultOptions:{"{form}":"[data-tasks-form]","{formWrapper}":"[data-tasks-form-wrapper]","{taskList}":"[data-tasks-list]","{item}":"[data-tasks-list-item]","{completedList}":"[data-tasks-completed]","{openCounter}":"[data-tasks-open-counter]","{closedCounter}":"[data-tasks-closed-counter]","{completeMilestone}":"[data-milestone-mark-complete]","{incompleteMilestone}":"[data-milestone-mark-incomplete]","{deleteMilestone}":"[data-milestone-delete]","{wrapper}":"[data-tasks-wrapper]"}},function(b){return{init:function(){b.options.id=b.element.data("id"),b.options.eventId=b.element.data("eventid"),b.options.milestoneId=b.element.data("milestoneid"),b.form().addController(EasySocial.Controller.Events.Apps.Tasks.Form,{"{parent}":b}),b.implementItemController()
},implementItemController:function(){b.item().addController(EasySocial.Controller.Events.Apps.Tasks.Item,{"{parent}":b})},updateOpenCounter:function(a){b.openCounter().html(a)},updateClosedCounter:function(a){b.closedCounter().html(a)},insertCompleted:function(c){a(c).appendTo(b.completedList())},insertTask:function(a){b.formWrapper().after(a),b.implementItemController()},"{uncompleteMilestone} click":function(){EasySocial.ajax("apps/event/tasks/controllers/milestone/unresolve",{id:b.options.milestoneId,eventId:b.options.eventId}).done(function(){b.wrapper().removeClass("is-due").removeClass("is-completed")
})},"{completeMilestone} click":function(){EasySocial.ajax("apps/event/tasks/controllers/milestone/resolve",{id:b.options.milestoneId,eventId:b.options.eventId}).done(function(){b.wrapper().removeClass("is-due").addClass("is-completed")})},"{deleteMilestone} click":function(){EasySocial.dialog({content:EasySocial.ajax("apps/event/tasks/controllers/milestone/confirmDelete",{id:b.options.milestoneId,eventId:b.options.eventId}),bindings:{"{deleteButton} click":function(){EasySocial.ajax("apps/event/tasks/controllers/milestone/delete",{id:b.options.id,eventId:b.options.eventId}).done(function(){EasySocial.dialog().close(),window.location=b.options.redirect
})}}})}}}),EasySocial.Controller("Events.Apps.Tasks.Item",{defaultOptions:{"{checkbox}":"[data-item-checkbox]","{delete}":"[data-tasks-item-remove]"}},function(b){return{init:function(){b.options.id=b.element.data("id")},"{delete} click":function(){EasySocial.dialog({content:EasySocial.ajax("apps/event/tasks/controllers/tasks/confirmDelete",{eventId:b.parent.options.eventId}),bindings:{"{deleteButton} click":function(){EasySocial.ajax("apps/event/tasks/controllers/tasks/delete",{id:b.options.id,eventId:b.parent.options.eventId}).done(function(){EasySocial.dialog().close();
var a=parseInt(b.parent.openCounter().html());b.parent.updateOpenCounter(a-1),b.element.remove()})}}})},"{checkbox} change":function(c){var e=a(c).is(":checked");e?EasySocial.ajax("apps/event/tasks/controllers/tasks/resolve",{id:b.options.id,eventId:b.parent.options.eventId}).done(function(){var a=parseInt(b.parent.openCounter().html());b.parent.updateOpenCounter(a-1);var a=parseInt(b.parent.closedCounter().html());b.parent.updateClosedCounter(a+1),b.parent.insertCompleted(b.element)}):EasySocial.ajax("apps/event/tasks/controllers/tasks/unresolve",{id:b.options.id,eventId:b.parent.options.eventId}).done(function(){var c=parseInt(b.parent.openCounter().html());
b.parent.updateOpenCounter(c+1);var c=parseInt(b.parent.closedCounter().html());b.parent.updateClosedCounter(c-1),b.parent.insertTask(b.element)})}}}),EasySocial.Controller("Events.Apps.Tasks.Form",{defaultOptions:{"{title}":"[data-form-tasks-title]","{create}":"[data-form-tasks-create]","{assignee}":"[data-form-tasks-assignee]","{due}":"[data-form-tasks-due]","{error}":"[data-tasks-form-error]"}},function(a){return{init:function(){},resetForm:function(){a.element[0].reset()},"{title} keyup":function(b,c){13==c.keyCode&&a.create().click()
},"{create} click":function(){return""==a.title().val()?(a.error().removeClass("hide"),!1):(a.error().addClass("hide"),EasySocial.ajax("apps/event/tasks/controllers/tasks/save",{title:a.title().val(),assignee:a.assignee().val(),due:a.due().val(),eventId:a.parent.options.eventId,milestoneId:a.parent.options.milestoneId}).done(function(b){a.resetForm();var c=parseInt(a.parent.openCounter().html());a.parent.updateOpenCounter(c+1),a.parent.insertTask(b)}),void 0)}}}),b.resolve()}),EasySocial.module("apps/fields/event/description/content",function(){var b=this;
EasySocial.require().language("PLG_FIELDS_EVENT_DESCRIPTION_VALIDATION_INPUT_REQUIRED").done(function(a){EasySocial.Controller("Field.Event.Description",{defaultOptions:{required:!1,editor:null,"{input}":"[data-field-description]"}},function(b){return{init:function(){b.editor=b.options.editor},"{input} keyup":function(){b.validateInput()},"{input} blur":function(){b.validateInput()},validateInput:function(){b.clearError();var c=b.editor.getContent();return b.options.required&&a.isEmpty(c)?(b.raiseError(a.language("PLG_FIELDS_EVENT_DESCRIPTION_VALIDATION_INPUT_REQUIRED")),!1):!0
},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")},"{self} onError":function(c,d,e){"required"===e&&b.raiseError(a.language("PLG_FIELDS_EVENT_DESCRIPTION_VALIDATION_INPUT_REQUIRED"))},"{self} onSubmit":function(a,c,d){d.push(b.validateInput())}}}),b.resolve()})}),EasySocial.module("apps/fields/event/permalink/content",function(){var b=this;EasySocial.require().language("FIELDS_EVENT_PERMALINK_EXCEEDED_MAX_LENGTH","FIELDS_EVENT_PERMALINK_REQUIRED").done(function(a){EasySocial.Controller("Field.Event.Permalink",{defaultOptions:{required:!1,max:0,id:null,clusterid:null,userid:null,"{field}":"[data-field-permalink]","{checkButton}":"[data-permalink-check]","{input}":"[data-permalink-input]","{available}":"[data-permalink-available]"}},function(b){return{state:!1,init:function(){b.options.max=b.field().data("max")
},"{checkButton} click":function(){b.delayedCheck()},"{input} keyup":function(){b.delayedCheck()},delayedCheck:a.debounce(function(){b.checkPermalink()},250),checkPermalink:function(){b.clearError();var c=b.input().val();if(b.available().hide(),b.options.max>0&&c.length>b.options.max)return b.raiseError(a.language("FIELDS_EVENT_PERMALINK_EXCEEDED_MAX_LENGTH")),!1;if(!a.isEmpty(c)){b.checkButton().addClass("btn-loading");var d=a.Deferred();return EasySocial.ajax("fields/event/permalink/isValid",{id:b.options.id,clusterid:b.options.clusterid,permalink:c}).done(function(){b.clearError(),b.checkButton().removeClass("btn-loading"),b.available().show(),d.resolve()
}).fail(function(a){b.raiseError(a),b.checkButton().removeClass("btn-loading"),b.available().hide(),d.reject()}),d}return b.options.required&&a.isEmpty(c)?(b.available().hide(),b.raiseError(a.language("FIELDS_EVENT_PERMALINK_REQUIRED")),!1):!0},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")},"{self} onSubmit":function(a,c,d){d.push(b.checkPermalink())}}}),b.resolve()})}),EasySocial.module("apps/fields/event/permalink/sample_content",function(){var b=this;EasySocial.Controller("Field.Permalink.Sample",{defaultOptions:{"{checkPermalink}":"[data-check-permalink]"}},function(a){return{init:function(){},"{self} onConfigChange":function(b,c,d,e){switch(d){case"check_permalink":a.checkPermalink().toggle(!!e)
}}}}),b.resolve()}),EasySocial.module("apps/fields/event/recurring/content",function(a){var b=this;EasySocial.require().library("datetimepicker").done(function(){EasySocial.Controller("Field.Event.Recurring",{defaultOptions:{id:null,value:{},allday:0,showWarningMessages:0,eventId:null,"{type}":"[data-recurring-type]","{endBlock}":"[data-recurring-end-block]","{picker}":"[data-recurring-end-picker]","{toggle}":"[data-recurring-end-toggle]","{result}":"[data-recurring-end-result]","{dailyBlock}":"[data-recurring-daily-block]","{dailyInput}":"[data-recurring-daily-block] input","{summaryBlock}":"[data-recurring-summary-block]","{scheduleToggle}":"[data-recurring-schedule-toggle]","{scheduleBlock}":"[data-recurring-schedule-block]","{scheduleLoadingBlock}":"[data-recurring-schedule-loading-block]","{deleteRecurringButton}":"[data-recurring-delete]"}},function(b){return{init:function(){b.picker()._datetimepicker({pickTime:!1,component:"es",useCurrent:!1});
var c=b.result().val();if(!a.isEmpty(c)){var d=a.moment(c);b.datetimepicker("setDate",d)}b.calculateTotalRecur()},changed:0,"{window} easysocial.fields.allday.change":function(a,c,d){b.options.allday=d,b.calculateTotalRecur()},"{window} easysocial.fields.startend.start.change":function(){b.calculateTotalRecur()},"{toggle} click":function(){b.picker().focus()},"{picker} dp.change":function(a,c){b.setDateValue(c.date.toDate()),b.detectChanges(),b.calculateTotalRecur()},"{type} change":function(a){var d=a.val();
b.endBlock()["none"===d?"hide":"show"](),b.dailyBlock()["daily"===d?"show":"hide"](),b.detectChanges(),b.calculateTotalRecur()},"{dailyInput} change":function(){b.detectChanges(),b.calculateTotalRecur()},calculateTotalRecur:function(){b.summaryBlock().hide(),b.clearError();var c=a("[data-event-start]").find("[data-datetime]").val(),d=a("[data-event-timezone]").val(),e=b.result().val(),f=b.type().val(),g=[];("none"!=f||b.options.showWarningMessages)&&(a.isEmpty(c)||a.isEmpty(e)||a.isEmpty(f)||(a.each(b.dailyBlock().find("input"),function(b,c){el=a(c),el.is(":checked")&&g.push(el.val())
}),b.scheduleLoadingBlock().show(),b.getTotalRecur({start:c,timezone:d,end:e,type:f,daily:g})))},getTotalRecur:a.debounce(function(a){b.clearError(),EasySocial.ajax("fields/event/recurring/calculateTotalRecur",{id:b.options.id,start:a.start,timezone:a.timezone,allday:b.options.allday,end:a.end,type:a.type,daily:a.daily,eventId:b.options.eventId,changed:b.changed,showWarningMessages:b.options.showWarningMessages}).done(function(a){b.summaryBlock().html(a).show()}).fail(function(a){b.raiseError(a)}).always(function(){b.scheduleLoadingBlock().hide()
})},500),detectChanges:function(){var c=b.result().val(),d=b.type().val(),e=[],f=!1;a.each(b.dailyBlock().find("input"),function(b,c){el=a(c),el.is(":checked")&&e.push(el.val())}),(d!=b.options.value.type||c!=b.options.value.end||e.length!=b.options.value.daily.length)&&(f=!0),a.each(e,function(c,d){return-1==a.inArray(d,b.options.value.daily)?(f=!0,!1):void 0}),a.each(b.options.value.daily,function(b,c){return-1==a.inArray(c,e)?(f=!0,!1):void 0}),b.changed=f?1:0,a(window).trigger("easysocial.fields.recurring.changed",[f])
},"{scheduleToggle} click":function(){b.scheduleBlock().toggle()},"{deleteRecurringButton} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/events/deleteRecurringDialog",{id:b.options.eventId}),bindings:{"{submitButton} click":function(){var a=this.parent;a.loading(!0),b.deleteRecurring().done(function(){a.loading(!1),a.close(),b.calculateTotalRecur()})}}})},deleteRecurring:function(){return EasySocial.ajax("site/controllers/events/deleteRecurring",{eventId:b.options.eventId})},datetimepicker:function(a,c){return b.picker().data("DateTimePicker")[a](c)
},setDateValue:function(a){b.result().val(a.getFullYear()+"-"+("00"+(a.getMonth()+1)).slice(-2)+"-"+("00"+a.getDate()).slice(-2)+" "+("00"+a.getHours()).slice(-2)+":"+("00"+a.getMinutes()).slice(-2)+":"+("00"+a.getSeconds()).slice(-2))},"{self} onSubmit":function(a,b,c){c.push(!0)},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")}}}),b.resolve()})}),EasySocial.module("apps/fields/event/startend/content",function(){var b=this,c=EasySocial.options.momentLang;EasySocial.require().library("datetimepicker","moment/"+c).language("FIELDS_EVENT_STARTEND_VALIDATION_DATETIME_START_REQUIRED","FIELDS_EVENT_STARTEND_VALIDATION_DATETIME_END_REQUIRED").done(function(a){EasySocial.Controller("Field.Event.Startend",{defaultOptions:{dateFormat:"",allowTime:!0,allowTimezone:!0,disallowPast:!1,minuteStepping:15,yearfrom:"",yearto:"",requiredEnd:!1,allday:!1,calendarLanguage:"english",dow:0,"{startForm}":"[data-event-start]","{endForm}":"[data-event-end]","{timezone}":"[data-event-timezone]"}},function(b){return{init:function(){b.options.yearto=a.isEmpty(b.options.yearto)?(new Date).getFullYear()+100:parseInt(b.options.yearto)+1,b.options.yearfrom=b.options.yearfrom||1930,b.startDatetime=b.startForm().addController("EasySocial.Controller.Field.Event.Startend.Form",{"{parent}":b,type:"start"}),b.endDatetime=b.endForm().addController("EasySocial.Controller.Field.Event.Startend.Form",{"{parent}":b,type:"end"})
},"{self} onSubmit":function(a,c,d){d.push(b.validateInput())},validateInput:function(){return b.clearError(),a.isEmpty(b.startDatetime.datetime().val())?(b.raiseError(a.language("FIELDS_EVENT_STARTEND_VALIDATION_DATETIME_START_REQUIRED")),!1):b.options.requireEnd&&a.isEmpty(b.endDatetime.datetime().val())?(b.raiseError(a.language("FIELDS_EVENT_STARTEND_VALIDATION_DATETIME_END_REQUIRED")),!1):!0},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")}}}),EasySocial.Controller("Field.Event.Startend.Form",{defaultOptions:{type:null,"{picker}":"[data-picker]","{toggle}":"[data-picker-toggle]","{datetime}":"[data-datetime]"}},function(b,d){return{init:function(){b.load()
},"{window} easysocial.fields.startend.start.change":function(){"start"==d.type&&b.parent.endDatetime&&(b.parent.endDatetime.datetimepicker("destroy"),b.parent.endDatetime.load())},"{window} easysocial.fields.allday.change":function(a,c,d){b.datetimepicker("destroy"),b.parent.options.allday=1==d?!0:!1,b.load()},load:function(){var e=new a.moment;if(b.parent.options.disallowPast?e.date(e.date()-1):e.year(b.parent.options.yearfrom),"end"==d.type){var f=b.parent.startDatetime.datetime().val();if(f)var e=a.moment(f),e=e.date(e.date()-1)
}var g=b.parent.options.allowTime&&!b.parent.options.allday,h=b.parent.options.dateFormat;g||(h=h.substr(0,10)),b.picker()._datetimepicker({component:"es",useCurrent:!1,format:h,minDate:e,maxDate:new a.moment({y:b.parent.options.yearto}),icons:{time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down"},sideBySide:!1,pickTime:g,minuteStepping:parseInt(b.parent.options.minuteStepping),language:"english"==b.parent.options.calendarLanguage?"en-gb":c,dow:b.parent.options.dow});
var i=b.datetime().val();if(!a.isEmpty(i)){var j=a.moment(i);b.datetimepicker("setDate",j)}},datetimepicker:function(a,c){return b.picker().data("DateTimePicker")[a](c)},"{toggle} click":function(){b.picker().focus()},"{picker} dp.change":function(c,e){b.setDateValue(e.date.toDate()),a(window).trigger("easysocial.fields.startend."+d.type+".change",[e.date])},"{picker} change":function(c){a.isEmpty(c.val())&&b.datetime().val("")},setDateValue:function(a){b.datetime().val(a.getFullYear()+"-"+("00"+(a.getMonth()+1)).slice(-2)+"-"+("00"+a.getDate()).slice(-2)+" "+("00"+a.getHours()).slice(-2)+":"+("00"+a.getMinutes()).slice(-2)+":"+("00"+a.getSeconds()).slice(-2))
}}}),b.resolve()})}),EasySocial.module("apps/fields/event/startend/display",function(){var b=this;EasySocial.require().library("chosen","popbox").language("FIELDS_USER_DATETIME_LOCAL_TIMEZONE","FIELDS_USER_DATETIME_TIMEZONE_CHECKING").done(function(a){EasySocial.Controller("Field.Event.Startend.Display",{defaultOptions:{id:null,userid:null,"{box}":"[data-startend-box]"}},function(a){return{init:function(){a.box().addController("EasySocial.Controller.Field.Event.Startend.Display.Box",{"{parent}":a})}}}),EasySocial.Controller("Field.Event.Startend.Display.Box",{defaultOptions:{date:null,timezone:null,local:null,"{toggle}":"[data-popbox]","{content}":"[data-popbox-content]","{date}":"[data-date]","{timezone}":"[data-timezone]","{loading}":"[data-loading]"}},function(b){return{init:function(){b.options.timezone=b.timezone().data("timezone"),b.options.date=b.date().data("date-utc"),b.options.local=-(new Date).getTimezoneOffset()/60;
var a=b.content().html(),c=b.toggle().data("popbox-position");b.toggle().popbox({content:a,id:"fd",component:"es",type:"timezone",toggle:"click",position:c}).attr("data-popbox","")},"{toggle} popboxActivate":function(a,c,d){d.tooltip.addController("EasySocial.Controller.Field.Event.Startend.Display.Timezone",{"{parent}":b})},datetime:a.memoize(function(a){return EasySocial.ajax("fields/event/startend/getDatetime",{id:b.parent.options.id,userid:b.parent.options.userid,tz:a,local:b.options.local,datetime:b.options.date})
})}}),EasySocial.Controller("Field.Event.Startend.Display.Timezone",{defaultOptions:{"{timezones}":"[data-timezone-select]","{reset}":"[data-timezone-reset]","{local}":"[data-timezone-local]"}},function(b){return{init:function(){b.timezones().chosen({search_contains:!0})},"{timezones} change":function(c){var e=c.val();b.parent.date().html(a.language("FIELDS_USER_DATETIME_TIMEZONE_CHECKING")),b.parent.timezone().html("local"===e?a.language("FIELDS_USER_DATETIME_LOCAL_TIMEZONE"):e),b.parent.datetime(e).done(function(a){b.parent.date().html(a)
})},"{reset} click":function(){b.setTimezone(b.parent.options.timezone)},"{local} click":function(){b.setTimezone("local")},setTimezone:function(a){b.timezones().val(a).trigger("liszt:updated").trigger("change")}}}),b.resolve()})}),EasySocial.module("apps/fields/group/permalink/content",function(){var b=this;EasySocial.require().language("PLG_FIELDS_GROUP_PERMALINK_EXCEEDED_MAX_LENGTH","PLG_FIELDS_GROUP_PERMALINK_REQUIRED").done(function(a){EasySocial.Controller("Field.Group.Permalink",{defaultOptions:{required:!1,max:0,id:null,groupid:null,userid:null,"{field}":"[data-field-permalink]","{checkButton}":"[data-permalink-check]","{input}":"[data-permalink-input]","{available}":"[data-permalink-available]"}},function(b){return{state:!1,init:function(){b.options.max=b.field().data("max")
},"{checkButton} click":function(){b.delayedCheck()},"{input} keyup":function(){b.delayedCheck()},delayedCheck:a.debounce(function(){b.checkPermalink()},250),checkPermalink:function(){b.clearError();var c=b.input().val();if(b.available().hide(),b.options.max>0&&c.length>b.options.max)return b.raiseError(a.language("PLG_FIELDS_GROUP_PERMALINK_EXCEEDED_MAX_LENGTH")),!1;if(!a.isEmpty(c)){b.checkButton().addClass("btn-loading");var d=a.Deferred();return EasySocial.ajax("fields/group/permalink/isValid",{id:b.options.id,groupid:b.options.groupid,permalink:c}).done(function(){b.clearError(),b.checkButton().removeClass("btn-loading"),b.available().show(),d.resolve()
}).fail(function(a){b.raiseError(a),b.checkButton().removeClass("btn-loading"),b.available().hide(),d.reject()}),d}return b.options.required&&a.isEmpty(c)?(b.available().hide(),b.raiseError(a.language("PLG_FIELDS_GROUP_PERMALINK_REQUIRED")),!1):!0},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")},"{self} onSubmit":function(a,c,d){d.push(b.checkPermalink())}}}),b.resolve()})}),EasySocial.module("apps/fields/group/permalink/sample_content",function(){var b=this;EasySocial.Controller("Field.Permalink.Sample",{defaultOptions:{"{checkPermalink}":"[data-check-permalink]"}},function(a){return{init:function(){},"{self} onConfigChange":function(b,c,d,e){switch(d){case"check_permalink":a.checkPermalink().toggle(!!e)
}}}}),b.resolve()}),EasySocial.module("apps/fields/user/address/content",function(a){var b=this;EasySocial.require().library("gmaps").language("PLG_FIELDS_ADDRESS_PLEASE_ENTER_ADDRESS1","PLG_FIELDS_ADDRESS_PLEASE_ENTER_ADDRESS2","PLG_FIELDS_ADDRESS_PLEASE_ENTER_CITY","PLG_FIELDS_ADDRESS_PLEASE_ENTER_STATE","PLG_FIELDS_ADDRESS_PLEASE_ENTER_ZIP","PLG_FIELDS_ADDRESS_PLEASE_ENTER_COUNTRY").done(function(){EasySocial.Controller("Field.Address",{defaultOptions:{required:{},show:{},"{field}":"[data-field-address]","{address1}":"[data-field-address-address1]","{address2}":"[data-field-address-address2]","{city}":"[data-field-address-city]","{state}":"[data-field-address-state]","{country}":"[data-field-address-country]","{zip}":"[data-field-address-zip]","{required}":"[data-required]","{notice}":"[data-check-notice]"}},function(b){return{init:function(){},fields:["address1","address2","city","state","zip","country"],validateInput:function(){b.clearError();
var c=!1;return b.clearError(),a.each(b.fields,function(d,e){var f=b[e]();f.removeClass("has-error");var g=f.val();a.isEmpty(g)&&b.options.required[e]&&b.options.show[e]&&(f.addClass("has-error"),c||(b.raiseError(a.language("PLG_FIELDS_ADDRESS_PLEASE_ENTER_"+e.toUpperCase())),c=!0))}),!0},"{address1}, {address2}, {zip}, {city}, {state} blur":function(){b.validateInput()},"{country} change":function(c){b.validateInput(),b.state().is("select")&&EasySocial.ajax("fields/user/address/getStates",{id:b.options.id,country:c.val()}).done(function(c){b.state().html(""),a.each(c,function(c,d){a("<option></option>").html(d).val(d).appendTo(b.state())
})})},raiseError:function(a){b.notice().css("color","#a94442").text(a).parent(".controls-error").show()},clearError:function(){b.notice().parent(".controls-error").hide()},"{self} onSubmit":function(a,c,d){d.push(b.validateInput())},"{self} onConfigChange":function(c,d,e,f){var g=["address1","address2","city","zip","state","country"];a.inArray(e,g)>=0&&(b.options.required[e]=!!f),b.required().hide(),a.each(g,function(a,c){return b.options[c]?(b.required().show(),!1):void 0})}}}),b.resolve()})}),EasySocial.module("apps/fields/user/address/display_content",function(a){var b=this;
EasySocial.require().library("gmaps").done(function(){EasySocial.Controller("Field.Address.Display",{defaultOptions:{latitude:null,longitude:null,ratio:1,"{base}":"[data-location-base]","{map}":"[data-location-map]","{mapImage}":"[data-location-map-image]"}},function(b){return{init:function(){var a=b.map();b.options.latitude=a.data("latitude"),b.options.longitude=a.data("longitude"),b.setLayout()},"{window} resize":a.debounce(function(){b.setLayout()},250),navigate:function(c,d){var e=b.mapImage(),h=(Math.floor(e.width()),Math.floor(e.height()),a.GMaps.staticMapURL({size:[1280,1280],lat:c,lng:d,sensor:!0,scale:2,markers:[{lat:c,lng:d}]})),h=h.replace(/http\:|https\:/,"");
a.Image.get(h).done(function(){e.css({backgroundImage:a.cssUrl(h),backgroundSize:"cover",backgroundPosition:"center center"}),b.base().addClass("has-location")}).always(function(){b.base().removeClass("is-loading")})},setLayout:function(){setTimeout(function(){b.options.latitude&&b.options.longitude&&b.navigate(b.options.latitude,b.options.longitude)},1)},"{self} onShow":function(){b.setLayout()}}}),b.resolve()})}),EasySocial.module("apps/fields/user/address/maps",function(a){var b=this;a.template("easysocial/maps.suggestion",'<div class="es-location-suggestion" data-location-suggestion><span class="formatted_address">[%= location.formatted_address %]</span></div>'),EasySocial.require().library("gmaps","placeholder","image").language("COM_EASYSOCIAL_LOCATION_PERMISSION_ERROR","COM_EASYSOCIAL_LOCATION_TIMEOUT_ERROR","COM_EASYSOCIAL_LOCATION_UNAVAILABLE_ERROR","COM_EASYSOCIAL_STREAM_AT").done(function(){var c={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,ENTER:13,ESCAPE:27,LEFT:37,RIGHT:39,SPACE:32,TAB:9,UP:38};
EasySocial.Controller("Field.Address.Maps",{defaultOptions:{required:null,zoom:2,latitude:null,longitude:null,address:null,singleLocation:!0,required:!1,ratio:3,"{field}":"[data-field-address]","{base}":"[data-location-base]","{map}":"[data-location-map]","{mapImage}":"[data-location-map-image]","{detectButton}":"[data-location-detect]","{removeButton}":"[data-location-remove]","{form}":"[data-location-form]","{textbox}":"[data-location-textbox]","{textField}":"[data-location-textfield]","{autocomplete}":"[data-location-autocomplete]","{suggestions}":"[data-location-suggestions]","{suggestion}":"[data-location-suggestion]","{source}":"[data-location-source]",view:{suggestion:"maps.suggestion"}}},function(b){return{init:function(){if(navigator.geolocation&&b.base().addClass("is-detectable"),b.textField().placeholder(),b.textField().removeAttr("disabled"),!a.isEmpty(b.source().val())){var c=JSON.parse(b.source().val());
c.latitude&&c.longitude&&(b.navigate(c.latitude,c.longitude),b.base().addClass("has-location"))}},"{window} resize":a.debounce(function(){var a=JSON.parse(b.source().val());if(a.latitude&&a.longitude){var c=b.mapImage();c.data("width")!==c.width()&&b.navigate(a.latitude,a.longitude)}},250),"{self} onShow":function(){var a=JSON.parse(b.source().val());if(a.latitude&&a.longitude){var c=b.mapImage();c.data("width")!==c.width()&&b.navigate(a.latitude,a.longitude)}},navigate:function(c,d){b.field().css({"max-width":"none"});
var e=b.mapImage(),h=(Math.floor(e.width()),Math.floor(e.height()),a.GMaps.staticMapURL({size:[1280,1280],lat:c,lng:d,sensor:!0,scale:2,markers:[{lat:c,lng:d}]}));a.Image.get(h).done(function(){e.css({backgroundImage:a.cssUrl(h),backgroundSize:"cover",backgroundPosition:"center center"}),b.base().addClass("has-location")}).always(function(){b.base().removeClass("is-loading")})},locations:{},lastQueryAddress:null,results:[],result:null,"{textField} keypress":function(d,e){switch(e.keyCode){case c.UP:var f=a(b.suggestion(".active").prev(b.suggestion.selector)[0]||b.suggestion(":last")[0]);
b.suggestion().removeClass("active"),f.addClass("active").trigger("activate"),b.suggestions().scrollTo(f,{offset:-1*f.height()}),e.preventDefault();break;case c.DOWN:var g=a(b.suggestion(".active").next(b.suggestion.selector)[0]||b.suggestion(":first")[0]);b.suggestion().removeClass("active"),g.addClass("active").trigger("activate"),b.suggestions().scrollTo(g,{offset:-1*g.height()}),e.preventDefault();break;case c.ENTER:var h=b.suggestion(".active"),i=h.data("location");b.set(i),b.hideSuggestions();break;case c.ESCAPE:b.hideSuggestions()
}},"{textField} keyup":function(d,e){switch(e.keyCode){case c.UP:case c.DOWN:case c.LEFT:case c.RIGHT:case c.ENTER:case c.ESCAPE:break;default:var f=a.trim(d.val());""===f&&(b.base().removeClass("has-location"),b.hideSuggestions());var g=b.locations[f];g?(b.lastQueryAddress=f,b.suggest(g)):b.lookup(f)}},lookup:a.debounce(function(c){b.base().addClass("is-busy"),a.GMaps.geocode({address:c,callback:function(a,d){b.base().removeClass("is-busy"),"OK"==d&&(b.locations[c]=a,b.suggest(a),b.lastQueryAddress=c)}})},250),suggest:function(c){var d=b.suggestions();
d.empty(),c.length<0||(b.results=c,a.each(c,function(a,c){b.view.suggestion({location:c}).data("location",c).appendTo(d)}),b.showSuggestions())},showSuggestions:function(){b.focusSuggestion=!0,b.element.find(".es-story-footer").addClass("swap-zindex"),setTimeout(function(){b.autocomplete().addClass("active");var c=a(document),d="click.es.story.location";c.off(d).on(d,function(e){var f=a(e.target).parents().andSelf();f.filter(b.element).length>0||(c.off(d),b.hideSuggestions())})},500)},hideSuggestions:function(){b.focusSuggestion=!1,b.autocomplete().removeClass("active"),a(document).off("click.es.story.location"),setTimeout(function(){b.focusSuggestion||b.element.find(".es-story-footer").removeClass("swap-zindex")
},500)},"{suggestion} activate":function(a){var d=a.data("location");b.navigate(d.geometry.location.lat(),d.geometry.location.lng())},"{suggestion} mouseover":function(a){b.suggestion().removeClass("active"),a.addClass("active").trigger("activate")},"{suggestion} click":function(a){var d=a.data("location");b.set(d),b.hideSuggestions()},set:function(a){b.currentLocation=a;var c=a.geometry.location.lat(),d=a.geometry.location.lng();b.navigate(c,d);var e=a.formatted_address;b.textField().val(e),b.lastQueryAddress=e,b.base().addClass("has-location"),b.result=a;
var f=b.getResult("source");b.source().val(JSON.stringify(f))},unset:function(){b.currentLocation=null,b.textField().val(""),b.mapImage().attr("src",""),b.base().removeClass("has-location"),b.source().val("")},detectTimer:null,"{detectButton} click":function(){b.textbox();b.base().addClass("is-busy"),clearTimeout(b.detectTimer),b.detectTimer=setTimeout(function(){b.base().removeClass("is-busy")},8e3),a.GMaps.geolocate({success:function(c){a.GMaps.geocode({lat:c.coords.latitude,lng:c.coords.longitude,callback:function(a,c){"OK"==c&&(b.suggest(a),b.textField().focus())
}})},error:function(b){var c="";switch(b.code){case 1:c=a.language("COM_EASYSOCIAL_LOCATION_PERMISSION_ERROR");break;case 2:c=a.language("COM_EASYSOCIAL_LOCATION_TIMEOUT_ERROR");break;case 3:default:c=a.language("COM_EASYSOCIAL_LOCATION_UNAVAILABLE_ERROR")}},always:function(){clearTimeout(b.detectTimer),b.base().removeClass("is-busy")}})},"{removeButton} click":function(){b.unset(),b.hideSuggestions()},getResult:function(c){if(!b.result){if(0===b.results.length)return!1;b.result=b.results[0]}var d=b.result;if(void 0===c)return d;
switch(c){case"coords":return{lat:d.geometry.location.lat(),lng:d.geometry.location.lng()};case"lat":case"latitude":return d.geometry.location.lat();case"lng":case"longitude":return d.geometry.location.lng();case"address":return d.formatted_address;case"viewport":return d.geometry.viewport;case"bounds":return d.geometry.bounds||d.geometry.viewport;case"source":var e={};a.each(d.address_components,function(a,b){b.types[0]&&(e[b.types[0]]=b.long_name)});var f={address1:["street_address","route"],address2:["intersection","colloquial_area","neighborhood","premise","subpremise"],city:["locality","sublocality","sublocality_level_1","sublocality_level_2","sublocality_level_3","sublocality_level_4","sublocality_level_5"],state:["administrative_area_level_1","administrative_area_level_2","administrative_area_level_3"],zip:"postal_code",country:"country"},g={};
a.each(f,function(b,c){return g[b]="",a.isArray(c)?(a.each(c,function(a,c){return void 0!==e[c]?(g[b]=e[c],!1):!0}),!0):(void 0!==e[c]&&(g[b]=e[c]),void 0)});var h=a.extend(g,{components:e,address:d.formatted_address,latitude:d.geometry.location.lat(),longitude:d.geometry.location.lng()});return h}}}}),b.resolve()})}),EasySocial.module("apps/fields/user/autocomplete/content",function(){var b=this;EasySocial.require().library("textboxlist").done(function(a){EasySocial.Controller("Field.Autocomplete",{defaultOptions:{required:!1,id:null,types:null,fieldname:null,actor:null,target:null,selectedItems:[],max:null,exclusive:!0,exclusion:[],minLength:1,highlight:!0,name:"uid[]",type:"","{suggest}":"[data-field-suggest]"}},function(b,c){return{init:function(){c.name=c.fieldname+"[]",b.initSuggest()
},initSuggest:function(){b.suggest().textboxlist({component:"es",name:c.name,max:c.max,plugin:{autocomplete:{exclusive:c.exclusive,minLength:c.minLength,highlight:c.highlight,showLoadingHint:!0,showEmptyHint:!0,query:function(a){var b=EasySocial.ajax("fields/user/autocomplete/suggest",{search:a,id:c.id});return b}}}}).textboxlist("enable")},"{suggest} removeItem":function(b,d,e){var f=a.inArray(e.id.toString(),c.exclusion)>-1;f&&c.exclusion.splice(c.exclusion.indexOf(e.id.toString()),1)},"{suggest} filterMenu":function(b,d,e,f,g,h){var i=h.getAddedItems(),i=a.pluck(i,"id"),j=i.concat(c.exclusion);
f.each(function(){var b=a(this),c=b.data("item"),d=a.inArray(c.id.toString(),j)>-1;b.toggleClass("hidden",d)})}}}),b.resolve()})}),EasySocial.module("apps/fields/user/avatar/content",function(a){var b=this;EasySocial.require().library("image","imgareaselect").stylesheet("imgareaselect/default").language("PLG_FIELDS_AVATAR_VALIDATION_EMPTY_PROFILE_PICTURE").done(function(){EasySocial.Controller("Field.Avatar",{defaultOptions:{required:!1,id:0,group:null,origSource:null,defaultAvatar:null,hasAvatar:null,"{field}":"[data-field-avatar]","{gallery}":"[data-field-avatar-gallery]","{galleryList}":"[data-field-avatar-gallery-items]","{galleryItem}":"[data-field-avatar-gallery-item]","{frame}":"[data-field-avatar-frame]","{viewport}":"[data-field-avatar-viewport]","{avatarSource}":"[data-field-avatar-source]","{avatarData}":"[data-field-avatar-data]","{avatarPath}":"[data-field-avatar-path]","{avatarType}":"[data-field-avatar-type]","{avatarName}":"[data-field-avatar-name]","{file}":"[data-field-avatar-file]","{image}":"[data-field-avatar-selected]","{note}":"[data-field-avatar-note]","{actions}":"[data-field-avatar-actions]","{cancel}":"[data-field-avatar-actions-cancel]","{crop}":"[data-field-avatar-actions-crop]","{removeFrame}":"[data-field-avatar-remove]","{remove}":"[data-field-avatar-remove-button]","{revertFrame}":"[data-field-avatar-revert]","{revert}":"[data-field-avatar-revert-button]","{loader}":"[data-field-avatar-loader]"}},function(b){return{init:function(){b.state=!!b.options.hasAvatar
},state:!0,"{file} change":function(c){if(!a.isEmpty(c.val())){var e=c.val().replace(/\\/g,"/").replace(/.*\//,"");c.parents(".input-group").find(":text").val(e),b.state=!1,b.loader().show(),b.frame().hide(),b.file().hide(),b.clearError(),EasySocial.ajax("fields/"+b.options.group+"/avatar/upload",{id:b.options.id,files:c},{type:"iframe"}).done(function(a,c,d){b.avatarName().val(a.name),b.avatarSource().val(c),b.avatarPath().val(d),b.avatarType().val("upload"),b.setLayout(c),b.galleryItem().removeClass("active"),b.removeFrame().hide(),b.revertFrame().hide(),b.state=!0
}).fail(function(a){b.loader().hide(),b.raiseError(a),b.file().show().val(""),b.frame().show()})}},setLayout:function(c){var d=a.Image.get(c),e=b.frame();d.done(function(d,f){e.css("background-image",a.cssUrl(c)),e.addClass("avatar-frame-crop"),e.show(),b.loader().hide(),b.actions().show(),b.note().show(),b.viewport().imgAreaSelect({remove:!0}),b.viewport().show();var g=a.Image.resizeWithin(f.width,f.height,e.width(),e.height()),h=Math.min(g.width,g.height),i=Math.floor((g.width-h)/2),j=Math.floor((g.height-h)/2),k=i+h,l=j+h;
b.viewport().css(g).imgAreaSelect({handles:!0,aspectRatio:"1:1",parent:e,x1:i,y1:j,x2:k,y2:l,onSelectEnd:function(a,c){var d=!("0"==c.width&&"0"==c.height);if(d){var e=JSON.stringify(b.data());b.avatarData().val(e)}}})})},"{cancel} click":function(){b.actions().hide(),b.note().hide(),b.frame().hide(),b.file().show(),b.file().val(""),b.file().parents(".input-group").find(":text").val(""),b.avatarSource().val(""),b.avatarPath().val(""),b.avatarData().val(""),b.avatarType().val(""),b.viewport().hide().imgAreaSelect({remove:!0}),a.isEmpty(b.options.origSource)||b.frame().css("background-image",a.cssUrl(b.options.origSource)).removeClass("avatar-frame-crop").show(),b.options.hasAvatar&&b.removeFrame().show()
},data:function(){var a=b.viewport(),c=a.width(),d=a.height(),e=a.imgAreaSelect({instance:!0}).getSelection(),f={top:e.y1/d,left:e.x1/c,width:e.width/c,height:e.height/d};return f},"{gallery} click":function(){b.galleryList().toggle()},"{galleryItem} click":function(a){if(!a.hasClass("active")){var d=a.data("id");b.galleryItem().removeClass("active"),a.addClass("active"),b.state=!1,b.loader().show(),b.frame().hide(),b.file().hide(),b.file().val(""),b.file().parents(".input-group").find(":text").val(""),b.clearError(),b.avatarType().val("gallery"),b.avatarSource().val(d),EasySocial.ajax("fields/user/avatar/loadDefault",{avatarId:d}).done(function(a){b.frame().css("background-image","url("+a+")"),b.frame().show(),b.frame().removeClass("avatar-frame-crop"),b.loader().hide(),b.viewport().hide(),b.viewport().imgAreaSelect({remove:!0}),b.actions().hide(),b.note().hide(),b.file().show(),b.revertFrame().show(),b.removeFrame().hide(),b.state=!0
})}},"{remove} click":function(){b.avatarType().val("remove"),b.frame().css("background-image",a.cssUrl(b.options.defaultAvatar)),b.removeFrame().hide(),b.options.hasAvatar&&b.revertFrame().show(),b.state=!1},"{revert} click":function(){b.avatarType().val(""),b.frame().css("background-image",a.cssUrl(b.options.origSource)),b.options.hasAvatar&&b.removeFrame().show(),b.revertFrame().hide(),b.galleryItem().removeClass("active"),b.state=!0},"{self} onSubmit":function(c,d,e){b.options.required&&(b.state||b.raiseError(a.language("PLG_FIELDS_AVATAR_VALIDATION_EMPTY_PROFILE_PICTURE")),e.push(b.state))
},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")}}}),b.resolve()})}),EasySocial.module("apps/fields/user/avatar/sample_content",function(){var b=this;EasySocial.Controller("Field.Avatar.Sample",{defaultOptions:{"{upload}":"[data-avatar-upload]","{gallery}":"[data-avatar-gallery]","{galleryTitle}":"[data-avatar-gallery-title]","{galleryButton}":"[data-avatar-gallery-button]","{gallerySelection}":"[data-avatar-gallery-selection]"}},function(a){return{"{self} onConfigChange":function(b,c,d,e){switch(d){case"upload":a.upload().toggle(e);
break;case"gallery":a.gallery().toggle(e);break;case"use_gallery_button":a.galleryButton().toggle(e),a.gallerySelection().toggle(!e),a.galleryTitle().toggle(!e)}}}}),b.resolve()}),EasySocial.module("apps/fields/user/checkbox/content",function(a){var b=this;EasySocial.require().language("PLG_FIELDS_CHECKBOX_CHECK_AT_LEAST_ONE_ITEM").done(function(){EasySocial.Controller("Field.Checkbox",{defaultOptions:{required:!1,"{item}":"[data-field-checkbox-item]"}},function(b){return{init:function(){},validateInput:function(){return b.clearError(),b.options.required&&0==b.item(":checked").length?(b.raiseError(),!1):!0
},raiseError:function(){b.trigger("error",[a.language("PLG_FIELDS_CHECKBOX_CHECK_AT_LEAST_ONE_ITEM")])},clearError:function(){b.trigger("clear")},"{self} onSubmit":function(a,c,d){d.push(b.validateInput())}}}),b.resolve()})}),EasySocial.module("apps/fields/user/checkbox/sample_content",function(){var b=this;EasySocial.require().view("fields/user/checkbox/item").done(function(){EasySocial.Controller("Field.Checkbox.Sample",{defaultOptions:{"{checkboxes}":"[data-checkboxes]","{checkbox}":"[data-checkbox]","{checkboxInput}":"[data-checkbox-input]","{checkboxTitle}":"[data-checkbox-title]",view:{sample:"fields/user/checkbox/item"}}},function(a){return{init:function(){},"{self} onChoiceTitleChanged":function(b,c,d,e){a.checkboxTitle().eq(d).text(e)
},"{self} onChoiceValueChanged":function(b,c,d,e){a.checkboxInput().eq(d).val(e)},"{self} onChoiceAdded":function(b,c,d){a.checkbox().eq(d).length>0?a.checkbox().eq(d).before(a.view.sample()):a.checkboxes().append(a.view.sample())},"{self} onChoiceRemoved":function(b,c,d){a.checkbox().eq(d).remove()},"{self} onChoiceToggleDefault":function(b,c,d,e){var f=a.checkboxInput().eq(d);e?f.prop("checked",!0):f.prop("checked",!1)}}}),b.resolve()})}),EasySocial.module("apps/fields/user/country/content",function(a){var b=this;
EasySocial.require().library("textboxlist").language("PLG_FIELDS_COUNTRY_VALIDATION_REQUIRED","PLG_FIELDS_COUNTRY_VALIDATION_MINIMUM_ERROR","PLG_FIELDS_COUNTRY_VALIDATION_MAXIMUM_ERROR").done(function(){EasySocial.Controller("Field.Country",{defaultOptions:{fieldname:"",required:!1,id:null,min:null,max:null,selecttype:"textboxlist","{field}":"[data-field-country]","{inputTextboxlist}":"[data-country-select-textboxlist]","{inputMultilist}":"[data-country-select-multilist]","{inputCheckbox}":"[data-country-select-checkbox]","{inputCheckboxes}":"[data-country-select-checkbox] input","{inputDropdown}":"[data-country-select-dropdown]"}},function(b){return{init:function(){b.options.max=b.field().data("max"),b.options.min=b.field().data("min"),b.options.selecttype=b.field().data("select-type"),"textboxlist"===b.options.selecttype&&EasySocial.module("field.country/"+b.options.id).done(function(a){b.inputTextboxlist().textboxlist({component:"es",name:b.options.fieldname+"[]",max:b.options.max<1?null:b.options.max,plugin:{autocomplete:{exclusive:!0,query:a}}})
})},"{inputMultilist} change":function(a){return b.options.max>0&&a.val().length>b.options.max?(a.val(b.lastValidSelection?b.lastValidSelection:""),!1):(b.lastValidSelection=a.val(),void 0)},"{inputCheckboxes} change":function(a){var d=b.inputCheckboxes(":checked").length;return b.options.max>0&&d>b.options.max?(a.removeAttr("checked"),!1):void 0},validateInput:function(){var c=null;if("textboxlist"===b.options.selecttype&&(c=b.inputTextboxlist().controller("textboxlist").getAddedItems()),"multilist"===b.options.selecttype&&(c=b.inputMultilist().val()),"checkbox"===b.options.selecttype&&(c=b.inputCheckboxes(":checked")),"dropdown"===b.options.selecttype){var d=b.inputDropdown().val();
a.isEmpty(d)||(c=[d])}var e=c?c.length:0;return b.options.required||0!==e?b.options.required&&1>e?(b.raiseError(a.language("PLG_FIELDS_COUNTRY_VALIDATION_REQUIRED")),!1):b.options.min>0&&e<b.options.min?(b.raiseError(a.language("PLG_FIELDS_COUNTRY_VALIDATION_MINIMUM_ERROR")),!1):b.options.max>0&&e>b.options.max?(b.raiseError(a.language("PLG_FIELDS_COUNTRY_VALIDATION_MAXIMUM_ERROR")),!1):!0:!0},raiseError:function(a){b.trigger("error",[a])},"{self} onSubmit":function(a,c,d){d.push(b.validateInput())}}}),b.resolve()
})}),EasySocial.module("apps/fields/user/country/sample_content",function(){var b=this;EasySocial.Controller("Field.Country.Sample",{defaultOptions:{"{inputGeneral}":"[data-country-select]","{inputTextboxlist}":"[data-country-select-textboxlist]","{inputMultilist}":"[data-country-select-multilist]","{inputCheckbox}":"[data-country-select-checkbox]","{inputDropdown}":"[data-country-select-dropdown]","{maxMessage}":"[data-country-max-message]","{maxCount}":"[data-country-max-count]"}},function(a){return{init:function(){},"{self} onConfigChange":function(b,c,d,e){switch(d){case"select_type":a.inputGeneral().hide(),"textboxlist"===e&&a.inputTextboxlist().show(),"multilist"===e&&a.inputMultilist().show(),"checkbox"===e&&a.inputCheckbox().show(),"dropdown"===e&&a.inputDropdown().show();
break;case"multilist_size":a.inputMultilist().attr("size",e);break;case"show_max_message":a.maxMessage().toggle(!!e);break;case"max":a.maxCount().text(e)}}}}),b.resolve()}),EasySocial.module("apps/fields/user/cover/content",function(a){var b=this;EasySocial.require().library("image").language("PLG_FIELDS_COVER_VALIDATION_REQUIRED").done(function(){EasySocial.Controller("Field.Cover",{defaultOptions:{id:0,group:null,required:!1,hasCover:!0,defaultCover:null,ratio:3,"{image}":"[data-field-cover-image]","{data}":"[data-field-cover-data]","{position}":"[data-field-cover-position]","{file}":"[data-field-cover-file]","{note}":"[data-field-cover-note]","{loader}":"[data-field-cover-loader]","{error}":"[data-field-cover-error]","{removeButton}":"[data-field-cover-remove-button]","{revertFrame}":"[data-field-cover-revert]","{revertButton}":"[data-field-cover-revert-button]"}},function(b){return{init:function(){b.setFrame(),b.setLayout(),b.origCover=b.options.hasCover?a.uri(b.image().css("backgroundImage")).extract(0):null,b.origPosition=b.options.hasCover?b.image().css("backgroundPosition"):null
},"{self} onShow":function(){setTimeout(function(){b.setLayout()},1)},setFrame:function(){var a=b.image().width(),c=a/b.options.ratio;b.image().css("height",c)},"{window} resize":a.debounce(function(){b.setFrame()},250),imageLoaders:{},"{file} change":function(c){if(!a.isEmpty(c.val())){var e=c.val().replace(/\\/g,"/").replace(/.*\//,"");c.parents(".input-group").find(":text").val(e),b.loader().show(),b.error().hide(),b.image().hide(),b.note().hide(),b.file().hide(),EasySocial.ajax("fields/"+b.options.group+"/cover/upload",{id:b.options.id,files:c},{type:"iframe"}).done(function(c){var d=JSON.stringify(c);
b.data().val(d);var e=JSON.stringify({x:.5,y:.5});b.position().val(e),b.position().val();{var f=c.large.uri,g=b.imageLoaders;(g[f]||(g[f]=a.Image.get(f))).done(function(a){b.setLayout.image=a,b.file().show(),b.image().show(),b.note().show(),b.loader().hide(),b.revertFrame().hide(),b.removeButton().show(),b.setCover(c.large.uri)})}}).fail(function(a){b.loader().hide(),b.file().show(),b.error().show().html(a)})}},setLayout:function(){var c=b.image(),d=b.setLayout.image;if(d){var h=d.data("width"),i=d.data("height"),j=c.width(),k=c.height(),l=a.Image.resizeProportionate(h,i,j,k,"outer");
b.availableWidth=j-l.width,b.availableHeight=k-l.height,b.setFrame()}else{var e=a.uri(c.css("backgroundImage")).extract(0);if(!e)return;{var f=b.imageLoaders;(f[e]||(f[e]=a.Image.get(e))).done(function(a){b.setLayout.image=a,b.setLayout()})}}},setCover:function(c,d){d=d||"50% 50%",b.image().css({backgroundImage:a.cssUrl(c),backgroundPosition:d}),b.setLayout(),b.image().addClass("cover-move"),b.note().show()},x:.5,y:.5,moveCover:function(a,c,d){d||(d=b.image());var e=b.availableWidth,f=b.availableHeight,g=0==e?0:b.x+(a/e||0),h=0==f?0:b.y+(c/f||0);
0>g&&(g=0),g>1&&(g=1),0>h&&(h=0),h>1&&(h=1),d.css("backgroundPosition",100*(b.x=g)+"% "+100*(b.y=h)+"% ");var i={x:b.x,y:b.y};b.position().val(JSON.stringify(i))},"{image} mousedown":function(c,d){d.target===b.image()[0]&&d.preventDefault();var e=b.image(),f=e.css("backgroundPosition").split(" ");b.x=parseInt(f[0])/100,b.y=parseInt(f[1])/100;var g=d.pageX,h=d.pageY;a(document).on("mousemove.movingCover mouseup.movingCover",function(a){b.moveCover(-1*(g-(g=a.pageX)),-1*(h-(h=a.pageY)),e)}).on("mouseup.movingCover",function(){a(document).off("mousemove.movingCover mouseup.movingCover")
})},"{removeButton} click":function(c){var d=b.data().val();a.isEmpty(d)?b.options.hasCover&&(b.setCover(b.options.defaultCover),b.data().val("delete"),c.hide(),b.revertFrame().show()):(b.origData=d,b.origPosition=b.position().val(),b.data().val(""),b.position().val(""),b.file().val(""),b.file().parents(".input-group").find(":text").val(""),b.options.hasCover?b.setCover(b.origCover):(b.setCover(b.options.defaultCover),b.data().val("delete"),c.hide()))},"{revertButton} click":function(){b.setCover(b.origCover,b.origPosition),b.revertFrame().hide(),b.removeButton().show(),b.data().val(""),b.position().val(""),b.file().val(""),b.file().parents(".input-group").find(":text").val("")
},"{self} onSubmit":function(c,d,e){b.options.required&&!b.options.hasCover&&a.isEmpty(b.data().val())&&(b.raiseError(a.language("PLG_FIELDS_COVER_VALIDATION_REQUIRED")),e.push(!1))},raiseError:function(a){b.trigger("error",[a])}}}),b.resolve()})}),EasySocial.module("apps/fields/user/currency/sample_content",function(){var b=this;EasySocial.Controller("Field.Currency.Sample",{defaultOptions:{}},function(){return{init:function(){},"{self} onConfigChange":function(a,b,c){switch(c){case"format":}}}}),b.resolve()
}),EasySocial.module("apps/fields/user/datetime/content",function(){var b=this;EasySocial.require().library("datetimepicker","chosen","moment/"+EasySocial.options.momentLang).language("PLG_FIELDS_DATETIME_VALIDATION_INVALID_DATETIME_FORMAT","PLG_FIELDS_DATETIME_VALIDATION_PLEASE_SELECT_DATETIME").done(function(a){EasySocial.Controller("Field.Datetime",{defaultOptions:{required:!1,calendarDateFormat:null,yearfrom:null,yearto:null,date:null,lang:null,allowTime:!1,allowTimezone:!1,calendarLanguage:"english","{field}":"[data-field-datetime]","{date}":"[data-field-datetime-select]","{dateValue}":"[data-field-datetime-value]","{timezone}":"[date-field-datetime-timezone]","{form}":"[data-field-datetime-form]","{icon}":"[data-field-datetime-icon]","{clearButton}":"[data-clear]"}},function(b){return{init:function(){if(b.options.yearfrom=b.options.yearfrom||1930,b.options.yearto=a.isEmpty(b.options.yearto)?(new Date).getFullYear()+100:parseInt(b.options.yearto)+1,b.date()._datetimepicker({component:"es",format:b.options.calendarDateFormat,minDate:b.options.yearfrom+"-01-01",maxDate:b.options.yearto+"-12-31",icons:{time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down"},sideBySide:!1,pickTime:b.options.allowTime,useCurrent:!1,language:"english"==b.options.calendarLanguage?"en-gb":EasySocial.options.momentLang}),b.options.date=b.dateValue().val(),!a.isEmpty(b.options.date)){var c=a.moment(b.options.date);
b.datetimepicker("setDate",c)}b.options.allowTimezone&&b.timezone().chosen({search_contains:!0})},"{icon} click":function(){b.datetimepicker("show")},"{date} dp.change":function(a,c){b.setDateValue(c.date.toDate()),b.form().addClass("has-datetime"),b.options.allowTime||b.date().blur()},datetimepicker:function(a,c){return b.date().data("DateTimePicker")[a](c)},setDateValue:function(a){b.dateValue().val(a.getFullYear()+"-"+("00"+(a.getMonth()+1)).slice(-2)+"-"+("00"+a.getDate()).slice(-2)+" "+("00"+a.getHours()).slice(-2)+":"+("00"+a.getMinutes()).slice(-2)+":"+("00"+a.getSeconds()).slice(-2))
},"{date} blur":function(){b.validateCalendar()},validateCalendar:function(){return b.clearError(),b.options.required&&a.isEmpty(b.dateValue().val())?(b.raiseError(a.language("PLG_FIELDS_DATETIME_VALIDATION_PLEASE_SELECT_DATETIME")),!1):!0},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")},"{self} onSubmit":function(a,c,d){d.push(b.validateCalendar())},"{clearButton} click":function(){b.form().removeClass("has-datetime"),b.datetimepicker("setValue",new a.moment),b.date().val(""),b.dateValue().val("")
}}}),b.resolve()})}),EasySocial.module("apps/fields/user/datetime/display_content",function(){var b=this;EasySocial.require().library("popbox","chosen").language("FIELDS_USER_DATETIME_LOCAL_TIMEZONE").done(function(a){EasySocial.Controller("Field.Datetime.Display",{defaultOptions:{userid:null,date:null,timezone:null,local:null,"{toggle}":"[data-popbox]","{content}":"[data-popbox-content]","{date}":"[data-date]","{timezone}":"[data-timezone]","{loading}":"[data-loading]"}},function(b){return{init:function(){b.options.timezone=b.timezone().data("timezone"),b.options.date=b.date().data("date-utc"),b.datetime(b.options.timezone,b.date().html()),b.options.local=-(new Date).getTimezoneOffset()/60;
var a=b.content().html(),c=b.toggle().data("popbox-position");b.toggle().popbox({content:a,id:"fd",component:"es",type:"timezone",toggle:"click",position:c}).attr("data-popbox","")},"{toggle} popboxActivate":function(c,d,e){a(e.tooltip).addController("EasySocial.Controller.Field.Datetime.Display.Timezone",{"{parent}":b})},data:{},datetime:function(c,d){if(void 0===d){var e=a.Deferred();return void 0===b.data[c]?(b.loading().show(),EasySocial.ajax("fields/user/datetime/getDatetime",{id:b.options.id,userid:b.options.userid,tz:c,local:b.options.local,datetime:b.options.date}).done(function(a){b.loading().hide(),e.resolve(b.datetime(c,a))
})):e.resolve(b.data[c]),e}return b.data[c]=d,d},showDatetime:function(c,d){"local"===c&&(c=a.language("FIELDS_USER_DATETIME_LOCAL_TIMEZONE")),b.timezone().html(c),b.date().html(d)}}}),EasySocial.Controller("Field.Datetime.Display.Timezone",{defaultOptions:{"{timezones}":"[data-timezone-select]","{reset}":"[data-timezone-reset]","{local}":"[data-timezone-local]"}},function(a){return{init:function(){a.timezones().chosen({search_contains:!0})},"{timezones} change":function(b){var d=b.val();a.parent.date().hide(),a.parent.timezone().hide(),a.parent.datetime(d).done(function(b){a.parent.showDatetime(d,b),a.parent.date().show(),a.parent.timezone().show()
})},"{reset} click":function(){a.setTimezone(a.parent.options.timezone)},"{local} click":function(){a.setTimezone("local")},setTimezone:function(b){a.timezones().val(b).trigger("liszt:updated").trigger("change")}}}),b.resolve()})}),EasySocial.module("apps/fields/user/datetime/dropdown",function(a){var b=this;EasySocial.require().language("PLG_FIELDS_DATETIME_DAY").done(function(){EasySocial.Controller("Field.Datetime.Dropdown",{defaultOptions:{required:!1,allowTime:!1,allowTimezone:!1,yearfrom:null,yearto:null,"{dateValue}":"[data-field-datetime-value]","{year}":"[data-field-datetime-year]","{month}":"[data-field-datetime-month]","{day}":"[data-field-datetime-day]","{hour}":"[data-field-datetime-hour]","{minute}":"[data-field-datetime-minute]","{ampm}":"[data-field-datetime-ampm]"}},function(b){return{init:function(){},"{year} change":function(){b.setValue()
},"{month} change":function(){var e=b.year().val(),f=b.month().val();if(""!==e&&""!==f){var g=new Date(e,f,0).getDate(),h=b.day().val();for(""!==h&&(h=Math.min(h,g)),b.day().empty(),b.day().append(a('<option value="">'+a.language("PLG_FIELDS_DATETIME_DAY")+"</option>")),i=1;g>=i;i++)a('<option value="'+i+'">'+i+"</option>").appendTo(b.day());""!==h&&b.day().val(h)}b.setValue()},"{day} change":function(){b.setValue()},"{hour} change":function(){b.setValue()},"{minute} change":function(){b.setValue()},"{ampm} change":function(){b.setValue()
},setValue:function(){var a,c=b.year().val(),d=b.month().val(),e=b.day().val();if(""!==c&&""!==d&&""!==e){if(a=c+"-"+d+"-"+e,b.options.allowTime){var f=b.hour().val(),g=b.minute().val();""!==f&&b.ampm().length>0&&"pm"==b.ampm().val()&&(f=(parseInt(f)+12).toString(),"24"===f&&(f="0")),""===g&&(g="00"),a+=" "+("00"+f).slice(-2)+":"+("00"+g).slice(-2)+":00"}b.dateValue().val(a)}}}}),b.resolve()})}),EasySocial.module("apps/fields/user/datetime/sample_content",function(){var b=this;EasySocial.require().library("ui/datepicker").done(function(){EasySocial.Controller("Field.Datetime.Sample",{defaultOptions:{"{yearPrivacy}":"[data-yearprivacy]","{input}":"[data-field-datetime-select]","{timezone}":"[data-field-datetime-timezone]"}},function(a){return{init:function(){},"{self} onConfigChange":function(b,c,d,e){switch(d){case"year_privacy":a.yearPrivacy().toggle(e);
break;case"allow_timezone":a.timezone().toggle(e);break;case"placeholder":a.input().attr("placeholder",e)}}}}),b.resolve()})}),EasySocial.module("apps/fields/user/dropdown/content",function(){var b=this;EasySocial.require().language("PLG_FIELDS_DROPDOWN_VALIDATION_PLEASE_SELECT_A_VALUE").done(function(a){EasySocial.Controller("Field.Dropdown",{defaultOptions:{required:null,"{field}":"[data-field-dropdown]","{item}":"[data-field-dropdown-item]","{option}":"[data-field-dropdown-item] option"}},function(b){return{init:function(){},validateInput:function(){return b.clearError(),b.options.required&&a.isEmpty(b.item().val())?(b.raiseError(),!1):!0
},raiseError:function(){b.trigger("error",[a.language("PLG_FIELDS_DROPDOWN_VALIDATION_PLEASE_SELECT_A_VALUE")])},clearError:function(){b.trigger("clear")},"{self} onSubmit":function(a,c,d){return b.options.required?(d.push(b.validateInput()),void 0):(d.push(!0),void 0)},"{self} onSample":function(){b.option().length<1&&b.item().append(a("<option></option>"))},"{self} onChoiceAdded":function(c,d,e){b.option().eq(e).length>0?b.option().eq(e).before(a("<option></option>")):b.item().append(a("<option></option>"))
},"{self} onChoiceValueChanged":function(a,c,d,e){b.option().eq(d).val(e)},"{self} onChoiceTitleChanged":function(a,c,d,e){b.option().eq(d).text(e)},"{self} onChoiceRemoved":function(a,c,d){b.option().eq(d).remove()},"{self} onChoiceToggleDefault":function(a,c,d,e){b.option().removeAttr("selected"),e&&b.option().eq(d).attr("selected","selected")}}}),b.resolve()})}),EasySocial.module("apps/fields/user/email/content",function(){var b=this;EasySocial.require().language("PLG_FIELDS_EMAIL_VALIDATION_REQUIRED","PLG_FIELDS_EMAIL_VALIDATION_INVALID_FORMAT").done(function(a){EasySocial.Controller("Field.Email",{defaultOptions:{required:!1,regex:0,regexFormat:"",regexModifier:"","{field}":"[data-field-email]","{input}":"[data-field-email-input]"}},function(b){return{init:function(){},validateInput:function(){var c=b.input().val();
if(b.options.required&&a.isEmpty(c))return b.raiseError(a.language("PLG_FIELDS_EMAIL_VALIDATION_REQUIRED")),!1;if(!a.isEmpty(c)&&b.options.regex){var d=new RegExp(b.options.regexFormat,b.options.regexModifier);if(!d.test(c))return b.raiseError(a.language("PLG_FIELDS_EMAIL_VALIDATION_INVALID_FORMAT")),!1}return!0},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")},"{self} onSubmit":function(a,c,d){d.push(b.validateInput())}}}),b.resolve()})}),EasySocial.module("apps/fields/user/file/content",function(){var b=this;
EasySocial.require().library("ui/sortable").language("PLG_FIELDS_FILE_ERROR_UNKNOWN_ERROR_OCCURED","COM_EASYSOCIAL_WORKING").done(function(a){EasySocial.Controller("Field.File",{defaultOptions:{required:!1,id:null,inputName:"",maxFile:0,"{field}":"[data-field-file]","{list}":"[data-field-file-list]","{item}":"[data-field-file-item]","{add}":"[data-field-file-add]","{dragPlaceholder}":".data-field-file-item-drag","{moveHandle}":"[data-field-file-move]"}},function(b){return{init:function(){b.options.maxFile=b.field().data("maxfile"),b.item().addController("EasySocial.Controller.Field.File.Item",{controller:{parent:b}}),b.initSortable()
},initSortable:function(){b.list().sortable({items:b.item.selector,placeholder:"data-field-file-item-drag",handle:b.moveHandle.selector,forcePlaceholderSize:!0,start:function(a,c){b.dragPlaceholder().width(c.item.find(".file-wrap").width())}})},"{add} click":function(c){if(b.options.maxFile<1||b.item().length<b.options.maxFile){var e=b.item().length,f=a('<div class="data-field-file-item" data-field-file-item></div>');f.data("key",e),f.html(a.language("COM_EASYSOCIAL_WORKING")),f.addController("EasySocial.Controller.Field.File.Item",{controller:{parent:b}}),b.list().append(f),EasySocial.ajax("fields/user/file/getUploadHtml",{id:b.options.id,key:e}).done(function(a){f.html(a)
}),b.options.maxFile>1&&b.item().length>=b.options.maxFile&&c.hide()}},"{item} uploadDone":function(){b.add().click()}}}),EasySocial.Controller("Field.File.Item",{defaultOptions:{required:!1,key:null,"{upload}":"[data-field-file-upload]","{progress}":"[data-field-file-progress]","{delete}":"[data-field-file-delete]","{clear}":"[data-field-file-clear]","{id}":"[data-field-file-id]","{tmp}":"[data-field-file-tmp]"}},function(b){return{init:function(){b.options.key=b.element.data("key")},"{upload} change":function(c){b.element.html(a.language("COM_EASYSOCIAL_WORKING")),EasySocial.ajax("fields/user/file/upload",{id:b.parent.options.id,files:c,key:b.options.key},{type:"iframe"}).done(function(a){b.element.html(a),b.trigger("uploadDone")
}).fail(function(a){b.element.html(a||b.getErrorMsg())})},"{delete} click":function(){var e=b.tmp().val(),f=b.id().val();b.element.html(a.language("COM_EASYSOCIAL_WORKING")),EasySocial.ajax("fields/user/file/delete",{id:b.parent.options.id,key:b.options.key,tmp:e,fileid:f}).done(function(a){b.element.html(a),b.trigger("fileDeleted")}).fail(function(a){b.element.html(a||b.getErrorMsg())})},"{clear} click":function(){b.element.html(a.language("COM_EASYSOCIAL_WORKING")),EasySocial.ajax("fields/user/file/getUploadHtml",{id:b.parent.options.id,key:b.options.key}).done(function(a){b.element.html(a)
})},getErrorMsg:function(){return msg=a('<span class="alert field-file-error">'+a.language("PLG_FIELDS_FILE_ERROR_UNKNOWN_ERROR_OCCURED")+'<button class="close" type="button" data-field-file-clear>\xd7</button></span>')}}}),b.resolve()})}),EasySocial.module("apps/fields/user/file/sample_content",function(){var b=this;EasySocial.Controller("Field.File",{defaultOptions:{"{sizeText}":"[data-field-file-size-text]","{size}":"[data-field-file-size]","{add}":"[data-field-file-add]"}},function(a){return{init:function(){},"{self} onConfigChange":function(b,c,d,e){switch(d){case"size_limit":a.size().text(e);
break;case"show_size_limit":a.sizeText().toggle(!!e);break;case"file_limit":a.add().toggle(1>e||e>1)}}}}),b.resolve()}),EasySocial.module("apps/fields/user/gender/content",function(){var b=this;EasySocial.require().language("PLG_FIELDS_GENDER_VALIDATION_GENDER_REQUIRED").done(function(a){EasySocial.Controller("Field.Gender",{defaultOptions:{required:!1,"{field}":"[data-field-gender]","{selection}":"[data-field-gender-select]"}},function(b){return{init:function(){},validateInput:function(){if(!b.options.required)return!0;
b.clearError();var c=b.selection(":checked").val();return a.isEmpty(c)?(b.raiseError(),!1):!0},raiseError:function(){b.trigger("error",[a.language("PLG_FIELDS_GENDER_VALIDATION_GENDER_REQUIRED")])},clearError:function(){b.trigger("clear")},"{self} onSubmit":function(a,c,d){d.push(b.validateInput())},"{selection} click":function(){b.validateInput()}}}),b.resolve()})}),EasySocial.module("apps/fields/user/joomla_email/content",function(){var b=this;EasySocial.require().language("PLG_FIELDS_JOOMLA_EMAIL_VALIDATION_REQUIRED","PLG_FIELDS_JOOMLA_EMAIL_VALIDATION_RECONFIRM_REQUIRED","PLG_FIELDS_JOOMLA_EMAIL_VALIDATION_NOT_MATCHING").done(function(a){EasySocial.Controller("Field.Joomla_email",{defaultOptions:{required:!0,id:null,userid:null,reconfirm:!1,event:null,"{input}":"[data-field-email-input]","{confirm}":"[data-field-email-reconfirm-input]","{confirmFrame}":"[data-field-email-reconfirm-frame]"}},function(b){return{init:function(){b.origEmail=b.input().val()
},"{input} blur":function(){var d=b.input().val();b.options.reconfirm&&d!==b.origEmail&&b.confirmFrame().show(),!b.options.reconfirm||d!==b.origEmail||"onEdit"!==b.options.event&&"onAdminEdit"!==b.options.event||b.confirmFrame().hide(),b.validateInput()},"{confirm} blur":function(){b.validateInput()},validateInput:function(){b.clearError();var c=b.input().val();if(a.isEmpty(c))return b.options.required?(b.raiseError(a.language("PLG_FIELDS_JOOMLA_EMAIL_VALIDATION_REQUIRED")),!1):!0;if(b.options.reconfirm){var d=b.confirm().val();
if(c!==b.origEmail&&a.isEmpty(d))return b.raiseError(a.language("PLG_FIELDS_JOOMLA_EMAIL_VALIDATION_RECONFIRM_REQUIRED")),!1;if(!a.isEmpty(d)&&c!==d)return b.raiseError(a.language("PLG_FIELDS_JOOMLA_EMAIL_VALIDATION_NOT_MATCHING")),!1}return b.checkInput().done(function(){b.clearError()}).fail(function(a){b.raiseError(a)})},checkInput:function(){return EasySocial.ajax("fields/user/joomla_email/isValid",{id:b.options.id,userid:b.options.userid,email:b.input().val()})},raiseError:function(a){b.trigger("error",[a])
},clearError:function(){b.trigger("clear")},"{self} onSubmit":function(a,c,d,e){"onRegisterMini"!==e&&d.push(b.validateInput())}}}),b.resolve()})}),EasySocial.module("apps/fields/user/joomla_email/registermini_content",function(a){var b=this;EasySocial.require().language("PLG_FIELDS_JOOMLA_EMAIL_VALIDATION_REQUIRED","PLG_FIELDS_JOOMLA_EMAIL_VALIDATION_RECONFIRM_REQUIRED","PLG_FIELDS_JOOMLA_EMAIL_VALIDATION_NOT_MATCHING","PLG_FIELDS_JOOMLA_EMAIL_CHECKING","PLG_FIELDS_JOOMLA_EMAIL_VALIDATION_INVALID_FORMAT").done(function(){EasySocial.Controller("Field.Joomla_email.Mini",{defaultOptions:{require:!0,id:null,"{input}":"#email","{confirm}":"[data-field-email-reconfirm-input]"}},function(b){return{init:function(){b.origEmail=b.input().val()
},"{input} keyup":function(a){a.val().length>0&&b.delayedCheck()},"{confirm} blur":function(){b.checkEmail()},state:!1,delayedCheck:a.debounce(function(){b.checkEmail()},250),checkEmail:function(){b.clearError();var c=b.input().val();if(b.options.required&&0==c.length)return b.raiseError(a.language("PLG_FIELDS_JOOMLA_EMAIL_VALIDATION_REQUIRED")),!1;if(!a.isEmpty(c)&&b.options.regex){var d=new RegExp(b.options.regexFormat,b.options.regexModifier);if(!d.test(c))return b.raiseError(a.language("PLG_FIELDS_JOOMLA_EMAIL_VALIDATION_INVALID_FORMAT")),!1
}if(b.options.reconfirm){var e=b.confirm().val();if(c!==b.origEmail&&a.isEmpty(e))return b.raiseError(a.language("PLG_FIELDS_JOOMLA_EMAIL_VALIDATION_RECONFIRM_REQUIRED")),!1;if(!a.isEmpty(e)&&c!==e)return b.raiseError(a.language("PLG_FIELDS_JOOMLA_EMAIL_VALIDATION_NOT_MATCHING")),!1}if(c.length>0){var f=a.Deferred();b.setLoading(a.language("PLG_FIELDS_JOOMLA_EMAIL_CHECKING"));var c=b.input().val();return EasySocial.ajax("fields/user/joomla_email/isValid",{id:b.options.id,userid:0,email:c}).done(function(){b.setLoaded(),f.resolve()
}).fail(function(a){b.setLoaded(),b.raiseError(a),f.reject()}),f}return!0},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")},"{self} onSubmit":function(a,c,d,e){"onRegisterMini"===e&&(b.options.required||b.input().val().length>0)&&d.push(b.checkEmail())},setLoading:function(a){b.trigger("loading",[a])},setLoaded:function(){b.trigger("loaded")}}}),b.resolve()})}),EasySocial.module("apps/fields/user/joomla_email/sample_content",function(){var b=this;EasySocial.Controller("Field.Joomla_email.Sample",{defaultOptions:{"{confirmEmail}":"[data-field-email-reconfirm-frame]"}},function(a){return{init:function(){},"{self} onConfigChange":function(b,c,d,e){switch(d){case"reconfirm_email":a.confirmEmail().toggle(e)
}}}}),b.resolve()}),EasySocial.module("apps/fields/user/joomla_fullname/content",function(){var b=this;EasySocial.require().language("PLG_FIELDS_JOOMLA_FULLNAME_VALIDATION_EMPTY_NAME").done(function(a){EasySocial.Controller("Field.Joomla_fullname",{defaultOptions:{nameFormat:1,max:0,required:!0,"{field}":"[data-field-joomla_fullname]","{firstName}":"[data-field-jname-first]","{middleName}":"[data-field-jname-middle]","{lastName}":"[data-field-jname-last]","{name}":"[data-field-jname-name]"}},function(b){return{init:function(){b.options.nameFormat=b.field().data("name-format"),b.options.max=b.field().data("max")
},validateInput:function(){return b.clearError(),b.options.required?3==b.options.nameFormat?a.isEmpty(b.name().val())?(b.raiseError(),!1):!0:a.isEmpty(b.firstName().val())?(b.raiseError(),!1):!0:!0},raiseError:function(){b.trigger("error",[a.language("PLG_FIELDS_JOOMLA_FULLNAME_VALIDATION_EMPTY_NAME")])},clearError:function(){b.trigger("clear")},"{firstName} blur":function(){b.validateInput()},"{name} blur":function(){b.validateInput()},"{self} onError":function(){b.raiseError()},"{self} onSubmit":function(a,c,d){d.push(b.validateInput())
}}}),b.resolve()})}),EasySocial.module("apps/fields/user/joomla_fullname/sample_content",function(){var b=this;EasySocial.Controller("Field.Joomla_fullname.Sample",{defaultOptions:{"{fullnameFormat}":"[data-fullname-format]"}},function(a){return{init:function(){},"{self} onConfigChange":function(b,c,d,e){switch(d){case"format":a.switchFormat(e)}},switchFormat:function(b){a.fullnameFormat().hide(),a.fullnameFormat().eq(b-1).show()}}}),b.resolve()}),EasySocial.module("apps/fields/user/joomla_password/content",function(a){var b=this;
EasySocial.require().library("passwordstrength").language("PLG_FIELDS_JOOMLA_PASSWORD_EMPTY_PASSWORD","PLG_FIELDS_JOOMLA_PASSWORD_EMPTY_RECONFIRM_PASSWORD","PLG_FIELDS_JOOMLA_PASSWORD_NOT_MATCHING","PLG_FIELDS_JOOMLA_PASSWORD_MINIMUM_CHAR","PLG_FIELDS_JOOMLA_PASSWORD_MAXIMUM_CHAR","PLG_FIELDS_JOOMLA_PASSWORD_MINIMUM_INTEGER","PLG_FIELDS_JOOMLA_PASSWORD_MINIMUM_SYMBOLS","PLG_FIELDS_JOOMLA_PASSWORD_MINIMUM_UPPERCASE","PLG_FIELDS_JOOMLA_PASSWORD_STRENGTH_VERY_WEAK","PLG_FIELDS_JOOMLA_PASSWORD_STRENGTH_WEAK","PLG_FIELDS_JOOMLA_PASSWORD_STRENGTH_NORMAL","PLG_FIELDS_JOOMLA_PASSWORD_STRENGTH_STRONG","PLG_FIELDS_JOOMLA_PASSWORD_STRENGTH_VERY_STRONG","PLG_FIELDS_JOOMLA_PASSWORD_EMPTY_ORIGINAL_PASSWORD").done(function(){EasySocial.Controller("Field.Joomla_password",{defaultOptions:{event:null,triggerError:!0,required:!1,passwordStrength:!1,reconfirmPassword:!1,requireOriginal:!1,min:4,max:0,minInteger:0,minSymbol:0,minUpperCase:0,"{field}":"[data-field-joomla_password]","{original}":"[data-field-password-orig]","{input}":"[data-field-password-input]","{reconfirm}":"[data-field-password-confirm]","{pwResetSubmitButton}":"[data-password-reset-submit]","{strength}":"[data-field-password-strength]","{warning}":"[data-field-password-warning]","{reconfirmNotice}":"[data-reconfirmPassword-failed]"}},function(b){return{init:function(){b.options.passwordStrength&&b.initPasswordStrength()
},"{input} keyup":function(){b.validatePassword()},"{input} blur":function(){b.validatePassword()},"{reconfirm} keyup":function(){b.validatePassword()},"{reconfirm} blur":function(){b.validatePassword()},validatePassword:function(){b.clearError();b.input().val(),b.reconfirm().val();return"onRegister"!==b.options.event||b.validatePasswordInput()?"onEdit"!==b.options.event||b.validatePasswordEdit()?b.options.reconfirmPassword&&!b.validatePasswordConfirm()?!1:!0:!1:!1},validatePasswordInput:function(){var c=b.input().val();
if(a.isEmpty(c))return b.raiseError(a.language("PLG_FIELDS_JOOMLA_PASSWORD_EMPTY_PASSWORD")),!1;if(b.options.min>0&&c.length<b.options.min)return b.raiseError(a.language("PLG_FIELDS_JOOMLA_PASSWORD_MINIMUM_CHAR",b.options.min)),!1;if(b.options.max>0&&c.length>b.options.max)return b.raiseError(a.language("PLG_FIELDS_JOOMLA_PASSWORD_MAXIMUM_CHAR",b.options.max)),!1;if(b.options.minInteger>0){var d=c.match(/[0-9]/g);if(!d||d.length<b.options.minInteger)return b.raiseError(a.language("PLG_FIELDS_JOOMLA_PASSWORD_MINIMUM_INTEGER",b.options.minInteger)),!1
}if(b.options.minSymbol>0){var d=c.match(/[\W]/g);if(!d||d.length<b.options.minSymbol)return b.raiseError(a.language("PLG_FIELDS_JOOMLA_PASSWORD_MINIMUM_SYMBOLS",b.options.minSymbol)),!1}if(b.options.minUpperCase>0){var d=c.match(/[A-Z]/g);if(!d||d.length<b.options.minUpperCase)return b.raiseError(a.language("PLG_FIELDS_JOOMLA_PASSWORD_MINIMUM_UPPERCASE",b.options.minUpperCase)),!1}return!0},validatePasswordEdit:function(){var c=b.original().val(),d=b.input().val();return a.isEmpty(d)&&a.isEmpty(c)?!0:a.isEmpty(c)&&b.options.requireOriginal?(b.raiseError(a.language("PLG_FIELDS_JOOMLA_PASSWORD_EMPTY_ORIGINAL_PASSWORD")),!1):b.validatePasswordInput()
},validatePasswordConfirm:function(){var c=b.input().val(),d=b.reconfirm().val();if(!a.isEmpty(c)||!a.isEmpty(d)){if(a.isEmpty(c))return b.raiseError(a.language("PLG_FIELDS_JOOMLA_PASSWORD_EMPTY_PASSWORD")),!1;if(a.isEmpty(d))return b.raiseError(a.language("PLG_FIELDS_JOOMLA_PASSWORD_EMPTY_RECONFIRM_PASSWORD")),!1;if(c!==d)return b.raiseError(a.language("PLG_FIELDS_JOOMLA_PASSWORD_NOT_MATCHING")),!1}return!0},initPasswordStrength:function(){b.input().password_strength({container:b.strength.selector,minLength:b.options.min,texts:{1:a.language("PLG_FIELDS_JOOMLA_PASSWORD_STRENGTH_VERY_WEAK"),2:a.language("PLG_FIELDS_JOOMLA_PASSWORD_STRENGTH_WEAK"),3:a.language("PLG_FIELDS_JOOMLA_PASSWORD_STRENGTH_NORMAL"),4:a.language("PLG_FIELDS_JOOMLA_PASSWORD_STRENGTH_STRONG"),5:a.language("PLG_FIELDS_JOOMLA_PASSWORD_STRENGTH_VERY_STRONG")},onCheck:function(a){1>=a&&b.strength().removeClass("text-warning").removeClass("text-success").addClass("text-error small help-inline"),a>1&&3>=a&&b.strength().removeClass("text-error").removeClass("text-success").addClass("text-warning small help-inline"),a>=4&&b.strength().removeClass("text-error").removeClass("text-warning").addClass("text-success small help-inline")
}})},raiseError:function(a){b.options.triggerError?b.trigger("error",[a]):(b.warning().show(),b.warning().text(a))},clearError:function(){b.options.triggerError?b.trigger("clear"):(b.warning().hide(),b.warning().text(""))},"{pwResetSubmitButton} click":function(){return b.validatePassword()},"{self} onSubmit":function(a,c,d,e){"onRegisterMini"!==e&&d.push(b.validatePassword())}}}),b.resolve()})}),EasySocial.module("apps/fields/user/joomla_password/registermini_content",function(a){var b=this;EasySocial.require().language("PLG_FIELDS_JOOMLA_PASSWORD_TOO_SHORT","PLG_FIELDS_JOOMLA_PASSWORD_TOO_LONG","PLG_FIELDS_JOOMLA_PASSWORD_MINIMUM_INTEGER","PLG_FIELDS_JOOMLA_PASSWORD_MINIMUM_SYMBOLS","PLG_FIELDS_JOOMLA_PASSWORD_MINIMUM_UPPERCASE","PLG_FIELDS_JOOMLA_PASSWORD_EMPTY_PASSWORD","PLG_FIELDS_JOOMLA_PASSWORD_EMPTY_RECONFIRM_PASSWORD","PLG_FIELDS_JOOMLA_PASSWORD_NOT_MATCHING").done(function(){EasySocial.Controller("Field.Joomla_password.Mini",{defaultOptions:{required:!1,reconfirmPassword:!1,min:4,max:0,"{input}":"[data-password]","{reconfirm}":"[data-field-password-confirm]","{reconfirmNotice}":"[data-reconfirmPassword-failed]"}},function(b){return{init:function(){},"{input} keyup":function(){b.checkPassword()
},"{reconfirm} keyup":function(){b.validatePassword()},"{reconfirm} blur":function(){b.validatePassword()},checkPassword:function(){b.clearError();var c=b.input().val();if(b.options.required&&0==c.length)return b.raiseError(a.language("PLG_FIELDS_JOOMLA_PASSWORD_EMPTY_PASSWORD")),!1;if(b.options.min>0&&c.length<b.options.min)return b.raiseError(a.language("PLG_FIELDS_JOOMLA_PASSWORD_TOO_SHORT")),!1;if(b.options.max>0&&c.length>b.options.max)return b.raiseError(a.language("PLG_FIELDS_JOOMLA_PASSWORD_TOO_LONG")),!1;
if(b.options.minInteger>0){var d=c.match(/[0-9]/g);if(!d||d.length<b.options.minInteger)return b.raiseError(a.language("PLG_FIELDS_JOOMLA_PASSWORD_MINIMUM_INTEGER",b.options.minInteger)),!1}if(b.options.minSymbol>0){var d=c.match(/[\W]/g);if(!d||d.length<b.options.minSymbol)return b.raiseError(a.language("PLG_FIELDS_JOOMLA_PASSWORD_MINIMUM_SYMBOLS",b.options.minSymbol)),!1}if(b.options.minUpperCase>0){var d=c.match(/[A-Z]/g);if(!d||d.length<b.options.minUpperCase)return b.raiseError(a.language("PLG_FIELDS_JOOMLA_PASSWORD_MINIMUM_UPPERCASE",b.options.minUpperCase)),!1
}return!0},validatePassword:function(){b.clearError();b.input().val(),b.reconfirm().val();return b.options.reconfirmPassword&&!b.validatePasswordConfirm()?!1:!0},validatePasswordConfirm:function(){var c=b.input().val(),d=b.reconfirm().val();if(!a.isEmpty(c)||!a.isEmpty(d)){if(a.isEmpty(c))return b.raiseError(a.language("PLG_FIELDS_JOOMLA_PASSWORD_EMPTY_PASSWORD")),!1;if(a.isEmpty(d))return b.raiseError(a.language("PLG_FIELDS_JOOMLA_PASSWORD_EMPTY_RECONFIRM_PASSWORD")),!1;if(c!==d)return b.raiseError(a.language("PLG_FIELDS_JOOMLA_PASSWORD_NOT_MATCHING")),!1
}return!0},"{self} onSubmit":function(a,c,d,e){"onRegisterMini"===e&&d.push(b.checkPassword())},clearError:function(){b.trigger("clear")},raiseError:function(a){b.trigger("error",[a])}}}),b.resolve()})}),EasySocial.module("apps/fields/user/joomla_password/sample_content",function(){var b=this;EasySocial.Controller("Field.Joomla_password.Sample",{defaultOptions:{"{confirmPassword}":"[data-password-confirm]"}},function(a){return{init:function(){},"{self} onConfigChange":function(b,c,d,e){switch(d){case"reconfirm_password":a.confirmPassword().toggle(e)
}}}}),b.resolve()}),EasySocial.module("apps/fields/user/joomla_timezone/content",function(){var b=this;EasySocial.require().library("chosen").language("PLG_FIELDS_JOOMLA_TIMEZONE_VALIDATION_SELECT_TIMEZONE").done(function(a){EasySocial.Controller("Field.Joomla_timezone",{defaultOptions:{required:!1,"{field}":"[data-field-joomla_timezone]","{input}":"[data-field-joomla_timezone-input]"}},function(b){return{init:function(){b.input().chosen({allow_single_deselect:!0,search_contains:!0})},validateInput:function(){if(!b.options.required)return!0;
b.clearError();var c=b.input().val();return"null"===c||a.isEmpty(c)?(b.raiseError(),!1):!0},raiseError:function(){b.trigger("error",[a.language("PLG_FIELDS_JOOMLA_TIMEZONE_VALIDATION_SELECT_TIMEZONE")])},clearError:function(){b.trigger("clear")},"{input} change":function(){b.validateInput()},"{self} onSubmit":function(a,c,d){d.push(b.validateInput())}}}),b.resolve()})}),EasySocial.module("apps/fields/user/joomla_username/content",function(a){var b=this;EasySocial.Controller("Field.Joomla_username",{defaultOptions:{event:null,id:null,userid:null,"{checkUsernameButton}":"[data-username-check]","{input}":"[data-username-input]","{available}":"[data-username-available]"}},function(b){return{state:!1,init:function(){},"{checkUsernameButton} click":function(){b.delayedCheck()
},"{input} keyup":function(){b.delayedCheck()},delayedCheck:a.debounce(function(){b.checkUsername()},250),checkUsername:function(){b.clearError();var c=a.Deferred();b.checkUsernameButton().addClass("btn-loading");var d=b.input().val();return EasySocial.ajax("fields/user/joomla_username/isValid",{id:b.options.id,userid:b.options.userid,username:d,event:b.options.event}).done(function(){b.checkUsernameButton().removeClass("btn-loading"),b.available().show(),c.resolve()}).fail(function(a){b.raiseError(a),b.checkUsernameButton().removeClass("btn-loading"),b.available().hide(),c.reject()
}),c},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")},"{self} onSubmit":function(a,c,d,e){"onRegisterMini"!==e&&d.push(b.checkUsername())}}}),b.resolve()}),EasySocial.module("apps/fields/user/joomla_username/registermini_content",function(a){var b=this;EasySocial.require().language("PLG_FIELDS_JOOMLA_USERNAME_CHECKING","PLG_FIELDS_JOOMLA_USERNAME_EMPTY_USERNAME").done(function(){EasySocial.Controller("Field.Joomla_username.Mini",{defaultOptions:{id:null,required:!1,"{input}":"#joomla_username"}},function(b){return{init:function(){},"{input} keyup":function(a){a.val().length>0&&b.delayedCheck()
},state:!1,delayedCheck:a.debounce(function(){b.checkUsername()},250),checkUsername:function(){var c=b.input().val();if(b.options.required&&0==c.length)return b.raiseError(a.language("PLG_FIELDS_JOOMLA_USERNAME_EMPTY_USERNAME")),!1;if(c.length>0){var d=a.Deferred();return b.clearError(),b.setLoading(a.language("PLG_FIELDS_JOOMLA_USERNAME_CHECKING")),EasySocial.ajax("fields/user/joomla_username/isValid",{id:b.options.id,userid:0,username:c}).done(function(){b.setLoaded(),d.resolve()}).fail(function(a){b.setLoaded(),b.raiseError(a),d.reject()
}),d}return!0},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")},"{self} onSubmit":function(a,c,d,e){"onRegisterMini"===e&&(b.options.required||b.input().val().length>0)&&d.push(b.checkUsername())},setLoading:function(a){b.trigger("loading",[a])},setLoaded:function(){b.trigger("loaded")}}}),b.resolve()})}),EasySocial.module("apps/fields/user/joomla_username/sample_content",function(){var b=this;EasySocial.Controller("Field.Joomla_username.Sample",{defaultOptions:{"{checkUsername}":"[data-check-username]"}},function(a){return{init:function(){},"{self} onConfigChange":function(b,c,d,e){switch(d){case"check_username":a.checkUsername().toggle(!!e)
}}}}),b.resolve()}),EasySocial.module("apps/fields/user/multidropdown/content",function(a){var b=this;EasySocial.require().library("ui/sortable").language("PLG_FIELDS_MULTIDROPDOWN_VALIDATION_REQUIRED_FIELD").done(function(){EasySocial.Controller("Field.Multidropdown",{defaultOptions:{required:!1,id:null,inputName:"",max:0,"{field}":"[data-field-multidropdown]","{list}":"[data-field-multidropdown-list]","{item}":"[data-field-multidropdown-item]","{input}":"[data-field-multidropdown-input]","{add}":"[data-field-multidropdown-add]","{delete}":"[data-field-multidropdown-delete]","{move}":"[data-field-multidropdown-move]"}},function(b){return{init:function(){b.options.max=b.field().data("max"),b.initSortable()
},initSortable:function(){b.list().sortable({items:b.item.selector,handle:b.move.selector})},"{add} click":function(a){if(b.options.max<1||b.item().length<b.options.max){var c=b.item().eq(0).clone();c.find(b.input.selector).attr("value","").val(""),b.list().append(c)}b.options.max>0&&b.item().length>=b.options.max&&a.hide()},"{delete} click":function(a){var c=a.parents(b.item.selector);b.item().length>1?c.remove():c.find(b.input.selector).val(""),b.options.max>0&&b.item().length<b.options.max&&b.add().show()
},"{self} onConfigChange":function(a,c,d,e){switch(d){case"add_button_text":b.add().text(e)}},raiseError:function(){b.trigger("error",[a.language("PLG_FIELDS_MULTIDROPDOWN_VALIDATION_REQUIRED_FIELD")])},"{self} onSubmit":function(c,d,e){if(!b.options.required)return e.push(!0),void 0;var f=!1;a.each(b.input(),function(b,c){return a.isEmpty(a(c).val())?void 0:(f=!0,!1)}),f||b.raiseError(),e.push(f)}}}),b.resolve()})}),EasySocial.module("apps/fields/user/multilist/content",function(){var b=this;EasySocial.require().language("PLG_FIELDS_MULTILIST_VALIDATION_PLEASE_SELECT_A_VALUE").done(function(a){EasySocial.Controller("Field.Multilist",{defaultOptions:{required:null,multiple:null,"{field}":"[data-field-multilist]","{item}":"[data-field-multilist-item]","{option}":"[data-field-multilist-item] option"}},function(b){return{init:function(){},validateInput:function(){return b.clearError(),b.options.multiple&&b.item().children(":selected").length<=0?(b.raiseError(),!1):""==b.item().children(":selected").val()?(b.raiseError(),!1):!0
},raiseError:function(){b.trigger("error",[a.language("PLG_FIELDS_MULTILIST_VALIDATION_PLEASE_SELECT_A_VALUE")])},clearError:function(){b.trigger("clear")},"{self} onSubmit":function(a,c,d){return b.options.required?(d.push(b.validateInput()),void 0):(d.push(!0),void 0)},"{self} onSample":function(){b.option().length<1&&b.item().append(a("<option></option>"))},"{self} onChoiceAdded":function(c,d,e){b.option().eq(e).length>0?b.option().eq(e).before(a("<option></option>")):b.item().append(a("<option></option>"))
},"{self} onChoiceValueChanged":function(a,c,d,e){b.option().eq(d).val(e)},"{self} onChoiceTitleChanged":function(a,c,d,e){b.option().eq(d).text(e)},"{self} onChoiceRemoved":function(a,c,d){b.option().eq(d).remove()},"{self} onChoiceToggleDefault":function(a,c,d,e){e?b.option().eq(d).attr("selected","selected"):b.option().eq(d).removeAttr("selected")}}}),b.resolve()})}),EasySocial.module("apps/fields/user/multitextbox/content",function(a){var b=this;EasySocial.require().library("ui/sortable").language("PLG_FIELDS_MULTITEXTBOX_VALIDATION_REQUIRED_FIELD").done(function(){EasySocial.Controller("Field.Multitextbox",{defaultOptions:{required:!1,id:null,inputName:"",max:0,"{field}":"[data-field-multitextbox]","{list}":"[data-field-multitextbox-list]","{item}":"[data-field-multitextbox-item]","{input}":"[data-field-multitextbox-input]","{add}":"[data-field-multitextbox-add]","{delete}":"[data-field-multitextbox-delete]","{move}":"[data-field-multitextbox-move]"}},function(b){return{init:function(){b.options.max=b.field().data("max"),b.initSortable()
},initSortable:function(){b.list().sortable({items:b.item.selector,handle:b.move.selector})},"{add} click":function(a){if(b.options.max<1||b.item().length<b.options.max){var c=b.item().eq(0).clone();c.find(b.input.selector).attr("value","").val(""),b.list().append(c)}b.options.max>0&&b.item().length>=b.options.max&&a.hide()},"{delete} click":function(a){var c=a.parents(b.item.selector);b.item().length>1?c.remove():c.find(b.input.selector).val(""),b.options.max>0&&b.item().length<b.options.max&&b.add().show()
},"{self} onConfigChange":function(a,c,d,e){switch(d){case"add_button_text":b.add().text(e)}},raiseError:function(){b.trigger("error",[a.language("PLG_FIELDS_MULTITEXTBOX_VALIDATION_REQUIRED_FIELD")])},"{self} onSubmit":function(c,d,e){if(!b.options.required)return e.push(!0),void 0;var f=!1;a.each(b.input(),function(b,c){return a.isEmpty(a(c).val())?void 0:(f=!0,!1)}),f||b.raiseError(),e.push(f)}}}),b.resolve()})}),EasySocial.module("apps/fields/user/permalink/content",function(){var b=this;EasySocial.require().language("PLG_FIELDS_PERMALINK_EXCEEDED_MAX_LENGTH","PLG_FIELDS_PERMALINK_REQUIRED").done(function(a){EasySocial.Controller("Field.Permalink",{defaultOptions:{required:!1,max:0,id:null,userid:null,"{field}":"[data-field-permalink]","{checkButton}":"[data-permalink-check]","{input}":"[data-permalink-input]","{available}":"[data-permalink-available]"}},function(b){return{state:!1,init:function(){b.options.max=b.field().data("max")
},"{checkButton} click":function(){b.delayedCheck()},"{input} keyup":function(){b.delayedCheck()},delayedCheck:a.debounce(function(){b.checkPermalink()},250),checkPermalink:function(){b.clearError();var c=b.input().val();if(b.available().hide(),b.options.max>0&&c.length>b.options.max)return b.raiseError(a.language("PLG_FIELDS_PERMALINK_EXCEEDED_MAX_LENGTH")),!1;if(!a.isEmpty(c)){b.checkButton().addClass("btn-loading");var d=a.Deferred();return EasySocial.ajax("fields/user/permalink/isValid",{id:b.options.id,userid:b.options.userid,permalink:c}).done(function(){b.checkButton().removeClass("btn-loading"),b.available().show(),d.resolve()
}).fail(function(a){b.raiseError(a),b.checkButton().removeClass("btn-loading"),b.available().hide(),d.reject()}),d}return b.options.required&&a.isEmpty(c)?(b.available().hide(),b.raiseError(a.language("PLG_FIELDS_PERMALINK_REQUIRED")),!1):!0},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")},"{self} onSubmit":function(a,c,d){d.push(b.checkPermalink())}}}),b.resolve()})}),EasySocial.module("apps/fields/user/permalink/sample_content",function(){var b=this;EasySocial.Controller("Field.Permalink.Sample",{defaultOptions:{"{checkPermalink}":"[data-check-permalink]"}},function(a){return{init:function(){},"{self} onConfigChange":function(b,c,d,e){switch(d){case"check_permalink":a.checkPermalink().toggle(!!e)
}}}}),b.resolve()}),EasySocial.module("apps/fields/user/relationship/content",function(){var b=this;EasySocial.require().script("site/friends/suggest").language("PLG_FIELDS_RELATIONSHIP_APPROVE_CONFIRM","PLG_FIELDS_RELATIONSHIP_ACTION_APPROVE","COM_EASYSOCIAL_CANCEL_BUTTON").done(function(a){EasySocial.Controller("Field.Relationship",{defaultOptions:{required:!1,id:null,types:null,fieldname:null,actor:null,target:null,"{field}":"[data-field-relationship]","{display}":"[data-relationship-display]","{form}":"[data-relationship-form]","{confirm}":"[data-relationship-display-confirm]","{pending}":"[data-relationship-display-pending]","{actions}":"[data-relationship-display-actions]","{pendingTitle}":"[data-relationship-pending-title]"}},function(a){return{init:function(){EasySocial.module("field.relationship/"+a.options.id).done(function(b){a.options.types=b
}),a.display().addController("EasySocial.Controller.Field.Relationship.Display",{controller:{parent:a}}),a.addPlugin("form")},"{self} relationshipDeleted":function(){a.confirm().hide(),a.form().show()}}}),EasySocial.Controller("Field.Relationship.Form",{defaultOptions:{origType:null,origTarget:null,origApproved:null,"{form}":"[data-relationship-form]","{type}":"[data-relationship-form-type]","{connectWord}":"[data-relationship-form-connectwords]","{connectWords}":"[data-relationship-form-connectwords] span","{input}":"[data-relationship-form-input]","{target}":"[data-relationship-form-target]","{targetAvatar}":"[data-relationship-form-target-avatar]","{targetName}":"[data-relationship-form-target-name]","{targetPending}":"[data-relationship-form-target-pending]","{targetDelete}":"[data-relationship-form-target-delete]","{textboxlistDelete}":"[data-textboxlist-itemRemoveButton]"}},function(a){return{init:function(){a.input().addController(EasySocial.Controller.Friends.Suggest,{max:1,name:a.parent.options.fieldname+"[target][]"}),a.options.origType=a.form().data("orig-type"),a.options.origTarget=a.form().data("orig-target"),a.options.origApproved=a.form().data("orig-approved")
},"{type} change":function(b){var c=b.val(),d=a.parent.options.types[c].connect,e=a.input().controller("Textboxlist").getAddedItems(),f=e.length>0,g=f?a.target():a.input(),h=f?e[0]:!1;d?(g.show(),f&&a.options.origApproved&&h.id==a.options.origTarget&&c==a.options.origType?a.targetPending().hide():a.targetPending().show()):g.hide(),a.connectWords().hide(),a.connectWords().filterBy("relationship-form-connectword",c).show()},"{input} addItem":function(b,c,d){d.avatar&&a.targetAvatar().attr("src",d.avatar),d.screenName&&a.targetName().text(d.screenName),d.id&&a.targetDelete().data("id",d.id),a.input().hide(),a.target().show(),a.options.origApproved&&d.id==a.options.origTarget&&a.type().val()==a.options.origType?a.targetPending().hide():a.targetPending().show()
},"{targetDelete} click":function(b){var d=b.data("id");a.input().controller("Textboxlist").removeItem(d),a.input().show(),a.target().hide()},"{parent} relationshipApproved":function(b,c,d){a.type().val(d.type);var e={avatar:d.avatar,html:d.name+'<input type="hidden" name="'+a.parent.options.fieldname+'[target][]" value="'+d.id+'"/>',id:d.id,key:d.name,menuHtml:void 0,name:a.parent.options.fieldname+"[target]",screenName:d.name,title:d.name};a.input().controller("Textboxlist").addItem(e),a.connectWords().hide(),a.connectWords().filterBy("relationshipFormConnectword",d.type)
}}}),EasySocial.Controller("Field.Relationship.Display",{defaultOptions:{id:null,"{pendingFrame}":"[data-relationship-display-pending-text]","{loadingFrame}":"[data-relationship-display-loading]","{errorFrame}":"[data-relationship-display-error]","{actionsFrame}":"[data-relationship-display-actions]","{deleteButton}":"[data-relationship-display-actions-delete]","{approveButton}":"[data-relationship-display-actions-approve]","{rejectButton}":"[data-relationship-display-actions-reject]"}},function(b){return{init:function(){b.options.id=b.element.data("id")
},"{deleteButton} click":function(){b.parent.trigger("relationshipDeleted"),b.element.hide()},"{approveButton} click":function(){EasySocial.dialog({width:500,content:a.language("PLG_FIELDS_RELATIONSHIP_APPROVE_CONFIRM"),selectors:{"{approveButton}":"[data-approve-button]","{cancelButton}":"[data-cancel-button]"},bindings:{"{approveButton} click":function(){this.parent.close(),b.approveRelationship()},"{cancelButton} click":function(){this.parent.close()}},buttons:'<button data-cancel-button type="button" class="btn btn-es">'+a.language("COM_EASYSOCIAL_CANCEL_BUTTON")+'</button><button data-approve-button type="button" class="btn btn-es-primary">'+a.language("PLG_FIELDS_RELATIONSHIP_ACTION_APPROVE")+"</button>"})
},approveRelationship:function(){b.actionsFrame().hide(),b.loadingFrame().show(),EasySocial.ajax("fields/user/relationship/approve",{id:b.parent.options.id,relid:b.options.id}).done(function(a){b.parent.display().hide(),b.element.show(),b.element.removeAttr("data-relationship-display-pending"),b.element.attr("data-relationship-display-confirm",""),b.parent.form().before(b.element),b.parent.form().hide(),b.parent.pending().length<1&&b.parent.pendingTitle().hide(),b.loadingFrame().remove(),b.pendingFrame().remove(),b.approveButton().remove(),b.rejectButton().remove(),b.actionsFrame().show(),b.deleteButton().show(),b.parent.trigger("relationshipApproved",[a])
}).fail(function(a){b.loadingFrame().hide(),b.errorFrame().show().find("span").text(a)})},"{rejectButton} click":function(){b.actionsFrame().hide(),b.loadingFrame().show(),EasySocial.ajax("fields/user/relationship/reject",{id:b.parent.options.id,relid:b.options.id}).done(function(){b.element.remove(),b.parent.pending().length<1&&b.parent.pendingTitle().hide()}).fail(function(a){b.parent.trigger("relationshipActionError",[a])})}}}),b.resolve()})}),EasySocial.module("site/friends/suggest",function(){var b=this;
EasySocial.require().view("site/friends/suggest.item").library("textboxlist").language("COM_EASYSOCIAL_FRIENDS_REQUEST_SENT").done(function(a){EasySocial.Controller("Friends.Suggest.User",{defaultOptions:{"{addButton}":"[data-friend-suggest-add]","{button}":"[data-friend-suggest-button]"}},function(b,c){return{init:function(){c.uid=b.element.data("uid")},"{addButton} click":function(){EasySocial.ajax("site/controllers/friends/request",{id:c.uid}).done(function(){b.button().html(a.language("COM_EASYSOCIAL_FRIENDS_REQUEST_SENT"))
}).fail(function(a){EasySocial.dialog({width:450,height:180,content:a.message})})}}}),EasySocial.Controller("Friends.Suggest",{defaultOptions:{max:null,exclusive:!0,exclusion:[],minLength:1,highlight:!0,name:"uid[]",type:"",friendList:!1,friendListName:"",includeSelf:!1,showNonFriend:!1,view:{suggestItem:"site/friends/suggest.item"}}},function(b,c){return{init:function(){b.element.textboxlist({component:"es",name:c.name,max:c.max,plugin:{autocomplete:{exclusive:c.exclusive,minLength:c.minLength,highlight:c.highlight,showLoadingHint:!0,showEmptyHint:!0,query:function(a){var b={search:a,type:c.type,showNonFriend:c.showNonFriend};
return c.includeSelf&&(b.includeme=!0),c.friendList?EasySocial.ajax("site/controllers/friends/suggestWithList",{search:a,inputName:c.name,friendListName:c.friendListName,showNonFriend:c.showNonFriend}):EasySocial.ajax("site/controllers/friends/suggest",b)}}}}).textboxlist("enable")},"{self} filterItem":function(a,d,e){if(!c.friendList){var f=b.view.suggestItem(!0,{item:e,name:b.options.name});return e.title=e.screenName,e.menuHtml=f,e.html=f,e}},"{self} filterMenu":function(d,e,f,g,h,i){if(!c.friendList){var j=i.getAddedItems(),k=a.pluck(j,"id"),k=k.concat(b.options.exclusion);
g.each(function(){var b=a(this),c=b.data("item");b.toggleClass("hidden",a.inArray(c.id.toString(),k)>-1)})}}}}),b.resolve()})}),EasySocial.module("apps/fields/user/separator/sample",function(a){var b=this;EasySocial.Controller("Field.Separator.Sample",{defaultOptions:{"{items}":"[data-separator-type]"}},function(b){return{"{self} onConfigChange":function(c,d,e,f){if("type"==e){var g=a("[data-separator-"+f+"]");b.items().hide(),g.show()}}}}),b.resolve()}),EasySocial.module("apps/fields/user/terms/content",function(){var b=this;
EasySocial.require().language("PLG_FIELDS_TERMS_VALIDATION_REQUIRED").done(function(a){EasySocial.Controller("Field.Terms",{defaultOptions:{event:null,required:!1,"{textbox}":"[data-field-terms-textbox]","{checkbox}":"[data-field-terms-checkbox]"}},function(b){return{init:function(){},validateInput:function(){return b.clearError(),"onAdminEdit"==b.options.event?!0:b.options.required&&!b.checkbox().is(":checked")?(b.raiseError(),!1):!0},"{checkbox} change":function(){b.validateInput()},raiseError:function(){b.trigger("error",[a.language("PLG_FIELDS_TERMS_VALIDATION_REQUIRED")])
},clearError:function(){b.trigger("clear")},"{self} onSubmit":function(a,c,d){d.push(b.validateInput())},"{self} onConfigChange":function(a,c,d,e){switch(d){case"message":b.textbox().val(e)}}}}),b.resolve()})}),EasySocial.module("apps/fields/user/textarea/content",function(){var b=this;EasySocial.require().language("PLG_FIELDS_TEXTAREA_VALIDATION_INPUT_REQUIRED","PLG_FIELDS_TEXTAREA_VALIDATION_INPUT_TOO_SHORT","PLG_FIELDS_TEXTAREA_VALIDATION_INPUT_TOO_LONG").done(function(a){EasySocial.Controller("Field.Textarea",{defaultOptions:{required:!1,min:0,max:0,"{field}":"[data-field-textarea]","{input}":"[data-field-textarea-input]"}},function(b){return{init:function(){b.options.min=b.field().data("min"),b.options.max=b.field().data("max")
},validateInput:function(){b.clearError();var c=b.input().val();return b.options.required&&a.isEmpty(c)?(b.raiseError(a.language("PLG_FIELDS_TEXTAREA_VALIDATION_INPUT_REQUIRED")),!1):!a.isEmpty(c)&&b.options.min>0&&c.length<b.options.min?(b.raiseError(a.language("PLG_FIELDS_TEXTAREA_VALIDATION_INPUT_TOO_SHORT")),!1):b.options.max>0&&c.length>b.options.max?(b.raiseError(a.language("PLG_FIELDS_TEXTAREA_VALIDATION_INPUT_TOO_LONG")),!1):!0},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")
},"{self} onSubmit":function(a,c,d){d.push(b.validateInput())},"{self} onError":function(c,d,e){"required"===e&&b.raiseError(a.language("PLG_FIELDS_TEXTAREA_VALIDATION_INPUT_REQUIRED"))},"{input} keyup":function(){b.validateInput()},"{self} onConfigChange":function(a,c,d,e){switch(d){case"default":b.input().val(e);break;case"placeholder":b.input().attr("placeholder",e);break;case"readonly":e?b.input().attr("readonly","readonly"):b.input().removeAttr("readonly")}}}}),b.resolve()})}),EasySocial.module("apps/fields/user/textbox/content",function(){var b=this;
EasySocial.require().language("PLG_FIELDS_TEXTBOX_VALIDATION_INPUT_REQUIRED","PLG_FIELDS_TEXTBOX_VALIDATION_INPUT_TOO_SHORT","PLG_FIELDS_TEXTBOX_VALIDATION_INPUT_TOO_LONG","PLG_FIELDS_TEXTBOX_VALIDATION_INPUT_INVALID_FORMAT").done(function(a){EasySocial.Controller("Field.Textbox",{defaultOptions:{required:!1,min:0,max:0,"{field}":"[data-field-textbox]","{input}":"[data-field-textbox-input]","{notice}":"[data-check-notice]"}},function(b){return{init:function(){b.options.min=b.field().data("min"),b.options.max=b.field().data("max")
},"{input} keyup":function(){b.validateInput()},"{input} blur":function(){b.validateInput()},validateInput:function(){b.clearError();var c=b.input().val();return b.options.required&&a.isEmpty(c)?(b.raiseError(a.language("PLG_FIELDS_TEXTBOX_VALIDATION_INPUT_REQUIRED")),!1):!a.isEmpty(c)&&b.options.min>0&&c.length<b.options.min?(b.raiseError(a.language("PLG_FIELDS_TEXTBOX_VALIDATION_INPUT_TOO_SHORT")),!1):b.options.max>0&&c.length>b.options.max?(b.raiseError(a.language("PLG_FIELDS_TEXTBOX_VALIDATION_INPUT_TOO_LONG")),!1):!0
},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")},"{self} onError":function(c,d,e){"required"===e&&b.raiseError(a.language("PLG_FIELDS_TEXTBOX_VALIDATION_INPUT_REQUIRED")),"validate"===e&&b.raiseError(a.language("PLG_FIELDS_TEXTBOX_VALIDATION_INPUT_INVALID_FORMAT"))},"{self} onSubmit":function(a,c,d){d.push(b.validateInput())}}}),b.resolve()})}),EasySocial.module("apps/fields/user/textbox/sample_content",function(){var b=this;EasySocial.Controller("Field.Textbox.Sample",{defaultOptions:{"{input}":"[data-input]",min:"",max:"",regex_validate:!1,regex_format:"",regex_modifier:""}},function(a){return{init:function(){},"{self} onConfigChange":function(b,c,d,e){switch(d){case"placeholder":a.input().attr("placeholder",e);
break;case"default":a.input().val(e);break;case"readonly":e?a.input().attr("disabled","disabled"):a.input().removeAttr("disabled")}}}}),b.resolve()}),EasySocial.module("apps/fields/user/url/content",function(){var b=this;EasySocial.require().language("PLG_FIELDS_URL_VALIDATION_EMPTY_URL").done(function(a){EasySocial.Controller("Field.Url",{defaultOptions:{required:!1,"{input}":"[data-field-url-input]"}},function(b){return{init:function(){},"{input} blur":function(){b.validateInput()},validateInput:function(){b.clearError();
var c=b.input().val();return b.options.required&&a.isEmpty(c)?(b.raiseError(a.language("PLG_FIELDS_URL_VALIDATION_EMPTY_URL")),!1):!0},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")},"{self} onError":function(){b.raiseError(a.language("PLG_FIELDS_URL_VALIDATION_EMPTY_URL"))}}}),b.resolve()})}),EasySocial.module("apps/fields/user/url/sample_content",function(){var b=this;EasySocial.Controller("Field.Url.Sample",{defaultOptions:{"{urlInput}":"[data-url-input]"}},function(a){return{"{self} onConfigChange":function(b,c,d,e){switch(d){case"placeholder":a.urlInput().attr("placeholder",e);
break;case"default":a.urlInput().val(e)}}}}),b.resolve()}),EasySocial.module("apps/group/feeds",function(a){var b=this;EasySocial.Controller("Groups.Apps.Feeds",{defaultOptions:{"{browser}":"[data-feeds-browser]","{sources}":"[data-feeds-sources]","{item}":"[data-feeds-list-item]","{create}":"[data-feeds-create]","{list}":"[data-feeds-list]","{remove}":"[data-feeds-remove]"}},function(b){return{init:function(){b.options.id=b.element.data("groupid"),b.options.appId=b.element.data("appid"),b.list().implement(EasySocial.Controller.Groups.Apps.Feeds.List)
},"{remove} click":function(c){var d=a(c).data("id"),e=b.item.of(c);EasySocial.dialog({content:EasySocial.ajax("apps/group/feeds/controllers/feeds/confirmDelete",{groupId:b.options.id}),bindings:{"{deleteButton} click":function(){EasySocial.ajax("apps/group/feeds/controllers/feeds/delete",{appId:b.options.appId,feedId:d,groupId:b.options.id}).done(function(){e.remove(),0==b.sources().children().length&&b.browser().addClass("is-empty"),EasySocial.dialog().close()})}}})},"{create} click":function(){EasySocial.dialog({content:EasySocial.ajax("apps/group/feeds/controllers/feeds/create",{id:b.options.id}),bindings:{"{saveButton} click":function(){var c=this.title().val(),d=this.url().val(),e=a("[data-feeds-form-notice]");
return e.removeClass("alert alert-error"),e.addClass("hide"),0==c.trim().length?(e.text(a.language("Please enter title.")),e.addClass("alert alert-error"),e.removeClass("hide"),void 0):0==d.trim().length?(e.text(a.language("Please enter URL.")),e.addClass("alert alert-error"),e.removeClass("hide"),void 0):(EasySocial.ajax("apps/group/feeds/controllers/feeds/save",{title:this.title().val(),url:this.url().val(),appId:b.options.appId,groupId:b.options.id}).done(function(a){b.browser().removeClass("is-empty"),b.sources().append(a),EasySocial.dialog().close()
}),void 0)}}})}}}),EasySocial.Controller("Groups.Apps.Feeds.List",{defaultOptions:{"{item}":"[data-feed-item]","{openPreview}":"[data-feed-open]","{preview}":"[data-feed-preview]"}},function(a){return{init:function(){},"{openPreview} click":function(b){var c=a.item.of(b),d=c.find(a.preview.selector);d.hasClass("hide")?(a.preview().addClass("hide"),d.removeClass("hide")):d.addClass("hide")}}}),b.resolve()}),EasySocial.module("apps/group/tasks",function(a){var b=this;EasySocial.Controller("Groups.Apps.Tasks.Milestones.Browse",{defaultOptions:{"{milestone}":"[data-group-tasks-milestone-item]"}},function(a){return{init:function(){a.options.groupId=a.element.data("groupid"),a.milestone().implement(EasySocial.Controller.Groups.Apps.Tasks.Milestones.Item,{"{parent}":a})
}}}),EasySocial.Controller("Groups.Apps.Tasks.Milestones.Item",{defaultOptions:{"{complete}":"[data-milestone-mark-complete]","{uncomplete}":"[data-milestone-mark-uncomplete]","{delete}":"[data-milestone-delete]","{milestone}":"[data-group-tasks-milestone-item]"}},function(a){return{init:function(){a.options.id=a.element.data("id")},"{uncomplete} click":function(){EasySocial.ajax("apps/group/tasks/controllers/milestone/unresolve",{id:a.options.id,groupId:a.parent.options.groupId}).done(function(){a.element.removeClass("is-due").removeClass("is-completed")
})},"{complete} click":function(){EasySocial.ajax("apps/group/tasks/controllers/milestone/resolve",{id:a.options.id,groupId:a.parent.options.groupId}).done(function(){a.element.removeClass("is-due").addClass("is-completed")})},"{delete} click":function(){EasySocial.dialog({content:EasySocial.ajax("apps/group/tasks/controllers/milestone/confirmDelete",{id:a.options.id,groupId:a.parent.options.groupId}),bindings:{"{deleteButton} click":function(){EasySocial.ajax("apps/group/tasks/controllers/milestone/delete",{id:a.options.id,groupId:a.parent.options.groupId}).done(function(){EasySocial.dialog().close(),a.element.remove()
})}}})}}}),EasySocial.Controller("Groups.Apps.Tasks",{defaultOptions:{"{form}":"[data-group-tasks-form]","{formWrapper}":"[data-group-tasks-form-wrapper]","{taskList}":"[data-group-tasks-list]","{item}":"[data-group-tasks-list-item]","{completedList}":"[data-group-tasks-completed]","{openCounter}":"[data-tasks-open-counter]","{closedCounter}":"[data-tasks-closed-counter]","{completeMilestone}":"[data-milestone-mark-complete]","{uncompleteMilestone}":"[data-milestone-mark-uncomplete]","{deleteMilestone}":"[data-milestone-delete]","{wrapper}":"[data-group-tasks-wrapper]"}},function(b){return{init:function(){b.options.id=b.element.data("id"),b.options.groupId=b.element.data("groupid"),b.options.milestoneId=b.element.data("milestoneid"),b.form().implement(EasySocial.Controller.Groups.Apps.Tasks.Form,{"{parent}":b}),b.implementItemController()
},implementItemController:function(){b.item().implement(EasySocial.Controller.Groups.Apps.Tasks.Item,{"{parent}":b})},updateOpenCounter:function(a){b.openCounter().html(a)},updateClosedCounter:function(a){b.closedCounter().html(a)},insertCompleted:function(c){a(c).appendTo(b.completedList())},insertTask:function(a){b.formWrapper().after(a),b.implementItemController()},"{uncompleteMilestone} click":function(){EasySocial.ajax("apps/group/tasks/controllers/milestone/unresolve",{id:b.options.milestoneId,groupId:b.options.groupId}).done(function(){b.wrapper().removeClass("is-due").removeClass("is-completed")
})},"{completeMilestone} click":function(){EasySocial.ajax("apps/group/tasks/controllers/milestone/resolve",{id:b.options.milestoneId,groupId:b.options.groupId}).done(function(){b.wrapper().removeClass("is-due").addClass("is-completed")})},"{deleteMilestone} click":function(){EasySocial.dialog({content:EasySocial.ajax("apps/group/tasks/controllers/milestone/confirmDelete",{id:b.options.milestoneId,groupId:b.options.groupId}),bindings:{"{deleteButton} click":function(){EasySocial.ajax("apps/group/tasks/controllers/milestone/delete",{id:b.options.id,groupId:b.options.groupId}).done(function(){EasySocial.dialog().close(),window.location=b.options.redirect
})}}})}}}),EasySocial.Controller("Groups.Apps.Tasks.Item",{defaultOptions:{"{checkbox}":"[data-item-checkbox]","{delete}":"[data-tasks-item-remove]"}},function(b){return{init:function(){b.options.id=b.element.data("id")},"{delete} click":function(){EasySocial.dialog({content:EasySocial.ajax("apps/group/tasks/controllers/tasks/confirmDelete",{groupId:b.parent.options.groupId}),bindings:{"{deleteButton} click":function(){EasySocial.ajax("apps/group/tasks/controllers/tasks/delete",{id:b.options.id,groupId:b.parent.options.groupId}).done(function(){EasySocial.dialog().close();
var a=parseInt(b.parent.openCounter().html());b.parent.updateOpenCounter(a-1),b.element.remove()})}}})},"{checkbox} change":function(c){var e=a(c).is(":checked");e?EasySocial.ajax("apps/group/tasks/controllers/tasks/resolve",{id:b.options.id,groupId:b.parent.options.groupId}).done(function(){var a=parseInt(b.parent.openCounter().html());b.parent.updateOpenCounter(a-1);var a=parseInt(b.parent.closedCounter().html());b.parent.updateClosedCounter(a+1),b.parent.insertCompleted(b.element)}):EasySocial.ajax("apps/group/tasks/controllers/tasks/unresolve",{id:b.options.id,groupId:b.parent.options.groupId}).done(function(){var c=parseInt(b.parent.openCounter().html());
b.parent.updateOpenCounter(c+1);var c=parseInt(b.parent.closedCounter().html());b.parent.updateClosedCounter(c-1),b.parent.insertTask(b.element)})}}}),EasySocial.Controller("Groups.Apps.Tasks.Form",{defaultOptions:{"{title}":"[data-form-tasks-title]","{create}":"[data-form-tasks-create]","{assignee}":"[data-form-tasks-assignee]","{due}":"[data-form-tasks-due]","{error}":"[data-group-tasks-form-error]"}},function(a){return{init:function(){},resetForm:function(){a.element[0].reset()},"{title} keyup":function(b,c){13==c.keyCode&&a.create().click()
},"{create} click":function(){return""==a.title().val()?(a.error().removeClass("hide"),!1):(a.error().addClass("hide"),EasySocial.ajax("apps/group/tasks/controllers/tasks/save",{title:a.title().val(),assignee:a.assignee().val(),due:a.due().val(),groupId:a.parent.options.groupId,milestoneId:a.parent.options.id}).done(function(b){a.resetForm();var c=parseInt(a.parent.openCounter().html());a.parent.updateOpenCounter(c+1),a.parent.insertTask(b)}),void 0)}}}),b.resolve()}),EasySocial.module("avatar",function(){var b=this;
EasySocial.require().script("utilities/webcam").done(function(a){EasySocial.Controller("Avatar",{defaultOptions:{uid:null,type:null,redirectUrl:null,"{menu}":"[data-avatar-menu]","{takePictureButton}":"[data-avatar-webcam]","{uploadButton}":"[data-avatar-upload-button]","{selectButton}":"[data-avatar-select-button]","{removeButton}":"[data-avatar-remove-button]"}},function(b){return{init:function(){b.hasFlash()},"{uploadButton} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/avatar/upload",{uid:b.options.uid,type:b.options.type})})
},hasFlash:function(){var a=!1;try{var b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");b&&(a=!0)}catch(c){navigator.mimeTypes&&void 0!=navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(a=!0)}return a},hideWebcamCanvas:function(){a("[data-canvas-webcam]").css("position","absolute").css("left","-9999px")},showWebcamCanvas:function(){a("[data-canvas-webcam]").css("position","relative").css("left","0")},webcamStarted:!1,"{takePictureButton} click":function(){var e,c=0,d=null,f=[],g=document.createElement("canvas");
g.setAttribute("width",320),g.setAttribute("height",240),d=g.getContext("2d"),f=d.getImageData(0,0,320,240),e=function(e){for(var h=e.split(";"),i=f,j=0;320>j;j++){var k=parseInt(h[j]);i.data[c+0]=k>>16&255,i.data[c+1]=k>>8&255,i.data[c+2]=255&k,i.data[c+3]=255,c+=4}c>=307200&&(d.putImageData(i,0,0),EasySocial.ajax("site/views/profile/saveCamPicture",{type:"data",image:g.toDataURL("image/png")}).done(function(c){var d=c.url,e=new Image;preview=a("[data-photo-camera-preview]"),preview.removeClass("hidden"),a(e).attr("src",d).appendTo(preview),a("[data-save-button]").removeClass("hidden"),b.hideWebcamCanvas(),a("[data-capture-button]").addClass("hidden"),a("[data-recapture-button]").removeClass("hidden"),a("[data-photo-filename]").val(c.file)
}),c=0)},b.webcamStarted||EasySocial.dialog({content:EasySocial.ajax("site/views/profile/takePicture",{}),afterHide:function(){b.webcamStarted=!1},bindings:{init:function(){a("[data-canvas-webcam]").webcam({onSave:e,onCapture:function(){webcam.save()},debug:function(a,c){return"notify"==a&&"Camera stopped"==c?(b.webcamStarted=!1,EasySocial.dialog().close(),void 0):void 0}}),b.webcamStarted=!0},"{captureButton} click":function(){webcam.capture()},"{recaptureButton} click":function(){a("[data-capture-button]").removeClass("hidden"),a("[data-recapture-button]").addClass("hidden"),a("[data-save-button]").addClass("hidden"),b.showWebcamCanvas(),preview.find("img").remove(),preview.addClass("hidden")
},"{saveButton} click":function(){file=a("[data-photo-filename]").val(),uid=a("[data-photo-uid]").val(),EasySocial.ajax("site/controllers/photos/createAvatarFromWebcam",{uid:uid,type:"user",file:file}).done(function(){EasySocial.dialog().close(),location.reload()})}}})},"{selectButton} click":function(){EasySocial.photos.selectPhoto({uid:b.options.uid,type:b.options.type,bindings:{"{self} photoSelected":function(a,c,d){var e=d[0];e&&EasySocial.photos.createAvatar(e.id,{uid:b.options.uid,type:b.options.type,redirectUrl:b.options.redirectUrl})
},"{cancelButton} click":function(){this.parent.close()}}})},"{menu} shown.bs.dropdown":function(){b.element.addClass("show-all")},"{menu} hidden.bs.dropdown":function(){b.element.removeClass("show-all")},"{removeButton} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/profile/confirmRemoveAvatar")})}}}),b.resolve()})}),EasySocial.module("utilities/webcam",function(a){var b=this;!function(a){var b={extern:null,append:!0,width:320,height:240,mode:"callback",swffile:a.rootPath+"/media/com_easysocial/scripts/utilities/jscam.swf",quality:85,debug:function(){},onCapture:function(){},onTick:function(){},onSave:function(){},onLoad:function(){}};
window.webcam=b,a.fn.webcam=function(c){if("object"==typeof c)for(var d in b)void 0!==c[d]&&(b[d]=c[d]);var e='<object id="XwebcamXobjectX" type="application/x-shockwave-flash" data="'+b.swffile+'" width="'+b.width+'" height="'+b.height+'"><param name="movie" value="'+b.swffile+'" /><param name="FlashVars" value="mode='+b.mode+"&amp;quality="+b.quality+'" /><param name="allowScriptAccess" value="always" /></object>';null!==b.extern?a(b.extern)[b.append?"append":"html"](e):this[b.append?"append":"html"](e);var f=3;
(_register=function(){var a=document.getElementById("XwebcamXobjectX");a&&void 0!==a.capture?(b.capture=function(b){try{return a.capture(b)}catch(c){}},b.save=function(b){try{return a.save(b)}catch(c){}},b.setCamera=function(b){try{return a.setCamera(b)}catch(c){}},b.getCameraList=function(){try{return a.getCameraList()}catch(b){}},b.pauseCamera=function(){try{return a.pauseCamera()}catch(b){}},b.resumeCamera=function(){try{return a.resumeCamera()}catch(b){}},b.onLoad()):0==f?b.debug("error","Flash movie not yet registered!"):(f--,window.setTimeout(_register,1e3*(4-f)))
})()}}(a),b.resolve()}),EasySocial.module("cover",function(a){var b=this;EasySocial.require().library("image").done(function(){EasySocial.Controller("Cover",{defaultOptions:{uid:null,type:null,"{image}":"[data-cover-image]","{editButton}":"[data-cover-edit-button]","{doneButton}":"[data-cover-done-button]","{cancelButton}":"[data-cover-cancel-button]","{uploadButton}":"[data-cover-upload-button]","{selectButton}":"[data-cover-select-button]","{removeButton}":"[data-cover-remove-button]","{menu}":"[data-cover-menu]","{flyout}":".es-flyout-content"}},function(b,c,d){return{init:function(){b.setLayout(),b.element.hasClass("editing")&&b.enable()
},"{editButton} click":function(){b.enable(),b.reposition=!0,b.image().css("backgroundPosition",b.element.css("backgroundPosition"))},"{cancelButton} click":function(){b.disable()},reposition:!1,ready:!1,disabled:!0,toggle:function(){b[b.disabled?"enable":"disable"]()},enable:function(){b.setLayout(),b.disabled=!1,b.element.addClass("editing"),d.attr("data-es-photo-disabled",1)},disable:function(){b.reposition=!1,b.disabled=!0,b.element.removeClass("editing"),setTimeout(function(){d.attr("data-es-photo-disabled",0)
},1);var c=a.uri(window.location.href).deleteQueryParam("cover_id").toString();History.pushState({state:0},window.title,c)},imageLoaders:{},setLayout:function(){var c=b.image(),d=b.setLayout.image;if(d){var h=d.data("width"),i=d.data("height"),j=c.width(),k=c.height(),l=a.Image.resizeProportionate(h,i,j,k,"outer");b.availableWidth=j-l.width,b.availableHeight=k-l.height}else{var e=a.uri(c.css("backgroundImage")).extract(0);if(!e)return;{var f=b.imageLoaders;(f[e]||(f[e]=a.Image.get(e))).done(function(a){b.setLayout.image=a,b.setLayout()
})}}},setCover:function(c,d){b.element.addClass("loading"),a.Image.get(d).done(function(){b.image().data("photoId",c).css({backgroundImage:a.cssUrl(d),backgroundPosition:"50% 50%"}),b.x=.5,b.y=.5,b.enable()}).fail(function(){b.disable()}).always(function(){b.element.removeClass("loading")})},drawing:!1,moveCover:function(a,c,d){d||(d=b.image());var e=b.availableWidth,f=b.availableHeight,g=0==e?0:b.x+(a/e||0),h=0==f?0:b.y+(c/f||0);0>g&&(g=0),g>1&&(g=1),0>h&&(h=0),h>1&&(h=1),d.css("backgroundPosition",100*(b.x=g)+"% "+100*(b.y=h)+"% ")
},x:.5,y:.5,"{image} click":function(a,c){b.disabled||c.stopPropagation()},"{image} mousedown":function(c,e){if(!b.disabled&&!b.drawing){e.target===b.image()[0]&&e.preventDefault(),b.drawing=!0,d.addClass("active");var f=b.image(),g=b.image().css("backgroundPosition").split(" ");b.x=parseInt(g[0])/100,b.y=parseInt(g[1])/100;var h=e.pageX,i=e.pageY;a(document).on("mousemove.movingCover mouseup.movingCover",function(a){b.drawing&&b.moveCover(-1*(h-(h=a.pageX)),-1*(i-(i=a.pageY)),f)}).on("mouseup.movingCover",function(){a(document).off("mousemove.movingCover mouseup.movingCover"),d.removeClass("active"),b.drawing=!1
})}},"{image} touchstart":function(c,e){if(!b.disabled&&!b.drawing){b.drawing=!0,d.addClass("active");var f=b.image(),g=b.image().css("backgroundPosition").split(" ");b.x=parseInt(g[0])/100,b.y=parseInt(g[1])/100;var i=(e.originalEvent.targetTouches[0],e.pageX),j=e.pageY;a(document).on("touchmove.movingCover",function(a){if(b.drawing){var c=a.originalEvent.targetTouches[0];b.moveCover(-1*(i-(i=c.pageX)),-1*(j-(j=c.pageY)),f),a.preventDefault()}}).on("touchend.movingCover",function(){a(document).off("touchstart.movingCover touchend.movingCover"),d.removeClass("active"),b.drawing=!1
})}},save:function(){var c=b.image().data("photoId"),e=EasySocial.ajax("site/controllers/cover/create",{uid:b.options.uid,type:b.options.type,id:c,x:b.x,y:b.y,reposition:b.reposition?1:0}).done(function(e){d.attr("data-es-photo",c).css({backgroundImage:a.cssUrl(e.url),backgroundPosition:e.position}).removeClass("no-cover"),b.disable()});return e},"{doneButton} click":function(){b.save()},"{menu} shown.bs.dropdown":function(){b.element.addClass("show-all")},"{menu} hidden.bs.dropdown":function(){b.element.removeClass("show-all")
},"{selectButton} click":function(){d.attr("data-es-photo-disabled",1),EasySocial.photos.selectPhoto({uid:b.options.uid,type:b.options.type,bindings:{"{self} photoSelected":function(a,c,e){var f=e[0];f&&(b.setCover(f.id,f.sizes.large),this.parent.close(),d.attr("data-es-photo-disabled",0))},"{cancelButton} click":function(){this.parent.close(),d.attr("data-es-photo-disabled",0)}}})},"{uploadButton} click":function(){d.attr("data-es-photo-disabled",1),EasySocial.dialog({content:EasySocial.ajax("site/views/cover/uploadDialog",{uid:b.options.uid,type:b.options.type}),bindings:{"{self} upload":function(a,c,d){d.done(function(a){b.setCover(a.id,a.sizes.large.url)
})},"{cancelButton} click":function(){this.parent.close(),d.attr("data-es-photo-disabled",0)}}})},"{removeButton} click":function(){EasySocial.ajax("site/controllers/cover/remove",{uid:b.options.uid,type:b.options.type}).done(function(c){d.css({backgroundImage:a.cssUrl(c),backgroundPosition:"50% 50%"}).addClass("no-cover").removeAttr("data-es-photo"),b.disable()})},"{flyout} click":function(b,c){b.is(a(c.target))&&c.stopPropagation()}}}),b.resolve()})}),EasySocial.require().script("site/likes/likes","site/reports/reports","site/blocks/blocks","site/repost/repost","site/share/share","site/layout/dialog","site/layout/responsive","site/layout/elements","site/photos/photos","site/users/login","site/profile/popbox","site/privacy/privacy","site/locations/popbox","site/sidebar/sidebar","site/friends/api","site/popbox/popbox","site/conversations/api","site/groups/api","site/followers/api","site/stream/video","oauth/facebook").library("history").done(),EasySocial.module("site/likes/likes",function(a){var b=this;
a(document).on("click.es.likes.action","[data-likes-action]",function(){var b=a(this),c={id:b.data("id"),type:b.data("type"),group:b.data("group"),verb:b.data("verb"),streamid:b.data("streamid")},d=c.type+"-"+c.group+"-"+c.id;EasySocial.ajax("site/controllers/likes/toggle",c).done(function(e,f,g,h,i){b.text(f),id=b.data("streamid"),a("[data-likes-"+d+"]").html(e).toggleClass("hide",g).toggle(!g),c.uid=c.id,c.count=i,b.trigger("like"==h?"onLiked":"onUnliked",[c]),"like"==h&&""!=id&&(ids=a("[data-streams-wrapper]").data("excludeids"),newIds="",newIds=""!=ids&&void 0!=ids?ids+","+id:id,a("[data-streams-wrapper]").data("excludeids",newIds))
}).fail(function(a){console.log(a)})}).on("click.es.likes.others","[data-likes-others]",function(){var b=a(this),c=b.parents("[data-likes-content]"),d={uid:c.data("id"),type:c.data("type"),verb:c.data("verb"),group:c.data("group"),exclude:b.data("authors")};EasySocial.dialog({content:EasySocial.ajax("site/controllers/likes/showOthers",d)})}),b.resolve()}),EasySocial.module("site/reports/reports",function(a){a(document).on("click.es.reports.link","[data-reports-link]",function(){var b=a(this),c="url,extension,uid,type,object,title,description".split(","),d={};
a.each(c,function(a,c){d[c]=b.data(c)}),EasySocial.dialog({content:EasySocial.ajax("site/views/reports/confirmReport",{title:d.title,description:d.description}),selectors:{"{message}":"[data-reports-message]","{reportButton}":"[data-report-button]","{cancelButton}":"[data-cancel-button]"},bindings:{"{reportButton} click":function(){var a=this.message().val();EasySocial.dialog({content:EasySocial.ajax("site/controllers/reports/store",{url:d.url,extension:d.extension,uid:d.uid,type:d.type,title:d.object,message:a})})
},"{cancelButton} click":function(){EasySocial.dialog().close()}}})}),this.resolve()}),EasySocial.module("site/blocks/blocks",function(a){a(document).on("click.es.blocks.link","[data-blocks-link]",function(){var b=a(this).data("target");EasySocial.dialog({content:EasySocial.ajax("site/views/blocks/confirmBlock",{target:b}),selectors:{"{reason}":"[data-block-reason]","{blockButton}":"[data-block-button]","{cancelButton}":"[data-cancel-button]"},bindings:{"{blockButton} click":function(){var a=this.reason().val();
EasySocial.dialog({content:EasySocial.ajax("site/controllers/blocks/store",{target:b,reason:a})})},"{cancelButton} click":function(){EasySocial.dialog().close()}}})}),a(document).on("click.es.unblock.link","[data-unblock-link]",function(){var b=a(this).data("target");EasySocial.dialog({content:EasySocial.ajax("site/views/blocks/confirmUnblock",{target:b}),selectors:{"{unblockButton}":"[data-unblock-button]","{cancelButton}":"[data-cancel-button]"},bindings:{"{unblockButton} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/controllers/blocks/unblock",{target:b}).done(function(){a("[data-blocked-user-"+b+"]").remove()
}),selectors:{"{cancelButton}":"[data-cancel-button]"},bindings:{"{cancelButton} click":function(){EasySocial.dialog().close()}}})},"{cancelButton} click":function(){EasySocial.dialog().close()}}})}),this.resolve()}),EasySocial.module("site/repost/repost",function(a){var b=this;EasySocial.require().view("site/friends/suggest.item","site/friends/suggest.hint.search","site/friends/suggest.hint.empty","site/hashtags/suggest.item","site/hashtags/suggest.hint.search","site/hashtags/suggest.hint.empty").library("mentions").done(function(){a(document).on("click.es.repost.action","[data-repost-action]",function(){var b=a(this),c={id:b.data("id"),element:b.data("element"),group:b.data("group"),clusterId:b.data("clusterid"),clusterType:b.data("clustertype")},d=c.element+"-"+c.group+"-"+c.id;
EasySocial.dialog({content:EasySocial.ajax("site/views/repost/form",c),bindings:{init:function(){this.setMentionsLayout()},setMentionsLayout:function(){var b=this.textbox(),c=b.controller("mentions");if(c)return c.cloneLayout(),void 0;var d=this.header();b.mentions({triggers:{"@":{type:"entity",wrap:!1,stop:"",allowSpace:!0,finalize:!0,query:{loadingHint:!0,searchHint:a.View("easysocial/site/friends/suggest.hint.search"),emptyHint:a.View("easysocial/site/friends/suggest.hint.empty"),data:function(b){var c=a.Deferred();
return EasySocial.ajax("site/controllers/friends/suggest",{search:b}).done(function(b){a.isArray(b)||c.reject();var b=a.map(b,function(b){return b.title=b.screenName,b.type="user",b.menuHtml=a.View("easysocial/site/friends/suggest.item",!0,{item:b,name:"uid[]"}),b});c.resolve(b)}).fail(c.reject),c},use:function(a){return a.type+":"+a.id}}},"#":{type:"hashtag",wrap:!0,stop:" #",allowSpace:!1,query:{loadingHint:!0,searchHint:a.View("easysocial/site/hashtags/suggest.hint.search"),emptyHint:a.View("easysocial/site/hashtags/suggest.hint.empty"),data:function(b){var c=a.Deferred();
return EasySocial.ajax("site/controllers/hashtags/suggest",{search:b}).done(function(b){a.isArray(b)||c.reject();var b=a.map(b,function(b){return b.title="#"+b.title,b.type="hashtag",b.menuHtml=a.View("easysocial/site/hashtags/suggest.item",!0,{item:b,name:"uid[]"}),b});c.resolve(b)}).fail(c.reject),c}}}},plugin:{autocomplete:{id:"fd",component:"es",modifier:"es-story-mentions-autocomplete",sticky:!0,shadow:!0,position:{my:"left top",at:"left bottom",of:d,collision:"none"},size:{width:function(){return d.outerWidth(!0)
}}}}})},"{sendButton} click":function(){var f=this.parent,g=a.trim(this.repostContent().val());c.content=g;var h=this.textbox().mentions("controller").toArray();c.mentions=a.map(h,function(b){return"hashtag"===b.type&&a.isPlainObject(b.value)&&(b.value=b.value.title.slice(1)),JSON.stringify(b)}),f.loading(!0),EasySocial.ajax("site/controllers/repost/share",c).done(function(c,e,f,g){var c=a.buildHTML(c);actionContent=a("[data-repost-"+d+"]").toggleClass("hide",e).toggle(!e),actionContent.find("span.repost-counter").html(c),b.trigger("create",[g])
}).fail(function(a){f.clearMessage(),f.setMessage(a)}).always(function(){f.loading(!1),f.close()})}}})}),EasySocial.module("repost/authors",function(){this.resolve(function(a){var b=a.button.parents("[data-repost-content]");return data={id:b.data("id"),element:b.data("element")},{content:EasySocial.ajax("site/controllers/repost/getSharers",data),id:"fd",component:"es",type:"repost",position:"bottom-right"}})}),b.resolve()})}),EasySocial.module("site/share/share",function(a){a(document).on("click.es.share.button","[data-es-share-button]",function(){var b=a(this);
EasySocial.dialog({title:b.text(),width:500,content:EasySocial.ajax("site/views/sharing/shareDialog",{url:b.data("url"),title:b.data("title")})})}),this.resolve()}),EasySocial.module("site/layout/dialog",function(){var b=this;EasySocial.require().library("dialog").view("site/dialog/default").done(function(a){EasySocial.dialog=function(b){if(window.parentDialog)return window.parentDialog.update(b);if("string"==typeof b||a.isDeferred(b)){var c=arguments[1];b={content:b,afterShow:a.isFunction(c)?c:a.noop}}var d=a("[id=fd].es-dialog.global");
d.length<1&&(d=a(EasySocial.View("site/dialog/default")).addClass("global").appendTo("body"));var e={showOverlay:!1},b=a.extend(e,b),f=d.controller("Dialog");return f?f.update(b):f=d.addController("Dialog",b),f},b.resolve()})}),EasySocial.module("site/layout/responsive",function(a){var b=this;a(function(){a.responsive(".es-responsive",[{at:2500,switchTo:"extra-wide wide"},{at:1200,switchTo:"wide"},{at:960,switchTo:"wide w960"},{at:818,switchTo:"wide w960 w768"},{at:600,switchTo:"wide w960 w768 w600"},{at:560,switchTo:"wide w960 w768 w600 w480"},{at:480,switchTo:"wide w960 w768 w600 w480 w320"}]),a(document).on("responsive",a.debounce(function(){ESImageRefresh()
},500))}),b.resolve()}),EasySocial.module("site/layout/elements",function(a){function d(){try{return document.createEvent("TouchEvent"),!0}catch(a){return!1}}var b=this,c=!1;a(document).on("click.button.data-bs-api","[data-bs-toggle-value]",function(){var b=a(this),c=b.siblings("[data-bs-toggle-value]"),d=b.parents('[data-bs-toggle="radio-buttons"]');if(!d.hasClass("disabled")&&d.length>0){var e=a(this).data("bs-toggle-value");return b.addClass("active"),c.removeClass("active"),d.find("input[type=hidden]").val(e).trigger("change"),void 0
}});var e=0;window.onmousemove=function(){e++,f()};var f=a.debounce(function(){!c&&e>10?(c=!0,e=0,a(document).on("mouseover.tooltip.data-es-api","[data-es-provide=tooltip]",function(){a(this).tooltip({delay:{show:200,hide:100},animation:!1,template:'<div id="fd" class="es tooltip tooltip-es"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',container:"body"}).tooltip("show")})):e=0},500);d()||a(document).on("mouseover.tooltip.data-es-api","[data-es-provide=tooltip]",function(){a(this).tooltip({delay:{show:200,hide:100},animation:!1,template:'<div id="fd" class="es tooltip tooltip-es"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',container:"body"}).tooltip("show")
}),a(document).on("mouseover.popover.data-es-api","[data-es-provide=popover]",function(){a(this).popover({delay:{show:200,hide:100},animation:!1,trigger:"hover",container:"body"}).popover("show")});var g=function(a){return a%400?a%100?a%4?!1:!0:!1:!0};a(document).on("keyup","[data-date-form] [data-date-day]",function(){if(a.trim(a(this).val())){var b=parseInt(a(this).siblings("[data-date-year]").val()||a(this).siblings("[data-date-year]").data("dateDefault")),c=parseInt(a(this).siblings("[data-date-month]").val()||a(this).siblings("[data-date-month]").data("dateDefault")),d=parseInt(a(this).val()||a(this).data("dateDefault")),e=/1|3|5|7|8|10|12/.test(c)?31:30;
2==c&&(e=g(b)?29:28),1>d&&(d=1),d>e&&(d=e),a.isNumeric(d)?a(this).val(d):a(this).val("")}}),a(document).on("keyup","[data-date-form] [data-date-year]",function(){if(a.trim(a(this).val())){var b=parseInt(a(this).val());1>b&&(b=1),a.isNumeric(b)?a(this).val(b):a(this).val("")}}),b.resolve()}),EasySocial.module("site/photos/photos",function(a){var b=this;EasySocial.require().script("site/photos/popup","site/photos/dialog","site/photos/avatar").done(),EasySocial.Controller("Photos",{defaultOptions:{}},function(a){return{init:function(){EasySocial.photos=a,EasySocial.module("site/photos/popup").done(function(b){a.popup=a.addPlugin("popup",b)
}),EasySocial.module("site/photos/dialog").done(function(b){a.dialog=a.addPlugin("dialog",b)}),EasySocial.module("site/photos/avatar").done(function(b){a.avatar=a.addPlugin("avatar",b)})}}}),a(function(){a("body").addController("EasySocial.Controller.Photos")}),b.resolve()}),EasySocial.module("site/photos/popup",function(a){var b=this;a.fn.at=function(a){return this.find("[data-"+a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()+"]")},EasySocial.require().view("site/photos/popup").done(function(){var c=EasySocial.Controller("Photos.Popup",{defaultOptions:{view:{popup:"site/photos/popup"},"{popup}":"[data-photo-popup]","{viewport}":"[data-popup-viewport]","{handle}":"[data-popup-handle]","{photoGroup}":"[data-es-photo-group]","{photo}":"[data-es-photo]","{photoHeader}":"[data-photo-popup] [data-photo-header]","{photoContent}":"[data-photo-popup] [data-photo-content]","{navButton}":".es-photo-nav-button","{closeButton}":"[data-popup-close-button]","{photoItem}":"[data-photo-popup] [data-photo-item]","{desTagItem}":"[data-photo-des-tag-item]"}},function(b,c,d,e){return{init:function(){e=a("body"),b.bodyOverflow={overflow:e.css("overflow"),overflowX:e.css("overflowX"),overflowY:e.css("overflowY")}
},setLayout:function(){var a=b.popup();if(a.is(":visible")){var c=b.viewport().find("img[data-photo-image]")[0];c&&ESImage(c),e.css({overflow:"hidden",overflowX:"hidden",overflowY:"hidden"});var d=b.photoItem(),f=d.controller("EasySocial.Controller.Photos.Tags");f&&f.setLayout();var g=d.controller("EasySocial.Controller.Photos.Navigation"),h=d.controller("EasySocial.Controller.Photos.Tagger");g&&g[h&&!h.disabled||b.playlist.length<2?"disable":"enable"]()}else e.css(b.bodyOverflow)},"{desTagItem} mouseover":function(a){var d=b.photoItem().controller("EasySocial.Controller.Photos.Tags");
d&&d.getTagItem(a.data("photoDesTagId")).addClass("focus")},"{desTagItem} mouseout":function(a){var d=b.photoItem().controller("EasySocial.Controller.Photos.Tags");d&&d.getTagItem(a.data("photoDesTagId")).removeClass("focus")},"{window} resize":a.debounce(function(){b.setLayout()},250),"{self} responsive":function(){b.setLayout()},playlist:[],show:function(){var c,e=b.popup.node;e||(c=b.view.popup(),e=b.popup.node=c[0]),a.contains(d,e)||(c=a(e).addClass("is-loading").appendTo(d)),c.is(":visible")||(c.show(),a(window).trigger("resize.responsive"),c.trigger("show"))
},hide:function(){b.popup().hide().trigger("hide").detach(),e.css(b.bodyOverflow)},open:function(){var d,e,c=arguments,f=[];if(1===c.length&&(e=c[0],f=[e]),a.isArray(c[0]))f=c[0],e=c[1]||f[0];else if(2===c.length){var d,g=c[0],h=!0;a.isNumeric(g)&&(g="album",h=!1,d=c[0],e=c[1],f=[e]),"photo"==g&&(e=c[1],f=[e]),"album"==g&&EasySocial.ajax("site/controllers/albums/playlist",{albumId:d||c[1]}).done(function(c){b.playlist=a.map(c,function(a){return a.id}),h&&b.display(f[0]),b.setLayout()}).fail(function(){alert("Error. Could not get album playlist."),b.hide()
})}b.playlist=f,b.show(),b.display(e)},handles:{},display:function(c){if(c){var d=b.currentPhotoId;b.currentPhotoId=c;var e=b.handles[c];if(b.handle().detach(),!e){var f=b.popup();return f.addClass("is-loading"),EasySocial.ajax("site/views/photos/item",{id:c,browser:0,popup:1}).done(function(d){var e=a.buildHTML('<div class="es-popup-handle" data-popup-handle>'+d+"</div>");b.handles[c]=e,b.display(c)}).fail(function(){alert("There was a problem loading this photo."),b.display(d)}).always(function(){f.removeClass("is-loading")
}),void 0}b.popup().removeClass("is-loading"),b.viewport().empty().append(e),e instanceof a&&(b.handles[c]=e.filter("[data-popup-handle]")[0]),b.setLayout()}},current:function(){var c=b.currentPhotoId,d=b.playlist,e=a.indexOf(d,c);return 0>e&&(e=0),e},next:function(){var a=b.playlist;if(!(a.length<2)){var c=b.current()+1;c>a.length-1&&(c=0),b.display(a[c])}},prev:function(){var a=b.playlist;if(!(a.length<2)){var c=b.current()-1;0>c&&(c=a.length-1),b.display(a[c])}},"{self} click":function(a,c){c.target===b.popup()[0]&&b.hide()
},"{photo} click":function(c,d){if("1"!=c.attr("data-es-photo-disabled")){var e=a(d.target),f=e.parents().andSelf();if(!(e.filter("[data-es-photo]").length<1&&f.filter("[data-photo-menu], [data-cover-menu]").length>0)){var g=c.attr("data-es-photo"),h=b.photoGroup.of(c);if(!(h.length<0)){d.preventDefault();var i=(h.attr("data-es-photo-group")||"element").split(":"),j=i[0];switch(j){case"album":var k=i[1];b.open(k,g);break;case"photos":var l=i[1].split(",");b.open(l,g);break;case"element":var l=[];h.at("esPhoto").each(function(){l.push(a(this).attr("data-es-photo"))
}),b.open(l,g)}}}}},"{photoItem} directionmove":function(){b.playlist.length<2&&b.navButton().removeClass("active")},"{photoItem} directionstop":function(){},"{photoItem} photoNext":function(){b.next()},"{photoItem} photoPrev":function(){b.prev()},"{photoItem} photoDelete":function(c,d,e){b.playlist.length<2?b.hide():b.next(),b.playlist=a.without(b.playlist,e.id)},"{closeButton} click":function(){b.hide()}}});b.resolve(c)})}),EasySocial.module("site/photos/dialog",function(a){var b=this,c=EasySocial.Controller("Photos.Dialog",{defaultOptions:{}},function(b){return{init:function(){EasySocial.photos.selectPhoto=b.show
},show:function(b){var c=a.Deferred(),d=EasySocial.ajax("site/views/albums/dialog",{uid:b.uid,type:b.type}),e=EasySocial.require().script("albums/browser").done();EasySocial.dialog(a.extend({content:c},b)),a.when(e,d).done(function(){d.done(function(a){c.resolve(a)})})}}});b.resolve(c)}),EasySocial.module("site/photos/avatar",function(a){var b=this,c=EasySocial.Controller("Photos.Avatar",{defaultOptions:{}},function(b){return{init:function(){EasySocial.photos.createAvatar=b.crop},crop:function(b,c){if(void 0!=b){c||(c={});
var d={id:b};c.uid&&(d.uid=c.uid,delete c.uid),c.type&&(d.type=c.type,delete c.type),c.redirect&&(d.redirect=c.redirect,delete c.redirect),EasySocial.dialog(a.extend({content:EasySocial.ajax("site/views/avatar/crop",d)},c))}}}});b.resolve(c)}),EasySocial.module("site/users/login",function(){var b=this;EasySocial.require().library("dialog").script("site/dashboard/dashboard.guest.login").view("site/loading/small").done(function(){EasySocial.login=function(){EasySocial.ajax("site/views/login/form").done(function(a){EasySocial.dialog({content:a,afterShow:function(){this.element.find("[data-guest-login]").addController("EasySocial.Controller.Dashboard.Guest.Login")
}})})},b.resolve()})}),EasySocial.module("site/dashboard/dashboard.guest.login",function(){var b=this;EasySocial.require().script("field","validate").done(function(){EasySocial.Controller("Dashboard.Guest.Login",{defaultOptions:{"{fieldItem}":"[data-registermini-fields-item]","{submit}":"[data-registermini-submit]","{form}":"[data-registermini-form]"}},function(a){return{init:function(){a.fieldItem().addController("EasySocial.Controller.Field.Base",{userid:0,mode:"registermini"})},"{submit} click":function(b){b.enabled()&&(b.disabled(!0),a.form().validate({mode:"onRegisterMini"}).done(function(){b.enabled(!0),a.form().submit()
}).fail(function(){b.enabled(!0)}))}}}),b.resolve()})}),EasySocial.module("validate",function(a){var b=this;a.isController("EasySocial.Controller.Validator")||EasySocial.Controller("Validator",{defaultOptions:{mode:null,checks:["required","validate"],typeAttr:"data-check-type",formatAttr:"data-check-format",modifierAttr:"data-check-modifier",errorTrigger:"onError",submitTrigger:"onSubmit","{container}":"[data-check]","{notice}":"[data-check-notice]","{required}":"[data-check-required]","{validate}":"[data-check-validate]"}},function(b){return{vars:{},register:[],deferreds:[],errors:[],state:a.Deferred(),init:function(){},reset:function(){b.vars={},b.register=[],b.deferreds=[],b.errors=[],b.state=a.Deferred(),b.container().removeClass("error")
},start:function(){return b.reset(),a.each(b.container(),function(c,d){b.vars.container=d=a(d),d.trigger(b.options.submitTrigger,[b.register,b.options.mode]),a.each(b.getFields(),function(c,d){b.vars.field=d=a(d),a.each(b.options.checks,function(a,c){b.vars.check=c,b[c+"Check"]()})})}),a.each(b.register,function(c,d){if(a.isDeferred(d))b.deferreds.push(d);else if(a.isPlainObject(d))a.each(d,function(a,d){return d===!1?(b.errors.push(c),!0):void 0});else if(d===!1)return b.errors.push(c),!0}),b.errors.length>0?b.state.reject():b.deferreds.length>0?a.when.apply(null,b.deferreds).done(function(){b.state.resolve()
}).fail(function(){b.state.reject()}):b.state.resolve(),b.state},getFields:function(){return a.merge(b.vars.container.find(b.required.selector),b.vars.container.find(b.validate.selector))},requiredCheck:function(){if(b.vars.field.is(b.required.selector)){var c=b.vars.field.attr(b.options.typeAttr)||b.vars.field.attr("type")||"text";"text"===c&&""==a.trim(b.vars.field.val())&&b.raiseError(),"checkbox"===c&&b.vars.field.find('input[type="checkbox"]').filter(":checked").length<1&&b.raiseError()}},validateCheck:function(){if(void 0!==b.vars.field.attr(b.options.formatAttr)){var c=b.vars.field.val();
if(a.isEmpty(c))return;var d=b.vars.field.attr(b.options.formatAttr)||"",e=b.vars.field.attr(b.options.modifierAttr)||"",f=new RegExp(d,e);f.test(c)||b.raiseError()}},raiseError:function(){b.vars.container.addClass("has-error"),b.vars.container.trigger(b.options.errorTrigger,[b.vars.check,b.vars.field]),b.register.push(!1)}}}),a.fn.validate=function(a){var b=this;if(b.length>0){var c=this.addController("EasySocial.Controller.Validator",a);return c.start()}return!1},b.resolve()}),EasySocial.module("site/profile/popbox",function(a){var b=this;
EasySocial.require().library("popbox").done(function(){var a=EasySocial.options.lockdown&&!EasySocial.options.guest||!EasySocial.options.lockdown;a&&EasySocial.module("profile/popbox",function(){this.resolve(function(a){var b=a.button.data("userId"),c=a.button.attr("data-popbox-position")||"top-left";return{content:EasySocial.ajax("site/views/profile/popbox",{id:b}),id:"fd",component:"es",type:"profile",position:c}})})}),EasySocial.require().script("site/conversations/composer").done(),EasySocial.Controller("Profile.Popbox",{defaultOptions:{id:null,"{addButton}":"[data-popbox-friends-add]","{friendsButton}":"[data-popbox-friends-friends]","{respondButton}":"[data-popbox-friends-respond]","{requestedButton}":"[data-popbox-friends-requested]","{messageButton}":"[data-popbox-message]","{friendsSubmenu}":"[data-friends-submenu]","{cancelFriend}":"[data-popbox-friends-friends-cancel]","{cancelFriendRequest}":"[data-popbox-friends-requested-cancel]","{approveFriend}":"[data-popbox-friends-respond-approve]","{rejectFriend}":"[data-popbox-friends-respond-reject]"}},function(b){return{init:function(){b.options.id=b.element.find("[data-user-id]").data("userId"),EasySocial.module("site/conversations/composer").done(function(){b.messageButton().implement(EasySocial.Controller.Conversations.Composer.Dialog,{recipient:{id:b.options.id}})
})},"{self} popboxActivate":function(){b.friendsSubmenu().parent().removeClass("open")},"{addButton} click":function(){EasySocial.ajax("site/controllers/friends/request",{id:b.options.id}).done(function(){EasySocial.ajax("site/views/profile/getButton",{button:"button.requested",id:b.options.id}).done(function(a){b.addButton().replaceWith(a)})}).fail(function(){EasySocial.dialog({content:EasySocial.ajax("site/views/friends/exceeded")})})},"{cancelFriend} click":function(c){var e=a(c).data("friendid");EasySocial.dialog({content:EasySocial.ajax("site/views/profile/confirmRemoveFriend",{id:b.options.id}),bindings:{"{confirmButton} click":function(){EasySocial.ajax("site/controllers/friends/unfriend",{id:e}).done(function(){EasySocial.dialog({content:EasySocial.ajax("site/views/profile/friendRemoved",{id:b.options.id})}),EasySocial.ajax("site/views/profile/getButton",{button:"button.add"}).done(function(a){b.friendsSubmenu().remove(),b.friendsButton().replaceWith(a)
})})}}})},"{cancelFriendRequest} click":function(c){var e=a(c).data("friendid");EasySocial.dialog({content:EasySocial.ajax("site/views/profile/confirmCancelRequest",{id:e}),bindings:{"{confirmButton} click":function(){EasySocial.dialog().close(),EasySocial.ajax("site/controllers/friends/cancelRequest",{id:e}).done(function(){EasySocial.ajax("site/views/profile/getButton",{button:"button.add"}).done(function(a){b.friendsSubmenu().remove(),b.requestedButton().replaceWith(a)})})}}})},"{approveFriend} click":function(c){var e=a(c).data("friendid");
EasySocial.ajax("site/controllers/friends/approve",{id:e}).done(function(){EasySocial.dialog({content:EasySocial.ajax("site/views/profile/confirmFriends",{id:b.options.id})}),EasySocial.ajax("site/views/profile/getButton",{button:"button.friends"}).done(function(a){b.friendsSubmenu().remove(),b.respondButton().replaceWith(a)})})},"{rejectFriend} click":function(c){var e=a(c).data("friendid");EasySocial.ajax("site/controllers/friends/reject",{id:e}).done(function(){EasySocial.dialog({content:EasySocial.ajax("site/views/profile/rejected",{id:b.options.id})}),EasySocial.ajax("site/views/profile/getButton",{button:"button.add"}).done(function(a){b.friendsSubmenu().remove(),b.respondButton().replaceWith(a)
})})}}}),a(document).on("mouseover.es.profile.popbox","[data-popbox-tooltip=profile]",function(){a(this).addController("EasySocial.Controller.Profile.Popbox")}),b.resolve()}),EasySocial.module("site/conversations/composer",function(){var b=this;EasySocial.require().library("mentions").script("site/friends/suggest","uploader/uploader").view("site/friends/suggest.item","site/friends/suggest.hint.search","site/friends/suggest.hint.empty","site/hashtags/suggest.item","site/hashtags/suggest.hint.search","site/hashtags/suggest.hint.empty").language("COM_EASYSOCIAL_CONVERSATIONS_ERROR_EMPTY_RECIPIENTS","COM_EASYSOCIAL_CONVERSATIONS_ERROR_EMPTY_MESSAGE").done(function(a){EasySocial.Controller("Conversations.Composer",{defaultOptions:{attachments:!0,location:!0,showNonFriend:!1,extensionsAllowed:"","{uploader}":"[data-composer-attachment]","{location}":"[data-composer-location]","{editorHeader}":"[data-composer-editor-header]","{editorArea}":"[data-composer-editor-area]","{editor}":"[data-composer-editor]","{friendSuggest}":"[data-friends-suggest]","{recipients}":"input[name=uid\\[\\]],input[name=list_id\\[\\]]","{recipientRow}":"[data-composer-recipients]","{messageRow}":"[data-composer-message]","{submit}":"[data-composer-submit]",view:{suggestItem:"site/friends/suggest.item",tagSuggestItem:"site/hashtags/suggest.item"}}},function(b){return{init:function(){b.initSuggest(),b.options.attachments&&b.initUploader(),b.setMentionsLayout()
},resetForm:function(){b.editor().val("")},setMentionsLayout:function(){var c=b.editorArea(),d=c.controller("mentions");if(d)return d.cloneLayout(),void 0;var e=b.editorHeader();c.mentions({triggers:{"@":{type:"entity",wrap:!1,stop:"",allowSpace:!0,finalize:!0,query:{loadingHint:!0,searchHint:a.View("easysocial/site/friends/suggest.hint.search"),emptyHint:a.View("easysocial/site/friends/suggest.hint.empty"),data:function(c){var d=a.Deferred();return EasySocial.ajax("site/controllers/friends/suggest",{search:c}).done(function(c){a.isArray(c)||d.reject();
var c=a.map(c,function(a){return a.title=a.screenName,a.type="user",a.menuHtml=b.view.suggestItem(!0,{item:a,name:"uid[]"}),a});d.resolve(c)}).fail(d.reject),d},use:function(a){return a.type+":"+a.id}}},"#":{type:"hashtag",wrap:!0,stop:" #",allowSpace:!1,query:{loadingHint:!1,searchHint:a.View("easysocial/site/hashtags/suggest.hint.search"),emptyHint:a.View("easysocial/site/hashtags/suggest.hint.empty"),data:function(c){var d=a.Deferred();return EasySocial.ajax("site/controllers/hashtags/suggest",{search:c}).done(function(c){a.isArray(c)||d.reject();
var c=a.map(c,function(a){return a.title="#"+a.title,a.type="hashtag",a.menuHtml=b.view.tagSuggestItem(!0,{item:a,name:"uid[]"}),a});d.resolve(c)}).fail(d.reject),d}}}},plugin:{autocomplete:{id:"fd",component:"es",position:{my:"left top",at:"left bottom",of:e,collision:"none"},size:{width:function(){return e.width()}}}}})},initUploader:function(){b.uploader().implement(EasySocial.Controller.Uploader,{temporaryUpload:!0,query:"type=conversations",type:"conversations",extensionsAllowed:b.options.extensionsAllowed})
},initSuggest:function(){b.friendSuggest().addController(EasySocial.Controller.Friends.Suggest,{friendList:!0,friendListName:"list_id[]",showNonFriend:b.options.showNonFriend})},initEditor:function(){b.editor().expandingTextarea()},checkErrors:function(){return b.recipients().length<=0?(b.recipientRow().addClass("error"),b.clearMessage(),b.setMessage(a.language("COM_EASYSOCIAL_CONVERSATIONS_ERROR_EMPTY_RECIPIENTS"),"error"),!0):(b.recipientRow().removeClass("error"),""==b.editor().val()?(b.messageRow().addClass("error"),b.clearMessage(),b.setMessage(a.language("COM_EASYSOCIAL_CONVERSATIONS_ERROR_EMPTY_MESSAGE"),"error"),!0):(b.messageRow().removeClass("error"),!1))
},"{submit} click":function(c,d){if(d.preventDefault(),b.checkErrors())return!1;if(b.options.attachments){var e=b.uploader().controller();if(e.options.uploading&&e.hasFiles())return!1}var f=b.editorArea().mentions("controller").toArray();a(f).each(function(c,d){a("<input>").attr("type","hidden").attr("name","tags[]").attr("value",JSON.stringify(d)).appendTo(b.element)}),b.element.submit()}}}),EasySocial.Controller("Conversations.Composer.Dialog",{defaultOptions:{recipient:{}}},function(b){return{"{self} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/composer",{id:b.options.recipient.id}),bindings:{"{sendButton} click":function(c){var d=this.parent,e=a("[data-composer-recipient]").val(),f=a("[data-composer-message]").val();
c.disabled(!0),EasySocial.ajax("site/controllers/conversations/store",{uid:e,message:f}).done(function(a){EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/sent",{id:b.options.recipient.id}),bindings:{"{viewButton} click":function(){document.location=a}}})}).fail(function(a){d.setMessage(a),c.disabled(!1)})}}})}}}),b.resolve()})}),EasySocial.module("site/privacy/privacy",function(){var b=this;EasySocial.require().library("textboxlist").language("COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_PUBLIC","COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_MEMBER","COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_FRIENDS_OF_FRIEND","COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_FRIEND","COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_ONLY_ME","COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_CUSTOM").done(function(a){EasySocial.Controller("Privacy",{defaultOptions:{"{menu}":"[data-privacy-menu]","{privacyItem}":"[data-privacy-item]","{icon}":"[data-privacy-icon]","{button}":"[data-privacy-toggle]","{tooltip}":"[data-original-title]","{key}":"[data-privacy-hidden]"}},function(b){return{init:function(){b.instanceId=a.uid(),b.addPlugin("custom")
},getData:function(b){return a._.pick(b.data(),"uid","utype","value","pid","privacyicon","streamid","pitemid","userid")},"{self} click":function(c,d){var e=a(d.target),f=b.button();e.parents().andSelf().filter(f).length>0&&b.toggle()},"{privacyItem} click":function(a){var c=b.getData(a);b.trigger("privacyChange",[c]),c.preventSave||(b.save(c),b.deactivate())},"{self} privacyChange":function(a,c,d){b.privacyItem().removeClass("active").filter("[data-value="+d.value+"]").addClass("active")},toggle:function(){var a=b.element.hasClass("active");
b[a?"deactivate":"activate"]()},activate:function(){b.element.addClass("active"),b.trigger("activate",[b]),a(window).trigger("activatePrivacy",[b]);var c="click.privacy."+b.instanceId;a(document).on(c,function(d){var e=a(d.target);e.parents().andSelf().filter(b.element).length>0||e.parents("[data-textboxlist-autocomplete]").length>0||e.parents("[data-textboxlist-item]").length>0||(a(document).off(c),b.deactivate())})},deactivate:function(){b.element.removeClass("active"),b.trigger("deactivateAllPrivacy",[b]),a(window).trigger("deactivatePrivacy",[b])
},"{window} activatePrivacy":function(a,c,d){d!==b&&b.deactivate()},save:function(c){b.key().val(c.value),b.icon().attr("class",c.privacyicon),b.trigger("privacySave",[c]),b.element.attr("data-original-title",a.language("COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_"+c.value.toUpperCase())),"ajax"==b.element.data("privacyMode")&&EasySocial.ajax("site/controllers/privacy/update",{uid:c.uid,utype:c.utype,value:c.value,pid:c.pid,custom:c.custom,streamid:c.streamid,userid:c.userid,pitemid:c.pitemid}).done(function(){}).fail(function(){})
}}}),EasySocial.Controller("Privacy.Custom",{defaultOptions:{"{textField}":"[data-textfield]","{saveButton}":"[data-save-button]","{cancelButton}":"[data-cancel-button]","{customItem}":"[data-privacy-item][data-value=custom]","{customKey}":"[data-privacy-custom-hidden]"}},function(b){return{init:function(){b.textField().textboxlist({component:"es",unique:!0,plugin:{autocomplete:{exclusive:!0,minLength:1,cache:!1,query:function(a){var c=b.getIds(),d=EasySocial.ajax("site/views/privacy/getfriends",{q:a,exclude:c});
return d}}}}),b.textboxlist=b.textField().controller("TextboxList")},getIds:function(){var c=b.textField().textboxlist("controller").getAddedItems();return a.map(c,function(a){return a.id})},updateIds:function(){var a=b.getIds();b.customKey().val(a.join(","))},"{parent} privacyChange":function(a,c,d){var e="custom"==d.value;b.element.toggleClass("custom-privacy",e),e?d.preventSave=!0:b.textField().textboxlist("controller").clearItems()},"{parent} privacySave":function(){},"{parent} deactivateAllPrivacy":function(){b.textboxlist.autocomplete.hide()
},"{cancelButton} click":function(){b.element.removeClass("custom-privacy"),b.textboxlist.autocomplete.hide()},"{saveButton} click":function(){var a=b.parent,c=b.customItem(),d=a.getData(c);d.custom=b.customKey().val(),b.parent.save(d),b.parent.deactivate()},"{textField} addItem":function(){b.updateIds()},"{textField} removeItem":function(){b.updateIds()}}}),a(document).on("click.es.privacy","[data-es-privacy-container]",function(){var b=a(this),c="EasySocial.Controller.Privacy";b.hasController(c)||b.addController(c).toggle()
}),b.resolve()})}),EasySocial.module("site/locations/popbox",function(){EasySocial.module("locations/popbox",function(a){this.resolve(function(b){var c=b.button,d=c.data("lat"),e=c.data("lng"),f="//maps.google.com/?q="+d+","+e,g=a('meta[property="foundry:location:language"]').attr("content")||"en",h="//maps.googleapis.com/maps/api/staticmap?size=400x200&sensor=true&zoom=15&center="+d+","+e+"&markers="+d+","+e+"&language="+g;return{id:"fd",component:"es",type:"location",content:'<a href="'+f+'" target="_blank"><img src="'+h+'" width="400" height="200" /></a>'}
})}),this.resolve()}),EasySocial.module("site/sidebar/sidebar",function(a){var b=this;a(document).on("click.es.sidebar","[data-sidebar-toggle]",function(){var b=a(this),c="[data-sidebar]",d=b.siblings(c);d.length<1&&(d=b.closest(c)),d.length<1&&(d=a(c)),d.toggleClass("sidebar-open").trigger("sidebarToggle")}),b.resolve()}),EasySocial.module("site/friends/api",function(a){var b=this;EasySocial.require().library("dialog","popbox").done(function(){a(document).on("click.es.friends.cancel","[data-es-friends-cancel]",function(){var b=a(this),c=b.data("es-friends-id");
EasySocial.dialog({content:EasySocial.ajax("site/views/friends/confirmCancel"),bindings:{"{confirmButton} click":function(){EasySocial.ajax("site/controllers/friends/cancelRequest",{id:c}).done(function(){EasySocial.dialog().close()})}}})}),a(document).on("click.es.friends.add","[data-es-friends-add]",function(){var b=a(this),c=b.data("es-friends-id"),d=a.Deferred(),e={content:d,id:"fd",component:"es",type:"api-friends",toggle:"click"};b.popbox("destroy"),b.popbox(e),b.popbox("show"),EasySocial.ajax("site/controllers/friends/request",{viewCallback:"popboxRequest",id:c}).done(function(a){d.resolve(a)
})}),b.resolve()})}),EasySocial.module("site/popbox/popbox",function(){var b=this;EasySocial.module("notifications/popbox",function(a){this.resolve(function(b){var c=b.button.data("autoread");return{content:EasySocial.ajax("site/controllers/notifications/getSystemItems",{layout:"popbox.notifications"}).done(function(){c&&(a("[data-notificationSystem-counter]").parents("li").removeClass("has-notice"),a("[data-notificationSystem-counter]").html(0))}),id:"fd",component:"es",type:"notifications",cache:!1}})}),EasySocial.module("conversations/popbox",function(){this.resolve(function(){return{content:EasySocial.ajax("site/controllers/notifications/getConversationItems",{usemax:"1",layout:"popbox.conversations"}),id:"fd",component:"es",type:"notifications",cache:!1}
})}),EasySocial.module("friends/popbox",function(){this.resolve(function(){return{content:EasySocial.ajax("site/controllers/notifications/friendsRequests",{layout:"popbox.friends"}),id:"fd",component:"es",type:"notifications",cache:!1}})}),b.resolve()}),EasySocial.module("site/conversations/api",function(a){var b=this;EasySocial.require().library("dialog").done(function(){a(document).on("click.es.conversations.compose","[data-es-conversations-compose]",function(){var b=a(this),c=b.data("es-conversations-id"),d=b.data("es-conversations-listid");
EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/composer",{id:c,listId:d}),bindings:{"{sendButton} click":function(){var b=a("input[name=recipient\\[\\]]"),e=a("[data-composer-message]").val(),f=new Array,g=this.parent;a(b).each(function(){f.push(a(this).val())}),EasySocial.ajax("site/controllers/conversations/store",{uid:f,message:e}).done(function(a){c&&EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/sent",{id:c}),bindings:{"{viewButton} click":function(){document.location=a
}}}),d&&EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/sentList",{id:d}),bindings:{"{viewButton} click":function(){document.location=a}}})}).fail(function(a){g.setMessage(a)})}}})}),b.resolve()})}),EasySocial.module("site/groups/api",function(a){var b=this;EasySocial.require().library("dialog").done(function(){a(document).on("click.es.groups.join","[data-es-groups-join]",function(){var b=a(this),c=b.data("id");EasySocial.dialog({content:EasySocial.ajax("site/controllers/groups/joinGroup",{api:1,id:c}),bindings:{}})
}),b.resolve()})}),EasySocial.module("site/followers/api",function(a){var b=this;EasySocial.require().library("dialog","popbox").done(function(){a(document).on("click.es.followers.follow","[data-es-followers-follow]",function(){var b=a(this),c=b.data("es-followers-id"),d=a.Deferred(),e=void 0==b.data("es-show-popbox")||"true"==b.data("es-show-popbox")?!0:!1;e&&(b.popbox({content:d,id:"fd",component:"es",type:"followers",toggle:"click"}),b.popbox("show")),EasySocial.ajax("site/controllers/profile/follow",{id:c,type:"user"}).done(function(f){a(b).trigger("following",f),e&&EasySocial.ajax("site/views/profile/popboxFollow",{id:c}).done(function(a){d.resolve(a)
})})}),a(document).on("click.es.followers.unfollow","[data-es-followers-unfollow]",function(){var b=a(this),c=b.data("es-followers-id"),d=a.Deferred();b.popbox({content:d,id:"fd",component:"es",type:"followers",toggle:"click"}),b.popbox("show"),EasySocial.ajax("site/controllers/profile/unfollow",{id:c,type:"user"}).done(function(){EasySocial.ajax("site/views/profile/popboxUnfollow",{id:c}).done(function(a){d.resolve(a)})})}),b.resolve()})}),EasySocial.module("site/stream/video",function(a){a(document).on("click","[data-es-links-embed-item]",function(){var b=a(this),c=a("<div>").html(b.data("es-stream-embed-player")),d='<div class="video-container">'+c.html()+"</div>";
b.replaceWith(d)}),a(document).on("click","[data-es-video-embed]",function(){var b=a(this),c=b.siblings("[data-es-video-embed-player]");b.replaceWith(c),c.removeClass("hide")}),this.resolve()}),EasySocial.module("oauth/facebook",function(a){var b=this;a(document).on("click","[data-oauth-facebook-login]",function(){var b=a(this),c=b.parents("[data-oauth-facebook]"),d="EasySocial.Controller.OAuth.Facebook";c.length<1||c.hasController(d)||c.addController(d,{url:b.data("oauth-facebook-url"),appId:b.data("oauth-facebook-appid")}).openDialog()
}),EasySocial.Controller("OAuth.Facebook",{defaultOptions:{appId:null,url:"","{login}":"[data-oauth-facebook-login]","{revoke}":"[data-oauth-facebook-revoke]","{pushInput}":"[data-oauth-facebook-push]"}},function(b){return{init:function(){},openDialog:function(){var a=b.options.url,c=screen.width/2-150,d=screen.height/2-150;window.open(a,"","scrollbars=no,resizable=no,width=300,height=300,left="+c+",top="+d)},"{pushInput} change":function(c){var d=a(c).val();1==d&&b.options.requestPush&&b.openDialog(b.options.addPublishURL),0==d&&b.openDialog(b.options.revokePublishURL)
},"{login} click":function(){b.openDialog()},"{revoke} click":function(){var a=b.element.data("callback");EasySocial.dialog({content:EasySocial.ajax("site/views/oauth/confirmRevoke",{client:"facebook",callbackUrl:a})})}}}),b.resolve()}),EasySocial.module("groups/suggest",function(){var b=this;EasySocial.require().view("site/groups/suggest.item").library("textboxlist").done(function(a){EasySocial.Controller("Groups.Suggest",{defaultOptions:{max:null,exclusive:!0,exclusion:[],minLength:1,highlight:!0,name:"uid[]",type:"",view:{suggestItem:"site/groups/suggest.item"}}},function(b){return{init:function(){var a=b.options;
b.element.textboxlist({component:"es",name:a.name,max:a.max,plugin:{autocomplete:{exclusive:a.exclusive,minLength:a.minLength,highlight:a.highlight,showLoadingHint:!0,showEmptyHint:!0,query:function(b){var c=EasySocial.ajax("site/controllers/groups/suggest",{search:b,exclusion:a.exclusion});return c}}}}).textboxlist("enable")},"{self} filterItem":function(a,c,d){var e=b.view.suggestItem(!0,{item:d,name:b.options.name});return d.menuHtml=e,d.html=e,d},"{self} filterMenu":function(c,d,e,f,g,h){if(!b.options.friendList){var i=h.getAddedItems(),j=a.pluck(i,"id"),j=j.concat(b.options.exclusion);
f.each(function(){var b=a(this),c=b.data("item");b.toggleClass("hidden",a.inArray(c.id.toString(),j)>-1)})}}}}),b.resolve()})});var b=this;EasySocial.module("libraries/lightbox",function(a){var c=this,d=a;!function(a,c){b.lightbox=c(d)}(this,function(a){function b(b){this.album=[],this.currentImageIndex=void 0,this.init(),this.options=a.extend({},this.constructor.defaults),this.option(b)}return b.defaults={albumLabel:"Image %1 of %2",alwaysShowNavOnTouchDevices:!1,fadeDuration:500,fitImagesInViewport:!0,positionFromTop:50,resizeDuration:700,showImageNumberLabel:!0,wrapAround:!1},b.prototype.option=function(b){a.extend(this.options,b)
},b.prototype.imageCountLabel=function(a,b){return this.options.albumLabel.replace(/%1/g,a).replace(/%2/g,b)},b.prototype.init=function(){this.enable(),this.build()},b.prototype.enable=function(){var b=this;a("body").on("click","a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]",function(c){return b.start(a(c.currentTarget)),!1})},b.prototype.build=function(){var b=this;a('<div id="lightboxOverlay" class="lightboxOverlay"></div><div id="lightbox" class="lightbox"><div class="lb-outerContainer"><div class="lb-container"><img class="lb-image" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" /><div class="lb-nav"><a class="lb-prev" href="" ></a><a class="lb-next" href="" ></a></div><div class="lb-loader"><a class="lb-cancel"></a></div></div></div><div class="lb-dataContainer"><div class="lb-data"><div class="lb-details"><span class="lb-caption"></span><span class="lb-number"></span></div><div class="lb-closeContainer"><a class="lb-close"></a></div></div></div></div>').appendTo(a("body")),this.$lightbox=a("#lightbox"),this.$overlay=a("#lightboxOverlay"),this.$outerContainer=this.$lightbox.find(".lb-outerContainer"),this.$container=this.$lightbox.find(".lb-container"),this.containerTopPadding=parseInt(this.$container.css("padding-top"),10),this.containerRightPadding=parseInt(this.$container.css("padding-right"),10),this.containerBottomPadding=parseInt(this.$container.css("padding-bottom"),10),this.containerLeftPadding=parseInt(this.$container.css("padding-left"),10),this.$overlay.hide().on("click",function(){return b.end(),!1
}),this.$lightbox.hide().on("click",function(c){return"lightbox"===a(c.target).attr("id")&&b.end(),!1}),this.$outerContainer.on("click",function(c){return"lightbox"===a(c.target).attr("id")&&b.end(),!1}),this.$lightbox.find(".lb-prev").on("click",function(){return 0===b.currentImageIndex?b.changeImage(b.album.length-1):b.changeImage(b.currentImageIndex-1),!1}),this.$lightbox.find(".lb-next").on("click",function(){return b.currentImageIndex===b.album.length-1?b.changeImage(0):b.changeImage(b.currentImageIndex+1),!1
}),this.$lightbox.find(".lb-loader, .lb-close").on("click",function(){return b.end(),!1})},b.prototype.start=function(b){function f(a){c.album.push({link:a.attr("href"),title:a.attr("data-title")||a.attr("title")})}var c=this,d=a(window);d.on("resize",a.proxy(this.sizeOverlay,this)),a("select, object, embed").css({visibility:"hidden"}),this.sizeOverlay(),this.album=[];var h,e=0,g=b.attr("data-lightbox");if(g){h=a(b.prop("tagName")+'[data-lightbox="'+g+'"]');for(var i=0;i<h.length;i=++i)f(a(h[i])),h[i]===b[0]&&(e=i)
}else if("lightbox"===b.attr("rel"))f(b);else{h=a(b.prop("tagName")+'[rel="'+b.attr("rel")+'"]');for(var j=0;j<h.length;j=++j)f(a(h[j])),h[j]===b[0]&&(e=j)}var k=d.scrollTop()+this.options.positionFromTop,l=d.scrollLeft();this.$lightbox.css({top:k+"px",left:l+"px"}).fadeIn(this.options.fadeDuration),this.changeImage(e)},b.prototype.changeImage=function(b){var c=this;this.disableKeyboardNav();var d=this.$lightbox.find(".lb-image");this.$overlay.fadeIn(this.options.fadeDuration),a(".lb-loader").fadeIn("slow"),this.$lightbox.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide(),this.$outerContainer.addClass("animating");
var e=new Image;e.onload=function(){var f,g,h,i,j,k,l;d.attr("src",c.album[b].link),f=a(e),d.width(e.width),d.height(e.height),c.options.fitImagesInViewport&&(l=a(window).width(),k=a(window).height(),j=l-c.containerLeftPadding-c.containerRightPadding-20,i=k-c.containerTopPadding-c.containerBottomPadding-120,c.options.maxWidth&&c.options.maxWidth<j&&(j=c.options.maxWidth),c.options.maxHeight&&c.options.maxHeight<j&&(i=c.options.maxHeight),(e.width>j||e.height>i)&&(e.width/j>e.height/i?(h=j,g=parseInt(e.height/(e.width/h),10),d.width(h),d.height(g)):(g=i,h=parseInt(e.width/(e.height/g),10),d.width(h),d.height(g)))),c.sizeContainer(d.width(),d.height())
},e.src=this.album[b].link,this.currentImageIndex=b},b.prototype.sizeOverlay=function(){this.$overlay.width(a(window).width()).height(a(document).height())},b.prototype.sizeContainer=function(a,b){function h(){c.$lightbox.find(".lb-dataContainer").width(f),c.$lightbox.find(".lb-prevLink").height(g),c.$lightbox.find(".lb-nextLink").height(g),c.showImage()}var c=this,d=this.$outerContainer.outerWidth(),e=this.$outerContainer.outerHeight(),f=a+this.containerLeftPadding+this.containerRightPadding,g=b+this.containerTopPadding+this.containerBottomPadding;
d!==f||e!==g?this.$outerContainer.animate({width:f,height:g},this.options.resizeDuration,"swing",function(){h()}):h()},b.prototype.showImage=function(){this.$lightbox.find(".lb-loader").stop(!0).hide(),this.$lightbox.find(".lb-image").fadeIn("slow"),this.updateNav(),this.updateDetails(),this.preloadNeighboringImages(),this.enableKeyboardNav()},b.prototype.updateNav=function(){var a=!1;try{document.createEvent("TouchEvent"),a=this.options.alwaysShowNavOnTouchDevices?!0:!1}catch(b){}this.$lightbox.find(".lb-nav").show(),this.album.length>1&&(this.options.wrapAround?(a&&this.$lightbox.find(".lb-prev, .lb-next").css("opacity","1"),this.$lightbox.find(".lb-prev, .lb-next").show()):(this.currentImageIndex>0&&(this.$lightbox.find(".lb-prev").show(),a&&this.$lightbox.find(".lb-prev").css("opacity","1")),this.currentImageIndex<this.album.length-1&&(this.$lightbox.find(".lb-next").show(),a&&this.$lightbox.find(".lb-next").css("opacity","1"))))
},b.prototype.updateDetails=function(){var b=this;if("undefined"!=typeof this.album[this.currentImageIndex].title&&""!==this.album[this.currentImageIndex].title&&this.$lightbox.find(".lb-caption").html(this.album[this.currentImageIndex].title).fadeIn("fast").find("a").on("click",function(){void 0!==a(this).attr("target")?window.open(a(this).attr("href"),a(this).attr("target")):location.href=a(this).attr("href")}),this.album.length>1&&this.options.showImageNumberLabel){var c=this.imageCountLabel(this.currentImageIndex+1,this.album.length);
this.$lightbox.find(".lb-number").text(c).fadeIn("fast")}else this.$lightbox.find(".lb-number").hide();this.$outerContainer.removeClass("animating"),this.$lightbox.find(".lb-dataContainer").fadeIn(this.options.resizeDuration,function(){return b.sizeOverlay()})},b.prototype.preloadNeighboringImages=function(){if(this.album.length>this.currentImageIndex+1){var a=new Image;a.src=this.album[this.currentImageIndex+1].link}if(this.currentImageIndex>0){var b=new Image;b.src=this.album[this.currentImageIndex-1].link
}},b.prototype.enableKeyboardNav=function(){a(document).on("keyup.keyboard",a.proxy(this.keyboardAction,this))},b.prototype.disableKeyboardNav=function(){a(document).off(".keyboard")},b.prototype.keyboardAction=function(a){var b=27,c=37,d=39,e=a.keyCode,f=String.fromCharCode(e).toLowerCase();e===b||f.match(/x|o|c/)?this.end():"p"===f||e===c?0!==this.currentImageIndex?this.changeImage(this.currentImageIndex-1):this.options.wrapAround&&this.album.length>1&&this.changeImage(this.album.length-1):("n"===f||e===d)&&(this.currentImageIndex!==this.album.length-1?this.changeImage(this.currentImageIndex+1):this.options.wrapAround&&this.album.length>1&&this.changeImage(0))
},b.prototype.end=function(){this.disableKeyboardNav(),a(window).off("resize",this.sizeOverlay),this.$lightbox.fadeOut(this.options.fadeDuration),this.$overlay.fadeOut(this.options.fadeDuration),a("select, object, embed").css({visibility:"visible"})},new b}),c.resolve()}),EasySocial.module("locations",function(a){var b=this;EasySocial.require().library("scrollTo","image","gmaps").view("site/location/story.suggestion").language("COM_EASYSOCIAL_AT_LOCATION").done(function(){var c={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,ENTER:13,ESCAPE:27,LEFT:37,RIGHT:39,SPACE:32,TAB:9,UP:38};
EasySocial.Controller("Locations",{defaultOptions:{view:{suggestion:"site/location/story.suggestion"},map:{lat:0,lng:0},latitude:null,longitude:null,"{textField}":"[data-location-textField]","{detectLocationButton}":"[data-detect-location-button]","{autocomplete}":"[data-location-autocomplete]","{suggestions}":"[data-location-suggestions]","{suggestion}":"[data-story-location-suggestion]","{mapImage}":"[data-location-map-image]","{latitude}":"[data-location-lat]","{longitude}":"[data-location-lng]","{removeButton}":"[data-location-remove-button]"}},function(b,d,e){return{init:function(){navigator.geolocation&&b.detectLocationButton().show(),EasySocial.require().library("gmaps").done(function(){b.textField().removeAttr("disabled")
}),setTimeout(function(){d.latitude&&d.longitude&&(b.navigate(d.latitude,d.longitude),b.detectLocationButton().hide())},1)},navigate:function(c,d){var f=b.mapImage(),g=f.width(),h=f.height(),i=a.GMaps.staticMapURL({size:[g,h],lat:c,lng:d,sensor:!0,scale:2,markers:[{lat:c,lng:d}]});a.Image.get(i).done(function(){f.css({backgroundImage:a.cssUrl(i),backgroundSize:"cover",backgroundPosition:"center center"}),e.addClass("has-location")})},locations:{},lastQueryAddress:null,"{textField} keypress":function(d,e){switch(e.keyCode){case c.UP:var f=a(b.suggestion(".active").prev(b.suggestion.selector)[0]||b.suggestion(":last")[0]);
b.suggestion().removeClass("active"),f.addClass("active").trigger("activate"),b.suggestions().scrollTo(f,{offset:-1*f.height()}),e.preventDefault();break;case c.DOWN:var g=a(b.suggestion(".active").next(b.suggestion.selector)[0]||b.suggestion(":first")[0]);b.suggestion().removeClass("active"),g.addClass("active").trigger("activate"),b.suggestions().scrollTo(g,{offset:-1*g.height()}),e.preventDefault();break;case c.ENTER:var h=b.suggestion(".active"),i=h.data("location");b.set(i);break;case c.ESCAPE:}},"{textField} keyup":function(d,e){switch(e.keyCode){case c.UP:case c.DOWN:case c.ENTER:case c.ESCAPE:break;
default:var f=a.trim(d.val());if(f==b.lastQueryAddress)return;var g=b.locations[f];g?(b.suggest(g),b.lastQueryAddress=f):b.lookup(f)}},lookup:a._.debounce(function(a){EasySocial.ajax("site/controllers/location/suggestLocations",{address:a}).done(function(c){b.locations[a]=c,b.suggest(c),b.textField().focus(),b.element.addClass("has-suggested")})},250),suggest:function(c){var d=b.suggestions();d.empty(),a.each(c,function(a,c){b.view.suggestion({location:c}).data("location",c).appendTo(d)}),b.autocomplete().addClass("active")
},"{suggestion} activate":function(a){var d=a.data("location");b.navigate(d.latitude,d.longitude)},"{suggestion} mouseover":function(a){b.suggestion().removeClass("active"),a.addClass("active").trigger("activate")},"{suggestion} click":function(a){var d=a.data("location");b.set(d),b.autocomplete().removeClass("active")},set:function(a){b.currentLocation=a;var c=a.name;b.textField().val(c),b.latitude().val(a.latitude),b.longitude().val(a.longitude),b.detectLocationButton().hide(),b.trigger("locationChange",[a])
},unset:function(){b.currentLocation=null,b.textField().val(""),b.mapImage().attr("src",""),b.element.removeClass("has-location"),b.detectLocationButton().show()},"{detectLocationButton} click":function(){b.map;b.element.addClass("is-busy"),a.GMaps.geolocate({success:function(a){EasySocial.ajax("site/controllers/location/getLocations",{latitude:a.coords.latitude,longitude:a.coords.longitude}).done(function(a){b.element.removeClass("is-busy"),b.element.addClass("has-suggested"),b.suggest(a),b.textField().focus()
})},error:function(){},always:function(){}})},"{removeButton} click":function(){b.unset()},"{story} save":function(a,c,d){var e=b.currentLocation;e&&d.addData(b,{short_address:e.name,formatted_address:e.address,lat:e.latitude,lng:e.longitude})},"{story} clear":function(){b.unset()}}}),b.resolve()})}),EasySocial.module("pagination",function(){var a=this;EasySocial.require().done(function(b){EasySocial.Controller("Pagination",{defaultOptions:{"{pages}":".pageItem","{limitstart}":"#limitstart","{previousItem}":".previousItem","{nextItem}":".nextItem"}},function(a){return{init:function(){a.pages().implement(EasySocial.Controller.Pagination.Page,{pagination:a})
},"{previousItem} click":function(c){var d=b(c).data("limitstart");b(c).hasClass("disabled")||a.submitForm(d)},"{nextItem} click":function(c){var d=b(c).data("limitstart");b(c).hasClass("disabled")||a.submitForm(d)},submitForm:function(c){a.limitstart().val(c),b.Joomla("submitform",[])}}}),EasySocial.Controller("Pagination.Page",{defaultOptions:{pagination:null,limitstart:0}},function(a){return{init:function(){a.options.limitstart=a.element.data("limitstart")},"{self} click":function(){return a.element.hasClass("active")?!1:(a.options.pagination.submitForm(a.options.limitstart),void 0)
}}}),a.resolve()})}),EasySocial.module("photos/avatar",function(a){var b=this;EasySocial.require().library("imgareaselect").stylesheet("imgareaselect/default").done(function(){EasySocial.Controller("Photos.Avatar",{defaultOptions:{view:{selection:"site/photos/avatar.selection"},uid:null,type:null,redirect:!0,redirectUrl:"","{image}":"[data-photo-image]","{viewport}":"[data-photo-avatar-viewport]","{photoId}":"[data-photo-id]","{userId}":"[data-user-id]","{createButton}":"[data-create-button]","{selection}":"[data-selection-box]","{loadingIndicator}":"[data-photos-avatar-loading]"}},function(b){return{init:function(){b.setLayout()
},data:function(){var a=b.viewport(),c=a.width(),d=a.height(),e=a.imgAreaSelect({instance:!0}).getSelection(),f={id:b.photoId().val(),uid:b.options.uid,type:b.options.type,top:e.y1/d,left:e.x1/c,width:e.width/c,height:e.height/d};return f},imageLoaders:{},setLayout:function(){var c=b.image(),d=c.css("backgroundImage").replace(/^url\(['"]?/,"").replace(/['"]?\)$/,""),e=b.imageLoaders,f=e[d]||(b.imageLoaders[d]=a.Image.get(d));f.done(function(d,e){var f=a.Image.resizeWithin(e.width,e.height,c.width(),c.height()),g=Math.min(f.width,f.height),h=Math.floor((f.width-g)/2),i=Math.floor((f.height-g)/2),j=h+g,k=i+g;
b.createButton().enabled(!0),b.viewport().css(f).imgAreaSelect({handles:!0,aspectRatio:"1:1",parent:b.image(),x1:h,y1:i,x2:j,y2:k,onSelectEnd:function(a,c){var d=!("0"==c.width&&"0"==c.height);b.createButton().enabled(d)}})})},"{createButton} click":function(){var c=b.data(),d=EasySocial.ajax("site/controllers/photos/createAvatar",c).done(function(){b.options.redirect&&(window.location=b.options.redirectUrl)}).fail(function(a,c){b.setMessage(a,c)});b.trigger("avatarCreate",[d,c,b])}}}),b.resolve()})}),EasySocial.module("photos/browser",function(a){var b=this;
EasySocial.require().library("history").done(function(){EasySocial.Controller("Photos.Browser",{defaultOptions:{tilesPerRow:4,"{sidebar}":"[data-photo-browser-sidebar]","{content}":"[data-photo-browser-content]","{backButton}":"[data-photo-back-button]","{backButtonLink}":"[data-photo-back-button-link]","{listItemGroup}":"[data-photo-list-item-group]","{listItem}":"[data-photo-list-item]","{listItemLink}":"[data-photo-list-item] > a","{listItemTitle}":"[data-photo-list-item-title]","{listItemCover}":"[data-photo-list-item-cover]","{listItemImage}":"[data-photo-list-item-image]","{featuredListItem}":"[data-photo-list-item].featured","{featuredListItemImage}":"[data-photo-list-item].featured [data-photo-list-item-image]","{photoItem}":"[data-photo-item]"}},function(b){return{init:function(){EasySocial.require().library("masonry").done(function(){b.setLayout()
})},setLayout:function(){var c=b.listItemGroup(),d=a.data(c[0],"masonry");c.width(4*Math.floor(c.width()/4)),d?c.masonry("reloadItems").masonry("layout"):c.masonry({columnWidth:".es-thumb.grid-sizer",itemSelector:b.listItem.selector}),b.setLayout.seed=c.width()},open:function(c){var d=a.makeArray(arguments);b.trigger("contentLoad",d);var e="view"+a.String.capitalize(c),f=b[e].apply(b,d.slice(1));return f.done(b.displayContent(function(){return b.trigger("contentDisplay",d),arguments})).fail(function(){b.trigger("contentFail",d)
}).always(function(){b.trigger("contentComplete",d)}),f},displayContent:a.Enqueue(function(c){var d=[],e=a(a.buildFragment([c],document,d));b.content().html(e),a(d).remove()}),viewPhoto:function(a){var c="active loading",d=b.listItem().removeClass(c).filterBy("photoId",a).addClass(c),e=EasySocial.ajax("site/views/photos/item",{id:a,browser:!1}).fail(function(){}).always(function(){d.removeClass("loading")});return e},"{listItem} click":function(a){var c=a.data("photoId");b.open("Photo",c),a.find("> a").route()
},"{listItemLink} click":function(a,b){b.preventDefault(),a.blur()},"{backButtonLink} click":function(a,c){var d=b.browser;if(d){var e=b.element.data("albumId");d.open("album",e),c.preventDefault(),a.route(),d.setLayout("album"),b.element.remove()}},getListItem:function(c,d){var e=c?b.listItem().filterBy("photoId",c):b.listItem(".new");return d?e.find(b["listItem"+a.String.capitalize(d)].selector):e},getNextListItem:function(a){var c=b.getListItem(a).next(b.listItem.selector);return c.length<1&&(c=b.listItem(":first")),c
},getPrevListItem:function(a){var c=b.getListItem(a).prev(b.listItem.selector);return c.length<1&&(c=b.listItem(":last")),c},removeListItem:function(a,c){var d=b.getListItem(a),e=b.getPrevListItem(a);return d.remove(),b.setLayout(),b.listItem().length<1?(b.element.addClass("loading"),window.location=b.backButtonLink().attr("href")):(c&&e.click(),void 0)},"{photoItem} init.photos.item":function(a,c,d){b.addSubscriber(d)},"{photoItem} photoSave":function(a,c,d){d.done(function(a){b.getListItem(a.id,"title").html(a.title)
})},"{photoItem} photoNext":function(a,c,d){var e=b.getNextListItem(d.id);e.click()},"{photoItem} photoPrev":function(a,c,d){var e=b.getPrevListItem(d.id);e.click()},"{photoItem} photoMove":function(a,c,d,e){d.done(function(){b.removeListItem(e.id,!0)})},"{photoItem} photoDelete":function(a,c,d,e){d.done(function(){b.removeListItem(e.id,!0)})},"{photoItem} photoFeature":function(a,c,d,e,f){var g=b.getListItem(e.id);g.toggleClass("featured",f),b.setLayout(),d.fail(function(){g.toggleClass("featured",!f),b.setLayout()
})},"{sidebar} sidebarToggle":function(){b.setLayout()}}}),b.resolve()})}),EasySocial.module("photos/editor",function(a){var b=this;EasySocial.require().done(function(){var c=EasySocial.Controller("Photos.Editor",{defaultOptions:{view:{uploadItem:"upload.item",photoForm:"site/albums/photo.form"},"{titleField}":"[data-photo-title-field]","{captionField}":"[data-photo-caption-field]","{location}":"[data-photo-location]","{locationCaption}":"[data-photo-location-caption]","{addLocationButton}":"[data-photo-addLocation-button]","{date}":"[data-photo-date]","{dateCaption}":"[data-photo-date-caption]","{addDateCaption}":"[data-photo-adddate-button]","{locationWidget}":".es-photo-location-form .es-locations","{latitude}":"[data-location-lat]","{longitude}":"[data-location-lng]","{dateDay}":"[name=date-day]","{dateMonth}":"[name=date-month]","{dateYear}":"[name=date-year]","{actionsMenu}":"[data-item-actions-menu]","{featureButton}":"[data-photo-feature-button]","{coverButton}":"[data-photo-cover-button]","{editButton}":"[data-photo-edit-button]","{editButtonLink}":"[data-photo-edit-button] > a","{cancelButton}":"[data-photo-cancel-button]","{doneButton}":"[data-photo-done-button]","{doneButtonLink}":"[data-photo-done-button] > a","{moveButton}":"[data-photo-move-button]","{deleteButton}":"[data-photo-delete-button]","{rotateLeftButton}":"[data-photo-rotateLeft-button]","{rotateRightButton}":"[data-photo-rotateRight-button]","{profileAvatarButton}":"[data-photo-profileAvatar-button]","{profileCoverButton}":"[data-photo-profileCover-button]"}},function(b,c,d){return{init:function(){},data:function(){return{id:b.photo.id,title:b.titleField().val(),caption:b.captionField().val(),date:b.formatDate(),address:b.locationCaption().html(),latitude:b.latitude().val(),longitude:b.longitude().val()}
},save:function(){var a=b.data();b.clearMessage();var c=EasySocial.ajax("site/controllers/photos/update",a).done(function(){b.photo.setLayout("item")}).fail(function(){b.setMessage(message,"error")}).progress(function(a,c){"success"==c&&b.setMessage(a)});return b.trigger("photoSave",[c,b]),c},enable:function(){b.photo.setLayout("form");var a=b.photo.album;a&&d.addClass("active"),b.trigger("enabled",[b])},disable:function(){b.photo.setLayout("item");var a=b.photo.album;a&&d.removeClass("active"),b.trigger("disabled",[b])
},imageLoader:{},setImage:function(c){var d=b.photo.image(),e=b.photo.imageCss(),f=d.data(c+"Src"),g=b.imageLoader[f];return g||(g=a.Image.get(f),b.imageLoader[f]=g),g.done(function(){d.attr("src",f),e.css({backgroundImage:a.cssUrl(f)})}),g},"{featureButton} click":function(a,c){c.stopPropagation();var e=b.photo.element.parents("[data-photo-popup]").length>0||b.photo.element.parents("[data-photo-browser-content]").length>0,f=d.hasClass("featured");d.toggleClass("featured",!f),!e&&b.setImage(f?"thumbnail":"featured");
var g=EasySocial.ajax("site/controllers/photos/feature",{id:b.photo.id}).done(function(b,c){a.toggleClass("btn-es-primary",c)}).fail(function(){d.removeClass("featured"),!e&&b.setImage(f?"featured":"thumbnail")});b.trigger("photoFeature",[g,b.photo,!f])},"{coverButton} click":function(){var a=b.photo.album;a&&a.editor&&a.editor.setCover(b.photo.id)},"{dateDay} keyup":function(){b.updateDate()},"{dateMonth} change":function(){b.updateDate()},"{dateYear} keyup":function(){b.updateDate()},updateDate:function(){setTimeout(function(){b.date().addClass("has-data");
var c=b.dateDay().val()+" "+a.trim(b.dateMonth().find(":selected").text()+" "+b.dateYear().val());b.dateCaption().html(c)},1)},formatDate:function(){var a=b.dateDay().val()||b.dateDay().data("date-default"),c=b.dateMonth().val()||b.dateMonth().data("date-default"),d=b.dateYear().val()||b.dateYear().data("date-default");return d+"-"+c+"-"+a},"{locationWidget} locationChange":function(a,c,d){var e=d.address||d.fulladdress||d.formatted_address;b.locationCaption().html(e),b.location().addClass("has-data")},rotate:function(c){var e=b.photo;
b.rotateLeftButton().disabled(!0),b.rotateRightButton().disabled(!0),e.content().addClass("loading");var f=EasySocial.ajax("site/controllers/photos/rotate",{id:e.id,angle:c}).done(function(c){var f;f=b.photo.album?c.sizes.thumbnail.url:c.sizes.large.url,f+="?"+a.uid(),e.image().attr("src",f),e.imageCss().css({backgroundImage:a.cssUrl(f)}),d.addTransitionClass("rotating-ready",150).removeClass("rotating-right rotating-left")}).fail(function(a,c){b.setMessage(a,c)}).always(function(){e.content().removeClass("loading"),b.rotateLeftButton().disabled(!1),b.rotateRightButton().disabled(!1)
});b.trigger("photoRotate",[f,c,e])},"{rotateRightButton} click":function(){d.addClass("rotating-right"),b.rotate(90)},"{rotateLeftButton} click":function(){d.addClass("rotating-left"),b.rotate(-90)},"{moveButton} click":function(){var a=b.photo,c=EasySocial.dialog({content:EasySocial.ajax("site/views/photos/moveToAnotherAlbum",{id:a.id}),bindings:{"{moveButton} click":function(){var d=this.albumSelection().val(),e=EasySocial.ajax("site/controllers/photos/move",{id:a.id,albumId:d}).always(function(){c.close()
});b.trigger("photoMove",[e,a,d])}}})},"{deleteButton} click":function(){var a=b.photo;EasySocial.dialog({content:EasySocial.ajax("site/views/photos/confirmDelete",{id:a.id}),bindings:{"{deleteButton} click":function(c){var d=this.parent;c.disabled(!0);var e=EasySocial.ajax("site/controllers/photos/delete",{id:a.id}).always(function(){d.close()});b.trigger("photoDelete",[e,a])}}})},"{editButton} click":function(){b.photo.setLayout("form"),b.editButtonLink().route()},"{editButtonLink} click":function(a,b){b.preventDefault()
},"{cancelButton} click":function(){b.photo.setLayout("item"),b.doneButtonLink().route()},"{doneButton} click":function(){b.save().done(function(){b.photo.setLayout("item"),b.doneButtonLink().route()}).fail(function(){})},"{doneButtonLink} click":function(a,b){b.preventDefault()},"{profileAvatarButton} click":function(){EasySocial.photos.createAvatar(b.photo.id)}}});b.resolve(c)})}),EasySocial.module("photos/item",function(a){var b=this;EasySocial.require().script("photos/tags","photos/editor","photos/tagger","photos/navigation").done(),EasySocial.require().library("image").done(function(){var c=EasySocial.Controller("Photos.Item",{hostname:"photo",defaultOptions:{editable:!1,taggable:!1,navigation:!1,"{header}":"[data-photo-header]","{content}":"[data-photo-content]","{footer}":"[data-photo-footer]","{viewport}":"[data-photo-viewport]","{info}":"[data-photo-info]","{title}":"[data-photo-title]","{titleLink}":"[data-photo-title-link]","{caption}":"[data-photo-caption]","{image}":"[data-photo-image]","{imageCss}":"[data-photo-image-css]","{imageLink}":"[data-photo-image-link]","{menu}":"[data-photo-menu]","{actions}":"[data-item-actions]","{actionsMenu}":"[data-item-actions-menu]","{comments}":"[data-comments]","{share}":"[data-repost-action]","{likes}":"[data-likes-action]","{likeContent}":"[data-likes-content]","{repostContent}":"[data-repost-content]","{counterBar}":"[data-stream-counter]","{privacy}":"[data-es-privacy-container]","{likeCount}":"[data-photo-like-count]","{commentCount}":"[data-photo-comment-count]","{tagCount}":"[data-photo-tag-count]"}},function(b){return{init:function(){b.id=b.element.data("photoId"),EasySocial.module("photos/tags").done(function(a){b.tags=b.addPlugin("tags",a)
}),b.options.editable&&EasySocial.module("photos/editor").done(function(a){b.editor=b.addPlugin("editor",a)}),b.options.taggable&&EasySocial.module("photos/tagger").done(function(a){b.tagger=b.addPlugin("tagger",a)}),b.options.navigation&&EasySocial.module("photos/navigation").done(function(a){b.navigation=b.addPlugin("navigation",a)})},data:function(){var c=b.image();return{id:b.id,title:a.trim(b.title().text()),caption:a.trim(b.caption().text()),sizes:{thumbnail:c.data("thumbnailSrc"),featured:c.data("featuredSrc"),large:c.data("largeSrc")}}
},setLayout:function(a){b.element.data("photoLayout",a).switchClass("layout-"+a),b.trigger("layoutChange",[a,b])},"{self} click":function(c,d){if(c.data("esPhotoDisabled")){var e=a(d.target),f=b.menu();e.parents().andSelf().filter(f).length>0||b.trigger("activate",[b])}},"{self} photoSave":function(a,c,d){d.done(function(a,c){b.info().replaceWith(c)})},"{self} photoDelete":function(a,c,d){d.done(function(){}).fail(function(a,c){b.setMessage(a,c)})},"{imageLink} click":function(a,b){b.preventDefault()},"{titleLink} click":function(){},"{self} shown.bs.dropdown":function(){b.element.addClass("show-all")
},"{self} hidden.bs.dropdown":function(){b.element.removeClass("show-all")},"{share} create":function(){b.counterBar().removeClass("hide")},"{likes} onLiked":function(){b.counterBar().removeClass("hide"),b.count("like",1,!0)},"{likes} onUnliked":function(){var e=b.likeContent().hasClass("hide"),f=b.repostContent().hasClass("hide");e&&f&&b.counterBar().addClass("hide"),b.count("like",-1,!0)},"{self} tagAdd":function(){b.count("tag",1,!0)},"{self} tagRemove":function(){b.count("tag",-1,!0)},"{comments} newCommentSaved":function(){b.count("comment",1,!0)
},"{comments} commentDeleted":function(){b.count("comment",-1,!0)},"{privacy} activate":function(){setTimeout(function(){b.element.addClass("show-all")},0)},"{privacy} deactivate":function(){b.element.removeClass("show-all")},count:function(c,d,e){var f=b[c+"Count"];if(a.isFunction(f)){var g=f();if(!(g.length<0)){var h;h=e?(parseInt(g.text())||0)+(parseInt(d)||0):d,0>h&&(h=0),g.text(h)}}}}});b.resolve(c)})}),EasySocial.module("photos/tags",function(a){var b=this;EasySocial.require().library("scrollTo").done(),EasySocial.require().done(function(){var c=EasySocial.Controller("Photos.Tags",{hostname:"tags",defaultOptions:{"{viewport}":"[data-photo-tag-viewport]","{tagItem}":"[data-photo-tag-item]","{tagButton}":"[data-photo-tag-button]","{tagLink}":"[data-photo-tag-link]","{infoTagListItemGroup}":"[data-photoinfo-tag-list-item-group]","{infoTagListItem}":"[data-photo-tags-user]","{tagListItemGroup}":"[data-photo-tag-list-item-group]","{tagListItem}":"[data-photo-tag-list-item]","{descTagItem}":"[data-photo-tags-user]"}},function(b){return{init:function(){b.setLayout()
},imageLoaders:{},setLayout:function(c){var d=b.photo.viewport(),e=b.photo.image(),f=e.attr("src"),g=b.imageLoaders,h=g[f]||(b.imageLoaders[f]=a.Image.get(f));h.done(function(){var a=e.offset(),f=d.offset();b.viewport().css({top:a.top-f.top,left:a.left-f.left,width:e.width(),height:e.height()}),c&&c()})},"{window} resize":a.debounce(function(){b.setLayout()},1e3),getTagItem:function(a){return b.tagItem().filterBy("photoTagId",a)},getTagListItem:function(a){return b.tagListItem().filterBy("photoTagId",a)},getInfoTagListItem:function(a){return b.infoTagListItem().filterBy("photoTagId",a)
},getTaggedUsers:function(){var c=[];return b.tagListItem("[data-photo-tag-uid]").each(function(){c.push(a(this).data("photoTagUid"))}),a.uniq(c)},activateTag:function(a){b.getTagItem(a).addClass("active"),b.getTagListItem(a).addClass("active")},deactivateTag:function(a){b.getTagItem(a).removeClass("active"),b.getTagListItem(a).removeClass("active")},"{tagLink} click":function(a,b){b.stopPropagation()},"{tagListItem} click":function(a){var c=(a.hasClass("active")?"deactivate":"activate")+"Tag",d=a.data("photoTagId");
b[c](d)},"{tagListItem} mouseover":function(a){b.getTagItem(a.data("photoTagId")).addClass("focus")},"{tagListItem} mouseout":function(a){b.getTagItem(a.data("photoTagId")).removeClass("focus")},"{descTagItem} mouseover":function(a){b.getTagItem(a.data("photoTagId")).addClass("focus")},"{descTagItem} mouseout":function(a){b.getTagItem(a.data("photoTagId")).removeClass("focus")},"{self} tagCreate":function(a,c,d){d.done(function(){}).always(function(){setTimeout(function(){b.tagListItemGroup().toggleClass("empty-tags",b.tagListItem().length<1)
},1)})},"{self} tagRemove":function(a,c,d,e){d.done(function(){b.getTagItem(e).remove(),b.getTagListItem(e).remove(),b.getInfoTagListItem(e).remove();var a=b.infoTagListItemGroup().children().length;if(0==a&&b.infoTagListItemGroup().html(""),1==a){var c=b.infoTagListItemGroup().children().first(),d=c.text();d=d.replace(",",""),c.text(d)}}).always(function(){b.tagListItemGroup().toggleClass("empty-tags",b.tagListItem().length<1)})},"{self} photoRotate":function(c,d,e){e.done(function(c,d){setTimeout(function(){b.setLayout(function(){var c=b.tagItem();
a.each(d,function(a,b){var d=c.filterBy("photoTagId",b.id);d.css({width:100*b.width+"%",height:100*b.height+"%",top:100*b.top+"%",left:100*b.left+"%"})})})},1)})}}});b.resolve(c)})}),EasySocial.module("photos/tagger",function(a){var b=this,c={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,ENTER:13,ESCAPE:27,LEFT:37,RIGHT:39,SPACE:32,TAB:9,UP:38};EasySocial.require().library("scrollTo").done(),EasySocial.require().view("site/photos/tags.item","site/photos/tags.menu.item").done(function(){var d=EasySocial.Controller("Photos.Tagger",{hostname:"tagger",defaultOptions:{view:{tagItem:"site/photos/tags.item"},width:100,height:100,drawTolerance:30,"{viewport}":"[data-photo-tag-viewport]","{tagItem}":"[data-photo-tag-item]","{tagSelection}":"[data-photo-tag-item].new","{tagButton}":"[data-photo-tag-button]","{infoTagListItemGroup}":"[data-photoinfo-tag-list-item-group]","{tagListItemGroup}":"[data-photo-tag-list-item-group]","{tagListItem}":"[data-photo-tag-list-item]","{tagRemoveButton}":"[data-photo-tag-remove-button]"}},function(b){return{init:function(){},newTagItem:function(){var a=b.viewport(),c=b.tagItem(".new");
return c.length<1&&(c=b.view.tagItem().addClass("new").appendTo(a),b.addSubscriber(c.addController("EasySocial.Controller.Photos.Tag"))),c},"{tagButton} click":function(a){b[a.data("photoTagButton")||"toggle"]()},disabled:!0,enable:function(){b.photo.imageLink().on("click.tagger",function(a){a.preventDefault()}),b.disabled=!1,b.element.addClass("tagging"),a.scrollTo&&a.scrollTo(b.photo.content(),250,{offset:{top:-100}}),b.trigger("tagEnter")},disable:function(){b.photo.imageLink().off("click.tagger"),b.tagSelection().remove(),b.tagItem(".focus").removeClass("focus"),b.disabled=!0,b.element.removeClass("tagging"),b.trigger("tagLeave")
},toggle:function(){b[b.disabled?"enable":"disable"]()},area:{},calculateArea:function(a,c){a||(a="clip"),c||(c={x:0,y:0});var d=b.viewport(),e=d.offset();e.width=d.width(),e.height=d.height(),e.right=e.width+e.left,e.bottom=e.height+e.top;var f=b.area;f.top=(f.startY<=f.endY?f.startY:f.endY)+c.y,f.left=(f.startX<=f.endX?f.startX:f.endX)+c.x,f.width=Math.abs(f.endX-f.startX),f.height=Math.abs(f.endY-f.startY),f.right=f.width+f.left,f.bottom=f.height+f.top,"clip"==a&&(f.top<=e.top&&(f.top=e.top),f.bottom>=e.bottom&&(f.bottom=e.bottom),f.left<=e.left&&(f.left=e.left),f.right>=e.right&&(f.right=e.right),f.width=f.right-f.left,f.height=f.bottom-f.top),"flip"==a&&(f.top<=e.top&&(f.top=e.top),f.left<=e.left&&(f.left=e.left),f.right>=e.right&&(f.right=e.right,f.left=f.right-f.width),f.bottom>=e.bottom&&(f.bottom=e.bottom,f.top=f.bottom-f.height)),f.pixel={top:f.top-e.top,left:f.left-e.left,width:f.width,height:f.height},f.decimal={top:f.pixel.top/e.height,left:f.pixel.left/e.width,width:f.width/e.width,height:f.height/e.height},f.percentage={top:100*f.decimal.top+"%",left:100*f.decimal.left+"%",width:100*f.decimal.width+"%",height:100*f.decimal.height+"%"};
var g=b.options.drawTolerance;return b.autodraw=f.width<g&&f.height<g,f},setPivot:function(a,c,d){var e=b.area;e[a+"X"]=c,e[a+"Y"]=d},drawing:!1,autodraw:!1,drawTag:function(){var a=b.calculateArea();options=b.options,b.autodraw&&(a.endX=a.startX+options.width,a.endY=a.startY+options.height,b.calculateArea("flip",{x:options.width/-2,y:options.height/-2})),b.newTagItem().css(a.percentage).trigger("focusInput")},"{viewport} mousedown":function(c,d){b.disabled||d.target===c[0]&&(d.preventDefault(),b.tagItem(".focus").removeClass("focus"),b.drawing=!0,b.setPivot("start",d.pageX,d.pageY),a(document).on("mousemove.tagger",function(a){b.drawing&&(b.setPivot("end",a.pageX,a.pageY),b.drawTag())
}).on("mouseup.tagger",function(c){b.setPivot("end",c.pageX,c.pageY),b.drawTag(),a(document).off("mousemove.tagger mouseup.tagger")}))},createTag:function(c){var c=a.extend({photo_id:b.photo.id},c,b.area.decimal),d=EasySocial.ajax("site/controllers/photos/createTag",c);return b.trigger("tagCreate",[d,c,b]),d},removeTag:function(a){var c=EasySocial.ajax("site/controllers/photos/removeTag",{id:a});return b.trigger("tagRemove",[c,a,b]),c},addTag:function(c,d,e,f){var g=a.buildHTML(d).addClass("focus").appendTo(b.viewport()),h=a.buildHTML(e).appendTo(b.tagListItemGroup()),i=b.infoTagListItemGroup().children().length;
0==i&&b.infoTagListItemGroup().append(" - ");a.buildHTML(f).appendTo(b.infoTagListItemGroup());b.trigger("tagAdd",[c,g,h,b])},"{self} avatarEnter":function(){b.tagItem().hide(),b.disable()},"{self} avatarLeave":function(){b.tagItem().show()},"{tagRemoveButton} click":function(a,c){var d=a.data("photoTagId");b.removeTag(d),c.stopPropagation()},"{tagRemoveButton} mouseover":function(){b.viewport().addClass("active")},"{tagRemoveButton} mouseout":function(){b.viewport().removeClass("active")}}});EasySocial.Controller("Photos.Tag",{defaultOptions:{view:{menuItem:"site/photos/tags.menu.item"},"{form}":"[data-photo-tag-form]","{title}":"[data-photo-tag-title]","{removeButton}":"[data-photo-tag-remove-button]","{textField}":"[data-photo-tag-input]","{menu}":"[data-photo-tag-menu]","{menuItem}":"[data-photo-tag-menu-item]"}},function(b){return{init:function(){b.data=b.options.data
},"{self} focusInput":function(){b.textField().focus()},"{textField} keyup":a._.debounce(function(d,e){var f=a.trim(b.textField().val());switch(e.keyCode){case c.UP:case c.DOWN:case c.ENTER:case c.ESCAPE:break;default:var g=b.tagger.photo.tags.getTaggedUsers();EasySocial.ajax("site/controllers/friends/suggestPhotoTagging",{search:f,exclude:g,includeme:"1"}).done(b.render())}},250),"{textField} keypress":function(d,e){var f=a.trim(b.textField().val()),g=b.menuItem(".active");switch(e.keyCode){case c.UP:b.menuItem().removeClass("active"),g.length<1?b.menuItem(":last").addClass("active"):g.prev(b.menuItem.selector).addClass("active"),e.preventDefault();
break;case c.DOWN:b.menuItem().removeClass("active"),g.length<1?b.menuItem(":first").addClass("active"):g.next(b.menuItem.selector).addClass("active"),e.preventDefault();break;case c.ENTER:g.length>0?g.trigger("click"):b.create({type:"label",label:f}),b.menu().hide();break;case c.ESCAPE:b.menu().hide()}},"{menuItem} mouseover":function(a){b.menuItem().removeClass("active"),a.addClass("active")},"{menuItem} mouseout":function(){b.menuItem().removeClass("active")},render:a.Enqueue(function(c){var d=b.menu();return!c||c.length<1?(d.hide(),void 0):(d.empty(),a.each(c,function(a,c){b.view.menuItem({item:c}).data("item",c).appendTo(d),d.show()
}),void 0)}),create:function(c){var d=b.element;b.data=c,b.title().html(c.label),""!==a.trim(c.label)&&b.tagger.createTag(c).done(function(a,c,d,e){b.tagger.addTag(a,c,d,e),b.element.remove()}).fail(function(a){alert(a.message),d.remove()})},remove:function(){var a=b.element,c=(b.data||{}).id;return c?(b.tagger.removeTag(c).done(function(){a.remove()}),void 0):a.remove()},"{menuItem} click":function(a){var c=a.data("item");b.create({uid:c.id,type:"person",label:c.screenName})},"{removeButton} click":function(){b.remove()
}}}),b.resolve(d)})}),EasySocial.module("photos/navigation",function(a){a.fn.intersectsWith=function(a,b,c,d){var e=this.offset(),f={top:e.top,left:e.left,bottom:e.top+(sourceHeight=this.height()),right:e.left+(sourceWidth=this.width()),width:sourceWidth,height:sourceHeight},g={top:a,left:b,bottom:a+(d||(d=0)),right:b+(c||(c=0)),width:c,height:d},h=f.left<=g.right&&g.left<=f.right&&f.top<=g.bottom&&g.top<=f.bottom;return h?{reference:f,subject:g}:!1};var b=this,c=EasySocial.Controller("Photos.Navigation",{hostname:"navigation",defaultOptions:{"{navButton}":".es-photo-nav-button","{nextButton}":"[data-photo-next-button]","{prevButton}":"[data-photo-prev-button]"}},function(b){return{init:function(){b.setDirection(window.esPhotosNavigationLastDirection)
},disabled:!1,disable:function(){b.disabled=!0,b.navButton().addClass("disabled")},enable:function(){b.disabled=!1,b.navButton().removeClass("disabled")},setDirection:function(a){b.navButton().removeClass("active"),window.esPhotosNavigationLastDirection=b.currentDirection=a,a&&b[a+"Button"]().addClass("active")},"{window} mousemove":function(c,d){if(!(b.disabled||(b.setDirection(null),b.photo.trigger("directionstop"),a(d.target).parents().filter(b.photo.content.selector).length<1))){var e=b.photo.content().intersectsWith(d.pageY,d.pageX);
if(e){var f=e.subject.left<e.reference.right-e.reference.width/2?"prev":"next";b.setDirection(f),b.photo.trigger("directionmove",[e,f])}}},"{self} tagEnter":function(){b.disable()},"{self} tagLeave":function(){b.enable()},"{self} click":function(c,d){if(!(b.disabled||a(d.target).parents().filter(b.photo.content.selector).length<1)){var e=b.currentDirection;e&&b.trigger("photo"+a.String.capitalize(e),[b.photo])}},"{self} photoNext":function(){},"{self} photoPrev":function(){}}});b.resolve(c)}),EasySocial.module("prism",function(){var b=this;
!function(){var a=/\blang(?:uage)?-(?!\*)(\w+)\b/i,b=self.Prism={util:{type:function(a){return Object.prototype.toString.call(a).match(/\[object (\w+)\]/)[1]},clone:function(a){var c=b.util.type(a);switch(c){case"Object":var d={};for(var e in a)a.hasOwnProperty(e)&&(d[e]=b.util.clone(a[e]));return d;case"Array":return a.slice()}return a}},languages:{extend:function(a,c){var d=b.util.clone(b.languages[a]);for(var e in c)d[e]=c[e];return d},insertBefore:function(a,c,d,e){e=e||b.languages;var f=e[a],g={};for(var h in f)if(f.hasOwnProperty(h)){if(h==c)for(var i in d)d.hasOwnProperty(i)&&(g[i]=d[i]);
g[h]=f[h]}return e[a]=g},DFS:function(a,c){for(var d in a)c.call(a,d,a[d]),"Object"===b.util.type(a)&&b.languages.DFS(a[d],c)}},highlightAll:function(a,c){for(var f,d=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'),e=0;f=d[e++];)b.highlightElement(f,a===!0,c)},highlightElement:function(d,e,f){for(var g,h,i=d;i&&!a.test(i.className);)i=i.parentNode;if(i&&(g=(i.className.match(a)||[,""])[1],h=b.languages[g]),h){d.className=d.className.replace(a,"").replace(/\s+/g," ")+" language-"+g,i=d.parentNode,/pre/i.test(i.nodeName)&&(i.className=i.className.replace(a,"").replace(/\s+/g," ")+" language-"+g);
var j=d.textContent;if(j){j=j.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ");var k={element:d,language:g,grammar:h,code:j};if(b.hooks.run("before-highlight",k),e&&self.Worker){var l=new Worker(b.filename);l.onmessage=function(a){k.highlightedCode=c.stringify(JSON.parse(a.data),g),b.hooks.run("before-insert",k),k.element.innerHTML=k.highlightedCode,f&&f.call(k.element),b.hooks.run("after-highlight",k)},l.postMessage(JSON.stringify({language:k.language,code:k.code}))}else k.highlightedCode=b.highlight(k.code,k.grammar,k.language),b.hooks.run("before-insert",k),k.element.innerHTML=k.highlightedCode,f&&f.call(d),b.hooks.run("after-highlight",k)
}}},highlight:function(a,d,e){return c.stringify(b.tokenize(a,d),e)},tokenize:function(a,c){var e=b.Token,f=[a],g=c.rest;if(g){for(var h in g)c[h]=g[h];delete c.rest}a:for(var h in c)if(c.hasOwnProperty(h)&&c[h]){var i=c[h],j=i.inside,k=!!i.lookbehind,l=0;i=i.pattern||i;for(var m=0;m<f.length;m++){var n=f[m];if(f.length>a.length)break a;if(!(n instanceof e)){i.lastIndex=0;var o=i.exec(n);if(o){k&&(l=o[1].length);var p=o.index-1+l,o=o[0].slice(l),q=o.length,r=p+q,s=n.slice(0,p+1),t=n.slice(r+1),u=[m,1];s&&u.push(s);
var v=new e(h,j?b.tokenize(o,j):o);u.push(v),t&&u.push(t),Array.prototype.splice.apply(f,u)}}}}return f},hooks:{all:{},add:function(a,c){var d=b.hooks.all;d[a]=d[a]||[],d[a].push(c)},run:function(a,c){var d=b.hooks.all[a];if(d&&d.length)for(var f,e=0;f=d[e++];)f(c)}}},c=b.Token=function(a,b){this.type=a,this.content=b};if(c.stringify=function(a,d,e){if("string"==typeof a)return a;if("[object Array]"==Object.prototype.toString.call(a))return a.map(function(b){return c.stringify(b,d,a)}).join("");var f={type:a.type,content:c.stringify(a.content,d,e),tag:"span",classes:["token",a.type],attributes:{},language:d,parent:e};
"comment"==f.type&&(f.attributes.spellcheck="true"),b.hooks.run("wrap",f);var g="";for(var h in f.attributes)g+=h+'="'+(f.attributes[h]||"")+'"';return"<"+f.tag+' class="'+f.classes.join(" ")+'" '+g+">"+f.content+"</"+f.tag+">"},!self.document)return self.addEventListener("message",function(a){var c=JSON.parse(a.data),d=c.language,e=c.code;self.postMessage(JSON.stringify(b.tokenize(e,b.languages[d]))),self.close()},!1),void 0;var d=document.getElementsByTagName("script");d=d[d.length-1],d&&(b.filename=d.src,document.addEventListener&&!d.hasAttribute("data-manual")&&document.addEventListener("DOMContentLoaded",b.highlightAll))
}(),Prism.languages.markup={comment:/&lt;!--[\w\W]*?-->/g,prolog:/&lt;\?.+?\?>/,doctype:/&lt;!DOCTYPE.+?>/,cdata:/&lt;!\[CDATA\[[\w\W]*?]]>/i,tag:{pattern:/&lt;\/?[\w:-]+\s*(?:\s+[\w:-]+(?:=(?:("|')(\\?[\w\W])*?\1|\w+))?\s*)*\/?>/gi,inside:{tag:{pattern:/^&lt;\/?[\w:-]+/i,inside:{punctuation:/^&lt;\/?/,namespace:/^[\w-]+?:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/gi,inside:{punctuation:/=|>|"/g}},punctuation:/\/?>/g,"attr-name":{pattern:/[\w:-]+/g,inside:{namespace:/^[\w-]+?:/}}}},entity:/&amp;#?[\da-z]{1,8};/gi},Prism.hooks.add("wrap",function(a){"entity"===a.type&&(a.attributes.title=a.content.replace(/&amp;/,"&"))
}),Prism.languages.css={comment:/\/\*[\w\W]*?\*\//g,atrule:{pattern:/@[\w-]+?.*?(;|(?=\s*{))/gi,inside:{punctuation:/[;:]/g}},url:/url\((["']?).*?\1\)/gi,selector:/[^\{\}\s][^\{\};]*(?=\s*\{)/g,property:/(\b|\B)[\w-]+(?=\s*:)/gi,string:/("|')(\\?.)*?\1/g,important:/\B!important\b/gi,ignore:/&(lt|gt|amp);/gi,punctuation:/[\{\};:]/g},Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{style:{pattern:/(&lt;|<)style[\w\W]*?(>|&gt;)[\w\W]*?(&lt;|<)\/style(>|&gt;)/gi,inside:{tag:{pattern:/(&lt;|<)style[\w\W]*?(>|&gt;)|(&lt;|<)\/style(>|&gt;)/gi,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.css}}}),Prism.languages.css.selector={pattern:/[^\{\}\s][^\{\}]*(?=\s*\{)/g,inside:{"pseudo-element":/:(?:after|before|first-letter|first-line|selection)|::[-\w]+/g,"pseudo-class":/:[-\w]+(?:\(.*\))?/g,"class":/\.[-:\.\w]+/g,id:/#[-:\.\w]+/g}},Prism.languages.insertBefore("css","ignore",{hexcode:/#[\da-f]{3,6}/gi,entity:/\\[\da-f]{1,8}/gi,number:/[\d%\.]+/g,"function":/(attr|calc|cross-fade|cycle|element|hsla?|image|lang|linear-gradient|matrix3d|matrix|perspective|radial-gradient|repeating-linear-gradient|repeating-radial-gradient|rgba?|rotatex|rotatey|rotatez|rotate3d|rotate|scalex|scaley|scalez|scale3d|scale|skewx|skewy|skew|steps|translatex|translatey|translatez|translate3d|translate|url|var)/gi}),Prism.languages.clike={comment:{pattern:/(^|[^\\])(\/\*[\w\W]*?\*\/|(^|[^:])\/\/.*?(\r?\n|$))/g,lookbehind:!0},string:/("|')(\\?.)*?\1/g,"class-name":{pattern:/((?:(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/gi,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/g,"boolean":/\b(true|false)\b/g,"function":{pattern:/[a-z0-9_]+\(/gi,inside:{punctuation:/\(/}},number:/\b-?(0x[\dA-Fa-f]+|\d*\.?\d+([Ee]-?\d+)?)\b/g,operator:/[-+]{1,2}|!|&lt;=?|>=?|={1,3}|(&amp;){1,2}|\|?\||\?|\*|\/|\~|\^|\%/g,ignore:/&(lt|gt|amp);/gi,punctuation:/[{}[\];(),.:]/g},Prism.languages.javascript=Prism.languages.extend("clike",{keyword:/\b(var|let|if|else|while|do|for|return|in|instanceof|function|new|with|typeof|try|throw|catch|finally|null|break|continue)\b/g,number:/\b-?(0x[\dA-Fa-f]+|\d*\.?\d+([Ee]-?\d+)?|NaN|-?Infinity)\b/g}),Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/g,lookbehind:!0}}),Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{script:{pattern:/(&lt;|<)script[\w\W]*?(>|&gt;)[\w\W]*?(&lt;|<)\/script(>|&gt;)/gi,inside:{tag:{pattern:/(&lt;|<)script[\w\W]*?(>|&gt;)|(&lt;|<)\/script(>|&gt;)/gi,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.javascript}}}),Prism.languages.php=Prism.languages.extend("clike",{keyword:/\b(and|or|xor|array|as|break|case|cfunction|class|const|continue|declare|default|die|do|else|elseif|enddeclare|endfor|endforeach|endif|endswitch|endwhile|extends|for|foreach|function|include|include_once|global|if|new|return|static|switch|use|require|require_once|var|while|abstract|interface|public|implements|extends|private|protected|parent|static|throw|null|echo|print|trait|namespace|use|final|yield|goto|instanceof|finally|try|catch)\b/gi,constant:/\b[A-Z0-9_]{2,}\b/g}),Prism.languages.insertBefore("php","keyword",{delimiter:/(\?>|&lt;\?php|&lt;\?)/gi,variable:/(\$\w+)\b/gi,"package":{pattern:/(\\|namespace\s+|use\s+)[\w\\]+/g,lookbehind:!0,inside:{punctuation:/\\/}}}),Prism.languages.insertBefore("php","operator",{property:{pattern:/(->)[\w]+/g,lookbehind:!0}}),Prism.languages.markup&&(Prism.hooks.add("before-highlight",function(a){"php"===a.language&&(a.tokenStack=[],a.code=a.code.replace(/(?:&lt;\?php|&lt;\?|<\?php|<\?)[\w\W]*?(?:\?&gt;|\?>)/gi,function(b){return a.tokenStack.push(b),"{{{PHP"+a.tokenStack.length+"}}}"
}))}),Prism.hooks.add("after-highlight",function(a){if("php"===a.language){for(var c,b=0;c=a.tokenStack[b];b++)a.highlightedCode=a.highlightedCode.replace("{{{PHP"+(b+1)+"}}}",Prism.highlight(c,a.grammar,"php"));a.element.innerHTML=a.highlightedCode}}),Prism.hooks.add("wrap",function(a){"php"===a.language&&"markup"===a.type&&(a.content=a.content.replace(/(\{\{\{PHP[0-9]+\}\}\})/g,'<span class="token php">$1</span>'))}),Prism.languages.insertBefore("php","comment",{markup:{pattern:/(&lt;|<)[^?]\/?(.*?)(>|&gt;)/g,inside:Prism.languages.markup},php:/\{\{\{PHP[0-9]+\}\}\}/g})),Prism.languages.insertBefore("php","variable",{"this":/\$this/g,global:/\$_?(GLOBALS|SERVER|GET|POST|FILES|REQUEST|SESSION|ENV|COOKIE|HTTP_RAW_POST_DATA|argc|argv|php_errormsg|http_response_header)/g,scope:{pattern:/\b[\w\\]+::/g,inside:{keyword:/(static|self|parent)/,punctuation:/(::|\\)/}}}),Prism.languages.coffeescript=Prism.languages.extend("javascript",{"block-comment":/([#]{3}\s*\r?\n(.*\s*\r*\n*)\s*?\r?\n[#]{3})/g,comment:/(\s|^)([#]{1}[^#^\r^\n]{2,}?(\r?\n|$))/g,keyword:/\b(this|window|delete|class|extends|namespace|extend|ar|let|if|else|while|do|for|each|of|return|in|instanceof|new|with|typeof|try|catch|finally|null|undefined|break|continue)\b/g}),Prism.languages.insertBefore("coffeescript","keyword",{"function":{pattern:/[a-z|A-z]+\s*[:|=]\s*(\([.|a-z\s|,|:|{|}|\"|\'|=]*\))?\s*-&gt;/gi,inside:{"function-name":/[_?a-z-|A-Z-]+(\s*[:|=])| @[_?$?a-z-|A-Z-]+(\s*)| /g,operator:/[-+]{1,2}|!|=?&lt;|=?&gt;|={1,2}|(&amp;){1,2}|\|?\||\?|\*|\//g}},"attr-name":/[_?a-z-|A-Z-]+(\s*:)| @[_?$?a-z-|A-Z-]+(\s*)| /g}),Prism.languages.scss=Prism.languages.extend("css",{comment:{pattern:/(^|[^\\])(\/\*[\w\W]*?\*\/|\/\/.*?(\r?\n|$))/g,lookbehind:!0},atrule:/@[\w-]+(?=\s+(\(|\{|;))/gi,url:/([-a-z]+-)*url(?=\()/gi,selector:/([^@;\{\}\(\)]?([^@;\{\}\(\)]|&amp;|\#\{\$[-_\w]+\})+)(?=\s*\{(\}|\s|[^\}]+(:|\{)[^\}]+))/gm}),Prism.languages.insertBefore("scss","atrule",{keyword:/@(if|else if|else|for|each|while|import|extend|debug|warn|mixin|include|function|return)|(?=@for\s+\$[-_\w]+\s)+from/i}),Prism.languages.insertBefore("scss","property",{variable:/((\$[-_\w]+)|(#\{\$[-_\w]+\}))/i}),Prism.languages.insertBefore("scss","ignore",{placeholder:/%[-_\w]+/i,statement:/\B!(default|optional)\b/gi,"boolean":/\b(true|false)\b/g,"null":/\b(null)\b/g,operator:/\s+([-+]{1,2}|={1,2}|!=|\|?\||\?|\*|\/|\%)\s+/g}),Prism.languages.bash=Prism.languages.extend("clike",{comment:{pattern:/(^|[^"{\\])(#.*?(\r?\n|$))/g,lookbehind:!0},string:{pattern:/("|')(\\?[\s\S])*?\1/g,inside:{property:/\$([a-zA-Z0-9_#\?\-\*!@]+|\{[^\}]+\})/g}},keyword:/\b(if|then|else|elif|fi|for|break|continue|while|in|case|function|select|do|done|until|echo|exit|return|set|declare)\b/g}),Prism.languages.insertBefore("bash","keyword",{property:/\$([a-zA-Z0-9_#\?\-\*!@]+|\{[^}]+\})/g}),Prism.languages.insertBefore("bash","comment",{important:/(^#!\s*\/bin\/bash)|(^#!\s*\/bin\/sh)/g}),Prism.languages.c=Prism.languages.extend("clike",{keyword:/\b(asm|typeof|inline|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|union|unsigned|void|volatile|while)\b/g,operator:/[-+]{1,2}|!=?|&lt;{1,2}=?|&gt;{1,2}=?|\-&gt;|={1,2}|\^|~|%|(&amp;){1,2}|\|?\||\?|\*|\//g}),Prism.languages.insertBefore("c","keyword",{property:/#\s*[a-zA-Z]+/g}),Prism.languages.cpp=Prism.languages.extend("c",{keyword:/\b(alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|class|compl|const|constexpr|const_cast|continue|decltype|default|delete|delete\[\]|do|double|dynamic_cast|else|enum|explicit|export|extern|float|for|friend|goto|if|inline|int|long|mutable|namespace|new|new\[\]|noexcept|nullptr|operator|private|protected|public|register|reinterpret_cast|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/g,operator:/[-+]{1,2}|!=?|&lt;{1,2}=?|&gt;{1,2}=?|\-&gt;|:{1,2}|={1,2}|\^|~|%|(&amp;){1,2}|\|?\||\?|\*|\/|\b(and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/g}),Prism.languages.sql={comment:{pattern:/(^|[^\\])(\/\*[\w\W]*?\*\/|((--)|(\/\/)).*?(\r?\n|$))/g,lookbehind:!0},string:/("|')(\\?.)*?\1/g,keyword:/\b(ACTION|ADD|AFTER|ALGORITHM|ALTER|ANALYZE|APPLY|AS|AS|ASC|AUTHORIZATION|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADE|CASCADED|CASE|CHAIN|CHAR VARYING|CHARACTER VARYING|CHECK|CHECKPOINT|CLOSE|CLUSTERED|COALESCE|COLUMN|COLUMNS|COMMENT|COMMIT|COMMITTED|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS|CONTAINSTABLE|CONTINUE|CONVERT|CREATE|CROSS|CURRENT|CURRENT_DATE|CURRENT_TIME|CURRENT_TIMESTAMP|CURRENT_USER|CURSOR|DATA|DATABASE|DATABASES|DATETIME|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DOUBLE PRECISION|DROP|DUMMY|DUMP|DUMPFILE|DUPLICATE KEY|ELSE|ENABLE|ENCLOSED BY|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPE|ESCAPED BY|EXCEPT|EXEC|EXECUTE|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR|FOR EACH ROW|FORCE|FOREIGN|FREETEXT|FREETEXTTABLE|FROM|FULL|FUNCTION|GEOMETRY|GEOMETRYCOLLECTION|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|IDENTITY|IDENTITY_INSERT|IDENTITYCOL|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTO|INVOKER|ISOLATION LEVEL|JOIN|KEY|KEYS|KILL|LANGUAGE SQL|LAST|LEFT|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONGBLOB|LONGTEXT|MATCH|MATCHED|MEDIUMBLOB|MEDIUMINT|MEDIUMTEXT|MERGE|MIDDLEINT|MODIFIES SQL DATA|MODIFY|MULTILINESTRING|MULTIPOINT|MULTIPOLYGON|NATIONAL|NATIONAL CHAR VARYING|NATIONAL CHARACTER|NATIONAL CHARACTER VARYING|NATIONAL VARCHAR|NATURAL|NCHAR|NCHAR VARCHAR|NEXT|NO|NO SQL|NOCHECK|NOCYCLE|NONCLUSTERED|NULLIF|NUMERIC|OF|OFF|OFFSETS|ON|OPEN|OPENDATASOURCE|OPENQUERY|OPENROWSET|OPTIMIZE|OPTION|OPTIONALLY|ORDER|OUT|OUTER|OUTFILE|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREV|PRIMARY|PRINT|PRIVILEGES|PROC|PROCEDURE|PUBLIC|PURGE|QUICK|RAISERROR|READ|READS SQL DATA|READTEXT|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEATABLE|REPLICATION|REQUIRE|RESTORE|RESTRICT|RETURN|RETURNS|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROWCOUNT|ROWGUIDCOL|ROWS?|RTREE|RULE|SAVE|SAVEPOINT|SCHEMA|SELECT|SERIAL|SERIALIZABLE|SESSION|SESSION_USER|SET|SETUSER|SHARE MODE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|START|STARTING BY|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLE|TABLES|TABLESPACE|TEMPORARY|TEMPTABLE|TERMINATED BY|TEXT|TEXTSIZE|THEN|TIMESTAMP|TINYBLOB|TINYINT|TINYTEXT|TO|TOP|TRAN|TRANSACTION|TRANSACTIONS|TRIGGER|TRUNCATE|TSEQUAL|TYPE|TYPES|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNPIVOT|UPDATE|UPDATETEXT|USAGE|USE|USER|USING|VALUE|VALUES|VARBINARY|VARCHAR|VARCHARACTER|VARYING|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH|WITH ROLLUP|WITHIN|WORK|WRITE|WRITETEXT)\b/gi,"boolean":/\b(TRUE|FALSE|NULL)\b/gi,number:/\b-?(0x)?\d*\.?[\da-f]+\b/g,operator:/\b(ALL|AND|ANY|BETWEEN|EXISTS|IN|LIKE|NOT|OR|IS|UNIQUE|CHARACTER SET|COLLATE|DIV|OFFSET|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b|[-+]{1}|!|=?&lt;|=?&gt;|={1}|(&amp;){1,2}|\|?\||\?|\*|\//gi,ignore:/&(lt|gt|amp);/gi,punctuation:/[;[\]()`,.]/g},Prism.languages.http={"request-line":{pattern:/^(POST|GET|PUT|DELETE|OPTIONS|PATCH|TRACE|CONNECT)\b\shttps?:\/\/\S+\sHTTP\/[0-9.]+/g,inside:{property:/^\b(POST|GET|PUT|DELETE|OPTIONS|PATCH|TRACE|CONNECT)\b/g,"attr-name":/:\w+/g}},"response-status":{pattern:/^HTTP\/1.[01] [0-9]+.*/g,inside:{property:/[0-9]+[A-Z\s-]+$/g}},keyword:/^[\w-]+:(?=.+)/gm};
var c={"application/json":Prism.languages.javascript,"application/xml":Prism.languages.markup,"text/xml":Prism.languages.markup,"text/html":Prism.languages.markup};for(var d in c)if(c[d]){var e={};e[d]={pattern:new RegExp("(content-type:\\s*"+d+"[\\w\\W]*?)\\n\\n[\\w\\W]*","gi"),lookbehind:!0,inside:{rest:c[d]}},Prism.languages.insertBefore("http","keyword",e)}Prism.languages.ruby=Prism.languages.extend("clike",{comment:/#[^\r\n]*(\r?\n|$)/g,keyword:/\b(alias|and|BEGIN|begin|break|case|class|def|define_method|defined|do|each|else|elsif|END|end|ensure|false|for|if|in|module|new|next|nil|not|or|raise|redo|require|rescue|retry|return|self|super|then|throw|true|undef|unless|until|when|while|yield)\b/g,builtin:/\b(Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Stat|File|Fixnum|Fload|Hash|Integer|IO|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|String|Struct|TMS|Symbol|ThreadGroup|Thread|Time|TrueClass)\b/,constant:/\b[A-Z][a-zA-Z_0-9]*[?!]?\b/g}),Prism.languages.insertBefore("ruby","keyword",{regex:{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/g,lookbehind:!0},variable:/[@$&]+\b[a-zA-Z_][a-zA-Z_0-9]*[?!]?\b/g,symbol:/:\b[a-zA-Z_][a-zA-Z_0-9]*[?!]?\b/g}),Prism.languages.csharp=Prism.languages.extend("clike",{keyword:/\b(abstract|as|base|bool|break|byte|case|catch|char|checked|class|const|continue|decimal|default|delegate|do|double|else|enum|event|explicit|extern|false|finally|fixed|float|for|foreach|goto|if|implicit|in|int|interface|internal|is|lock|long|namespace|new|null|object|operator|out|override|params|private|protected|public|readonly|ref|return|sbyte|sealed|short|sizeof|stackalloc|static|string|struct|switch|this|throw|true|try|typeof|uint|ulong|unchecked|unsafe|ushort|using|virtual|void|volatile|while|add|alias|ascending|async|await|descending|dynamic|from|get|global|group|into|join|let|orderby|partial|remove|select|set|value|var|where|yield)\b/g,string:/@?("|')(\\?.)*?\1/g,preprocessor:/^\s*#.*/gm,number:/\b-?(0x)?\d*\.?\d+\b/g}),Prism.highlightAll(),b.resolve()
}),EasySocial.module("privacy",function(){var b=this;EasySocial.require().library("dialog").view("admin/profiles/form.privacy.custom.item").done(function(a){EasySocial.Controller("Profiles.Form.Privacy",{defaultOptions:{path:"admin","{selection}":".privacySelection","{browseButton}":".browseButton","{userDeleteButton}":".userDeleteButton","{customContainer}":".customContainer",view:{customItem:"admin/profiles/form.privacy.custom.item"}}},function(b){return{init:function(){},"{selection} change":function(c){{var e=a(c).val();
a(c).attr("name")}"custom"==e?b.customContainer().show():b.customContainer().hide()},"{userDeleteButton} click":function(b){a(b).parents("li").remove()},"{browseButton} click":function(c){var e=a(c).attr("id"),f=a(c).data("index"),g=a.rootPath+"administrator/index.php?option=com_easysocial&view=users&layout=listing&show=iframe";"site"==b.options.path&&(g=a.rootPath+"index.php?option=com_easysocial&view=friends&layout=listing&show=iframe"),a.dialog({title:"Browse Users & Groups",content:g,body:{css:{width:400,height:300}},buttons:[{name:"Assign",click:function(){var c=a(".foundryDialog").find("iframe").contents().find("input:checked");
if(c.length>0)for(var d=0;d<c.length;d++){var g=a(c[d]).attr("name");if("toggle"!=g){var h=a(c[d]).val(),i=a(".foundryDialog").find("iframe").contents().find('input[name="user_'+h+'"]').val(),j=a("ul#privacy_ul"+f+" input:hidden"),k=!0;if(j.length>0)for(var l=0;l<j.length;l++)if(a(j[l]).val()==h){k=!1;break}k&&(html=b.view.customItem({userName:i,eleName:e,userId:h}),a("ul#privacy_ul"+f).append(html))}}a.dialog().close()}},{name:"Close",click:function(){a.dialog().close()}}]})}}}),b.resolve()})}),EasySocial.module("sharing",function(a){var b=this;
EasySocial.require().library("textboxlist").done(function(){EasySocial.Controller("Sharing",{defaultOptions:{"{vendors}":"[data-sharing-vendor]","{emailForm}":"[data-sharing-email]"}},function(b){return{init:function(){b.initLinks(),b.initEmail()},initLinks:function(){a.each(b.vendors(),function(b,c){if(c=a(c),!c.data("loaded")){var d=c.attr("href");c.data("href",d),c.attr("href","javascript:void(0);"),c.attr("loaded",!0)}})},initEmail:function(){a.each(b.emailForm(),function(c,d){d=a(d),d.data("loaded")||(b.addPlugin("email"),d.attr("loaded",!0))
})},"{vendors} click":function(a){var c=a.data("options")||"";window.open(a.data("href"),"",c)}}}),a.template("sharing/recipientContent",'[%= title %]<input type="hidden" name="items" value="[%= title %]" />'),EasySocial.Controller("Sharing.Email",{defaultOptions:{token:"","{container}":"[data-sharing-email]","{frames}":"[data-sharing-email-frame]","{recipients}":"[data-sharing-email-recipients]","{input}":"[data-sharing-email-input]","{content}":"[data-sharing-email-content]","{send}":"[data-sharing-email-send]","{frames}":"[data-sharing-email-frame]","{frameForm}":"[data-sharing-email-form]","{frameSending}":"[data-sharing-email-sending]","{frameDone}":"[data-sharing-email-done]","{frameFail}":"[data-sharing-email-fail]","{failMsg}":"[data-sharing-email-fail-msg]"}},function(b){return{init:function(){b.options.token=b.container().data("token");
b.recipients().textboxlist({component:"es",view:{itemContent:"sharing/recipientContent"}});b.originalPosition=b.container().css("position")},getRecipients:function(){var c=b.recipients().controller("textboxlist").getAddedItems(),d=[];a.each(c,function(a,b){d.push(b.title)});var e=b.input().val();return d.length<1&&!a.isEmpty(e)&&d.push(e),d},getContent:function(){return b.content().val()},"{send} click":function(a){if(a.enabled()){a.disabled(!0),b.frames().hide(),b.frameSending().show();var d=b.options.token,e=b.getRecipients(),f=b.getContent();
b.submitForm(d,e,f).done(function(){b.frames().hide(),b.frameDone().show(),setTimeout(function(){b.recipients().controller("textboxlist").clearItems(),b.content().val(""),b.frameDone().hide(),b.frameForm().show()},1e3)}).fail(function(a){b.frames().hide(),b.frameFail().show(),b.frameForm().show(),void 0!==a&&b.failMsg().html(a)}).always(function(){a.enabled(!0)})}},"{input} keypress":function(a,c){return 44===c.which?(b.recipients().controller("textboxlist").addItem(a.val()),a.val(""),!1):void 0},submitForm:function(a,b,c){return EasySocial.ajax("site/controllers/sharing/send",{token:a,recipients:b,content:c})
}}}),b.resolve()})}),EasySocial.module("site/activities/activities",function(){var b=this;EasySocial.require().script("site/activities/sidebar","site/activities/sidebar.item").view("site/loading/small").done(function(){EasySocial.Controller("Activities",{defaultOptions:{items:null,"{container}":"[data-activities]","{contentTitle}":"[data-activities-content-title]","{content}":"[data-activities-content]","{sidebar}":"[data-activities-sidebar]","{sidebarItem}":"[data-sidebar-item]",view:{loadingContent:"site/loading/small"}}},function(a){return{init:function(){a.sidebar().implement(EasySocial.Controller.Activities.Sidebar,{"{parent}":a}),a.sidebarItem().implement(EasySocial.Controller.Activities.Sidebar.Item,{"{parent}":a})
},updatingContents:function(){a.content().html(a.view.loadingContent())},updateContent:function(b,c){a.content().html(b),a.contentTitle().html(c)}}}),b.resolve()})}),EasySocial.module("site/activities/sidebar",function(){var b=this;EasySocial.require().done(function(a){EasySocial.Controller("Activities.Sidebar",{defaultOptions:{"{menuItem}":"[data-sidebar-menu]"}},function(b){return{init:function(){},"{menuItem} click":function(c){b.menuItem().removeClass("active"),a(c).addClass("active")}}}),b.resolve()})}),EasySocial.module("site/activities/sidebar.item",function(){var b=this;
EasySocial.require().library("history").done(function(){EasySocial.Controller("Activities.Sidebar.Item",{defaultOptions:{}},function(a){return{init:function(){},"{self} click":function(){{var d=a.element.data("type"),e=a.element.data("url"),f=a.element.data("title");a.element.data("description")}History.pushState({state:1},f,e),a.parent.updatingContents(),EasySocial.ajax("site/controllers/activities/getActivities",{type:d}).done(function(b){a.parent.updateContent(b,f)}).fail(function(a){console.log(a)}),a.parent.updateContent()
}}}),b.resolve()})}),EasySocial.module("site/activities/apps",function(){var b=this;EasySocial.require().view("site/loading/small").language("COM_EASYSOCIAL_ACTIVITY_APPS_UNHIDE_SUCCESSFULLY","COM_EASYSOCIAL_ACTIVITY_USERS_UNHIDE_SUCCESSFULLY").done(function(a){EasySocial.Controller("Activities.Apps.List",{defaultOptions:{"{item}":"[data-hidden-app-item]","{actorItem}":"[data-hidden-actor-item]",view:{loadingContent:"site/loading/small"}}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Activities.Apps.Item),a.actorItem().implement(EasySocial.Controller.Activities.Actors.Item)
}}}),EasySocial.Controller("Activities.Actors.Item",{defaultOptions:{id:"",actor:"","{unhideLink}":"[data-hidden-actor-unhide]","{content}":"[data-hidden-actor-content]",view:{loadingContent:"site/loading/small"}}},function(b){return{init:function(){b.options.id=b.element.data("id"),b.options.actor=b.element.data("actor")},"{unhideLink} click":function(){EasySocial.ajax("site/controllers/activities/unhideactor",{actor:b.options.actor,id:b.options.id}).done(function(){b.content().html(a.language("COM_EASYSOCIAL_ACTIVITY_USERS_UNHIDE_SUCCESSFULLY"))
}).fail(function(a){console.log(a)})}}}),EasySocial.Controller("Activities.Apps.Item",{defaultOptions:{id:"",context:"","{unhideLink}":"[data-hidden-app-unhide]","{content}":"[data-hidden-app-content]",view:{loadingContent:"site/loading/small"}}},function(b){return{init:function(){b.options.id=b.element.data("id"),b.options.context=b.element.data("context")},"{unhideLink} click":function(){EasySocial.ajax("site/controllers/activities/unhideapp",{context:b.options.context,id:b.options.id}).done(function(){b.content().html(a.language("COM_EASYSOCIAL_ACTIVITY_APPS_UNHIDE_SUCCESSFULLY"))
}).fail(function(a){console.log(a)})}}}),b.resolve()})}),EasySocial.module("site/activities/item",function(){var b=this;EasySocial.require().script().done(function(a){EasySocial.Controller("Activities.Item",{defaultOptions:{"{toggle}":"[data-activity-toggle]","{deleteBtn}":"[data-activity-delete]"}},function(b){return{init:function(){},"{toggle} click":function(c){EasySocial.ajax("site/controllers/activities/toggle",{id:b.element.data("id"),curState:b.element.data("current-state")}).done(function(d,e){a(c).text(d),b.element.data("current-state",e),e?b.element.children("div.es-stream").addClass("isHidden"):b.element.children("div.es-stream").removeClass("isHidden")
}).fail(function(a){console.log(a)})},"{deleteBtn} click":function(){var a=b.element.data("id");EasySocial.dialog({content:EasySocial.ajax("site/views/activities/confirmDelete"),bindings:{"{deleteButton} click":function(){EasySocial.ajax("site/controllers/activities/delete",{id:a}).done(function(){b.element.fadeOut(),EasySocial.dialog().close()})}}})}}}),b.resolve()})}),EasySocial.module("site/activities/list",function(){var b=this;EasySocial.require().view("site/loading/small","site/activities/loadbutton").language("COM_EASYSOCIAL_ACTIVITY_LOG_LOAD_PREVIOUS_STREAM_ITEMS").script("site/activities/item").done(function(a){EasySocial.Controller("Activities.List",{defaultOptions:{"{item}":"[data-activity-item]","{pagination}":"[data-activity-pagination]",view:{loadingContent:"site/loading/small",loadmoreContent:"site/activities/loadbutton"}}},function(b){return{init:function(){b.item().implement(EasySocial.Controller.Activities.Item),b.on("scroll.activities",window,a._.debounce(function(){b.loading||b.pagination().visible()&&b.loadMore()
},250))},"{pagination} click":function(){b.loadMore()},loadMore:function(){var c=a("[data-sidebar-menu].active").data("type"),d=b.pagination().data("startlimit");""!=d&&(b.loading=!0,b.pagination().html(b.view.loadingContent({content:""})),EasySocial.ajax("site/controllers/activities/getActivities",{limitstart:d,loadmore:"1",type:c}).done(function(a,c){b.pagination().data("startlimit",c),b.pagination().before(a),b.item().implement(EasySocial.Controller.Activities.Item),""==c?b.pagination().html(""):b.pagination().html(b.view.loadmoreContent())
}).fail(function(a){return a}).always(function(){b.loading=!1}))}}}),b.resolve()})}),EasySocial.module("site/albums/all",function(){var b=this;EasySocial.require().library("history").done(function(a){EasySocial.Controller("Albums.All.Browser",{defaultOptions:{"{sort}":"[data-albums-sort]","{contents}":"[data-albums-content]"}},function(b){return{init:function(){},setActiveSort:function(c){b.sort().removeClass("active"),a(c).addClass("active")},"{sort} click":function(c,d){d.preventDefault(),b.setActiveSort(c),a(c).route(),b.contents().addClass("is-loading"),b.contents().html("&nbsp;");
var e=c.data("albums-sort-type");EasySocial.ajax("site/controllers/albums/getAlbums",{sort:e}).done(function(a){b.contents().html(a)})}}}),b.resolve()})}),EasySocial.module("site/apps/apps",function(){var b=this;EasySocial.require().library("history").view("site/loading/small").done(function(a){EasySocial.Controller("Apps",{defaultOptions:{requireTerms:!0,"{content}":"[data-apps-listing]","{sort}":"[data-apps-sort]","{filter}":"[data-apps-filter]","{filterLink}":"[data-apps-filter-link]","{item}":"[data-apps-item]","{sorting}":"[data-apps-sorting]","{title}":"[data-page-apps-title]",view:{loading:"site/loading/small"}}},function(b){return{init:function(){b.initAppItem()
},initAppItem:function(){b.item().implement(EasySocial.Controller.Apps.Item,{requireTerms:b.options.requireTerms})},"{filterLink} click":function(a,b){b.preventDefault()},"{filter} click":function(c){b.sort().removeClass("active"),b.filter().removeClass("active"),c.addClass("active"),c.find("a").route();var e=c.data("apps-filter-type"),f=c.data("apps-filter-group"),g=c.find("a").attr("title");b.title().html(g),b.options.filter=e,"mine"==e?b.sorting().hide():b.sorting().show(),EasySocial.ajax("site/controllers/apps/getApps",{filter:e,group:f},{beforeSend:function(){b.sort(".alphabetical").addClass("active"),b.content().html(b.view.loading())
}}).done(function(c){b.content().toggleClass("is-empty",a(c).hasClass("empty")),b.content().html(c),b.initAppItem()})},"{sort} click":function(a){var d=a.data("apps-sort-type"),e=a.data("apps-sort-url"),f=a.data("apps-sort-group");History.pushState({state:1},"",e),b.sort().removeClass("active"),a.addClass("active"),EasySocial.ajax("site/controllers/apps/getApps",{sort:d,filter:b.options.filter,group:f},{beforeSend:function(){b.content().html(b.view.loading())}}).done(function(a){b.content().html(a),b.initAppItem()
})}}}),EasySocial.Controller("Apps.Item",{defaultOptions:{id:null,requireTerms:!0,"{install}":"[data-apps-item-install]","{installed}":"[data-apps-item-installed]","{settings}":"[data-apps-item-settings]",view:{installAppForm:"site/apps/dialog.install",uninstallAppForm:"site/apps/dialog.uninstall"}}},function(a){return{init:function(){a.element.data("id")&&(a.options.id=a.element.data("id"))},"{install} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/apps/getTnc"),bindings:{"{cancelButton} click":function(){EasySocial.dialog().close()
},"{installButton} click":function(){var c=!a.options.requireTerms||this.agreeCheckbox().is(":checked");c?(this.termsError().hide(),a.installApp()):this.termsError().show()}}})},installApp:function(){var b=EasySocial.ajax("site/controllers/apps/installApp",{id:a.options.id});EasySocial.dialog({content:b,bindings:{"{closeButton} click":function(){EasySocial.dialog().close()}}}),b.done(function(){a.install().enabled(!0),a.install().hide(),a.installed().show(),a.settings().hide()})},"{settings} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/apps/settings",{id:a.options.id}),bindings:{}})
},"{installed} click":function(b){b.enabled()&&(b.disabled(!0),EasySocial.dialog({content:EasySocial.ajax("site/views/apps/confirmUninstall"),bindings:{"{parent.closeButton} click":function(){a.installed().enabled(!0)},"{cancelButton} click":function(){a.installed().enabled(!0),EasySocial.dialog().close()},"{uninstallButton} click":function(){a.uninstallApp()}}}))},uninstallApp:function(){var b=EasySocial.ajax("site/controllers/apps/uninstallApp",{id:a.options.id});EasySocial.dialog({content:b,bindings:{"{closeButton} click":function(){EasySocial.dialog().close()
}}}),b.done(function(){a.installed().enabled(!0),a.installed().hide(),a.settings().hide(),a.install().show()})}}}),b.resolve()})}),EasySocial.module("site/badges/badge",function(){var b=this;EasySocial.Controller("Badges.Badge",{defaultOptions:{id:0,total:0,"{achieversList}":"[data-badge-achievers-list]","{achiever}":"[data-badge-achievers-achiever]","{loadIndicator}":"[data-badge-achievers-loading]","{loadButton}":"[data-badge-achievers-load]"}},function(a){return{init:function(){a.options.id=a.element.data("id"),a.options.total=a.element.data("total-achievers")
},"{loadButton} click":function(b){var c=a.achiever().length;b.enabled()&&c<a.options.total&&(b.disabled(!0),b.hide(),a.loadIndicator().show(),EasySocial.ajax("site/controllers/badges/loadAchievers",{id:a.options.id,start:c}).done(function(c){a.achieversList().append(c),b.enabled(!0),a.loadIndicator().hide(),a.achiever().length<a.options.total&&b.show()}).fail(function(){}))},loadAchievers:function(){}}}),b.resolve()}),EasySocial.module("site/comments/control",function(a){var b=this;EasySocial.Controller("CommentsControl",{defaultOptions:{interval:30}},function(b){return{init:function(){b.startUpdate()
},$Blocks:{},startUpdate:function(){b.options.monitoring=!0,b.updateBlocks()},stopUpdate:function(){b.options.monitoring=!1},updateBlocks:function(){(b.updateBlocks=a._.debounce(function(){var c=b.populate();return b.options.monitoring?(EasySocial.ajax("site/controllers/comments/getUpdates",{data:c}).done(function(c){a.each(c,function(c,d){a.each(d,function(a,d){var e=b.$Blocks[c][a];e._destroyed||e.updateComment(d)})})}).always(function(){b.updateBlocks()}),void 0):!1},1e3*b.options.interval))()},register:function(a){var c=a.options.group,d=a.options.element,e=a.options.streamid,f=a.options.uid,g=a.options.verb;
""==e&&(e="0");var h=d+"."+c+"."+g;void 0===b.$Blocks[h]&&(b.$Blocks[h]={});var i=e+"."+f;b.$Blocks[h][i]=a,a.trigger("commentBlockRegistered")},populate:function(){var c={};return a.each(b.$Blocks,function(b,d){c[b]={},a.each(d,function(a,d){c[b][a]=d._export()})}),c}}}),EasySocial.ready(function(){EasySocial.Comments=a("body").addController("EasySocial.Controller.CommentsControl"),b.resolve()})}),EasySocial.module("site/comments/frame",function(a){var b=this;EasySocial.require().library("mentions").script("site/comments/item","uploader/uploader").view("site/friends/suggest.item","site/friends/suggest.hint.search","site/friends/suggest.hint.empty","site/hashtags/suggest.item","site/hashtags/suggest.hint.search","site/hashtags/suggest.hint.empty").language("COM_EASYSOCIAL_COMMENTS_LOADED_OF_TOTAL","COM_EASYSOCIAL_COMMENTS_STATUS_SAVING","COM_EASYSOCIAL_COMMENTS_STATUS_SAVED").done(function(){EasySocial.Controller("Comments",{defaultOptions:{group:"user",element:"stream",verb:"null",uid:0,enterkey:"submit",url:"",streamid:"","{actionContent}":"[data-action-contents-comments]","{actionLink}":"[data-stream-action-comments]","{stat}":"[data-comments-stat]","{load}":"[data-comments-load]","{list}":"[data-comments-list]","{item}":"[data-comments-item]","{form}":"[data-comments-form]"}},function(b){return{init:function(){b.options.uid=b.element.data("uid")||b.options.uid,b.options.element=b.element.data("element")||b.options.element,b.options.group=b.element.data("group")||b.options.group,b.options.verb=b.element.data("verb")||b.options.verb,b.options.url=b.element.data("url")||b.options.url,b.options.streamid=b.element.data("streamid")||b.options.streamid,b.$Stat=b.addPlugin("stat"),b.$Load=b.addPlugin("load"),b.$List=b.addPlugin("list"),b.$Form=b.addPlugin("form"),EasySocial.require().script("site/comments/control").done(function(){EasySocial.Comments.register(b)
}),b.trigger("commentInit",[b])},$Comments:{},registerComment:function(a){var c=a.options.id;b.$Comments[c]=a},"{actionLink} click":function(){b.actionContent().toggle()},_export:function(){var c={total:b.$Stat.total(),count:b.$Stat.count(),ids:a._.keys(b.$Comments)};return c},updateComment:function(c){var d=[];a.each(c.ids,function(c,e){if(e!==!0)if(e===!1)b.trigger("commentDeleted",[c]);else{var f=!1;a.each(b.$Comments,function(a){return a>c?(b.$List.addToList(e,a,!1),f=!0,!1):void 0}),f||b.$List.addToList(e,"append",!1),d.push(e)
}}),b.$Stat.total(c.total),b.trigger("oldCommentsLoaded",[d])},"{self} show":function(){b.element.show(),b.$Form.input().focus()}}}),EasySocial.Controller("Comments.List",{defaultOptions:{"{list}":"[data-comments-list]","{item}":"[data-comments-item]"}},function(b){return{init:function(){b.initItemController(b.item(),!1)},initItemController:function(a,c){return a.addController("EasySocial.Controller.Comments.Item",{controller:{parent:b.parent},isNew:c}),a},"{parent} newCommentSaved":function(a,c,d){b.addToList(d)
},addToList:function(c,d,e){if(d=void 0===d?"append":d,e=void 0===e?!0:e,c=a(c),b.initItemController(c,e),"append"==d||"prepend"==d){var f="append"==d?":last":":first",g="append"==d?"after":"before";0===b.item().length?b.list().html(c):b.item(f)[g](c)}else{var h=b.parent.$Comments[d];void 0!==h&&h.element.before(c)}b.parent.actionContent().show()},"{parent} commentDeleted":function(a,c,d){void 0!==b.parent.$Comments[d]&&(b.parent.$Comments[d].element.remove(),delete b.parent.$Comments[d])}}}),EasySocial.Controller("Comments.Stat",{defaultOptions:{"{stats}":"[data-comments-stats]",count:0,total:0,limit:10}},function(b){return{init:function(){b.options.count=b.element.data("count"),b.options.total=b.element.data("total")
},total:function(c){return void 0!==c&&(b.options.total=parseInt(c),b.stats().text(a.language("COM_EASYSOCIAL_COMMENTS_LOADED_OF_TOTAL",b.count(),b.total()))),b.options.total},count:function(c){return void 0!==c&&(b.options.count=parseInt(c),b.stats().text(a.language("COM_EASYSOCIAL_COMMENTS_LOADED_OF_TOTAL",b.count(),b.total()))),b.options.count},getNextCycle:function(){var a=Math.max(b.total()-b.count()-b.options.limit,0),c=b.total()-b.count()-a;return{start:a,limit:c}},"{parent} oldCommentsLoaded":function(a,c,d){var e=d.length;
b.count(b.count()+e)},"{parent} newCommentSaved":function(){b.total(b.total()+1),b.count(b.count()+1)},"{parent} commentDeleted":function(){b.total(b.total()-1),b.count(b.count()-1)}}}),EasySocial.Controller("Comments.Load",{defaultOptions:{"{load}":"[data-comments-load]","{loadMore}":"[data-comments-load-loadMore]"}},function(b){return{init:function(){},"{loadMore} click":function(c){if(c.enabled()){c.disabled(!0);var e=b.parent.$Stat.getNextCycle();if(0==e.limit)return!1;b.loadComments(e.start,e.limit).done(function(d){var f=d.slice().reverse();
a.each(f,function(a,c){b.parent.$List.addToList(c,"prepend",!1)}),b.parent.trigger("oldCommentsLoaded",[d]),c.enabled(!0),0==e.start&&b.load().hide()}).fail(function(a){b.parent.trigger("oldCommentsLoadError",[a])})}},loadComments:function(a,c){return c=c||10,EasySocial.ajax("site/controllers/comments/load",{uid:b.parent.options.uid,element:b.parent.options.element,group:b.parent.options.group,verb:b.parent.options.verb,start:a,length:c})}}}),EasySocial.Controller("Comments.Form",{defaultOptions:{"{editorHeader}":"[data-comment-form-header]","{editorArea}":"[data-comment-form-editor-area]","{input}":"[data-comments-form-input]","{submit}":"[data-comments-form-submit]","{status}":"[data-comments-form-status]","{smileyLink}":"[data-comment-smileys]","{smileyItem}":"[data-comment-smiley-item]","{attachmentQueue}":"[data-comment-attachment-queue]","{attachmentProgress}":"[data-comment-attachment-progress-bar]","{attachmentBackground}":"[data-comment-attachment-background]","{attachmentRemove}":"[data-comment-attachment-remove]","{attachmentItem}":"[data-comment-attachment-item]","{attachmentDelete}":"[data-comment-attachment-delete]","{uploaderForm}":"[data-uploader-form]","{itemTemplate}":"[data-comment-attachment-template]",attachmentIds:[],view:{suggestItem:"site/friends/suggest.item",tagSuggestItem:"site/hashtags/suggest.item"}}},function(b,c,d,e){return{init:function(){e=b.parent,b.setMentionsLayout(),e.options.attachments&&b.implementAttachments()
},attachmentTemplate:null,getAttachmentTemplate:function(){b.attachmentTemplate||(b.attachmentTemplate=b.itemTemplate().detach());var c=a(b.attachmentTemplate).clone().html();return a(c)},implementAttachments:function(){b.editorArea().implement(EasySocial.Controller.Uploader,{temporaryUpload:!0,query:"type=comments",type:"comments",extensionsAllowed:"jpg,png,gif"})},"{smileyItem} click":function(a){var d=a.data("comment-smiley-value"),e=a.parents("[data-comments-item-editframe]").length>0,f=b.input();e&&(f=a.parents("[data-comments-item-editframe]").find("[data-comments-item-edit-input]"));
var g=f.val();g+=" "+d,f.val(g)},"{smileyLink} click":function(a){return a.hasClass("active")?(a.removeClass("active"),void 0):(a.addClass("active"),void 0)},"{attachmentDelete} click":function(a){var d=a.data("id");EasySocial.dialog({content:EasySocial.ajax("site/views/comments/confirmDeleteCommentAttachment",{id:d}),bindings:{"{deleteButton} click":function(){EasySocial.ajax("site/controllers/comments/deleteAttachment",{id:d}).done(function(){var c=a.parents(b.attachmentItem.selector);c.remove(),EasySocial.dialog().close()
})}}})},"{attachmentRemove} click":function(d){var f=d.parents(b.attachmentItem.selector);c.attachmentIds=a.without(c.attachmentIds,f.data("id")),f.remove(),b.attachmentItem().length<1&&b.attachmentQueue().removeClass("has-attachments")},"{uploaderForm} FilesAdded":function(c,d,e,f){a.each(f,function(a,c){var d=b.getAttachmentTemplate();b.attachmentQueue().addClass("has-attachments"),d.attr("id",c.id).addClass("is-uploading").prependTo(b.attachmentQueue())})},"{uploaderForm} FileUploaded":function(d,e,f,g,h){var i=a("#"+g.id);
b.attachmentBackground.inside(i).css("background-image","url("+h.preview+")"),i.removeClass("is-uploading"),i.data("id",h.id),c.attachmentIds.push(h.id)},"{uploaderForm} UploadProgress":function(c,d,e,f){var g=a("#"+f.id),h=b.attachmentProgress.inside(g);h.css("width",f.percent+"%")},"{input} keypress":function(a,c){13==c.keyCode&&("submit"!==b.parent.options.enterkey||c.shiftKey||c.altKey||c.ctrlKey||c.metaKey||b.submitComment(),"newline"===b.parent.options.enterkey&&(c.shiftKey||c.altKey||c.ctrlKey||c.metaKey)&&b.submitComment())
},"{submit} click":function(a){a.enabled()&&b.submitComment()},setMentionsLayout:function(){var d=(a.Deferred(),b.editorArea()),e=d.controller("mentions");if(e)return e.cloneLayout(),void 0;var f=b.editorHeader();d.mentions({triggers:{"@":{type:"entity",wrap:!1,stop:"",allowSpace:!0,finalize:!0,query:{loadingHint:!0,searchHint:a.View("easysocial/site/friends/suggest.hint.search"),emptyHint:a.View("easysocial/site/friends/suggest.hint.empty"),data:function(c){var d=a.Deferred();return EasySocial.ajax("site/controllers/friends/suggest",{search:c}).done(function(c){a.isArray(c)||d.reject();
var c=a.map(c,function(a){return a.title=a.screenName,a.type="user",a.menuHtml=b.view.suggestItem(!0,{item:a,name:"uid[]"}),a});d.resolve(c)}).fail(d.reject),d},use:function(a){return a.type+":"+a.id}}},"#":{type:"hashtag",wrap:!0,stop:" #",allowSpace:!1,query:{loadingHint:!0,searchHint:a.View("easysocial/site/hashtags/suggest.hint.search"),emptyHint:a.View("easysocial/site/hashtags/suggest.hint.empty"),data:function(c){var d=a.Deferred();return EasySocial.ajax("site/controllers/hashtags/suggest",{search:c}).done(function(c){a.isArray(c)||d.reject();
var c=a.map(c,function(a){return a.title="#"+a.title,a.type="hashtag",a.menuHtml=b.view.tagSuggestItem(!0,{item:a,name:"uid[]"}),a});d.resolve(c)}).fail(d.reject),d}}}},plugin:{autocomplete:{id:"fd",component:"es",position:{my:"left top",at:"left bottom",of:f,collision:"none"},size:{width:function(){return f.width()}}}}})},submitComment:function(){var c=b.input().val();return""==a.trim(c)?!1:(b.parent.trigger("newCommentSaving"),b.save().done(function(a){b.parent.trigger("newCommentSaved",[a]),b.submit().enabled(!0);
var c=b.editorArea(),d=c.controller("mentions");d&&d.reset(),""!=b.parent.options.streamid&&b.updateStreamExcludeIds(b.parent.options.streamid)}).fail(function(a){b.parent.trigger("newCommentSaveError",[a.message])}),void 0)},save:function(){var d=b.editorArea().controller("mentions"),e={url:b.parent.options.url,mentions:d?d.toArray():[]};return e.mentions=a.map(e.mentions,function(b){return"hashtag"===b.type&&a.isPlainObject(b.value)&&(b.value=b.value.title.slice(1)),JSON.stringify(b)}),EasySocial.ajax("site/controllers/comments/save",{uid:b.parent.options.uid,element:b.parent.options.element,group:b.parent.options.group,verb:b.parent.options.verb,streamid:b.parent.options.streamid,input:b.input().val(),attachmentIds:c.attachmentIds,data:e})
},updateStreamExcludeIds:function(b){ids=a("[data-streams-wrapper]").data("excludeids"),newIds="",newIds=""!=ids&&void 0!=ids?ids+","+b:b,a("[data-streams-wrapper]").data("excludeids",newIds)},disableForm:function(){b.input().attr("disabled",!0),b.submit().disabled(!0)},enableForm:function(){b.input().removeAttr("disabled"),b.submit().enabled(!0)},"{parent} newCommentSaving":function(){b.status().show(),b.status().removeClass("label-important label-success label-info"),b.status().addClass("label-info"),b.status().text(a.language("COM_EASYSOCIAL_COMMENTS_STATUS_SAVING")),b.disableForm()
},"{parent} newCommentSaved":function(){b.status().show(),b.status().text(a.language("COM_EASYSOCIAL_COMMENTS_STATUS_SAVED")),b.status().removeClass("label-important label-success label-info"),b.status().addClass("label-success"),setTimeout(function(){b.status().fadeOut("fast")},2e3),b.enableForm(),c.attachmentIds=[];var d=b.attachmentItem.inside(b.attachmentQueue.selector);d.remove(),b.attachmentQueue().removeClass("has-attachments"),b.input().val("")},"{parent} newCommentSaveError":function(a,c,d){b.status().show(),b.status().removeClass("label-important label-success label-info"),b.status().addClass("label-important"),b.status().text(d),b.enableForm()
}}}),b.resolve()})}),EasySocial.module("site/comments/item",function(a){var b=this;EasySocial.require().library("mentions").view("site/friends/suggest.item","site/friends/suggest.hint.search","site/friends/suggest.hint.empty","site/hashtags/suggest.item","site/hashtags/suggest.hint.search","site/hashtags/suggest.hint.empty").language("COM_EASYSOCIAL_COMMENTS_STATUS_SAVE_ERROR","COM_EASYSOCIAL_COMMENTS_STATUS_LOADING","COM_EASYSOCIAL_COMMENTS_STATUS_LOAD_ERROR","COM_EASYSOCIAL_COMMENTS_STATUS_DELETING","COM_EASYSOCIAL_COMMENTS_STATUS_DELETE_ERROR","COM_EASYSOCIAL_LIKES_LIKE","COM_EASYSOCIAL_LIKES_UNLIKE").done(function(){EasySocial.Controller("Comments.Item",{defaultOptions:{id:0,child:0,loadedChild:0,limit:10,isNew:!1,"{frame}":"[data-comments-item-frame]","{avatar}":"[data-comments-item-avatar]","{commentFrame}":"[data-comments-item-commentFrame]","{author}":"[data-comments-item-author]","{action}":"[data-comments-item-actions]","{edit}":"[data-comments-item-actions-edit]","{delete}":"[data-comments-item-actions-delete]","{spam}":"[data-comments-item-actions-spam]","{comment}":"[data-comments-item-comment]","{meta}":"[data-comments-item-meta]","{date}":"[data-comments-item-date] a","{like}":"[data-comments-item-like]","{likeCount}":"[data-comments-item-likeCount]","{editFrame}":"[data-comments-item-editFrame]","{editInput}":"[data-comments-item-edit-input]","{editCancel}":"[data-comments-item-edit-cancel]","{editSubmit}":"[data-comments-item-edit-submit]","{editStatus}":"[data-comments-item-edit-status]","{statusFrame}":"[data-comments-item-statusFrame]","{loadReplies}":"[data-comments-item-loadReplies]","{readMore}":"[data-es-comment-readmore]","{fullContent}":"[data-es-comment-full]",view:{suggestItem:"site/friends/suggest.item",tagSuggestItem:"site/hashtags/suggest.item"}}},function(b){return{init:function(){b.options.id=b.element.data("id"),b.options.child=b.element.data("child"),b.parent.registerComment(b),b.status=b.element.addController("EasySocial.Controller.Comments.Item.Status",{controller:{parent:b.parent,item:b}})
},"{like} click":function(c){c.enabled()&&(c.disabled(!0),b.likeComment().done(function(d,e,f){c.enabled(!0),b.likeCount().text(e),f=a("<div></div>").html(f).text(),b.likeCount().attr("data-original-title",f),b.like().find("a").text(a.language(d?"COM_EASYSOCIAL_LIKES_UNLIKE":"COM_EASYSOCIAL_LIKES_LIKE"))}).fail(function(){}))},likeComment:function(){return EasySocial.ajax("site/controllers/comments/like",{id:b.options.id})},"{likeCount} click":function(){EasySocial.dialog({content:b.getLikedUsers()})},getLikedUsers:function(){return EasySocial.ajax("site/controllers/comments/likedUsers",{id:b.options.id})
},"{edit} click":function(a){if(a.enabled()){var c=b.editFrame(),d=c.controller("mentions");c.html(""),d&&d.destroy(),a.disabled(!0),b.trigger("commentEditLoading",[b.options.id]),b.getEditComment().done(function(a){b.trigger("commentEditLoaded",[b.options.id,a]),b.editFrame().html(a).show(),b.setMentionsLayout(),b.editInput().focus()}).fail(function(a){b.trigger("commentEditLoadError",[b.options.id,a])})}},setMentionsLayout:function(){var c=b.editFrame(),d=c.controller("mentions");if(d)return d.cloneLayout(),void 0;
var e=b.editFrame();c.mentions({triggers:{"@":{type:"entity",wrap:!1,stop:"",allowSpace:!0,finalize:!0,query:{loadingHint:!0,searchHint:a.View("easysocial/site/friends/suggest.hint.search"),emptyHint:a.View("easysocial/site/friends/suggest.hint.empty"),data:function(c){var d=a.Deferred();return EasySocial.ajax("site/controllers/friends/suggest",{search:c}).done(function(c){a.isArray(c)||d.reject();var c=a.map(c,function(a){return a.title=a.screenName,a.type="user",a.menuHtml=b.view.suggestItem(!0,{item:a,name:"uid[]"}),a
});d.resolve(c)}).fail(d.reject),d},use:function(a){return a.type+":"+a.id}}},"#":{type:"hashtag",wrap:!0,stop:" #",allowSpace:!1,query:{loadingHint:!1,searchHint:a.View("easysocial/site/hashtags/suggest.hint.search"),emptyHint:a.View("easysocial/site/hashtags/suggest.hint.empty"),data:function(c){var d=a.Deferred();return EasySocial.ajax("site/controllers/hashtags/suggest",{search:c}).done(function(c){a.isArray(c)||d.reject();var c=a.map(c,function(a){return a.title="#"+a.title,a.type="hashtag",a.menuHtml=b.view.tagSuggestItem(!0,{item:a,name:"uid[]"}),a
});d.resolve(c)}).fail(d.reject),d}}}},plugin:{autocomplete:{id:"fd",component:"es",position:{my:"left top",at:"left bottom",of:e,collision:"none"},size:{width:function(){return e.width()}}}}})},getRawComment:function(){return EasySocial.ajax("site/controllers/comments/getRawComment",{id:b.options.id})},getEditComment:function(){return EasySocial.ajax("site/controllers/comments/getEditComment",{id:b.options.id})},"{editCancel} click":function(){b.trigger("commentEditCancel",[b.options.id]),b.edit().enabled(!0)
},"{editSubmit} click":function(){b.submitEdit()},submitEdit:function(){var a=b.editInput().val();return""==a?!1:(b.trigger("commentEditSaving",[b.options.id,a]),b.saveEdit().done(function(a){b.trigger("commentEditSaved",[b.options.id,a]),b.comment().html(a),b.edit().enabled(!0)}).fail(function(a){b.trigger("commentEditSaveError",[b.options.id,a])}),void 0)},saveEdit:function(){var a=b.editFrame().mentions("controller");return EasySocial.ajax("site/controllers/comments/update",{id:b.options.id,input:b.editInput().val(),mentions:a?a.toArray():[]})
},"{delete} click":function(){b.frame().hide(),b.commentFrame().show(),EasySocial.dialog({content:EasySocial.ajax("site/views/comments/confirmDelete",{id:b.options.id}),selectors:{"{deleteButton}":"[data-delete-button]","{cancelButton}":"[data-cancel-button]"},bindings:{"{deleteButton} click":function(){EasySocial.dialog().close(),b.parent.trigger("commentDeleting",[b.options.id]),b.trigger("commentDeleting"),b.deleteComment().done(function(){b.parent.trigger("commentDeleted",[b.options.id])}).fail(function(a){b.parent.trigger("commentDeleteError",[b.options.id,a]),b.trigger("commentDeleteError",[b.options.id,a])
})},"{cancelButton} click":function(){EasySocial.dialog().close()}}})},deleteComment:function(){return EasySocial.ajax("site/controllers/comments/delete",{id:b.options.id})},"{loadReplies} click":function(c){c.hide();var d=Math.max(b.options.child-b.options.loadedChild-b.options.limit,0);EasySocial.ajax().done(function(c){a.each(c,function(a,c){b.parent.$List.addToList(c,"child",!1)}),b.parent.trigger("oldCommentsLoaded",[c]),d>0&&b.loadMoreReplies().show()})},"{readMore} click":function(){b.comment().html(b.fullContent().html())
}}}),EasySocial.Controller("Comments.Item.Status",{defaultOptions:{"{frame}":"[data-comments-item-frame]","{statusFrame}":"[data-comments-item-statusFrame]","{statusContent}":"[data-comments-item-statusFrame] div","{commentFrame}":"[data-comments-item-commentFrame]","{editFrame}":"[data-comments-item-editFrame]"}},function(b){return{init:function(){},setStatus:function(c){b.frame().hide(),a.isPlainObject(c)&&void 0!==c.message&&(c=c.message),b.statusContent().html(c),b.statusFrame().show()},"{self} commentEditLoading":function(){b.setStatus(a.language("COM_EASYSOCIAL_COMMENTS_STATUS_LOADING"))
},"{self} commentEditLoaded":function(){b.frame().hide(),b.editFrame().show()},"{self} commentEditLoadError":function(){b.setStatus(a.language("COM_EASYSOCIAL_COMMENTS_STATUS_LOAD_ERROR"))},"{self} commentEditCancel":function(){b.frame().hide(),b.commentFrame().show()},"{self} commentEditSaving":function(){b.setStatus(a.language("COM_EASYSOCIAL_COMMENTS_STATUS_SAVING"))},"{self} commentEditSaved":function(){b.frame().hide(),b.commentFrame().show()},"{self} commentEditSaveError":function(){b.setStatus(a.language("COM_EASYSOCIAL_COMMENTS_STATUS_SAVE_ERROR"))
},"{self} commentDeleting":function(){b.setStatus(a.language("COM_EASYSOCIAL_COMMENTS_STATUS_DELETING"))},"{self} commentDeleteError":function(c,d,e,f){f=f||a.language("COM_EASYSOCIAL_COMMENTS_STATUS_DELETE_ERROR"),b.setStatus(f)}}}),b.resolve()})}),EasySocial.module("site/conversations/conversations",function(){var b=this;EasySocial.require().script("site/conversations/mailbox","site/conversations/item","site/conversations/filter").language("COM_EASYSOCIAL_NO_BUTTON").done(function(a){EasySocial.Controller("Conversations",{defaultOptions:{"{mailbox}":"[data-conversations-mailbox]","{list}":"[data-conversations-list]","{content}":"[data-conversations-content]","{item}":"[data-conversations-item]","{actions}":"[data-conversations-actions]","{filterItem}":"[data-conversations-filter]","{checkAll}":"[data-conversations-checkAll]","{checkbox}":"[data-conversationItem-checkbox]","{delete}":"[data-conversations-delete]","{archive}":"[data-conversations-archive]","{unarchive}":"[data-conversations-unarchive]","{unread}":"[data-conversations-unread]","{read}":"[data-conversations-read]"}},function(b){return{init:function(){b.mailbox().implement(EasySocial.Controller.Conversations.Mailbox,{"{parent}":b}),b.item().implement(EasySocial.Controller.Conversations.Item,{"{parent}":b}),b.filterItem().implement(EasySocial.Controller.Conversations.Filter,{"{parent}":b})
},"{filterItem} click":function(c){b.filterItem().removeClass("active"),a(c).addClass("active")},"{checkbox} change":function(a){return b.checkbox(":checked").length<=0&&!a.is(":checked")?b.actions().removeClass("is-checked"):(b.actions().addClass("is-checked"),void 0)},"{checkAll} click":function(c){return b.checkbox().length<=0?(a(c).prop("checked",!1),!1):(c.is(":checked")?b.checkbox(":not(:checked)").click():b.checkbox(":checked").click(),void 0)},showEmpty:function(){b.content().addClass("is-empty")},hideEmpty:function(){b.content().removeClass("is-empty")
},toggleLoading:function(){b.content().removeClass("is-empty").toggleClass("is-loading")},updateContent:function(a,c){void 0!=c?b.content().addClass("layout-"+c):b.content().removeClass("layout-archives"),b.actions().removeClass("is-checked"),b.checkAll().removeAttr("checked"),b.list().html(a)},getSelectedConversations:function(){if(b.checkbox(":checked").length<=0)return!1;var c=new Array;return b.checkbox(":checked").each(function(b,d){c.push(a(d).val())}),c},"{archive} click":function(){var c=b.getSelectedConversations();
EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/confirmArchive",{ids:c}),bindings:{"{confirmButton} click":function(){a("[data-conversation-archive-form]").submit()}}})},"{unarchive} click":function(){var c=b.getSelectedConversations();EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/confirmUnarchive",{ids:c}),bindings:{"{confirmButton} click":function(){a("[data-conversation-archive-form]").submit()}}})},"{delete} click":function(){var c=b.getSelectedConversations();
EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/confirmDelete",{ids:c}),bindings:{"{deleteButton} click":function(){a("[data-conversation-delete-form]").submit()}}})},"{read} click":function(){if(b.checkbox(":checked").length<=0)return!1;var c=new Array;b.checkbox(":checked").each(function(b,d){c.push(a(d).val())}),EasySocial.ajax("site/controllers/conversations/markRead",{ids:c}).done(function(){b.checkbox().parents("[data-conversations-item]").removeClass("unread").addClass("read"),b.mailbox().controller().updateCounters()
}).fail(function(a){b.setMessage(a)})},"{unread} click":function(){if(b.checkbox(":checked").length<=0)return!1;var c=new Array;b.checkbox(":checked").each(function(b,d){c.push(a(d).val())}),EasySocial.ajax("site/controllers/conversations/markUnread",{ids:c}).done(function(){b.checkbox().parents("[data-conversations-item]").removeClass("read").addClass("unread"),b.mailbox().controller().updateCounters()}).fail(function(a){console.log(a)})}}}),b.resolve()})}),EasySocial.module("site/conversations/mailbox",function(){var b=this;
EasySocial.require().library("history").done(function(){EasySocial.Controller("Conversations.Mailbox",{defaultOptions:{"{item}":"[data-mailboxItem]"}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Conversations.Mailbox.Item,{"{parent}":a})},updateCounters:function(){a.item(".active").controller().updateCounter()},updateContent:function(b,c){a.parent.updateContent(b,c)},showEmpty:function(){a.parent.showEmpty()},hideEmpty:function(){a.parent.hideEmpty()},toggleLoading:function(){a.parent.toggleLoading()
}}}),EasySocial.Controller("Conversations.Mailbox.Item",{defaultOptions:{"{counter}":"[data-mailboxItem-counter]",view:{emptyTemplate:"site/conversations/default.item.empty"}}},function(a){return{init:function(){},updateCounter:function(){EasySocial.ajax("site/controllers/conversations/getCount",{mailbox:a.element.data("mailbox")}).done(function(b){return 0>=b?(a.counter().html(""),void 0):(a.counter().html("("+b+")"),void 0)})},toggleLoading:function(){a.element.toggleClass("loading")},"{self} click":function(){var b=a.element.data("url"),c=a.element.data("title"),d=a.element.data("mailbox");
a.parent.item().removeClass("active"),a.element.addClass("active"),History.pushState({state:1},c,b),EasySocial.ajax("site/views/conversations/getItems",{mailbox:d,limitstart:0},{beforeSend:function(){a.toggleLoading(),a.parent.toggleLoading()}}).done(function(b){return a.toggleLoading(),a.parent.toggleLoading(),b.length<=0?(a.parent.updateContent(""),a.parent.showEmpty()):(a.parent.hideEmpty(),a.parent.updateContent(b,a.element.data("mailbox")),void 0)})}}}),b.resolve()})}),EasySocial.module("site/conversations/item",function(){var b=this;
EasySocial.require().script("site/conversations/mailbox").done(function(a){EasySocial.Controller("Conversations.Item",{defaultOptions:{"{checkbox}":"[data-conversationItem-checkbox]"}},function(b){return{init:function(){},"{checkbox} change":function(c){var d=a(c).is(":checked");return d?b.element.addClass("selected"):b.element.removeClass("selected")}}}),b.resolve()})}),EasySocial.module("site/conversations/filter",function(){var b=this;EasySocial.require().done(function(a){EasySocial.Controller("Conversations.Filter",{defaultOptions:{}},function(b){return{init:function(){},"{self} click":function(){{var c=b.element.data("filter"),d="."+c;
b.parent.item(d).length}if(1==a("[data-mailboxitem]").filter(".active").length){var f=a("[data-mailboxitem]").filter(".active"),g=f.data("url"),h=f.data("title"),i=f.data("mailbox");History.pushState({state:1},h,g),EasySocial.ajax("site/views/conversations/getItems",{mailbox:i,filter:c,limitstart:0},{beforeSend:function(){b.parent.toggleLoading()}}).done(function(a){return b.parent.toggleLoading(),a.length<=0?(b.parent.updateContent(""),b.parent.showEmpty()):(b.parent.hideEmpty(),b.parent.updateContent(a,i),void 0)
})}}}}),b.resolve()})}),EasySocial.module("site/conversations/read",function(){var b=this;EasySocial.require().library("dialog").script("site/conversations/composer","site/friends/suggest").language("COM_EASYSOCIAL_CONVERSATION_REPLY_POSTED_SUCCESSFULLY","COM_EASYSOCIAL_CONVERSATION_REPLY_FORM_EMPTY").done(function(a){EasySocial.Controller("Conversations.Read",{defaultOptions:{id:"",attachments:!0,location:!1,maxSize:"3mb",extensionsAllowed:"",attachmentController:null,composerController:null,"{item}":"[data-readConversation-item]","{items}":"[data-readConversation-items]","{composer}":"[data-readConversation-composer]","{replyButton}":"[data-readConversation-replyButton]","{addParticipant}":"[data-readConversation-addParticipant]","{leaveConversation}":"[data-readConversation-leaveConversation]","{delete}":"[data-readConversation-delete]","{attachments}":"[data-uploaderQueue-id]","{replyNotice}":"[data-readConversation-replyNotice]","{readLoadMore}":"[data-readconversation-load-more]",view:{messageItem:"site/conversations/read.message"}}},function(b){return{init:function(){b.composer().implement(EasySocial.Controller.Conversations.Composer,{"{uploader}":"[data-readConversation-attachment]","{location}":"[data-readConversation-location]",maxSize:b.options.maxSize,extensionsAllowed:b.options.extensionsAllowed}),b.options.composerController=b.composer().controller(),b.options.attachments&&(b.options.attachmentController=b.options.composerController.uploader().controller()),b.options.location&&(b.options.locationController=b.options.composerController.location().controller()),b.item().implement(EasySocial.Controller.Conversations.Read.Item),b.options.id=b.element.data("id")
},resetForm:function(){b.options.composerController.resetForm();var a=b.composer().controller().editorArea().mentions("controller");a.reset(),b.options.location&&b.options.locationController.removeLocation(),b.options.attachments&&b.options.attachmentController.reset()},"{readLoadMore} click":function(c){var d=a(c).data("id"),e=a(c).data("limitstart");b.readLoadMore().hide(),a(".loading-indicator").show();var f={id:d,limitstart:e};EasySocial.ajax("site/controllers/conversations/loadPrevious",f).done(function(d,e){a.buildHTML(d).prependTo(b.items()).addController("EasySocial.Controller.Conversations.Read.Item"),0==e?b.readLoadMore().hide():(b.readLoadMore().show(),a(c).data("limitstart",e))
}).always(function(){a(".loading-indicator").hide()})},"{replyButton} click":function(c,d){d.preventDefault();var e=b.options.composerController.editor().val(),f=new Array;if(e.length<=0)return b.replyNotice().html(a.language("COM_EASYSOCIAL_CONVERSATION_REPLY_FORM_EMPTY")).addClass("alert alert-error").removeClass("alert-success"),!1;b.options.attachments&&b.attachments().each(function(b,c){f.push(a(c).val())});var g={id:b.options.id,message:e};return b.options.attachments&&(g["upload-id"]=f),b.options.location&&(g.address=b.options.locationController.locationInput().val(),g.latitude=b.options.locationController.locationLatitude().val(),g.longitude=b.options.locationController.locationLongitude().val()),g.tags=b.composer().controller().editorArea().mentions("controller").toArray(),b.replyButton().attr("disabled",!0),EasySocial.ajax("site/controllers/conversations/reply",g).done(function(c){b.replyNotice().html(a.language("COM_EASYSOCIAL_CONVERSATION_REPLY_POSTED_SUCCESSFULLY")).addClass("alert alert-success").removeClass("alert-error");
var d=a(c);d.implement(EasySocial.Controller.Conversations.Read.Item),b.items().append(d),b.resetForm()}).always(function(){b.replyButton().attr("disabled",!1)}),!1},"{leaveConversation} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/confirmLeave",{id:b.options.id})})},"{addParticipant} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/addParticipantsForm",{id:b.options.id})})},"{delete} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/confirmDelete",{ids:[b.options.id]}),bindings:{"{deleteButton} click":function(){a("[data-conversation-delete-form]").submit()
}}})},addItem:function(a){b.messageList().append(b.view.messageItem({item:a})),b.textMessage().val("").focus()}}}),EasySocial.Controller("Conversations.Read.Item",{defaultOptions:{id:null,"{attachmentsWrapper}":"[data-conversation-attachment-wrapper]","{attachments}":"[data-conversation-attachment]"}},function(b){return{init:function(){b.options.id=b.element.data("id"),b.attachments().implement(EasySocial.Controller.Conversations.Read.Item.Attachment,{"{parent}":b})},removeAttachment:function(c){a(c).remove(),0==b.attachments().length&&b.attachmentsWrapper().hide()
}}}),EasySocial.Controller("Conversations.Read.Item.Attachment",{defaultOptions:{"{deleteAttachment}":"[data-attachment-delete]"}},function(b){return{init:function(){},"{deleteAttachment} click":function(c){var e=a(c).data("id");EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/confirmDeleteAttachment",{id:e}),bindings:{"{deleteButton} click":function(){EasySocial.ajax("site/controllers/conversations/deleteAttachment",{id:e}).done(function(){b.parent.removeAttachment(b.element),EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/attachmentDeleted",{})})
}).fail(function(a){b.setMessage(a)})}}})}}}),b.resolve()})}),EasySocial.module("site/dashboard/apps",function(){var b=this;EasySocial.require().library("history").done(function(a){EasySocial.Controller("Dashboard.Apps",{defaultOptions:{parent:null,pageTitle:null,"{item}":"[data-dashboardApps-item]"}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Dashboard.Apps.Item,{"{parent}":a,"{dashboard}":a.parent,pageTitle:a.options.pageTitle})}}}),EasySocial.Controller("Dashboard.Apps.Item",{defaultOptions:{}},function(b){return{init:function(){},"{self} click":function(c,d){d.preventDefault();
var e=b.element.data("layout"),f=b.element.data(e+"-url"),g=b.element.data("title"),h=b.element.data("description"),i=b.element.data("id");return"canvas"==e?(window.location=f,void 0):(g=a._.isEmpty(b.options.pageTitle)?g:b.options.pageTitle,History.pushState({state:1},g,f),b.dashboard.content().html(""),b.dashboard.updatingContents(),b.element.addClass("loading"),EasySocial.ajax("site/controllers/dashboard/getAppContents",{appId:i}).done(function(a){b.dashboard.updateHeading(g,h),b.dashboard.updateContents(a)
}).fail(function(a){return a}).always(function(){b.element.removeClass("loading")}),void 0)}}}),b.resolve()})}),EasySocial.module("site/dashboard/dashboard",function(){var b=this;EasySocial.require().script("site/dashboard/apps","site/dashboard/feeds","site/dashboard/sidebar","site/stream/filter","site/dashboard/groups","site/dashboard/events").done(function(a){EasySocial.Controller("Dashboard",{defaultOptions:{currentTitle:null,pageTitle:null,"{heading}":"[data-dashboard-heading]","{sidebar}":"[data-dashboard-sidebar]","{content}":"[data-dashboard-real-content]","{feeds}":"[data-dashboard-feeds]","{groups}":"[data-dashboard-groups]","{events}":"[data-dashboard-events]","{groupItems}":"[data-dashboard-group-item]","{eventItems}":"[data-dashboard-event-item]","{showAllFilters}":"[data-app-filters-showall]","{showAllGroups}":"[data-groups-filters-showall]","{showAllEvents}":"[data-events-filters-showall]","{appFilters}":"[data-sidebar-app-filter]","{apps}":"[data-dashboard-apps]","{saveHashTag}":"[data-hashtag-filter-save]"}},function(b){return{init:function(){b.sidebar().implement(EasySocial.Controller.Dashboard.Sidebar,{"{parent}":b}),b.feedsController=b.feeds().addController(EasySocial.Controller.Dashboard.Feeds,{"{parent}":b}),b.apps().implement(EasySocial.Controller.Dashboard.Apps,{"{parent}":b,pageTitle:b.options.pageTitle}),b.groups().implement(EasySocial.Controller.Dashboard.Groups,{"{parent}":b}),b.events().implement(EasySocial.Controller.Dashboard.Events,{"{parent}":b})
},"{showAllGroups} click":function(c){a(c).hide(),b.groupItems().removeClass("hide")},"{showAllEvents} click":function(c){a(c).hide(),b.eventItems().removeClass("hide")},"{showAllFilters} click":function(c){a(c).hide(),b.appFilters().removeClass("hide")},updateHeading:function(a,c){b.heading().find("[data-heading-title]").html(a),b.heading().find("[data-heading-desc]").html(c)},updatingContents:function(){b.element.addClass("loading")},updateContents:function(c){b.element.removeClass("loading"),a.buildHTML(c).appendTo(b.content())
},"{saveHashTag} click":function(c){var d=c.data("tag");EasySocial.dialog({content:EasySocial.ajax("site/views/stream/confirmSaveFilter",{tag:d}),bindings:{"{saveButton} click":function(){return this.inputWarning().hide(),filterName=this.inputTitle().val(),""==filterName?(this.inputWarning().show(),void 0):(EasySocial.ajax("site/controllers/stream/addFilter",{title:filterName,tag:d}).done(function(c,d){var e=a.buildHTML(c);b.feedsController.addFilterItem(e),EasySocial.dialog(d),setTimeout(function(){EasySocial.dialog().close()
},2e3)}),void 0)}}})}}}),b.resolve()})}),EasySocial.module("site/dashboard/feeds",function(){var b=this;EasySocial.require().library("history").done(function(a){EasySocial.Controller("Dashboard.Feeds",{defaultOptions:{"{item}":"[data-dashboardFeeds-item]","{filter}":"[data-dashboardFeeds-Filter-edit]"}},function(b){return{init:function(){b.item().implement(EasySocial.Controller.Dashboard.Feeds.Item,{"{parent}":b,"{dashboard}":b.parent})},addFilterItem:function(c){c.find("[data-dashboardFeeds-item]").implement(EasySocial.Controller.Dashboard.Feeds.Item,{"{parent}":b,"{dashboard}":b.parent}),a(b.element).find(".widget-filter-group").length>0?c.insertBefore(a(b.element).find(".widget-filter-group")):c.appendTo(b.element)
}}}),EasySocial.Controller("Dashboard.Feeds.Item",{defaultOptions:{}},function(b){return{clicked:!1,init:function(){},"{self} click":function(){a(".es-streams").removeClass("no-stream");var c=b.element.data("type"),d=b.element.data("id"),e=b.element.data("url"),f=b.element.data("title"),g=b.element.data("description");if(!b.clicked){b.clicked=!0;var h="[data-stream-counter-";"list"==c?h=h+c+"-"+d:h+=c,h+="]",a(h).html("0"),b.element.removeClass("has-notice");var i=a.joomla.appendTitle;"before"===i&&(f=a.joomla.sitename+(f?" - "+f:"")),"after"===i&&(f=(f?f+" - ":"")+a.joomla.sitename),History.pushState({state:1},f,e),b.dashboard.content().html(""),b.dashboard.updatingContents(),b.element.addClass("loading"),EasySocial.ajax("site/controllers/dashboard/getStream",{type:c,id:d,view:"dashboard"}).done(function(d,e){b.dashboard.updateHeading(f,g),0==e&&a(".es-streams").addClass("no-stream"),b.trigger("onStreamUpdate",[c]),window.streamFilter=c,b.dashboard.updateContents(d);
try{MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub])}catch(h){}}).fail(function(a){return a}).always(function(){b.clicked=!1,b.element.removeClass("loading")})}}}}),b.resolve()})}),EasySocial.module("site/dashboard/sidebar",function(){var b=this;EasySocial.require().library("history").done(function(){EasySocial.Controller("Dashboard.Sidebar",{defaultOptions:{"{menuItem}":"[data-dashboardSidebar-menu]","{filterBtn}":"[data-stream-filter-button]","{editIcon}":"[data-dashboardFeeds-Filter-edit]"}},function(a){return{init:function(){},"{menuItem} click":function(b){a.menuItem().removeClass("active"),b.addClass("active")
},"{editIcon} click":function(b,c){c.preventDefault(),b.route();var d=b.data("id");a.parent.content().html(""),a.parent.updatingContents(),EasySocial.ajax("site/controllers/stream/getFilter",{id:d}).done(function(b){a.parent.updateContents(b)}).fail(function(a){return a})},"{filterBtn} click":function(b,c){c.preventDefault(),b.route(),a.parent.content().html(""),a.parent.updatingContents(),EasySocial.ajax("site/controllers/stream/getFilter",{id:0}).done(function(b){a.parent.updateContents(b)}).fail(function(a){return a
})}}}),b.resolve()})}),EasySocial.module("site/stream/filter",function(){var b=this;EasySocial.require().script("site/stream/sidebar").language("COM_EASYSOCIAL_STREAM_FILTER_WARNING_TITLE_EMPTY","COM_EASYSOCIAL_STREAM_FILTER_WARNING_HASHTAG_EMPTY").done(function(a){EasySocial.Controller("Stream.Filter",{defaultOptions:{"{heading}":"[data-filter-heading]","{sidebar}":"[data-sidebar-item]","{content}":"[data-filter-real-content]"}},function(a){return{init:function(){a.sidebar().implement(EasySocial.Controller.Stream.Filter.Sidebar,{"{parent}":a})
},updateHeading:function(b,c){a.heading().find("[data-heading-title]").html(b),a.heading().find("[data-heading-desc]").html(c)},updatingContents:function(){a.element.addClass("loading")},updateContents:function(b){a.element.removeClass("loading"),a.content().html(b)}}}),EasySocial.Controller("Stream.Filter.Item",{defaultOptions:{"{title}":"[data-filter-name]","{hashtag}":"[data-filter-hashtag]","{saveBtn}":"[data-stream-filter-save]","{deleteBtn}":"[data-stream-filter-delete]","{form}":"[data-filter-inputForm]","{notice}":"[filter-form-notice]"}},function(b){return{init:function(){},"{deleteBtn} click":function(a){var c=a.data("id"),d=a.data("uid"),e=a.data("utype"),f="site/controllers/stream/deleteFilter";
if(d)var f="site/controllers/"+e+"s/deleteFilter";EasySocial.dialog({content:EasySocial.ajax("site/views/stream/confirmFilterDelete"),bindings:{"{deleteButton} click":function(){EasySocial.ajax(f,{id:c,uid:d,utype:e}).done(function(){b.element.fadeOut(),EasySocial.dialog().close()})}}})},"{saveBtn} click":function(){return a("div.control-group").removeClass("error"),b.notice().html(),b.notice().hide(),""==b.title().val()?(b.title().parents("div.control-group").addClass("error"),b.notice().html(a.language("COM_EASYSOCIAL_STREAM_FILTER_WARNING_TITLE_EMPTY")),b.notice().show(),!1):""==b.hashtag().val()?(b.hashtag().parents("div.control-group").addClass("error"),b.notice().html(a.language("COM_EASYSOCIAL_STREAM_FILTER_WARNING_HASHTAG_EMPTY")),b.notice().show(),!1):(b.form().submit(),void 0)
}}}),b.resolve()})}),EasySocial.module("site/stream/sidebar",function(){var b=this;EasySocial.require().done(function(a){EasySocial.Controller("Stream.Filter.Sidebar",{defaultOptions:{}},function(b){return{init:function(){},"{self} click":function(){a("[data-sidebar-item]").removeClass("active loading"),b.element.addClass("active");var c=b.element.data("id"),d=b.element.data("url"),e=b.element.data("title");History.pushState({state:1},e,d),b.parent.content().html(""),b.parent.updatingContents(),b.element.addClass("loading"),EasySocial.ajax("site/controllers/stream/getFilter",{id:c}).done(function(a){b.parent.updateContents(a)
}).fail(function(a){return a}).always(function(){b.element.removeClass("loading")})}}}),b.resolve()})}),EasySocial.module("site/dashboard/groups",function(){var b=this;EasySocial.require().library("history").done(function(a){EasySocial.Controller("Dashboard.Groups",{defaultOptions:{"{item}":"[data-dashboard-group-item]","{itemLink}":"[data-dashboard-group-item] > a"}},function(b){return{init:function(){},"{item} click":function(c,d){d.preventDefault(),a(".es-streams").removeClass("no-stream");{var e=a(c).data("type"),f=a(c).data("id");
a(c).data("description")}b.element.removeClass("has-notice"),a(c).find("a").route(),b.parent.content().html(""),b.parent.updatingContents(),b.element.addClass("loading"),EasySocial.ajax("site/controllers/dashboard/getStream",{type:e,id:f,view:"dashboard"}).done(function(a){b.parent.updateContents(a)})}}}),b.resolve()})}),EasySocial.module("site/dashboard/events",function(){var b=this;EasySocial.require().library("history").done(function(a){EasySocial.Controller("Dashboard.Events",{defaultOptions:{"{item}":"[data-dashboard-event-item]","{itemLink}":"[data-dashboard-event-item] > a"}},function(b){return{init:function(){},"{item} click":function(c,d){d.preventDefault(),a(".es-streams").removeClass("no-stream");
{var e=a(c).data("type"),f=a(c).data("id");a(c).data("description")}b.element.removeClass("has-notice"),a(c).find("a").route(),b.parent.content().html(""),b.parent.updatingContents(),b.element.addClass("loading"),EasySocial.ajax("site/controllers/dashboard/getStream",{type:e,id:f,view:"dashboard"}).done(function(a){b.parent.updateContents(a)})}}}),b.resolve()})}),EasySocial.module("site/events/browser",function(a){var b=this;EasySocial.require().library("popbox").script("site/events/guestState").language("COM_EASYSOCIAL_EVENTS_DETECTING_LOCATION").view("site/loading/small").done(function(){EasySocial.Controller("Events.Browser",{defaultOptions:{"{filters}":"[data-events-filters] > li","{content}":"[data-events-content]","{list}":"[data-events-list]","{items}":"[data-events-item]","{sort}":"[data-events-sorting] a","{calendar}":"[data-events-calendar]","{pastFilter}":"[data-events-past]","{pastLink}":"[data-events-past-link]","{prevDate}":"[data-events-nav-prevdate]","{nextDate}":"[data-events-nav-nextdate]","{radius}":"[data-events-radius]","{nearbyTitle}":"[data-events-nearby-title]",filter:null,categoryid:0,delayed:!1,includePast:!1,ordering:"start",hasLocation:!1,userLatitude:"",userLongitude:"",distance:10,group:null,view:{loadingContent:"site/loading/small"}}},function(b){return{init:function(){b.options.filter=b.element.data("filter"),b.options.categoryid=b.element.data("categoryid"),b.renderCalendar(),b.initItems(),b.options.delayed&&b.delayedInit()
},delayedInit:function(){if("nearby"===b.options.filter){var c=function(){EasySocial.ajax("site/controllers/events/getEvents",{filter:b.options.filter,latitude:b.options.userLatitude,longitude:b.options.userLongitude,distance:b.options.distance,ordering:b.options.ordering,includePast:b.options.includePast}).done(function(a){b.element.removeClass("loading"),b.content().html(a),b.initItems()})};if(b.options.hasLocation&&b.options.userLatitude&&b.options.userLongitude)return c();EasySocial.require().library("gmaps").done(function(){a.GMaps.geolocate({success:function(a){return b.options.userLatitude=a.coords.latitude,b.options.userLongitude=a.coords.longitude,c()
}})})}},renderCalendar:function(){EasySocial.ajax("site/views/events/renderCalendar",{}).done(function(a){b.calendar().html(a).addController("EasySocial.Controller.Events.Browser.Calendar",{"{parent}":b}),b.calendar().trigger("calendarLoaded")})},initItems:function(){b.items().addController("EasySocial.Controller.Events.Browser.Item",{"{parent}":b})},"{filters} click":function(a,c){return c.preventDefault(),b.filters().removeClass("active"),a.addClass("active"),b.content().html("&nbsp;"),a.find("a").route(),b.options.filter=a.data("events-filters-type"),b.options.categoryid=a.data("events-filters-categoryid"),"nearby"==b.options.filter?b.filterByNearby():(b.element.addClass("loading"),EasySocial.ajax("site/controllers/events/getEvents",{filter:b.options.filter,categoryid:b.options.categoryid}).done(function(a){b.element.removeClass("loading"),b.content().html(a),b.initItems()
}),void 0)},filterByNearby:function(){var c=function(){EasySocial.ajax("site/controllers/events/getEvents",{filter:b.options.filter,latitude:b.options.userLatitude,longitude:b.options.userLongitude}).done(function(a){b.element.removeClass("loading"),b.content().html(a),b.initItems()})};return b.options.hasLocation&&b.options.userLatitude&&b.options.userLongitude?(b.element.addClass("loading"),c()):(b.content().html('<div class="es-detecting-location"><i class="fa fa-globe es-muted"></i> '+a.language("COM_EASYSOCIAL_EVENTS_DETECTING_LOCATION")+' <i class="icon-loader"></i></div>'),EasySocial.require().library("gmaps").done(function(){a.GMaps.geolocate({success:function(a){return b.options.userLatitude=a.coords.latitude,b.options.userLongitude=a.coords.longitude,b.options.hasLocation=!0,c()
}})}),void 0)},"{sort} click":function(a,c){c.preventDefault(),b.sort().removeClass("active"),a.addClass("active"),b.list().html(b.view.loadingContent());var d=a.data("ordering"),e=a.data("filter"),f=a.data("categoryid"),g=b.pastFilter().is(":checked")?1:0;return b.setPastLink(),b.setSortLink(),a.route(),"nearby"===e?(EasySocial.ajax("site/controllers/events/getEvents",{filter:b.options.filter,latitude:b.options.userLatitude,longitude:b.options.userLongitude,distance:b.options.distance,ordering:d,sort:1,includePast:g}).done(function(a){b.list().html(a),b.initItems()
}),void 0):(EasySocial.ajax("site/controllers/events/getEvents",{filter:e,categoryid:f,ordering:d,sort:1,includePast:g,group:b.options.group}).done(function(a){b.list().html(a),b.initItems()}),void 0)},"{pastFilter} change":function(a){var c=b.sort(".active"),d=a.is(":checked")?1:0,e=c.data("ordering"),f=c.data("filter"),g=c.data("categoryid");return b.list().html(b.view.loadingContent()),b.pastLink().route(),b.setPastLink(),b.setSortLink(),"nearby"===f?(EasySocial.ajax("site/controllers/events/getEvents",{filter:b.options.filter,latitude:b.options.userLatitude,longitude:b.options.userLongitude,distance:b.options.distance,ordering:e,sort:1,includePast:d}).done(function(a){b.list().html(a),b.initItems()
}),void 0):(EasySocial.ajax("site/controllers/events/getEvents",{filter:f,categoryid:g,ordering:e,sort:1,includePast:d,group:b.options.group}).done(function(a){b.list().html(a),b.initItems()}),void 0)},"{pastLink} click":function(a,c){c.preventDefault(),b.pastFilter().trigger("click")},setPastLink:function(){var a=b.pastLink(),c=b.pastFilter().is(":checked")?1:0,d=b.sort(".active").data("ordering"),e=a.data(d+"-"+(c?"nopast":"past"));a.attr("href",e)},setSortLink:function(){var c=b.pastFilter().is(":checked")?1:0;
a.each(b.sort(),function(d,e){var e=a(e);e.attr("href",b.pastLink().data(e.data("ordering")+"-"+(c?"past":"nopast")))})},"{prevDate} click":function(a,c){c.preventDefault(),a.route(),b.filters().removeClass("active"),b.element.addClass("loading"),b.content().html("&nbsp;"),EasySocial.ajax("site/controllers/events/getEvents",{filter:"date",date:a.data("events-nav-prevdate")}).done(function(a,c){b.element.removeClass("loading"),b.content().html(a),b.initItems(),c.isToday&&(b.filters().removeClass("active"),b.filters('[data-events-filters-type="date"]').addClass("active")),c.isTomorrow&&(b.filters().removeClass("active"),b.filters('[data-events-filters-type="tomorrow"]').addClass("active")),c.isCurrentMonth&&(b.filters().removeClass("active"),b.filters('[data-events-filters-type="month"]').addClass("active")),c.isCurrentYear&&(b.filters().removeClass("active"),b.filters('[data-events-filters-type="year"]').addClass("active"))
})},"{nextDate} click":function(a,c){c.preventDefault(),a.route(),b.filters().removeClass("active"),b.element.addClass("loading"),b.content().html("&nbsp;"),EasySocial.ajax("site/controllers/events/getEvents",{filter:"date",date:a.data("events-nav-nextdate")}).done(function(a,c){b.element.removeClass("loading"),b.content().html(a),b.initItems(),c.isToday&&(b.filters().removeClass("active"),b.filters('[data-events-filters-type="date"]').addClass("active")),c.isTomorrow&&(b.filters().removeClass("active"),b.filters('[data-events-filters-type="tomorrow"]').addClass("active")),c.isCurrentMonth&&(b.filters().removeClass("active"),b.filters('[data-events-filters-type="month"]').addClass("active")),c.isCurrentYear&&(b.filters().removeClass("active"),b.filters('[data-events-filters-type="year"]').addClass("active"))
})},"{radius} change":function(c){var e=b.sort(".active"),f=b.pastFilter().is(":checked")?1:0,g=e.data("ordering"),j=(e.data("filter"),e.data("categoryid"),c.val());b.options.distance=j,b.list().html(b.view.loadingContent()),EasySocial.ajax("site/controllers/events/getEvents",{filter:"nearby",latitude:b.options.userLatitude,longitude:b.options.userLongitude,distance:b.options.distance,ordering:g,includePast:f,sort:1}).done(function(c,d){b.list().html(c),b.initItems(),History.pushState({state:1},document.title,d.hrefs[g][f?"past":"nopast"]),b.pastLink().attr("href",d.hrefs[g][f?"nopast":"past"]),a.each(b.sort(),function(c,e){var e=a(e);
e.attr("href",d.hrefs[e.data("ordering")][f?"past":"nopast"]),b.pastLink().attr("data-"+e.data("ordering")+"-past",d.hrefs[e.data("ordering")].past),b.pastLink().attr("data-"+e.data("ordering")+"-nopast",d.hrefs[e.data("ordering")].nopast)}),b.nearbyTitle().text(d.title)})}}}),EasySocial.Controller("Events.Browser.Item",{defaultOptions:{id:null,"{action}":"[data-item-action]","{unfeature}":"[data-item-unfeature]","{feature}":"[data-item-feature]","{unpublish}":"[data-item-unpublish]","{delete}":"[data-item-delete]","{guestStateWrap}":"[data-guest-state-wrap]"}},function(a){return{init:function(){a.options.id=a.element.data("id"),a.initGuestStates()
},initGuestStates:function(){a.guestStateWrap().addController("EasySocial.Controller.Events.GuestState")},"{action} click":function(b){EasySocial.dialog({content:EasySocial.ajax("site/views/events/itemActionDialog",{id:a.options.id,action:b.data("item-action"),from:"list"})})},"{delete} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/events/deleteEventDialog",{id:a.options.id})})}}}),EasySocial.Controller("Events.Browser.Calendar",{defaultOptions:{"{nav}":"[data-calendar-nav]","{day}":".day","{month}":"[data-month]",view:{loading:"site/loading/small"}}},function(b){return{init:function(){},"{self} calendarLoaded":function(){b.day(".has-events").each(function(b,c){c=a(c);
var d=c.find(".event-details").html();c.popbox({content:d,id:"fd",component:"es",type:"events-calendar-filter",position:"bottom-left",toggle:"hover"})});var c=b.month(".has-events");if(c.length>0){var d=c.find(".event-details").html();c.popbox({content:d,id:"fd",component:"es",type:"events-calendar-filter",position:"bottom-left",toggle:"hover"})}},"{nav} click":function(a){var d=a.data("calendar-nav");b.element.html(b.view.loading()),EasySocial.ajax("site/views/events/renderCalendar",{date:d}).done(function(a){b.element.html(a).trigger("calendarLoaded")
})},"{day} click":function(a,c){c.preventDefault(),a.find("a[data-route]:first").route(),b.loadEvents(a.data("date"))},"{day} popboxActivate":function(c,d,e){e.tooltip.find("a[data-route]").on("click",function(c){c.preventDefault(),a(this).route(),b.loadEvents(a(this).data("date"))})},"{month} click":function(a,c){c.preventDefault(),a.find("a[data-route]:first").route(),b.loadEvents(a.data("month"))},"{month} popboxActivate":function(c,d,e){e.tooltip.find("a[data-route]").on("click",function(c){c.preventDefault(),a(this).route(),b.loadEvents(a(this).data("month"))
})},loadEvents:function(a){b.parent.filters().removeClass("active"),b.parent.element.addClass("loading"),b.parent.content().html("&nbsp;"),EasySocial.ajax("site/controllers/events/getEvents",{filter:"date",date:a}).done(function(a,c){b.parent.element.removeClass("loading"),b.parent.content().html(a),b.parent.initItems(),c.isToday&&(b.parent.filters().removeClass("active"),b.parent.filters('[data-events-filters-type="date"]').addClass("active")),c.isTomorrow&&(b.parent.filters().removeClass("active"),b.parent.filters('[data-events-filters-type="tomorrow"]').addClass("active")),c.isCurrentMonth&&(b.parent.filters().removeClass("active"),b.parent.filters('[data-events-filters-type="month"]').addClass("active")),c.isCurrentYear&&(b.parent.filters().removeClass("active"),b.parent.filters('[data-events-filters-type="year"]').addClass("active"))
})}}}),b.resolve()})}),EasySocial.module("site/events/guestState",function(){var b=this;EasySocial.require().language("COM_EASYSOCIAL_EVENTS_GUEST_PENDING").done(function(a){EasySocial.Controller("Events.GuestState",{defaultOptions:{id:null,allowMaybe:1,allowNotGoingGuest:1,hidetext:1,refresh:!1,"{guestAction}":"[data-guest-action]","{guestState}":"[data-guest-state]","{request}":"[data-guest-request]","{withdraw}":"[data-guest-withdraw]","{respond}":"[data-guest-respond]"}},function(b){return{init:function(){b.options.id=b.element.data("id"),b.options.allowMaybe=b.element.data("allowmaybe"),b.options.allowNotGoingGuest=b.element.data("allownotgoingguest"),b.options.hidetext=b.element.data("hidetext"),b.options.refresh=b.element.is("[data-refresh]")
},showError:function(a){EasySocial.dialog({content:a})},stateClasses:{going:"btn-es-success",maybe:"btn-es-info",notgoing:"btn-es-danger"},"{guestAction} click":function(c){var d=c.data("guestAction");if("state"===d){var e=c.data("guestState");b.guestAction().removeClass("btn-es-success btn-es-info btn-es-danger"),c.addClass(b.stateClasses[e]),"notgoing"!==e||b.options.allowNotGoingGuest?b.response(e).done(function(){return b.options.refresh?location.reload():void 0}).fail(function(a){c.removeClass(b.stateClasses[d]),b.showError(a.message)
}):EasySocial.dialog({content:EasySocial.ajax("site/views/events/notGoingDialog",{id:b.options.id}),bindings:{"{closeButton} click":function(){EasySocial.ajax("site/views/events/refreshGuestState",{id:b.options.id,hidetext:b.options.hidetext}).done(function(a){b.element.html(a),EasySocial.dialog().close()})},"{submitButton} click":function(){b.response("notgoing").done(function(){return b.options.refresh?location.reload():(EasySocial.ajax("site/views/events/refreshGuestState",{id:b.options.id,hidetext:b.options.hidetext}).done(function(a){b.element.html(a),EasySocial.dialog().close()
}),void 0)})}}})}"request"===d&&EasySocial.dialog({content:EasySocial.ajax("site/views/events/requestDialog",{id:b.options.id}),bindings:{"{submitButton} click":function(){c.attr("data-guest-action","withdraw").data("guestAction","withdraw").removeAttr("data-guest-request").attr("data-guest-withdraw","").text(a.language("COM_EASYSOCIAL_EVENTS_GUEST_PENDING")),b.response(d),EasySocial.dialog().close()}}}),"withdraw"===d&&EasySocial.dialog({content:EasySocial.ajax("site/views/events/withdrawDialog",{id:b.options.id}),bindings:{"{submitButton} click":function(){b.response("withdraw").done(function(){EasySocial.ajax("site/views/events/refreshGuestState",{id:b.options.id,hidetext:b.options.hidetext}).done(function(a){b.element.html(a),EasySocial.dialog().close()
})})}}}),"attend"===d&&b.response("going").done(function(){EasySocial.ajax("site/views/events/refreshGuestState",{id:b.options.id,hidetext:b.options.hidetext}).done(function(a){return b.options.refresh?location.reload():(void 0!==a&&(b.element.html(a),EasySocial.dialog().close()),void 0)})})},response:function(a){return EasySocial.ajax("site/controllers/events/guestResponse",{id:b.options.id,state:a})}}}),b.resolve()})}),EasySocial.module("site/events/buttonState",function(){var b=this;EasySocial.require().language("COM_EASYSOCIAL_EVENTS_GUEST_PENDING").done(function(a){EasySocial.Controller("Events.ButtonState",{defaultOptions:{id:null,allowMaybe:1,allowNotGoingGuest:1,hidetext:1,refresh:!1,isPopbox:0,"{guestAction}":"[data-guest-action]","{guestState}":"[data-guest-state]","{request}":"[data-guest-request]","{withdraw}":"[data-guest-withdraw]","{respond}":"[data-guest-respond]","{rsvpButton}":"[data-event-rsvp-button]"}},function(b){return{init:function(){b.options.id=b.element.data("id"),b.options.allowMaybe=b.element.data("allowmaybe"),b.options.allowNotGoingGuest=b.element.data("allownotgoingguest"),b.options.hidetext=b.element.data("hidetext"),b.options.isPopbox=b.element.data("ispopbox")
},showError:function(a){EasySocial.dialog({content:a.message})},stateClasses:{going:"btn-es-success",maybe:"btn-es-info",notgoing:"btn-es-danger"},refreshButton:function(){EasySocial.ajax("site/views/events/refreshButtonState",{id:b.options.id,hidetext:b.options.hidetext,isPopbox:b.options.isPopbox}).done(function(a){b.element.replaceWith(a)})},"{rsvpButton} popboxActivate":function(c,d,e){var f="div#"+e.id+".popbox-"+e.type+" [data-event-button-container]";a(f).addController("EasySocial.Controller.Events.ButtonState.Popbox",{"{parent}":b})
},"{guestAction} click":function(a){b.doAction(a)},doAction:function(c){var d=c.data("guestAction");if("state"===d){var e=c.data("guestState");"notgoing"!==e||b.options.allowNotGoingGuest?b.response(e).done(function(){b.refreshButton()}).fail(function(a){c.removeClass(b.stateClasses[d]),b.showError(a)}):EasySocial.dialog({content:EasySocial.ajax("site/views/events/notGoingDialog",{id:b.options.id}),bindings:{"{closeButton} click":function(){b.refreshButton(),EasySocial.dialog().close()},"{submitButton} click":function(){b.response("notgoing").done(function(){b.refreshButton(),EasySocial.dialog().close()
})}}})}"request"===d&&EasySocial.dialog({content:EasySocial.ajax("site/views/events/requestDialog",{id:b.options.id}),bindings:{"{submitButton} click":function(){c.attr("data-guest-action","withdraw").data("guestAction","withdraw").removeAttr("data-guest-request").attr("data-guest-withdraw","").text(a.language("COM_EASYSOCIAL_EVENTS_GUEST_PENDING")),b.response(d),EasySocial.dialog().close()}}}),"withdraw"===d&&EasySocial.dialog({content:EasySocial.ajax("site/views/events/withdrawDialog",{id:b.options.id}),bindings:{"{submitButton} click":function(){b.response("withdraw").done(function(){b.refreshButton(),EasySocial.dialog().close()
})}}}),"attend"===d&&b.response("going").done(function(){b.refreshButton(),EasySocial.dialog().close()})},response:function(a){return EasySocial.ajax("site/controllers/events/guestResponse",{id:b.options.id,state:a})}}}),EasySocial.Controller("Events.ButtonState.Popbox",{defaultOptions:{"{guestAction}":"[data-guest-action]"}},function(a){return{init:function(){console.log("Events.ButtonState.Popbox")},"{guestAction} click":function(b){a.parent.doAction(b)}}}),b.resolve()})}),EasySocial.module("site/events/create",function(){var b=this;
EasySocial.require().script("validate","field").done(function(){EasySocial.Controller("Events.Create",{defaultOptions:{previousLink:null,"{fields}":"[data-create-field]","{previous}":"[data-create-previous]","{next}":"[data-create-submit]"}},function(a){return{init:function(){a.fields().addController("EasySocial.Controller.Field.Base")},"{previous} click":function(){window.location=a.options.previousLink},"{next} click":function(b){b.enabled()&&(b.disabled(!0),b.addClass("btn-loading"),a.element.validate().done(function(){b.removeClass("btn-loading"),b.enabled(!0),a.element.submit()
}).fail(function(){b.removeClass("btn-loading"),b.enabled(!0),EasySocial.dialog({content:EasySocial.ajax("site/views/profile/showFormError")})}))}}}),b.resolve()})}),EasySocial.module("site/events/createRecurring",function(){var b=this;EasySocial.Controller("Events.CreateRecurring",{defaultOptions:{schedule:[],eventId:null,"{progress}":"[data-progress-bar]","{form}":"[data-form]"}},function(a){return{init:function(){a.start()},counter:0,start:function(){return void 0===a.options.schedule[a.counter]?a.completed():(a.create(a.options.schedule[a.counter]).done(function(){a.counter++;
var b=Math.ceil(a.counter/a.options.schedule.length*100);a.progress().css({width:b+"%"}),a.start()}).fail(function(a){console.log(a)}),void 0)},create:function(b){return EasySocial.ajax("site/controllers/events/createRecurring",{eventId:a.options.eventId,datetime:b})},completed:function(){a.progress().parent().removeClass("progress-info").addClass("progress-success"),a.form().submit()}}}),b.resolve()}),EasySocial.module("site/events/edit",function(a){var b=this;EasySocial.require().script("validate","field").done(function(){EasySocial.Controller("Events.Edit",{defaultOptions:{id:null,isRecurring:0,hasRecurring:0,"{form}":"[data-form]","{nav}":"[data-step-nav]","{content}":"[data-step-content]","{fields}":"[data-edit-field]","{saveButton}":"[data-edit-save]","{saveApply}":'input[name="applyRecurring"]'}},function(b){return{init:function(){b.fields().addController("EasySocial.Controller.Field.Base",{mode:"edit"})
},errorFields:[],"{nav} click":function(c){var e=a(c).data("for");b.content().hide(),b.nav().removeClass("active"),c.addClass("active"),b.content().filterBy("id",e).show().find(b.fields.selector).trigger("show")},"{nav} error":function(a){a.addClass("error")},"{nav} clear":function(a){b.errorFields.length<1&&a.removeClass("error")},"{fields} error":function(a){b.triggerStepError(a)},"{fields} clear":function(a){b.clearStepError(a)},"{fieldItem} onError":function(a){b.triggerStepError(a)},triggerStepError:function(c){var d=c.data("id"),e=c.parents(b.content.selector).data("id");
a.inArray(d,b.errorFields)<0&&b.errorFields.push(d),b.nav().filterBy("for",e).trigger("error")},clearStepError:function(c){var d=c.data("id"),e=c.parents(b.content.selector).data("id");b.errorFields=a.without(b.errorFields,d),b.nav().filterBy("for",e).trigger("clear")},"{saveButton} click":function(a,c){c.preventDefault(),a.addClass("btn-loading"),b.form().validate().done(function(){"all"===a.data("editSave")&&b.saveApply().val(1),b.form().submit()}).fail(function(){a.removeClass("btn-loading"),EasySocial.dialog({content:EasySocial.ajax("site/views/profile/showFormError")})
})}}}),b.resolve()})}),EasySocial.module("site/events/item",function(){var b=this;EasySocial.template("info/item",'<li data-sidebar-item><a class="ml-20" href="[%= url %]" title="[%= title %]" data-info-item data-info-index="[%= index %]"><i class="fa fa-info-circle mr-5"></i> [%= title %]</a></li>'),EasySocial.require().script("site/friends/suggest","site/events/guestState").view("site/loading/small").library("history").done(function(a){EasySocial.Controller("Events.Item",{defaultOptions:{id:null,"{filterStreamList}":"[data-filter-stream-list]","{sidebarItem}":"[data-sidebar-item]","{addFilter}":"[data-filter-add]","{editFilter}":"[data-filter-edit]","{filterStream}":"[data-filter-stream]","{filterApp}":"[data-filter-app]","{showAllFilters}":"[data-filter-showall]","{apps}":"[data-app-item]","{content}":"[data-content]","{saveHashtag}":"[data-hashtag-filter-save]","{invite}":"[data-action-invite]","{unpublish}":"[data-action-unpublish]","{delete}":"[data-action-delete]","{guestStateWrap}":"[data-guest-state-wrap]","{info}":"[data-info]","{infoItem}":"[data-info-item]","{menuItem}":"[data-dashboardSidebar-menu]",view:{infoItem:"info/item",loading:"site/loading/small"}}},function(b){return{init:function(){b.initGuestStates()
},initGuestStates:function(){b.guestStateWrap().addController("EasySocial.Controller.Events.GuestState")},setActive:function(a){b.sidebarItem().removeClass("active"),a.parents(b.sidebarItem.selector).addClass("active")},setLoading:function(){b.content().html(""),b.element.addClass("loading")},updateContents:function(a){b.element.removeClass("loading"),b.content().html(a)},"{showAllFilters} click":function(a){a.hide(),b.sidebarItem().show()},"{editFilter} click":function(a,c){c.preventDefault(),a.route(),b.setLoading(),b.getFilter(a.data("id")),b.setActive(a.parents("[data-sidebar-item]"))
},"{addFilter} click":function(a,c){c.preventDefault(),a.route(),b.setActive(a),b.setLoading(),b.getFilter(0)},getFilter:function(a){EasySocial.ajax("site/controllers/events/getFilter",{filterId:a,eventId:b.options.id}).always(function(a){b.updateContents(a)})},"{filterApp} click":function(a,c){c.preventDefault(),a.route(),b.setActive(a),b.setLoading(),b.getStream(a.data("id"),"apps")},"{filterStream} click":function(a,c){c.preventDefault(),a.route(),b.setActive(a),b.setLoading(),b.getStream(a.data("id"),a.data("type"))
},"{menuItem} click":function(c){b.menuItem().removeClass("active"),a(c).addClass("active")},getStream:function(a,c){EasySocial.ajax("site/controllers/events/getStream",{id:a,type:c,view:"events",eventId:b.options.id}).always(function(a){b.updateContents(a)})},"{saveHashtag} click":function(c){var d=c.data("tag");EasySocial.dialog({content:EasySocial.ajax("site/views/stream/confirmSaveFilter",{tag:d}),bindings:{"{saveButton} click":function(){this.inputWarning().hide();var c=this.inputTitle().val();return""==c?(this.inputWarning().show(),void 0):(EasySocial.ajax("site/controllers/events/addFilter",{title:c,tag:d,id:b.options.id}).done(function(c,d){var e=a.buildHTML(c);
b.filterStreamList().append(e),EasySocial.dialog(d),setTimeout(function(){EasySocial.dialog().close()},2e3)}),void 0)}}})},"{apps} click":function(a,c){c.preventDefault(),a.route(),b.setActive(a),b.setLoading(),EasySocial.ajax("site/controllers/events/getAppContents",{appId:a.data("app-id"),eventId:b.options.id}).always(function(a){b.updateContents(a)})},"{info} click":function(c,d){d.preventDefault(),c.route(),b.setActive(c),b.setLoading();var e=c.data("loaded");return e?(b.infoItem().eq(0).trigger("click"),void 0):(c.enabled()&&(c.disabled(!0),EasySocial.ajax("site/controllers/events/initInfo",{eventId:b.options.id}).done(function(d){c.data("loaded",1);
var e=c.parent("[data-sidebar-item]");a.each(d.reverse(),function(a,c){c.hide||e.after(b.view.infoItem({url:c.url,title:c.title,index:c.index})),c.html&&(b.updateContents(c.html),b.content().find("[data-field]").trigger("onShow"))});var f=b.infoItem().eq(0);b.setActive(f),a(document).prop("title",f.attr("title")),c.enabled(!0)}).fail(function(a){c.enabled(!0),b.updateContents(a.message)})),void 0)},"{infoItem} click":function(a,c){c.preventDefault(),a.route(),b.setActive(a),b.setLoading();var d=a.data("info-index");
EasySocial.ajax("site/controllers/events/getInfo",{eventId:b.options.id,index:d}).done(function(a){b.updateContents(a),b.content().find("[data-field]").trigger("onShow")}).fail(function(a){b.updateContents(a.message)})},"{invite} click":function(){EasySocial.dialog({content:b.view.loading(),width:400,heigth:150}),EasySocial.ajax("site/views/events/inviteFriendsDialog",{id:b.options.id}).done(function(a){EasySocial.dialog({content:a})})},"{unpublish} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/events/unpublishEventDialog",{id:b.options.id})})
},"{delete} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/events/deleteEventDialog",{id:b.options.id})})}}}),b.resolve()})}),EasySocial.module("site/events/update",function(a){var b=this;EasySocial.Controller("Events.Update",{defaultOptions:{postdata:{},updateids:[],schedule:[],eventId:null,"{progress}":"[data-progress-bar]","{form}":"[data-form]"}},function(b){return{init:function(){b.startUpdate()},updateCounter:0,createCounter:0,updateProgressBar:function(){var a=Math.ceil((b.updateCounter+b.createCounter)/(b.options.updateids.length+b.options.schedule.length)*100);
b.progress().css({width:a+"%"})},startUpdate:function(){return void 0===b.options.updateids[b.updateCounter]?b.startCreate():(b.update(b.options.updateids[b.updateCounter]).done(function(){b.updateCounter++,b.updateProgressBar(),b.startUpdate()}).fail(function(a,b){console.log(a,b)}),void 0)},update:function(c){var d=a.extend({},b.options.postdata,{id:c,applyRecurring:1});return EasySocial.ajax("site/controllers/events/update",d)},startCreate:function(){return void 0===b.options.schedule[b.createCounter]?b.completed():(b.create(b.options.schedule[b.createCounter]).done(function(){b.createCounter++,b.updateProgressBar(),b.startCreate()
}).fail(function(a,b){console.log(a,b)}),void 0)},create:function(a){return EasySocial.ajax("site/controllers/events/createRecurring",{eventId:b.options.eventId,datetime:a})},completed:function(){b.progress().parent().removeClass("progress-info").addClass("progress-success"),b.form().submit()}}}),b.resolve()}),EasySocial.module("site/explorer",function(a){var b=this,c="is-selected",d=".is-selected",f=".is-checked",g=":not(.is-selected)",h="is-active",i=".is-active",j="fileSelect",k="fileDeselect",l="folderActivate",m="folderDeactivate",n="fileInsert",o="folderInsert",p="fileRemove",q="folderRemove",r="fileUse",s="serviceRequest";
a.template("explorer/folder",'<div class="fd-explorer-folder" data-id="[%== data.id %]">[%== data.name %]<a href="javascript: void(0);" class="fd-folder-remove-button" data-fd-explorer-delete-folder-button><i class="fa fa-remove"></i></a></div>'),a.template("explorer/fileGroup",'<div class="fd-explorer-file-group" data-folder="[%== data.id %]" data-plupload-dropsite></div>'),a.template("explorer/file",'<div class="fd-explorer-file" data-id="[%== data.id %]">[%== data.name %]</div>'),EasySocial.require().script("site/explorer/uploader").done(),a.Controller("Explorer",{pluginName:"explorer",hostname:"explorer",defaultOptions:{view:{folder:"explorer/folder",fileGroup:"explorer/fileGroup",file:"explorer/file"},layout:{fileItemHeight:52},uid:null,type:null,disableValidation:!1,mockError:!1,controllerName:null,"{browser}":".fd-explorer-browser","{viewport}":".fd-explorer-viewport","{folderGroup}":".fd-explorer-folder-group","{folder}":".fd-explorer-folder","{fileGroup}":".fd-explorer-file-group","{file}":".fd-explorer-file","{button}":"[data-fd-explorer-button]","{mockError}":"[name=mock_error]","{disableValidation}":"[name=disable_validation]","{fileInput}":"[name=file]","{logs}":"[data-alertlog]","{togglefunky}":".togglefunky","{funky}":".fd-explorer-funky","{serviceState}":".service-state","{selectAllCheckbox}":"[data-fd-explorer-select-all]","{selectCheckbox}":"[data-fd-explorer-select]","{deleteButton}":"[data-fd-explorer-delete-button]","{deleteFolderButton}":"[data-fd-explorer-delete-folder-button]"}},function(b,e,t){return{init:function(){b.options.type=b.element.data("type"),b.options.uid=b.element.data("uid"),b.options.controllerName=b.element.data("controller-name"),a.module("easysocial/site/explorer/uploader").done(function(a){b.addPlugin("uploader",a)
}),b.services.getFolders().done(function(a){b.insertFolder(a),b.folder(":first").click()}),b.viewport().on("scroll",a.debounce(b.viewportScroll,250))},baseParams:function(){return{uid:t.data("uid"),type:t.data("type")}},exception:function(c){var d=b.logs();switch(a.isPlainObject(c)||(c={message:c,type:"error"}),c.type){case"error":d.switchClass("alert-error").html(c.message),EasySocial.debug&&console.error(c.message);break;case"warning":d.switchClass("alert-warning").html(c.message),EasySocial.debug&&console.warn(c.message);
break;case"success":d.switchClass("alert-success").html(c.message),EasySocial.debug&&console.log(c.message);break;case"info":default:d.switchClass("alert-info").html(c.message),EasySocial.debug&&console.log(c.message)}return c},library:{file:{},folder:{}},data:function(a,c){return b.library[a][c]},addData:function(c,d){return a.isPlainObject(d)&&(d=[d]),a.isArray(d)?(a.each(d,function(d){a.isPlainObject(this)||b.exception("Skipping invalid "+c+" data at index "+d+"."),null===this.id&&(this.id=0),b.library[c][this.id]=this
}),void 0):b.exception("Unable to add "+c+" to library due to invalid data given.")},removeData:function(a,c){delete b.library[a][c]},"{folder} click":function(a){b.activateFolder(a.data("id"))},currentFolder:function(){return b.folder(i).data("id")},activateFolder:function(a){var c=b.folder().filterBy("id",a),d=b.data("folder",a);c.length<1||(b.deactivateFolder(b.folder(i).data("id")),c.addClass(h),b.trigger(l,[a,c,d]))},deactivateFolder:function(a){var c=b.folder().filterBy("id",a),d=c.data("folder");c.length<1||(c.removeClass(h),b.trigger(m,[a,c,d]))
},selectedFolder:function(){return b.currentFolder()},"{file} click":function(a,c){var d=c.metaKey||c.ctrlKey;d||b.deselectAllFiles(),b.toggleFile(a.data("id"))},toggleFile:function(a){var d=b.file().filterBy("id",a),e=d.hasClass(c)?"deselectFile":"selectFile";d.length<1||b[e](a)},selectFile:function(a){var d=b.file().filterBy("id",a),e=b.data("file",a);d.length<1||(d.addClass(c),b.trigger(j,[a,d,e]))},deselectFile:function(a){var d=b.file().filterBy("id",a),e=d.data("file",a);d.length<1||(d.removeClass(c),b.trigger(k,[a,d,e]))
},selectAllFiles:function(){b.file(g).each(function(){b.selectFile(a(this).data("id"))})},deselectAllFiles:function(){b.file(d).each(function(){b.deselectFile(a(this).data("id"))})},selectedFile:function(){return b.selectedFiles()[0]},selectedFiles:function(){var e,c=[],e=b.file(f);return e.length<1&&(e=b.file(d)),e.each(function(){var b=a(this).data("id");c.push(b)}),c},insertFolder:function(c){a.isArray(c)||(c=[c]);var d=c[0];if(!a.isPlainObject(d))return b.exception("Invalid folder data given to be inserted into the folder group.");
var e=b.folderGroup();if(e.length<1)return b.exception("Could not locate folder group element.");var f="";a.each(c,function(){null===this.id&&(this.id=0),f+=b.view.folder(!0,{data:this})}),f=a.buildHTML(f).appendTo(e),b.trigger(o,[f,c])},prependFile:function(c){if(!a.isPlainObject(c))return b.exception("Invalid file data given to be inserted.");var d=b.fileGroup().filterBy("folder",c.folder);if(d.length<1)return b.exception("Could not locate file group element for folder id "+c.folder+".");var e=c.html||b.view.file(!0,{data:c});
a.buildHTML(e).data("finalized",!0).prependTo(d)},insertFile:function(c,d){if(a.isArray(c)||(c=[c]),void 0===d){var e=c[0];if(!a.isPlainObject(e))return b.exception("Invalid file data given to be inserted.");d=e.folder}var f=b.fileGroup().filterBy("folder",d);if(f.length<1)return b.exception("Could not locate file group element for folder id "+c.folder+".");var g=[];a.each(c,function(){var c=this;b.file().filterBy("id",this.id).each(function(){var d=a(this);if(!d.data("finalized")){var e=a.buildHTML(c.html||b.view.file(!0,{data:c})).data("finalized",!0);
d.replaceWith(e)}})}),b.trigger(n,[g,c])},removeFolder:function(a){var d,c=b.folder().filterBy("id",a);c.length<1&&(d=b.exception("Could not locate to remove folder element for folder id "+a+".")),c.remove();var e=b.fileGroup().filterBy("folder",a);e.length<1&&(d=b.exception("Could not locate to remove file group element for folder id "+a+".")),e.remove(),b.trigger(q,[a,d])},removeFile:function(a){var d,c=b.file().filterBy("id",a);c.length<1&&(d=b.exception("Could not locate to remove file element for file id "+a+".")),c.remove(),b.trigger(p,[a,d])
},service:function(c,d,f){b.serviceState().switchClass("state-busy");var g=EasySocial.ajax(t.data("url"),a.extend({hook:c,error:e.mockError},d),f).always(function(){b.serviceState().switchClass("state-idle")}).fail(function(a){b.exception(a)});return b.trigger(s,[c,g,d]),g},"{button} click":function(a){var c=a.attr("data-fd-explorer-button"),d=b.services[c];d&&d()},services:{getFolders:function(c){var d={start:0,limit:100},e=b.service("getFolders",a.extend(b.baseParams(),d,c)).done(function(a){b.addData("folder",a)
});return e},addFolder:function(c){c||(c={name:prompt(a.language("COM_EASYSOCIAL_EXPLORER_ENTER_FOLDER_NAME"))});var d={name:""};if(c=a.extend(b.baseParams(),d,c),!c.name&&!e.disableValidation)return b.exception({message:a.language("COM_EASYSOCIAL_EXPLORER_INVALID_FOLDER_NAME"),type:"error"}),void 0;var f=b.service("addFolder",c).done(function(a){b.addData("folder",a),b.insertFolder(a)});return f},removeFolder:function(c){var d={id:b.selectedFolder()};if(!e.disableValidation&&void 0===b.selectedFolder())return b.exception("No folder selected"),void 0;
var f=b.service("removeFolder",a.extend(b.baseParams(),d,c)).done(function(a){b.removeFolder(a)});return f},getFiles:function(c){var d={start:0,limit:100},e=b.service("getFiles",a.extend(b.baseParams(),d,c)).done(function(a){b.addData("file",a)});return e},addFile:function(c){var d={id:b.currentFolder(),files:b.fileInput()};if(!e.disableValidation&&!b.fileInput().val())return b.exception("No file chosen yet."),void 0;var f=b.service("addFile",a.extend(b.baseParams(),d,c),{type:"iframe"}).done(function(a){console.log("Upload returned data:",a),b.addData("file",a),b.prependFile(a),b.exception({message:"Added file "+a.name,type:"success"})
});return f},removeFile:function(c){var d={id:b.selectedFiles()},c=a.extend(b.baseParams(),d,c);if(!e.disableValidation&&a.isArray(c.id)&&c.length<1)return b.exception("No file selected"),void 0;var f=b.service("removeFile",c).done(function(c){a.isArray(c)?a.each(c,function(){b.removeFile(this)}):b.removeFile(c),b.selectAllCheckbox().prop("checked",!1)});return f},useFile:function(){var a=b.selectedFile(),c=b.file().filterBy("id",a),d=b.data("file",a);c.length<1||b.trigger(r,[a,c,d])},previewFile:function(){var a=b.selectedFile(),c=b.file().filterBy("id",a),e=(b.data("file",a),c.data("previewUri"));
e&&window.open(e,"_blank")}},"{self} folderActivate":function(a,c,d,e,f){var g=b.fileGroup(),i=g.filterBy("folder",d);if(g.removeClass(h),i.length<1){f.map||(f.map=[]);var j='<div class="fd-explorer-file" data-id="'+f.map.join('">&nbsp;</div><div class="fd-explorer-file" data-id="')+'">&nbsp;</div>';i=b.view.fileGroup({data:f}).html(j).appendTo(b.viewport()),b.services.getFiles({id:d}).done(function(a){b.insertFile(a,d)})}i.addClass("is-active")},viewportScroll:function(){var a=b.viewport()[0],e=(b.viewport().height(),a.scrollHeight,a.scrollTop),g=b.file(":nth(2)").outerHeight(!0),h=Math.floor(e/g),i=3,j=b.fileGroup(".is-active"),k=j.data("folder");
b.services.getFiles({id:k,start:h-i}).done(function(a){b.insertFile(a,k)}).always(function(){})},"{togglefunky} click":function(){b.funky().toggle()},"{disableValidation} change":function(a){e.disableValidation=!!a.prop("checked"),b.exception({message:"Client-side validation is "+(e.disableValidation?"OFF!":"ON!"),type:"info"})},"{mockError} change":function(a){e.mockError=!!a.prop("checked"),b.exception({message:"Error mocking is "+(e.mockError?"ON!":"OFF!"),type:"info"})},"{selectAllCheckbox} click":function(a){var c=a.prop("checked");
b.fileGroup(i).find(b.selectCheckbox.selector).prop("checked",c).trigger("change")},"{selectCheckbox} change":function(a){var c=b.file.of(a),e=(c.data("id"),a.prop("checked"));c.toggleClass("is-checked",e)},"{deleteButton} click":function(a){var c=b.file.of(a),d=c.data("id");EasySocial.dialog({content:EasySocial.ajax("site/views/explorer/confirmDeleteFile",{id:d}),bindings:{"{deleteButton} click":function(){EasySocial.dialog().close(),b.services.removeFile({id:d})}}})},"{deleteFolderButton} click":function(a,c){c.preventDefault();
var d=b.folder.of(a),e=d.data("id");0!==e&&EasySocial.dialog({content:EasySocial.ajax("site/views/explorer/confirmDeleteFolder",{id:e}),bindings:{"{deleteButton} click":function(){EasySocial.dialog().close(),b.services.removeFolder({id:e})}}})}}}),EasySocial.require().language("COM_EASYSOCIAL_EXPLORER_ENTER_FOLDER_NAME","COM_EASYSOCIAL_EXPLORER_INVALID_FOLDER_NAME").done(function(){b.resolve()})}),EasySocial.module("site/explorer/uploader",function(a){var b=this;a.require().library("plupload").done(function(){var c=a.Controller("Explorer/Uploader",{defaultOptions:{settings:{},"{uploadItemGroup}":"[data-fd-explorer-upload-item-group]","{uploadItem}":"[data-fd-explorer-upload-item]"}},function(b,c,d){return{init:function(){d.plupload(c.settings),b.plupload=d.plupload("controller").plupload
},settings:function(a,c){var d=b.plupload.settings;return void 0!==c&&(d[a]=c),a?d[a]:d},"{self} folderActivate":function(){},"{self} BeforeUpload":function(){var h=a.uri(EasySocial.ajaxUrl).addQueryParam("controller",b.explorer.options.controllerName).addQueryParam("task","explorer").addQueryParam("id",b.explorer.currentFolder()).addQueryParam("no_html",1).addQueryParam("format","json").addQueryParam("hook","addFile").addQueryParam("tmpl","component").addQueryParam("uid",d.data("uid")).addQueryParam("type",d.data("type")).addQueryParam(EasySocial.token(),1).toString();
b.settings("url",h)},"{self} FilesAdded":function(){b.plupload.start()},"{self} UploadFile":function(){clearTimeout(b.loadTimer),d.addClass("is-loading")},"{self} FileUploaded":function(c,e,f,g,h){b.loadTimer=setTimeout(function(){d.removeClass("is-loading")},1e3);var i=b.explorer;return a.isPlainObject(h)?(i.addData("file",h),i.prependFile(h),void 0):(b.setMessage("Server did not return proper data after uploading.","error"),void 0)},"{self} FileError":function(c,e,f,g,h){d.removeClass("is-loading"),a.isPlainObject(h)&&b.setMessage(h.message,"error")
},"{self} Error":function(a,c,e,f){d.removeClass("is-loading"),b.setMessage(f.message,"error")}}});b.resolve(c)})}),EasySocial.module("site/explorer/popup",function(a){var b=this;EasySocial.require().view("site/explorer/popup").done(function(){a.Controller("Explorer/Popup",{defaultOptions:{view:{popup:"easysocial/site/explorer/popup"},"{popup}":"[data-explorer-popup]","{viewport}":"[data-popup-viewport]","{explorer}":"[data-explorer-popup] .fd-explorer","{closeButton}":".fd-explorer .close-button"}},function(b,c,d){return{init:function(){},"{window} resize":a.debounce(function(){},100),show:function(){var c,e=b.popup.node;
e||(c=b.view.popup(),e=b.popup.node=c[0]),a.contains(d,e)||(c=a(e).appendTo(d)),c.is(":visible")||c.show().trigger("show")},hide:function(){b.popup().hide().trigger("hide").detach()},open:function(c){b.show();var d=a.Deferred(),e=b.explorer();return e.length>0&&e.data("uid")===c.uid&&e.data("type")===c.type?d.resolve(e.explorer("controller"),b):(EasySocial.ajax("site/views/explorer/browser",c).done(function(c){var e=a.buildHTML(c);b.viewport().empty().append(e);var f=e.filter(".fd-explorer").explorer("controller");
d.resolve(f,b)}).fail(function(){d.reject()}),d)},"{self} click":function(a,c){c.target===b.popup()[0]&&b.hide()},"{closeButton} click":function(){b.hide()}}});var c=EasySocial.explorer=a("body").addController("Explorer/Popup");b.resolve(c)})}),EasySocial.module("site/followers/followers",function(){var b=this;EasySocial.require().view("site/loading/small").script("site/conversations/composer").done(function(a){EasySocial.Controller("Followers",{defaultOptions:{"{content}":"[data-followers-content]","{filter}":"[data-followers-filter]","{items}":"[data-followers-item]","{followingCounter}":"[data-following-count]","{suggestionCounter}":"[data-suggest-count]",view:{loader:"site/loading/small"}}},function(b){return{init:function(){b.initItemController()
},initItemController:function(){b.items().implement(EasySocial.Controller.Followers.Item,{"{parent}":b})},updateFollowingCounter:function(a){var c=b.followingCounter().html(),d=parseInt(c)+a;b.followingCounter().html(d)},updateSuggestionCounter:function(a){var c=b.suggestionCounter().html(),d=parseInt(c)+a;b.suggestionCounter().html(d)},updateContents:function(a){b.content().replaceWith(a)},updatePagination:function(b){a("[data-followers-pagination]").html(b)},"{filter} click":function(a){var d=a.data("followers-filter-type"),e=a.data("followers-filter-title"),f=a.data("followers-filter-id"),g=a.data("followers-filter-url");
b.filter().removeClass("active"),a.addClass("active"),History.pushState({state:1},e,g),EasySocial.ajax("site/controllers/followers/filter",{id:f,type:d}).done(function(a,c){b.updateContents(a),b.updatePagination(c),b.initItemController()})}}}),EasySocial.Controller("Followers.Item",{defaultOptions:{"{unfollowButton}":"[data-followers-item-unfollow]","{followButton}":"[data-followers-item-follow]","{composer}":"[data-followers-item-compose]"}},function(a){return{init:function(){a.options.id=a.element.data("id"),a.initComposer()
},initComposer:function(){a.composer().implement(EasySocial.Controller.Conversations.Composer.Dialog,{recipient:{id:a.options.id}})},"{unfollowButton} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/followers/confirmUnfollow",{id:a.options.id}),bindings:{"{unfollowButton} click":function(){EasySocial.ajax("site/controllers/followers/unfollow",{id:a.options.id}).done(function(){a.parent.updateFollowingCounter(-1),a.element.remove(),EasySocial.dialog().close()})}}})},"{followButton} click":function(){EasySocial.ajax("site/controllers/followers/follow",{id:a.options.id}).done(function(b){a.parent.updateSuggestionCounter(-1),a.parent.updateFollowingCounter(1),a.element.html(b)
}).fail(function(a){EasySocial.dialog({content:a.message})})}}}),b.resolve()})}),EasySocial.module("site/friends/friends",function(){var b=this;EasySocial.require().script("site/friends/list","site/friends/item","site/friends/suggest","site/conversations/composer").view("site/loading/small","site/friends/default.empty","site/friends/list.assign").done(function(a){EasySocial.Controller("Friends.Birthday",{defaultOptions:{"{messageButton}":"[data-upcoming-birthday-message-button]"}},function(a){return{init:function(){a.options.id=a.element.data("id"),a.options.name=a.element.data("name"),a.options.avatar=a.element.data("avatar"),a.messageButton().implement(EasySocial.Controller.Conversations.Composer.Dialog,{recipient:{id:a.options.id,name:a.options.name,avatar:a.options.avatar}})
}}}),EasySocial.Controller("Friends",{defaultOptions:{activeList:null,"{friendList}":"[data-friends-list]","{content}":"[data-friends-content]","{friendItems}":"[data-friends-items]","{friendItem}":"[data-friends-item]","{emptyList}":"[data-friends-emptyItems]","{activeTitle}":"[data-friends-activeTitle]","{filterItem}":"[data-friends-filter]","{friendListActions}":"[data-friendList-actions]","{addFriendToList}":"[data-friends-add]","{friendsCounter}":"[data-total-friends]","{pendingCounter}":"[data-total-friends-pending]","{suggestionCounter}":"[data-total-friends-suggestion]","{requestCount}":"[data-frields-request-sent-count]",view:{loader:"site/loading/small",emptyFriendItems:"site/friends/default.empty",addUserForm:"site/friends/list.assign"}}},function(b){return{init:function(){b.friendList().implement(EasySocial.Controller.Friends.List,{"{parent}":b}),b.initFriendItems()
},initFriendItems:function(){b.friendListActions().implement(EasySocial.Controller.Friends.List.Actions,{"{parent}":b}),b.friendItem().implement(EasySocial.Controller.Friends.Item,{"{parent}":b})},updateFriendsCounter:function(){EasySocial.ajax("site/controllers/friends/getCounters").done(function(a,c,d,e){b.friendsCounter().html(a),b.pendingCounter().html(c),b.requestCount().html(d),b.suggestionCounter().html(e)})},updateListCounters:function(){EasySocial.ajax("site/controllers/friends/getListCounts",{}).done(function(b){a(b).each(function(b,c){var d=a("[data-list-"+c.id+"]").controller();
d.updateCounter(c.count)})})},insertItem:function(c){b.emptyList().hide(),b.updateListCounters(),a(c).implement(EasySocial.Controller.Friends.Item,{"{parent}":b}).prependTo(b.friendItems())},removeItem:function(a){b.friendItem("[data-friendItem-"+a+"]").remove(),b.friendItem().length<=0&&b.emptyList().show(),b.updateListCounters()},updateFriendRequestCount:function(a){curCount=parseInt(b.requestCount().text(),10),0/0!=curCount&&(curCount+=a,b.requestCount().text(curCount))},updateContent:function(a){b.content().replaceWith(a),b.initFriendItems()
},removeActiveFilter:function(){b.filterItem().removeClass("active")},"{filterItem} click":function(a){var d=a.data("filter"),e=a.data("title"),f=a.data("userid"),g=a.data("url");b.friendList().length>0&&b.friendList().controller().removeActiveList(),b.filterItem().removeClass("active"),a.addClass("active"),History.pushState({state:1},e,g),a.addClass("loading"),EasySocial.ajax("site/controllers/friends/filter",{filter:d,userid:f}).done(function(a){b.updateContent(a)}).always(function(){a.removeClass("loading")
})}}}),b.resolve()})}),EasySocial.module("site/friends/list",function(){var b=this;EasySocial.require().view("site/loading/small").library("history").script("site/friends/suggest").done(function(a){EasySocial.Controller("Friends.List",{defaultOptions:{parent:null,"{item}":"[data-friends-listItem]","{items}":"[data-friends-listItems]","{loadMoreButton}":".loadMoreButton","{loadMore}":".loadMore",view:{loader:"site/loading/small",items:"site/friends/default.lists"}}},function(b){return{init:function(){b.item().implement(EasySocial.Controller.Friends.List.Item,{"{parent}":b})
},removeActiveList:function(){b.item().removeClass("active")},setDefault:function(a){b.item().removeClass("default"),b.item(".item-"+a).addClass("default")},"{item} click":function(c){var d=a(c).data("title"),e=a(c).data("url");History.pushState({state:1},d,e),b.parent.removeActiveFilter(),b.item().removeClass("active"),b.item(c).addClass("active");var f=a(c).data("id");b.parent.options.activeList=f,EasySocial.ajax("site/controllers/friends/getListFriends",{id:f},{beforeSend:function(){a(c).addClass("loading")
}}).done(function(d){a(c).removeClass("loading"),b.parent.updateContent(d)})},"{loadMoreButton} click":function(){var a=b.loadMoreButton().data("limitstart");b.loadMore().html(b.view.loader()),EasySocial.ajax("site/controllers/friends/getLists",{limitstart:a}).done(function(a){b.loadMore().hide(),b.view.items({items:a}).appendTo(b.items())})}}}),EasySocial.Controller("Friends.List.Item",{defaultOptions:{id:null,"{counter}":"[data-list-counter]"}},function(a){return{init:function(){a.options.id=a.element.data("id")
},updateCounter:function(b){a.counter().html(b)}}}),EasySocial.Controller("Friends.List.Actions",{defaultOptions:{"{delete}":"[data-friendListActions-delete]","{add}":"[data-friendListActions-add]","{default}":"[data-friendListActions-default]"}},function(b){return{init:function(){b.options.id=b.element.data("id"),b.options.title=b.element.data("title"),b.options.userId=b.element.data("userid")},"{default} click":function(){EasySocial.ajax("site/controllers/friends/setDefault",{id:b.options.id}).done(function(){b.parent.friendList().controller().setDefault(b.options.id)
})},"{add} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/friends/assignList",{id:b.options.id}),bindings:{"{insertButton} click":function(){var c=this.suggest().textboxlist("controller").getAddedItems();EasySocial.ajax("site/controllers/friends/assign",{uid:a.pluck(c,"id"),userId:b.options.userId,listId:b.options.id}).done(function(c){a("[data-assignFriends-notice]").hide(),a(c).each(function(c,d){b.parent.insertItem(d),a("[data-friends-items]").removeClass("is-empty"),EasySocial.dialog().close()
})}).fail(function(b){a("[data-assignFriends-notice]").addClass("alert alert-error").html(b.message)})}}})},"{delete} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/friends/confirmDeleteList",{id:b.options.id}),bindings:{"{deleteButton} click":function(){a("[data-friends-list-delete-form]").submit()}}})}}}),b.resolve()})}),EasySocial.module("site/friends/item",function(){var b=this;EasySocial.require().script("site/conversations/composer").language("COM_EASYSOCIAL_FRIENDS_REQUEST_SENT_PENDING_APPROVAL","COM_EASYSOCIAL_FRIENDS_REQUEST_DIALOG_TITLE","COM_EASYSOCIAL_FRIENDS_CANCEL_REQUEST_DIALOG_CANCELLED","COM_EASYSOCIAL_FRIENDS_REQUEST_SENT").done(function(a){EasySocial.Controller("Friends.Item",{defaultOptions:{id:null,name:null,friendId:null,"{removeFromList}":"[data-lists-removeFriend]","{unfriend}":"[data-friends-unfriend]","{addfriend}":"[data-friends-addfriend]","{block}":"[data-friends-block]","{message}":"[data-friendItem-message]","{reject}":"[data-friendItem-reject]","{approve}":"[data-friendItem-approve]","{addContainer}":"[data-friendItem-addbutton]","{addButton}":"[data-friendItem-add]","{cancelRequest}":"[data-friendItem-cancel-request]"}},function(b){return{init:function(){b.options.id=b.element.data("id"),b.options.name=b.element.data("name"),b.options.friendId=b.element.data("friendid"),b.options.avatar=b.element.data("avatar"),b.initConversation()
},"{addButton} click":function(){EasySocial.ajax("site/controllers/friends/request",{id:b.options.id}).done(function(){b.addContainer().html(a.language("COM_EASYSOCIAL_FRIENDS_REQUEST_SENT")),b.addContainer().addClass("btn btn-es-success btn-sm mt-20")}).fail(function(a){EasySocial.dialog({width:450,height:180,content:a.message})})},initConversation:function(){b.message().implement(EasySocial.Controller.Conversations.Composer.Dialog,{recipient:{name:b.options.name,id:b.options.id,avatar:b.options.avatar}})},"{removeFromList} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/friends/confirmRemoveFromList",{id:b.options.id}),bindings:{"{removeButton} click":function(){EasySocial.ajax("site/controllers/friends/removeFromList",{listId:b.parent.options.activeList,userId:b.options.id}).done(function(){b.parent.removeItem(b.options.id),EasySocial.dialog({title:"User removed from list",content:"The user has been removed from the list.",buttons:[{name:"Done",classNames:"btn btn-es",click:function(){EasySocial.dialog().close()
}}]})}).fail(function(a){console.log(a)})}}})},"{reject} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/friends/confirmReject",{id:b.options.id}),bindings:{"{rejectButton} click":function(){EasySocial.ajax("site/controllers/friends/reject",{id:b.options.friendId}).done(function(){b.parent.removeItem(b.options.id),b.parent.updateFriendsCounter(),EasySocial.dialog({content:EasySocial.ajax("site/views/friends/friendRejected")})})}}})},"{unfriend} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/friends/confirmUnfriend",{id:b.options.id}),bindings:{"{unfriendButton} click":function(){EasySocial.ajax("site/controllers/friends/unfriend",{id:b.options.friendId}).done(function(){b.parent.removeItem(b.options.id),b.parent.updateFriendsCounter(),EasySocial.dialog({content:EasySocial.ajax("site/views/friends/friendRemoved",{id:b.options.id})})
})}}})},"{cancelRequest} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/friends/confirmCancelRequest",{id:b.options.id}),bindings:{"{cancelRequestButton} click":function(){EasySocial.ajax("site/controllers/friends/cancelRequest",{id:b.options.friendId}).done(function(){b.parent.removeItem(b.options.id),b.parent.updateFriendRequestCount(-1),EasySocial.dialog({content:EasySocial.ajax("site/views/friends/requestCancelled",{id:b.options.id})})})}}})},"{approve} click":function(){EasySocial.ajax("site/controllers/friends/approve",{id:b.options.friendId}).done(function(){b.parent.updateFriendsCounter(),b.element.remove()
})},"{addfriend} click":function(){EasySocial.ajax("site/controllers/friends/request",{id:b.options.id}).done(function(){b.parent.updateFriendRequestCount(1),EasySocial.dialog({title:a.language("COM_EASYSOCIAL_FRIENDS_REQUEST_DIALOG_TITLE"),content:a.language("COM_EASYSOCIAL_FRIENDS_REQUEST_SENT_PENDING_APPROVAL",b.options.name)}),b.parent.removeItem(b.options.id)}).fail(function(){EasySocial.dialog({content:EasySocial.ajax("site/views/friends/exceeded")})})},"{block} click":function(){console.log("block")}}
}),b.resolve()})}),EasySocial.module("site/groups/groups",function(){var b=this;EasySocial.require().view("site/loading/small").script("validate","field").done(function(a){EasySocial.Controller("Groups.Browser",{defaultOptions:{"{filters}":"[data-es-groups-filters] > li","{sort}":"[data-groups-sort]","{categories}":"[data-es-groups-categories] >li","{content}":"[data-es-groups-content]","{items}":"[data-groups-item]","{featured}":"[data-groups-featured-item]","{listContents}":"[data-es-groups-list]",view:{loader:"site/loading/small"}}},function(b){return{init:function(){b.initGroupController()
},initGroupController:function(){b.filters().implement(EasySocial.Controller.Groups.Filter,{"{parent}":b}),b.sort().implement(EasySocial.Controller.Groups.Sort,{"{parent}":b}),b.categories().implement(EasySocial.Controller.Groups.Filter.Category,{"{parent}":b}),b.featured().implement(EasySocial.Controller.Groups.Browser.Item,{"{parent}":b}),b.items().implement(EasySocial.Controller.Groups.Browser.Item,{"{parent}":b})},setActive:function(c){b.categories().removeClass("active"),b.filters().removeClass("active"),a(c).addClass("active"),b.content().html("&nbsp;"),b.element.addClass("loading")
},setListContent:function(a){b.listContents().html(a),b.items().implement(EasySocial.Controller.Groups.Browser.Item,{"{parent}":b})},setContent:function(a,c){b.element.removeClass("loading"),c?b.content().html(a):b.listContents().html(a),b.items().implement(EasySocial.Controller.Groups.Browser.Item,{"{parent}":b})}}}),EasySocial.Controller("Groups.Browser.Item",{defaultOptions:{"{joinGroup}":"[data-groups-item-join]","{leaveGroup}":"[data-groups-leave]","{respond}":"[data-groups-item-respond]","{setFeatured}":"[data-groups-item-set-featured]","{removeFeatured}":"[data-groups-item-remove-featured]","{deleteGroup}":"[data-groups-item-delete]","{unpublishGroup}":"[data-groups-item-unpublish]","{footer}":"[data-groups-item-footer]"}},function(a,b,c){return{init:function(){b.id=a.element.data("id"),b.type=a.element.data("type")
},"{deleteGroup} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/groups/confirmDelete",{id:a.options.id})})},"{unpublishGroup} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/groups/confirmUnpublishGroup",{id:a.options.id})})},"{setFeatured} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/groups/setFeatured",{id:a.options.id})})},"{removeFeatured} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/groups/removeFeatured",{id:a.options.id})})
},"{respond} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/groups/confirmRespondInvitation",{id:a.options.id}),bindings:{"{rejectButton} click":function(){c.switchClass("is-loading"),EasySocial.ajax("site/controllers/groups/respondInvitation",{id:b.id,action:"reject"}).done(function(){c.switchClass("is-guest"),EasySocial.dialog().close()})},"{acceptButton} click":function(){c.switchClass("is-loading"),EasySocial.ajax("site/controllers/groups/respondInvitation",{id:b.id,action:"accept"}).done(function(){c.switchClass("is-member"),EasySocial.dialog().close()
})}}})},"{leaveGroup} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/groups/confirmLeaveGroup",{id:b.id}),bindings:{"{leaveButton} click":function(){c.switchClass("is-loading"),EasySocial.ajax("site/controllers/groups/leaveGroup",{id:b.id}).done(function(){c.switchClass("is-guest"),EasySocial.dialog().close()})}}})},"{joinGroup} click":function(){return"open"==b.type?(c.switchClass("is-loading"),EasySocial.ajax("site/controllers/groups/joingroup",{id:b.id}).done(function(){c.switchClass("is-member")
}),void 0):(EasySocial.dialog({content:EasySocial.ajax("site/controllers/groups/joinGroup",{id:b.id})}),void 0)}}}),EasySocial.Controller("Groups.Edit",{defaultOptions:{id:null,"{stepContent}":"[data-group-edit-fields-content]","{stepItem}":"[data-group-edit-fields-step]","{profileForm}":"[data-group-fields-form]","{profileContent}":"[data-group-edit-fields]","{fieldItem}":"[data-group-edit-fields-item]","{save}":"[data-group-fields-save]"}},function(b){return{init:function(){b.fieldItem().addController("EasySocial.Controller.Field.Base",{mode:"edit"})
},errorFields:[],"{fieldItem} error":function(a){b.triggerStepError(a)},"{fieldItem} clear":function(a){b.clearStepError(a)},"{fieldItem} onError":function(a){b.triggerStepError(a)},triggerStepError:function(c){var d=c.data("id"),e=c.parents(b.stepContent.selector).data("id");a.inArray(d,b.errorFields)<0&&b.errorFields.push(d),b.stepItem().filterBy("for",e).trigger("error")},clearStepError:function(c){var d=c.data("id"),e=c.parents(b.stepContent.selector).data("id");b.errorFields=a.without(b.errorFields,d),b.stepItem().filterBy("for",e).trigger("clear")
},"{stepItem} click":function(c){var e=a(c).data("for");b.profileContent().show(),b.stepContent().hide(),b.stepItem().removeClass("active"),c.addClass("active");var f=b.stepContent(".step-"+e);f.show(),f.find(b.fieldItem.selector).trigger("show")},"{stepItem} error":function(a){a.addClass("error")},"{stepItem} clear":function(a){b.errorFields.length<1&&a.removeClass("error")},"{save} click":function(a,c){return c.preventDefault(),a.addClass("btn-loading"),b.profileForm().validate().fail(function(){a.removeClass("btn-loading"),EasySocial.dialog({content:EasySocial.ajax("site/views/profile/showFormError")})
}).done(function(){b.profileForm().submit()}),!1}}}),EasySocial.Controller("Groups.Filter",{defaultOptions:{}},function(b){return{init:function(){},"{self} click":function(c,d){d.preventDefault(),b.parent.setActive(c),a(c).find("a").route(),EasySocial.ajax("site/controllers/groups/getGroups",{filter:b.element.data("es-groups-filters-type")}).done(function(a){b.parent.setContent(a,!0),b.parent.initGroupController()})}}}),EasySocial.Controller("Groups.Sort",{defaultOptions:{}},function(b){return{init:function(){},"{self} click":function(c,d){d.preventDefault();
var e=c.data("type"),f=c.data("filter"),g=c.data("categoryid");a("<a>").attr({title:document.title,href:c.attr("href")}).route(),b.parent.sort().removeClass("active"),c.addClass("active"),b.parent.listContents().html(b.parent.view.loader()),EasySocial.ajax("site/controllers/groups/getGroups",{ordering:e,filter:f,categoryId:g}).done(function(a){b.parent.setContent(a,!1),b.parent.initGroupController()})}}}),EasySocial.Controller("Groups.Filter.Category",{defaultOptions:{id:null}},function(b){return{init:function(){b.options.id=b.element.data("es-groups-category-id")
},"{self} click":function(c,d){d.preventDefault(),b.parent.setActive(c),a(c).find("a").route(),EasySocial.ajax("site/controllers/groups/getGroups",{categoryId:b.options.id}).done(function(a){b.parent.setContent(a,!0),b.parent.initGroupController()})}}}),EasySocial.Controller("Groups.Create",{defaultOptions:{previousLink:null,"{fieldItem}":"[data-groups-create-fields-item]","{previousButton}":"[data-groups-create-previous]","{nextButton}":"[data-groups-create-submit]"}},function(a){return{init:function(){a.fieldItem().addController("EasySocial.Controller.Field.Base")
},"{previousButton} click":function(){window.location=a.options.previousLink},"{nextButton} click":function(b){b.enabled()&&(b.disabled(!0),b.addClass("btn-loading"),a.element.validate().done(function(){b.removeClass("btn-loading"),b.enabled(!0),a.element.submit()}).fail(function(){b.removeClass("btn-loading"),b.enabled(!0),EasySocial.dialog({content:EasySocial.ajax("site/views/profile/showFormError")})}))}}}),b.resolve()})}),EasySocial.module("site/groups/item",function(){var b=this;EasySocial.template("info/item",'<li data-es-group-filter><a class="ml-20" href="[%= url %]" title="[%= title %]" data-info-item data-info-index="[%= index %]"><i class="fa fa-info-circle mr-5"></i> [%= title %]</a></li>'),EasySocial.require().script("site/friends/suggest").library("history").done(function(a){EasySocial.Controller("Groups.Item",{defaultOptions:{"{content}":"[data-es-group-item-content]","{apps}":"[data-es-group-item-app]","{filters}":"[data-es-group-filter]","{filterStream}":"[data-es-group-stream]","{appFilter}":"[data-es-group-app-filter]","{appFilterShowAll}":"[data-app-filters-showall]","{filterBtn}":"[data-stream-filter-button]","{filterEditBtn}":"[data-dashboardFeeds-Filter-edit]","{filterModeration}":"[data-filter-moderation]","{saveHashTag}":"[data-hashtag-filter-save]","{filterUL}":"[data-es-group-ul]","{joinGroup}":"[data-es-group-join]","{leaveGroup}":"[data-es-group-leave]","{invite}":"[data-es-group-invite]","{respond}":"[data-es-group-respond]","{withdraw}":"[data-es-group-withdraw]","{info}":"[data-info]","{infoItem}":"[data-info-item]",view:{infoItem:"info/item"}}},function(b,c,d){return{init:function(){c.type=d.data("type"),c.id=d.data("id"),b.apps().implement(EasySocial.Controller.Groups.Item.App,{"{parent}":b,groupId:c.id})
},setActive:function(a){b.filters().removeClass("active"),a.parent().addClass("active")},setLoading:function(){b.content().html(""),b.element.addClass("loading")},updateContents:function(a){b.element.removeClass("loading"),b.content().html(a)},"{appFilterShowAll} click":function(a){a.hide(),b.filters().removeClass("hide")},"{filterEditBtn} click":function(a,c){c.preventDefault(),a.route(),b.setLoading(),b.setActive(a),EasySocial.ajax("site/controllers/groups/getFilter",{id:a.data("id"),clusterId:b.options.id}).done(function(a){b.updateContents(a)
}).fail(function(a){return a}).always(function(){})},"{filterBtn} click":function(a,c){c.preventDefault(),a.route(),b.setActive(a),b.setLoading(),EasySocial.ajax("site/controllers/groups/getFilter",{id:0,clusterId:b.options.id}).done(function(a){b.updateContents(a)}).fail(function(a){return a}).always(function(){})},"{appFilter} click":function(a,c){c.preventDefault();var d=a.data("url"),e=a.data("title");History.pushState({state:1},e,d),b.setActive(a),b.setLoading(),b.setActive(a);var f=a.data("id");EasySocial.ajax("site/controllers/groups/getStream",{id:b.options.id,app:f,view:"groups"}).done(function(a){b.updateContents(a)
})},"{filterModeration} click":function(a,d){d.preventDefault(),a.route(),b.setActive(a),EasySocial.ajax("site/controllers/groups/getStream",{id:c.id,view:"groups",moderation:1}).done(function(a){b.updateContents(a)})},"{filterStream} click":function(c,d){d.preventDefault(),b.setActive(c),c.route(),b.setLoading();var e=a("[data-dashboardSidebar-menu].active"),f=e.data("fid");EasySocial.ajax("site/controllers/groups/getStream",{id:b.options.id,filterId:f,view:"groups",layout:"item"}).done(function(a){b.updateContents(a)
})},"{saveHashTag} click":function(c){var d=c.data("tag"),e=c.data("id");EasySocial.dialog({content:EasySocial.ajax("site/views/stream/confirmSaveFilter",{tag:d}),bindings:{"{saveButton} click":function(){return this.inputWarning().hide(),filterName=this.inputTitle().val(),""==filterName?(this.inputWarning().show(),void 0):(EasySocial.ajax("site/controllers/groups/addFilter",{title:filterName,tag:d,id:e}).done(function(c,d){var e=a.buildHTML(c);b.filterUL().append(e),EasySocial.dialog(d),setTimeout(function(){EasySocial.dialog().close()
},2e3)}),void 0)}}})},"{withdraw} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/groups/confirmWithdraw",{id:b.options.id})})},"{invite} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/groups/inviteFriends",{id:b.options.id}),position:{my:"center top",at:"center top",of:window}})},"{respond} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/groups/confirmRespondInvitation",{id:b.options.id}),bindings:{"{rejectButton} click":function(){this.responseValue().val("reject"),this.form().submit()
},"{acceptButton} click":function(){this.responseValue().val("accept"),this.form().submit()}}})},"{joinGroup} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/controllers/groups/joinGroup",{id:b.options.id})})},"{leaveGroup} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/groups/confirmLeaveGroup",{id:b.options.id}),bindings:{"{leaveButton} click":function(){this.leaveForm().submit()}}})},"{info} click":function(c,d){d.preventDefault(),c.route(),b.setActive(c),b.setLoading();
var e=c.data("loaded");return e?(b.infoItem().eq(0).trigger("click"),void 0):(c.enabled()&&(c.disabled(!0),EasySocial.ajax("site/controllers/groups/initInfo",{groupId:b.options.id}).done(function(d){c.data("loaded",1);var e=c.parent("[data-es-group-filter]");a.each(d.reverse(),function(a,c){c.hide||e.after(b.view.infoItem({url:c.url,title:c.title,index:c.index})),c.html&&(b.updateContents(c.html),b.content().find("[data-field]").trigger("onShow"))});var f=b.infoItem().eq(0);b.setActive(f),a(document).prop("title",f.attr("title")),c.enabled(!0)
}).fail(function(a){c.enabled(!0),b.updateContents(a.message)})),void 0)},"{infoItem} click":function(a,c){c.preventDefault(),a.route(),b.setActive(a),b.setLoading();var d=a.data("info-index");EasySocial.ajax("site/controllers/groups/getInfo",{groupId:b.options.id,index:d}).done(function(a){b.updateContents(a),b.content().find("[data-field]").trigger("onShow")}).fail(function(a){b.updateContents(a.message)})}}}),EasySocial.Controller("Groups.Item.App",{defaultOptions:{}},function(a){return{init:function(){a.options.id=a.element.data("app-id")
},"{self} click":function(b,c){c.preventDefault(),b.route(),a.parent.setActive(b),a.parent.setLoading(),EasySocial.ajax("site/controllers/groups/getAppContents",{appId:a.options.id,groupId:a.options.groupId}).done(function(b){a.parent.updateContents(b)}).fail(function(a){return a})}}}),EasySocial.Controller("Groups.Item.Members",{defaultOptions:{"{items}":"[data-group-members-item]","{filters}":"[data-group-members-filter]","{content}":"[data-group-members-content]"}},function(a){return{init:function(){a.options.id=a.element.data("id"),a.items().implement(EasySocial.Controller.Groups.Item.Members.Record)
},"{filters} click":function(b){a.filters().removeClass("active"),b.addClass("active");var d=b.data("filter");a.content().html("&nbsp;"),a.content().addClass("is-loading"),EasySocial.ajax("apps/group/members/controllers/groups/filterMembers",{id:a.options.id,filter:d}).done(function(b){a.content().removeClass("is-loading"),a.content().html(b),a.items().implement(EasySocial.Controller.Groups.Item.Members.Record)})}}}),EasySocial.Controller("Groups.Item.Members.Record",{defaultOptions:{"{makeAdmin}":"[data-members-make-admin]","{revokeAdmin}":"[data-members-revoke-admin]","{approve}":"[data-members-approve]","{reject}":"[data-members-reject]","{removeMember}":"[data-members-remove]","{cancelInvitation}":"[data-members-cancel-invitation]"}},function(a){return{init:function(){a.options.id=a.element.data("id"),a.options.groupId=a.element.data("groupid"),a.options.redirect=a.element.data("redirect")
},"{approve} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/groups/confirmApprove",{id:a.options.groupId,userId:a.options.id,"return":a.options.redirect})})},"{reject} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/groups/confirmReject",{id:a.options.groupId,userId:a.options.id})})},"{cancelInvitation} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/groups/confirmCancelInvitation",{id:a.options.groupId,userId:a.options.id})})},"{revokeAdmin} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/groups/confirmRevokeAdmin",{id:a.options.groupId,userId:a.options.id}),bindings:{"{revokeButton} click":function(){EasySocial.ajax("site/controllers/groups/revokeAdmin",{id:a.options.groupId,userId:a.options.id}).done(function(){EasySocial.dialog().close(),a.element.removeClass("is-admin").addClass("is-member")
})}}})},"{removeMember} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/groups/confirmRemoveMember",{id:a.options.groupId,userId:a.options.id})})},"{makeAdmin} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/groups/confirmMakeAdmin",{id:a.options.id}),bindings:{"{makeAdminButton} click":function(){EasySocial.ajax("site/controllers/groups/makeAdmin",{id:a.options.groupId,userId:a.options.id}).done(function(){EasySocial.dialog().close(),a.element.removeClass("is-member").addClass("is-admin")
})}}})}}}),EasySocial.Controller("Groups.Item.Discussions",{defaultOptions:{"{filter}":"[data-group-discussions-filter]","{contents}":"[data-group-discussion-contents]"}},function(a){return{init:function(){a.options.id=a.element.data("id")},setContent:function(b){a.contents().removeClass("is-loading"),a.contents().html(b)},setActiveFilter:function(b){a.filter().removeClass("active"),b.addClass("active")},"{filter} click":function(b){var d=b.data("filter");a.contents().html("&nbsp;").addClass("is-loading"),a.setActiveFilter(b),EasySocial.ajax("apps/group/discussions/controllers/discussion/getDiscussions",{id:a.options.id,filter:d}).done(function(b,c){c?a.contents().addClass("is-empty"):a.contents().removeClass("is-empty"),a.setContent(b)
})}}}),EasySocial.Controller("Groups.Item.Discussion",{defaultOptions:{"{form}":"[data-reply-form]","{list}":"[data-reply-list]","{replies}":"[data-reply-item]","{repliesWrap}":"[data-replies-wrapper]","{replyCounter}":"[data-reply-count]","{lock}":"[data-discussion-lock]","{unlock}":"[data-discussion-unlock]","{delete}":"[data-discussion-delete]"}},function(a){return{init:function(){a.options.id=a.element.data("id"),a.options.groupId=a.element.data("groupid"),a.implementReply(a.replies()),a.form().implement(EasySocial.Controller.Groups.Item.Discussion.Form,{"{parent}":a})
},implementReply:function(){a.replies().implement(EasySocial.Controller.Groups.Item.Discussion.Reply,{"{parent}":a})},insertReply:function(b){a.element.removeClass("is-unanswered"),a.repliesWrap().removeClass("is-empty"),a.list().append(b),a.implementReply()},updateReplyCounter:function(b){0==b&&a.repliesWrap().addClass("is-empty"),a.replyCounter().html(b)},setResolved:function(){a.element.addClass("is-resolved")},"{unlock} click":function(){EasySocial.ajax("apps/group/discussions/controllers/discussion/unlock",{id:a.options.id}).done(function(){a.element.removeClass("is-locked")
})},"{delete} click":function(){EasySocial.dialog({content:EasySocial.ajax("apps/group/discussions/controllers/discussion/confirmDelete",{id:a.options.id,groupId:a.options.groupId})})},"{lock} click":function(){EasySocial.dialog({content:EasySocial.ajax("apps/group/discussions/controllers/discussion/confirmLock"),bindings:{"{lockButton} click":function(){EasySocial.ajax("apps/group/discussions/controllers/discussion/lock",{id:a.options.id}).done(function(){EasySocial.dialog().close(),a.element.addClass("is-locked")
})}}})}}}),EasySocial.Controller("Groups.Item.Discussion.Reply",{defaultOptions:{"{acceptAnswer}":"[data-reply-accept-answer]","{delete}":"[data-reply-delete]","{edit}":"[data-reply-edit]","{cancelEdit}":"[data-reply-edit-cancel]","{update}":"[data-reply-edit-update]","{textarea}":"[data-reply-content]","{content}":"[data-reply-display-content]","{alertDiv}":"div.alert-error"}},function(a){return{init:function(){a.options.id=a.element.data("id")},"{acceptAnswer} click":function(){EasySocial.ajax("apps/group/discussions/controllers/reply/accept",{id:a.options.id}).done(function(){a.parent.setResolved()
})},cancelEditing:function(){a.element.removeClass("is-editing")},"{cancelEdit} click":function(){a.cancelEditing()},"{edit} click":function(){a.element.addClass("is-editing")},"{update} click":function(){var b=a.textarea().val();return""==b?(a.element.addClass("is-empty"),a.alertDiv().show(),!1):(EasySocial.ajax("apps/group/discussions/controllers/reply/update",{id:a.options.id,content:b}).done(function(b){a.content().html(b),a.element.removeClass("is-empty"),a.alertDiv().hide(),a.cancelEditing()}),void 0)},"{delete} click":function(){EasySocial.dialog({content:EasySocial.ajax("apps/group/discussions/controllers/reply/confirmDelete",{id:a.options.id}),bindings:{"{deleteButton} click":function(){EasySocial.ajax("apps/group/discussions/controllers/reply/delete",{id:a.options.id}).done(function(b){a.parent.updateReplyCounter(b.total_replies),EasySocial.dialog().close(),a.element.remove()
})}}})}}}),EasySocial.Controller("Groups.Item.Discussion.Form",{defaultOptions:{"{textarea}":"[data-reply-content]","{submitReply}":"[data-reply-submit]"}},function(a){return{init:function(){},"{submitReply} click":function(){var d=a.textarea().val();return""==d?(a.element.addClass("is-empty"),!1):(EasySocial.ajax("apps/group/discussions/controllers/reply/submit",{id:a.parent.options.id,groupId:a.parent.options.groupId,content:d}).done(function(b){a.parent.insertReply(b),a.textarea().val("")}),void 0)}}}),EasySocial.Controller("Groups.Item.News",{defaultOptions:{"{delete}":"[data-news-delete]","{likes}":"[data-likes-action]","{counter}":"[data-news-counter]","{likeContent}":"[data-likes-content]"}},function(a){return{init:function(){a.options.id=a.element.data("id"),a.options.groupId=a.element.data("group-id")
},"{likes} onLiked":function(){a.counter().removeClass("hide")},"{likes} onUnliked":function(){var e=a.likeContent().hasClass("hide");e&&a.counter().addClass("hide")},"{delete} click":function(){EasySocial.dialog({content:EasySocial.ajax("apps/group/news/controllers/news/confirmDelete",{id:a.options.id,groupId:a.options.groupId})})}}}),b.resolve()})}),EasySocial.module("site/notifications/list",function(){var b=this;EasySocial.require().done(function(a){EasySocial.Controller("NotificationsList",{defaultOptions:{"{item}":"[data-notifications-list-item]","{list}":"[data-notifications-list]","{allread}":"[data-notification-all-read]","{allclear}":"[data-notification-all-clear]","{notiLoadMoreBtn}":"[data-notification-loadmore-btn]"}},function(b){return{init:function(){b.item().implement(EasySocial.Controller.NotificationsList.Item,{"{parent}":b})
},"{allread} click":function(){EasySocial.ajax("site/controllers/notifications/setAllState",{state:"read"}).done(function(){b.item().removeClass("is-read is-hidden is-unread").addClass("is-read")})},"{allclear} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/notifications/clearAllConfirm"),bindings:{"{clearButton} click":function(){EasySocial.ajax("site/controllers/notifications/setAllState",{state:"clear"}).done(function(){b.item().removeClass("is-read is-hidden is-unread is-read").addClass("is-remove"),EasySocial.dialog().close()
})}}})},"{notiLoadMoreBtn} click":function(c){var e=a(c).data("startlimit");0>e||EasySocial.ajax("site/controllers/notifications/loadmore",{startlimit:e}).done(function(d,e){a(c).data("startlimit",e),d.length>0&&(a.buildHTML(d).insertBefore(b.notiLoadMoreBtn()),b.item().implement(EasySocial.Controller.NotificationsList.Item)),0>e&&b.notiLoadMoreBtn().hide()}).fail(function(a){return a}).always(function(){})}}}),EasySocial.Controller("NotificationsList.Item",{defaultOptions:{"{unread}":"[data-notifications-list-item-unread]","{read}":"[data-notifications-list-item-read]","{delete}":"[data-notifications-list-item-delete]"}},function(a){return{init:function(){a.options.id=a.element.data("id")
},"{unread} click":function(){EasySocial.ajax("site/controllers/notifications/setState",{id:a.options.id,state:"unread"}).done(function(){a.element.removeClass("is-read is-hidden is-unread").addClass("is-unread	")})},"{read} click":function(){EasySocial.ajax("site/controllers/notifications/setState",{id:a.options.id,state:"read"}).done(function(){a.element.removeClass("is-read is-hidden is-unread").addClass("is-read")})},"{delete} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/notifications/clearConfirm"),bindings:{"{clearButton} click":function(){EasySocial.ajax("site/controllers/notifications/setState",{id:a.options.id,state:"clear"}).done(function(){a.element.removeClass("is-read is-hidden is-unread is-read").addClass("is-remove"),EasySocial.dialog().close()
}).fail(function(a){EasySocial.dialog({content:a.message})})}}})}}}),b.resolve()})}),EasySocial.module("site/points/history",function(){var a=this;EasySocial.require().done(function(b){EasySocial.Controller("Points.History",{defaultOptions:{"{loadMore}":"[data-points-history-pagination]","{timeline}":"[data-points-history-timeline]"}},function(a){return{init:function(){},"{loadMore} click":function(c){var e=b(c).data("current");EasySocial.ajax("site/views/points/getHistory",{limitstart:e,id:a.options.id}).done(function(d,e,f){a.timeline().append(d),b(c).data("current",e),f&&b(c).hide()
})}}}),a.resolve()})}),EasySocial.module("site/polls/polls",function(){var b=this,c=EasySocial.options.momentLang;EasySocial.require().library("datetimepicker","moment/"+c).view("site/loading/small").done(function(a){EasySocial.Controller("Polls",{defaultOptions:{interval:30,checknew:null,source:null,sourceId:null,autoload:!0,"{itemList}":"[data-polls-list]","{copiedItem}":"[data-polls-item-copied]","{pollTitle}":"[data-polls-title]","{pollItemList}":"[data-polls-item]","{pollItem}":"[data-polls-item-text]","{pollMultiple}":"[data-polls-multiple]","{pollExpiry}":"[data-polls-expirydate]","{itemTobeRemoved}":"[data-polls-tobe-removed]","{pollSourceId}":"[data-polls-sourceid]","{pollId}":"[data-polls-id]","{pollUid}":"[data-polls-uid]","{pollElement}":"[data-polls-element]","{addItem}":"[data-polls-add]","{deleteItem}":"[data-polls-item-delete]",view:{loadingContent:"site/loading/small"}}},function(b){return{init:function(){b.pollExpiry().addController("EasySocial.Controller.Polls.Datetime",{"{parent}":b})
},"{deleteItem} click":function(c){var e=b.pollItemList().length;if(!(1>=e)){var f=a(c).closest("[data-polls-item]"),g=f.attr("data-id");if("undefined"!=typeof g&&g!==!1){var h=f.data("id");if((void 0!=h||""!=h)&&b.itemTobeRemoved){var i=b.itemTobeRemoved().val();i=""==i?h:i+","+h,b.itemTobeRemoved().val(i)}}f.remove()}},"{addItem} click":function(){var d=b.copiedItem().clone();d.removeAttr("data-polls-item-copied").attr("data-polls-item","").show(),d.find("input[name='copied']").attr("name","items[]").attr("data-polls-item-text",""),b.itemList().append(d)
},toData:function(){var c=[],d={id:b.pollId().val(),uid:b.pollUid().val(),element:b.pollElement().val(),title:b.pollTitle().val(),items:c,multiple:b.pollMultiple().is(":checked")?1:0,toberemove:"",sourceid:b.pollSourceId().val()};if(b.pollExpiry().trigger("datetimeExport",[d]),b.pollItem().length>0){if(a.each(b.pollItem(),function(b,d){var e=a(d),f=a(d).closest("[data-polls-item]"),g=f.attr("data-id"),h="0";"undefined"!=typeof g&&g!==!1&&(h=f.data("id")),""!=e.val()&&(finalItem={id:h,text:e.val()},c.push(finalItem))
}),b.itemTobeRemoved){var e=b.itemTobeRemoved().val();d.toberemove=e}d.items=c}return d},validateForm:function(){var c=b.toData();return a.isEmpty(c.title)||0==c.items.length?!1:c.items.length<=0?!1:!0}}}),EasySocial.Controller("Polls.Vote",{defaultOptions:{isMultiple:!1,"{itemList}":"[data-polls-list]","{resultList}":"[data-polls-results-list]","{voteItem}":"[data-vote-item]","{voteOption}":"[data-vote-item-option]","{voteNotice}":"[data-polls-notice]","{resultBtnContainer}":"[data-polls-result-button-div]","{editBtn}":"[data-polls-edit-button]","{viewVoterBtn}":"[data-poll-count-button]",view:{loadingContent:"site/loading/small"}}},function(b,c,d){return{init:function(){c.id=d.data("id")
},updateProgressBar:function(){var c=b.voteItem(),d=0;a.each(c,function(b,c){var e=a(c).data("count");d+=e}),a.each(c,function(c,e){var f=a(e).data("count"),g=a(e).data("id"),h=f/d*100,i="[data-poll-bar-"+g+"] .progress-bar",j="[data-poll-count-label-"+g+"]";a(i).css("width",h+"%"),a(j).text(f),b.viewVoterBtn().removeClass("hide")})},showResults:function(){b.resultList().removeClass("hide"),b.resultBtnContainer().addClass("hide")},toData:function(){var c=[],d={title:b.pollTitle().val(),items:c,multiple:b.pollMultiple().is(":checked")?1:0,sourceid:b.pollSourceId().val()};
return b.pollExpiry().trigger("datetimeExport",[d]),b.pollItem().length>0&&(a.each(b.pollItem(),function(b,d){var e=a(d);""!=e.val()&&c.push(e.val())}),d.items=c),d},"{voteOption} change":function(c){var e=a(c),f=e.is(":checked")?!0:!1,g=e.data("id");f?b.updateVote(g,"vote",c):b.updateVote(g,"unvote",c),f&&!b.options.isMultiple&&a.each(b.voteOption(),function(c,d){var e=a(d);e.data("id")!=g&&e.is(":checked")&&(selectItem=e.data("id"),e.prop("checked",!1),b.updateVote(selectItem,"unvote",e))})},"{viewVoterBtn} click":function(c){var e=a(c).closest("[data-vote-item]"),f=a(e).data("id");
EasySocial.ajax("site/views/polls/voters",{id:b.options.id,itemid:f}).done(function(b){if(""!=a.trim(b)){var c="[data-poll-voters-"+f+"]";a(c).html(b).removeClass("hide")}}).fail(function(){})},updateVote:function(c,d,e){EasySocial.ajax("site/controllers/polls/vote",{id:b.options.id,itemId:c,act:d}).done(function(){var g=a(e).closest("[data-vote-item]"),h=a(g).data("count");"vote"==d?h+=1:"unvote"==d&&(h-=1),a(g).data("count",h),b.updateProgressBar()}).fail(function(a){b.voteNotice().removeClass("hide").text(a.message)
})},"{editBtn} click":function(){},"{resultBtn} click":function(){b.showResults()},"{voteBtn} click":function(){var e=[];a.each(b.voteOption(),function(b,c){var d=a(c);d.is(":checked")&&e.push(d.data("id"))}),0!=e.length&&(b.voteBtn().hide(),b.showResults(),EasySocial.ajax("site/controllers/polls/vote",{id:b.options.id,items:e}).done(function(a,c){b.updateProgressBar(c),b.viewBtn().removeClass("hide"),b.voteNotice().removeClass("hide").addClass("alert-success").text(a).delay(5e3).fadeOut()}).fail(function(a){b.voteNotice().removeClass("hide").text(a.message)
}))}}}),EasySocial.Controller("Polls.Datetime",{defaultOptions:{"{picker}":"[data-picker]","{toggle}":"[data-picker-toggle]","{datetime}":"[data-datetime]"}},function(b){return{init:function(){var d=new a.moment,e=(new Date).getFullYear()+10,f="DD-MM-YYYY hh:mm A";d.date(d.date()-1),b.picker()._datetimepicker({component:"es",useCurrent:!1,format:f,minDate:d,maxDate:new a.moment({y:e}),icons:{time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down"},sideBySide:!1,pickTime:1,minuteStepping:1,language:c});
var g=b.element.data("value");if(""!=g){var h=a.moment(g);b.datetimepicker("setDate",h)}},datetimepicker:function(a,c){return b.picker().data("DateTimePicker")[a](c)},"{toggle} click":function(){b.picker().focus()},"{picker} dp.change":function(a,c){b.setDateValue(c.date.toDate())},setDateValue:function(a){b.datetime().val(a.getFullYear()+"-"+("00"+(a.getMonth()+1)).slice(-2)+"-"+("00"+a.getDate()).slice(-2)+" "+("00"+a.getHours()).slice(-2)+":"+("00"+a.getMinutes()).slice(-2)+":"+("00"+a.getSeconds()).slice(-2))
},"{self} datetimeExport":function(a,c,d){d.expirydate=b.datetime().val()}}}),b.resolve()})}),EasySocial.module("site/profile/about",function(){var b=this;EasySocial.require().script("field").library("history").done(function(){EasySocial.Controller("Profile.About",{defaultOptions:{"{stepItem}":"[data-profile-about-step-item]","{stepContent}":"[data-profile-about-step-content]","{fieldItem}":"[data-field]"}},function(a){return{init:function(){a.fieldItem().addController("EasySocial.Controller.Field.Base",{mode:"display"})
},"{stepItem} click":function(b,c){c.preventDefault(),b.find("a").route();var d=b.data("for");a.stepItem().removeClass("active"),b.addClass("active"),a.stepContent().filterBy("id",d).trigger("activateTab")},"{stepContent} activateTab":function(b){a.stepContent().removeClass("active"),b.addClass("active"),b.find(a.fieldItem.selector).trigger("onShow")}}}),b.resolve()})}),EasySocial.module("site/profile/admintool",function(){var b=this;EasySocial.require().done(function(a){EasySocial.Controller("Profile.Admin",{defaultOptions:{"{deleteUser}":"[data-admintool-delete]","{banUser}":"[data-admintool-ban]","{unban}":"[data-admintool-unban]"}},function(){return{init:function(){},"{unban} click":function(a){var b=a.data("id");
EasySocial.dialog({content:EasySocial.ajax("site/views/profile/confirmUnban",{id:b}),bindings:{"{unbanButton} click":function(){EasySocial.ajax("site/controllers/profile/unbanUser",{id:b}).done(function(a){EasySocial.dialog({content:a})})},"{closeButton} click":function(){EasySocial.dialog().close()}}})},"{deleteUser} click":function(a){var b=a.data("id");EasySocial.dialog({content:EasySocial.ajax("site/views/profile/confirmDeleteUser",{id:b}),bindings:{"{deleteButton} click":function(){EasySocial.ajax("site/controllers/profile/deleteUser",{id:b}).done(function(a){EasySocial.dialog({content:a})
})},"{closeButton} click":function(){EasySocial.dialog().close()}}})},"{banUser} click":function(b){var c=b.data("id");EasySocial.dialog({content:EasySocial.ajax("site/views/profile/confirmBanUser",{id:c}),bindings:{"{banButton} click":function(){var b=a("[data-ban-period]").val();EasySocial.ajax("site/controllers/profile/banUser",{id:c,period:b}).done(function(a){EasySocial.dialog({content:a})})},"{closeButton} click":function(){EasySocial.dialog().close()}}})}}}),b.resolve()})}),EasySocial.module("site/profile/edit",function(){var b=this;
EasySocial.require().script("validate","field","oauth/facebook").done(function(a){EasySocial.Controller("Profile.Edit",{defaultOptions:{userid:null,"{stepContent}":"[data-profile-edit-fields-content]","{stepItem}":"[data-profile-edit-fields-step]","{profileForm}":"[data-profile-fields-form]","{profileContent}":"[data-profile-edit-fields]","{fieldItem}":"[data-profile-edit-fields-item]","{save}":"[data-profile-fields-save]","{saveClose}":"[data-profile-fields-save-close]","{deleteProfile}":"[data-profile-edit-delete]","{taskInput}":'input[name="task"]'}},function(b){return{init:function(){b.fieldItem().addController("EasySocial.Controller.Field.Base",{userid:b.options.userid,mode:"edit"})
},errorFields:[],"{fieldItem} error":function(a){b.triggerStepError(a)},"{fieldItem} clear":function(a){b.clearStepError(a)},"{fieldItem} onError":function(a){b.triggerStepError(a)},triggerStepError:function(c){var d=c.data("id"),e=c.parents(b.stepContent.selector).data("id");a.inArray(d,b.errorFields)<0&&b.errorFields.push(d),b.stepItem().filterBy("for",e).trigger("error")},clearStepError:function(c){var d=c.data("id"),e=c.parents(b.stepContent.selector).data("id");b.errorFields=a.without(b.errorFields,d),b.stepItem().filterBy("for",e).trigger("clear")
},"{stepItem} click":function(c){var e=a(c).data("for");b.profileContent().show(),b.stepItem().removeClass("active"),c.addClass("active"),b.stepContent().removeClass("active");var f=b.stepContent().filterBy("id",e);f.addClass("active"),f.find(b.fieldItem.selector).trigger("show")},"{stepItem} error":function(a){a.addClass("error")},"{stepItem} clear":function(a){b.errorFields.length<1&&a.removeClass("error")},"{save} click":function(c,d){return d.preventDefault(),a(c).addClass("btn-loading"),b.profileForm().validate().fail(function(){a(c).removeClass("btn-loading"),EasySocial.dialog({content:EasySocial.ajax("site/views/profile/showFormError")})
}).done(function(){b.taskInput().val("save"),b.profileForm().submit()}),!1},"{saveClose} click":function(c,d){return d.preventDefault(),a(c).addClass("btn-loading"),b.profileForm().validate().fail(function(){a(c).removeClass("btn-loading"),EasySocial.dialog({content:EasySocial.ajax("site/views/profile/showFormError")})}).done(function(){b.taskInput().val("saveclose"),b.profileForm().submit()}),!1},"{deleteProfile} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/profile/confirmDelete")})
}}}),b.resolve()})}),EasySocial.module("site/profile/feeds",function(){var b=this;EasySocial.require().library("history").done(function(a){EasySocial.Controller("Profile.Feeds",{defaultOptions:{"{menuItem}":"[data-profileSidebar-menu]","{item}":"[data-profileFeeds-item]","{filter}":"[data-profileFeeds-Filter-edit]"}},function(b){return{init:function(){b.item().implement(EasySocial.Controller.Profile.Feeds.Item,{"{parent}":b,"{profile}":b.parent})},"{menuItem} click":function(c){b.menuItem().removeClass("active"),a(c).addClass("active")
},addFilterItem:function(a){a.find("[data-profileFeeds-item]").implement(EasySocial.Controller.Profile.Feeds.Item,{"{parent}":b,"{profile}":b.parent}),a.appendTo(b.element)}}}),EasySocial.Controller("Profile.Feeds.Item",{defaultOptions:{}},function(b){return{clicked:!1,init:function(){},"{self} click":function(){a(".es-streams").removeClass("no-stream");{var c=b.element.data("type"),d=b.element.data("filterid"),e=b.element.data("user"),f=b.element.data("url"),g=b.element.data("title");b.element.data("description")
}if(!b.clicked){b.clicked=!0;var i="[data-stream-counter-";"list"==c?i=i+c+"-"+id:i+=c,i+="]",a(i).html("0"),b.element.removeClass("has-notice");var j=a.joomla.appendTitle;"before"===j&&(g=a.joomla.sitename+(g?" - "+g:"")),"after"===j&&(g=(g?g+" - ":"")+a.joomla.sitename),History.pushState({state:1},g,f),b.profile.contents().html(""),b.profile.updatingContents(),b.element.addClass("loading"),EasySocial.ajax("site/controllers/profile/getStream",{type:c,filterId:d,id:e,view:"profile"}).done(function(d,e){0==e&&a(".es-streams").addClass("no-stream"),b.trigger("onStreamUpdate",[c]),window.streamFilter=c,b.profile.updateContent(d);
try{MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub])}catch(f){}}).fail(function(a){return a}).always(function(){b.clicked=!1,b.element.removeClass("loading")})}}}}),b.resolve()})}),EasySocial.module("site/profile/friends",function(){var b=this;EasySocial.require().view("site/loading/small").language("COM_EASYSOCIAL_FRIENDS_DIALOG_CANCEL_REQUEST","COM_EASYSOCIAL_CANCEL_BUTTON","COM_EASYSOCIAL_YES_CANCEL_MY_REQUEST_BUTTON").done(function(a){EasySocial.Controller("Profile.Friends.Request",{defaultOptions:{id:null,callback:null,"{addButton}":"[data-profileFriends-add]","{manageButton}":"[data-profileFriends-manage]","{pendingButton}":"[data-profileFriends-pending]","{respondButton}":"[data-profileFriends-respond]","{cancelRequest}":"[data-profileFriends-cancelRequest]","{unfriend}":"[data-profile-friends-unfriend]","{approve}":"[data-friends-response-approve]","{reject}":"[data-friends-response-reject]","{button}":"[data-profileFriends-button]","{dropdown}":"[data-profileFriends-dropdown]",view:{loader:"site/loading/small"}}},function(b){return{init:function(){b.options.id=b.element.data("friend"),b.options.target=b.element.data("id"),b.options.callback=b.element.data("callback")
},showDropDown:function(){b.element.addClass("open")},hideDropDown:function(){b.element.removeClass("open")},"{addButton} click":function(){var c=b.button();c.addClass("loading"),EasySocial.ajax("site/controllers/friends/request",{id:b.options.target}).done(function(a,c){b.dropdown().remove(),b.options.id=a,b.button().replaceWith(c)}).fail(function(a){EasySocial.dialog({content:a.message}),c.removeClass("loading")})},"{cancelRequest} click":function(){b.options.id;b.hideDropDown(),EasySocial.dialog({content:EasySocial.ajax("site/views/friends/confirmCancel"),bindings:{"{confirmButton} click":function(){EasySocial.ajax("site/controllers/friends/cancelRequest",{id:b.options.id}).done(function(a){b.dropdown().remove(),b.button().replaceWith(a),EasySocial.dialog().close()
})}}})},"{unfriend} click":function(c){var e=a(c).data("id");EasySocial.dialog({content:EasySocial.ajax("site/views/friends/confirmUnfriend",{id:e}),bindings:{"{unfriendButton} click":function(){EasySocial.ajax("site/controllers/friends/unfriend",{id:b.options.id}).done(function(a){b.dropdown().remove(),b.button().replaceWith(a),EasySocial.dialog().close()})}}})},"{approve} click":function(){var d=b.options.id;b.hideDropDown(),EasySocial.ajax("site/controllers/friends/approve",{id:d}).done(function(a){b.button().replaceWith(a)
})},"{reject} click":function(){var d=b.options.id;b.hideDropDown(),EasySocial.dialog({content:EasySocial.ajax("site/views/friends/confirmReject"),bindings:{"{rejectButton} click":function(){EasySocial.ajax("site/controllers/friends/reject",{id:d}).done(function(a){b.button().replaceWith(a),EasySocial.dialog({content:EasySocial.ajax("site/views/friends/friendRejected")})})}}})},"{dropdown} click":function(a,b){b.stopPropagation()},"{approveRequest} click":function(){b.respondForm().find("input[name=task]").val("approve"),b.respondForm().find("input[name=id]").val(b.options.friendId),b.respondForm().find("input[name=return]").val(b.options.callback),b.respondForm().submit()
}}}),b.resolve()})}),EasySocial.module("site/profile/header",function(){var b=this;EasySocial.require().script("site/profile/friends","site/profile/subscriptions","site/conversations/composer").done(function(){EasySocial.Controller("Profile.Header",{defaultOptions:{id:null,"{friendRequest}":"[data-profile-friends]","{subscribe}":"[data-profile-followers]","{conversation}":"[data-profile-conversation]"}},function(a){return{init:function(){a.options.id=a.element.data("id"),a.options.name=a.element.data("name"),a.options.avatar=a.element.data("avatar"),a.friendRequest().implement(EasySocial.Controller.Profile.Friends.Request,{"{parent}":a}),a.subscribe().implement(EasySocial.Controller.Profile.Subscriptions,{"{parent}":a}),a.conversation().implement(EasySocial.Controller.Conversations.Composer.Dialog,{recipient:{id:a.options.id,name:a.options.name,avatar:a.options.avatar}})
}}}),b.resolve()})}),EasySocial.module("site/profile/subscriptions",function(){var b=this;EasySocial.Controller("Profile.Subscriptions",{defaultOptions:{id:null,"{follow}":"[data-subscription-follow]","{unfollow}":"[data-subscription-unfollow]","{message}":"[data-subscription-message]","{button}":"[data-subscription-button]"}},function(a){return{init:function(){a.options.id=a.element.data("id")},toggleDropDown:function(){a.element.toggleClass("open")},"{unfollow} click":function(){a.toggleDropDown(),EasySocial.ajax("site/controllers/profile/unfollow",{id:a.options.id,type:"user"}).done(function(b){a.button().replaceWith(b)
})},"{follow} click":function(){a.toggleDropDown(),EasySocial.ajax("site/controllers/profile/follow",{id:a.options.id,type:"user"}).done(function(b){a.button().replaceWith(b)})}}}),b.resolve()}),EasySocial.module("site/profile/miniheader",function(){var b=this;EasySocial.require().library("scrollTo").done(function(a){EasySocial.Controller("Profile.MiniHeader",{defaultOptions:{"{viewport}":"[data-appscroll-viewport]","{content}":"[data-appscroll-content]","{apps}":"[data-appscroll-content] li","{buttons}":"[data-appscroll-buttons]","{nextButton}":"[data-appscroll-next-button]","{prevButton}":"[data-appscroll-prev-button]"}},function(b){return{init:function(){b.setLayout(),b.viewport().scrollTo(0)
},"{window} resize":a.debounce(function(){b.setLayout()},300),setLayout:function(){var c=b.viewport(),d=5;return a(".es-main").hasClass("w480")?(b.content().css({width:"auto"}),b.enabled=!1,void 0):(b.apps().each(function(){d+=a(this).outerWidth(!0)}),d>c.width()&&(b.content().css({width:d,"float":"none"}),b.buttons().css("opacity",1),b.enabled=!0),void 0)},enabled:!1,"{nextButton} click":function(){if(b.enabled){var a=b.viewport(),c=a.width()-80;a.scrollTo("+="+c+"px",800,{axis:"x",easing:"easeInOutCubic"})
}},"{prevButton} click":function(){if(b.enabled){var a=b.viewport(),c=a.width()-80;a.scrollTo("-="+c+"px",800,{axis:"x",easing:"easeInOutCubic"})}}}}),b.resolve()})}),EasySocial.module("site/profile/notifications",function(){var b=this;EasySocial.require().script("site/profile/header").done(function(){EasySocial.Controller("Profile.Notifications",{defaultOptions:{"{sidebarItem}":"[data-notification-item]","{contentItem}":"[data-notification-content]","{notificationForm}":"[data-notifications-form]"}},function(a){return{init:function(){},"{sidebarItem} click":function(b){a.sidebarItem().removeClass("active"),b.addClass("active"),a.contentItem().hide();
var d=b.data("alert-element");a.contentItem('[data-alert-element="'+d+'"]').show()}}}),b.resolve()})}),EasySocial.module("site/profile/privacy",function(){var b=this;EasySocial.require().script("site/profile/header").library("history","textboxlist").view("site/loading/small").done(function(a){EasySocial.Controller("Profile.Privacy",{defaultOptions:{"{sidebarItem}":"[data-profile-privacy-item]","{contentItem}":"[data-privacy-content]","{privacyItem}":"[data-privacy-item]","{privacyForm}":"[data-profile-privacy-form]","{formActions}":"[data-form-actions]",view:{loading:"site/loading/small"}}},function(b){return{init:function(){b.sidebarItem().implement(EasySocial.Controller.Profile.Privacy.Sidebar,{"{parent}":b}),b.privacyItem().implement(EasySocial.Controller.Profile.Privacy.Item,{"{parent}":b})
},updateContent:function(c){b.contentItem().hide(),a(".privacy-content-"+c).show(),"blocked"==c?b.formActions().hide():b.formActions().show()}}}),EasySocial.Controller("Profile.Privacy.Sidebar",{defaultOptions:{"{sidebarItem}":"[data-profile-privacy-item]"}},function(b){return{init:function(){},"{self} click":function(c){a("[data-profile-privacy-item]").removeClass("active"),a(c).addClass("active");var d=b.element.data("group");b.parent.updateContent(d)}}}),EasySocial.Controller("Profile.Privacy.Item",{defaultOptions:{"{selection}":"[data-privacy-select]","{hiddenCustom}":"[data-hidden-custom]","{customForm}":"[data-privacy-custom-form]","{customTextInput}":"[data-textfield]","{customItems}":"input[]","{customHideBtn}":"[data-privacy-custom-hide-button]","{customInputItem}":"[data-textboxlist-item]","{customEditBtn}":"[data-privacy-custom-edit-button]"}},function(b){return{init:function(){b.customTextInput().textboxlist({component:"es",unique:!0,plugin:{autocomplete:{exclusive:!0,minLength:2,cache:!1,query:function(a){var c=b.getTaggedUsers(),d=EasySocial.ajax("site/views/privacy/getfriends",{q:a,exclude:c});
return d}}}}),b.textboxlistLib=b.customTextInput().textboxlist("controller")},getTaggedUsers:function(){var c=[],d=b.customInputItem();return d.length>0&&a.each(d,function(b,d){c.push(a(d).data("id"))}),c},"{customTextInput} addItem":function(a,c,d){var e=b.hiddenCustom().val(),f="";if(""==e)f=d.id;else{var g=e.split(",");g.push(d.id),f=g.join(",")}b.hiddenCustom().val(f)},"{customTextInput} removeItem":function(a,c,d){for(var e=b.hiddenCustom().val(),f="",g=[],h=e.split(","),i=0;i<h.length;i++)h[i]!=d.id&&g.push(h[i]);
f=g.length<=0?"":g.join(","),b.hiddenCustom().val(f)},"{customEditBtn} click":function(){b.customForm().toggle()},"{selection} change":function(a){var c=a.val();"custom"==c?(b.customForm().show(),b.customEditBtn().show()):(b.customForm().hide(),b.customEditBtn().hide())},"{customHideBtn} click":function(){b.customForm().hide(),b.customEditBtn().show(),b.textboxlistLib.autocomplete.hide()}}}),b.resolve()})}),EasySocial.module("site/profile/profile",function(){var b=this;EasySocial.template("info/item",'<li data-profile-apps-item data-layout="custom"><a class="ml-20" href="[%= url %]" title="[%= title %]" data-info-item data-info-index="[%= index %]"><i class="fa fa-info-circle mr-5"></i> [%= title %]</a></li>'),EasySocial.require().script("site/profile/header","site/profile/feeds").library("history").done(function(a){EasySocial.Controller("Profile",{defaultOptions:{id:null,"{header}":"[data-profile-header]","{feeds}":"[data-profile-feeds]","{app}":"[data-profile-apps-item]","{action}":"[data-profile-apps-menu]","{showAllFilters}":"[data-app-filters-showall]","{appFilters}":"[data-sidebar-app-filter]","{contents}":"[data-profile-real-content]","{sidebar}":"[data-sidebar]","{sidebarToggle}":"[data-sidebar-toggle]","{info}":"[data-info]","{infoItem}":"[data-info-item]",view:{infoItem:"info/item"}}},function(b){return{init:function(){b.options.id=b.element.data("id"),b.header().implement(EasySocial.Controller.Profile.Header,{"{parent}":b}),b.feedsController=b.feeds().addController(EasySocial.Controller.Profile.Feeds,{"{parent}":b}),a(function(){b.setLayout()
}),a(".es-responsive").on("responsive",function(){b.setLayout()})},setLayout:function(){var c=b.sidebar(),d=b.sidebarToggle();if(d.is(":visible")){a('<div class="es-container responsive">').append(c).insertAfter(d)}else a(".es-profile .es-container:not(.responsive)").prepend(c),a(".es-profile .es-container.responsive").remove()},"{sidebarToggle} sidebarToggle":function(){b.setLayout()},"{app} click":function(c,d){b.app().removeClass("active"),a(c).addClass("active"),d.preventDefault();var e=c.data();if("canvas"===e.layout)return window.location=e[e.layout+"Url"],void 0;
if("custom"!==e.layout){var f=e.title;if("site/controllers/profile/getStream"==e.namespace){var g=a.joomla.appendTitle;"before"===g&&(f=a.joomla.sitename+(f?" - "+f:"")),"after"===g&&(f=(f?f+" - ":"")+a.joomla.sitename)}History.pushState({state:1},f,e[e.layout+"Url"]),b.sidebarToggle().is(":visible")&&a.scrollTo(b.contents()),EasySocial.ajax(e.namespace,{id:e.id,view:"profile",appId:e.appId},{beforeSend:function(){b.loading()}}).done(function(a){b.updateContent(a)}).fail(function(a){return a})}},"{showAllFilters} click":function(c){a(c).hide(),b.appFilters().removeClass("hide")
},updateContent:function(a){b.element.removeClass("loading"),b.contents().html(a)},updatingContents:function(){b.element.addClass("loading")},loading:function(){b.contents().html(""),b.element.addClass("loading")},"{info} click":function(c,d){d.preventDefault(),c.route(),b.loading();var e=c.data("loaded");return e?(b.infoItem().eq(0).trigger("click"),void 0):(EasySocial.ajax("site/controllers/profile/initInfo",{id:b.options.id}).done(function(d){c.data("loaded",1);var e=c.parent("[data-profile-apps-item]");a.each(d.reverse(),function(a,c){c.hide||e.after(b.view.infoItem({url:c.url,title:c.title,index:c.index})),c.html&&(b.updateContent(c.html),b.contents().find("[data-field]").trigger("onShow"))
});var f=b.infoItem().eq(0).parent("[data-profile-apps-item]");b.app().removeClass("active"),f.addClass("active")}),void 0)},"{infoItem} click":function(a,c){c.preventDefault(),a.route(),b.loading();var d=a.data("info-index");EasySocial.ajax("site/controllers/profile/getInfo",{id:b.options.id,index:d}).done(function(c){b.updateContent(c),b.contents().find("[data-field]").trigger("onShow"),b.app().removeClass("active"),a.parent("[data-profile-apps-item]").addClass("active")}).fail(function(a){b.updateContent(a.message)
})}}}),b.resolve()})}),EasySocial.module("site/registrations/registrations",function(){var b=this;EasySocial.require().script("validate","field").view("site/registration/dialog.error").language("COM_EASYSOCIAL_CLOSE_BUTTON","COM_EASYSOCIAL_REGISTRATION_ERROR_DIALOG_TITLE").done(function(a){EasySocial.Controller("Registrations.Form",{defaultOptions:{previousLink:null,"{submit}":"[data-registration-submit]","{field}":"[data-registration-fields-item ]","{previous}":"[data-registration-previous]",view:{formError:"site/registration/dialog.error"}}},function(b){return{init:function(){b.field().addController("EasySocial.Controller.Field.Base",{mode:"register"})
},"{previous} click":function(a,c){return c.preventDefault(),window.location.href=b.options.previousLink,!1},"{submit} click":function(c,d){return d.preventDefault(),a(c).addClass("btn-loading"),a(b.element).validate().fail(function(){a(c).removeClass("btn-loading"),EasySocial.dialog({title:a.language("COM_EASYSOCIAL_REGISTRATION_ERROR_DIALOG_TITLE"),content:b.view.formError(!0),width:400,height:150,buttons:[{name:a.language("COM_EASYSOCIAL_CLOSE_BUTTON"),classNames:"btn btn-es-primary",click:function(){EasySocial.dialog().close()
}}]})}).done(function(){b.element.submit()}),!1}}}),b.resolve()})}),EasySocial.module("site/search/advanced.criteria",function(){var a=this;EasySocial.require().view("site/loading/small").script("site/search/map").language("COM_EASYSOCIAL_ADVANCED_SEARCH_ADDRESS_DISTANCE_NOTICE").done(function(b){EasySocial.Controller("Search.Advanced.Criteria",{defaultOptions:{"{addButton}":"[data-criteria-add-button]","{removeButton}":"[data-criteria-remove-button]","{itemConditionDiv}":"[data-itemConditionDiv]","{itemCriteria}":"[data-itemCriteria]","{itemDataKey}":"[data-itemDataKey]","{itemOperator}":"[data-itemOperator]","{itemCondition}":"[data-itemCondition]","{dateStart}":"[data-start]","{dateEnd}":"[data-end]","{dataCondition}":"[data-condition]","{frmDistance}":"[data-distance]","{frmAddress}":"[data-address]","{frmLatitude}":"[data-latitude]","{frmLongitude}":"[data-longitude]","{dataNotice}":"[data-criteria-notice]","{locationLabel}":"[data-location-label]","{textField}":"[data-location-textfield]",view:{loadingContent:"site/loading/small"}}},function(a){return{init:function(){a.element.addController(EasySocial.Controller.Search.Map),void 0!=a.frmAddress().val()&&""!=a.frmAddress().val()&&(a.textField().val(a.frmAddress().val()),a.locationLabel().removeClass("hide"))
},"{itemOperator} change":function(){criteria=a.itemCriteria().find("select"),f=a.itemDataKey().find("select"),operator=a.itemOperator().find("select");var b=criteria.val().split("|"),d=(b[0],b[1]),e=operator.val(),f=f.val();"blank"==e||"notblank"==e?a.itemCondition().hide():("between"==e?a.getConditions(d,e,f):("datetime"==d||"birthday"==d)&&a.dateStart().length>0&&a.getConditions(d,e,f),a.itemCondition().is(":hidden")&&a.itemCondition().show())},getConditions:function(c,d,e){EasySocial.ajax("site/controllers/search/getConditions",{element:c,operator:d,datakey:e}).done(function(c){a.itemCondition().show(),a.itemCondition().remove();
var d=b.buildHTML(c);d.insertAfter(a.itemOperator())}).fail(function(a){return a}).always(function(){})},"{frmDistance} change":function(){var b=a.frmDistance().val(),c=a.frmAddress().val(),d=a.frmLatitude().val(),e=a.frmLongitude().val(),f=b+"|"+d+"|"+e+"|"+c;a.dataCondition().val(f)},"{dateStart} change":function(){start=a.dateStart().val(),end=a.dateEnd().val();var c=start;end.length>0&&(c=c+"|"+end),a.dataCondition().val(c)},"{dateEnd} change":function(){start=a.dateStart().val(),end=a.dateEnd().val();var b=start;
b=b+"|"+end,a.dataCondition().val(b)},"{itemCriteria} change":function(){if(select=a.itemCriteria().find("select"),""!=select.val()){var c=select.val().split("|"),d=c[0],e=c[1];a.dataNotice().addClass("hide"),EasySocial.ajax("site/controllers/search/getDataKeys",{key:d,element:e}).done(function(c,d,e){a.itemDataKey().remove(),a.itemOperator().remove(),a.itemCondition().remove();var f=b.buildHTML(d);if(f.insertAfter(a.itemConditionDiv()),""!=c){var f=b.buildHTML(c);f.insertAfter(a.itemConditionDiv())}var f=b.buildHTML(e);
f.insertAfter(a.itemOperator())}).fail(function(a){return a}).always(function(){})}},"{itemDataKey} change":function(){if(select=a.itemCriteria().find("select"),""!=select.val()){var c=select.val().split("|"),d=c[0],e=c[1],f=a.itemDataKey().find("select"),g=f.val();EasySocial.ajax("site/controllers/search/getOperators",{key:d,element:e,datakey:g}).done(function(c,d){a.itemOperator().remove();var e=b.buildHTML(c);e.insertAfter(a.itemDataKey()),a.itemCondition().remove();var e=b.buildHTML(d);e.insertAfter(a.itemOperator()),"distance"==g?a.locationLabel().removeClass("hide"):a.locationLabel().addClass("hide")
}).fail(function(a){return a}).always(function(){})}},"{removeButton} click":function(){a.element.remove()}}}),a.resolve()})}),EasySocial.module("site/search/map",function(a){var b=this;a.template("easysocial/maps.suggestion",'<div class="es-location-suggestion" data-location-suggestion><span class="formatted_address">[%= location.formatted_address %]</span></div>'),EasySocial.require().library("gmaps").done(function(){var c={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,ENTER:13,ESCAPE:27,LEFT:37,RIGHT:39,SPACE:32,TAB:9,UP:38};
EasySocial.Controller("Search.Map",{defaultOptions:{"{icon}":"[data-loaction-icon]","{locationLabel}":"[data-location-label]","{textField}":"[data-location-textfield]","{detectButton}":"[data-location-detect]","{suggestions}":"[data-location-suggestions]","{suggestion}":"[data-location-suggestion]","{autocomplete}":"[data-location-autocomplete]","{dataCondition}":"[data-condition]","{frmDistance}":"[data-distance]","{frmAddress}":"[data-address]","{frmLatitude}":"[data-latitude]","{frmLongitude}":"[data-longitude]",view:{suggestion:"maps.suggestion"}}},function(b){return{init:function(){},locations:{},lastQueryAddress:null,results:[],result:null,"{detectButton} click":function(){b.icon().removeClass("fa fa-flash").addClass("btn-loading"),clearTimeout(b.detectTimer),a.GMaps.geolocate({success:function(c){a.GMaps.geocode({lat:c.coords.latitude,lng:c.coords.longitude,callback:function(a,c){"OK"==c&&b.suggest(a)
}})},error:function(b){var c="";switch(b.code){case 1:c=a.language("COM_EASYSOCIAL_LOCATION_PERMISSION_ERROR");break;case 2:c=a.language("COM_EASYSOCIAL_LOCATION_TIMEOUT_ERROR");break;case 3:default:c=a.language("COM_EASYSOCIAL_LOCATION_UNAVAILABLE_ERROR")}EasySocial.dialog({content:c})},always:function(){clearTimeout(b.detectTimer),b.icon().removeClass("btn-loading").addClass("fa fa-flash")}})},lookup:a.debounce(function(c){a.GMaps.geocode({address:c,callback:function(a,d){"OK"==d&&(b.locations[c]=a,b.suggest(a),b.lastQueryAddress=c)
}})},250),"{textField} keypress":function(d,e){switch(e.keyCode){case c.UP:var f=a(b.suggestion(".active").prev(b.suggestion.selector)[0]||b.suggestion(":last")[0]);b.suggestion().removeClass("active"),f.addClass("active").trigger("activate"),b.suggestions().scrollTo(f,{offset:-1*f.height()}),e.preventDefault();break;case c.DOWN:var g=a(b.suggestion(".active").next(b.suggestion.selector)[0]||b.suggestion(":first")[0]);b.suggestion().removeClass("active"),g.addClass("active").trigger("activate"),b.suggestions().scrollTo(g,{offset:-1*g.height()}),e.preventDefault();
break;case c.ENTER:var h=b.suggestion(".active"),i=h.data("location");b.set(i),b.hideSuggestions(),e.preventDefault();break;case c.ESCAPE:b.hideSuggestions(),e.preventDefault()}},"{textField} keyup":function(d,e){switch(e.keyCode){case c.UP:case c.DOWN:case c.LEFT:case c.RIGHT:case c.ENTER:case c.ESCAPE:break;default:var f=a.trim(d.val());""===f&&b.hideSuggestions();var g=b.locations[f];g?(b.lastQueryAddress=f,b.suggest(g)):b.lookup(f)}},set:function(a){var c=a.geometry.location.lat(),d=a.geometry.location.lng(),e=a.formatted_address,f=b.frmDistance().val();
b.frmAddress().val(e),b.frmLatitude().val(c),b.frmLongitude().val(d);var g=f+"|"+c+"|"+d+"|"+e;b.dataCondition().val(g),b.textField().val(e),b.hideSuggestions()},"{suggestion} click":function(a){var d=a.data("location");b.set(d)},suggest:function(c){b.hideSuggestions();var d=b.suggestions();c.length<0||(b.results=c,a.each(c,function(a,c){b.view.suggestion({location:c}).data("location",c).appendTo(d)}),b.showSuggestions())},showSuggestions:function(){b.focusSuggestion=!0,setTimeout(function(){b.autocomplete().addClass("active");
var c=a(document),d="click.es.advancedsearch.location";c.off(d).on(d,function(e){var f=a(e.target).parents().andSelf();f.filter(b.element).length>0||(c.off(d),b.hideSuggestions())})},500)},hideSuggestions:function(){b.suggestions().empty(),b.focusSuggestion=!1,b.autocomplete().removeClass("active"),a(document).off("click.es.advancedsearch.location")}}}),b.resolve()})}),EasySocial.module("site/search/advanced",function(){var a=this;EasySocial.require().script("site/search/advanced.criteria").view("site/loading/small").language("COM_EASYSOCIAL_STREAM_LOAD_PREVIOUS_STREAM_ITEMS").done(function(b){EasySocial.Controller("Search.Advanced",{defaultOptions:{"{sidebar}":"[data-advsearch-sidebar]","{sidebarItem}":"[data-sidebar-item]","{item}":"[data-adv-search-item]","{list}":"[data-advsearch-list]","{searchForm}":"[data-adv-search-form]","{savefilterBtn}":"[data-advsearch-savefilter]","{deletefilterBtn}":"[data-advsearch-deletefilter]","{content}":"[data-advsearch-content]","{addCriteria}":"[data-adv-search-add-criteria]","{criteriaTemplate}":"[data-adv-search-criteria-template]","{resultlist}":"[data-advsearch-result-list]",view:{loadingContent:"site/loading/small"}}},function(a){return{init:function(){a.sidebarController=a.sidebar().addController(EasySocial.Controller.Search.Advanced.Sidebar,{"{parent}":a}),a.item().addController(EasySocial.Controller.Search.Advanced.Criteria,{"{parent}":a})
},updatingContents:function(){a.element.addClass("loading")},updateContents:function(b){a.element.removeClass("loading"),a.content().html(b)},"{deletefilterBtn} click":function(c){var d=b(c).data("id");EasySocial.dialog({content:EasySocial.ajax("site/views/search/confirmFilterDelete",{fid:d}),bindings:{"{deleteButton} click":function(){EasySocial.ajax("site/controllers/search/deleteFilter",{fid:d}).done(function(){b("[data-search-filter-"+d+"]").remove(),b("[data-search-filter-0]").addClass("active"),a.content().html(""),a.updatingContents(),EasySocial.ajax("site/controllers/search/getFilterResults",{fid:"0"}).done(function(c){var c=b.buildHTML(c);
c.addController("EasySocial.Controller.Search.Advanced.Criteria",{"{parent}":a}),a.updateContents(c)}).fail(function(a){return a}),EasySocial.dialog().close()})}}})},"{savefilterBtn} click":function(){var c=a.searchForm().serializeJSON();EasySocial.dialog({content:EasySocial.ajax("site/views/search/confirmSaveFilter"),bindings:{"{saveButton} click":function(){return this.inputWarning().hide(),filterName=this.inputTitle().val(),filterSitewide=this.inputSitewide().is(":checked")?1:0,""==filterName?(this.inputWarning().show(),void 0):(EasySocial.ajax("site/controllers/search/addFilter",{title:filterName,sitewide:filterSitewide,data:c}).done(function(c,d){var e=b.buildHTML(c);
a.sidebarController.addFilterItem(e),EasySocial.dialog(d),setTimeout(function(){EasySocial.dialog().close()},2e3)}),void 0)}}})},"{addCriteria} click":function(){var e=a.criteriaTemplate().clone();b(e).removeClass("hide").removeAttr("data-adv-search-criteria-template").addController(EasySocial.Controller.Search.Advanced.Criteria,{"{parent}":a}),a.list().append(e)}}}),EasySocial.Controller("Search.Advanced.Sidebar",{defaultOptions:{"{item}":"[data-sidebar-item]",view:{loadingContent:"site/loading/small"}}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Search.Advanced.Sidebar.Item,{"{parent}":a,"{root}":a.parent})
},addFilterItem:function(c){c.implement(EasySocial.Controller.Search.Advanced.Sidebar.Item,{"{parent}":a,"{root}":a.parent}),c.appendTo(b("[data-advsearch-sidebar-ul]"))}}}),EasySocial.Controller("Search.Advanced.Sidebar.Item",{defaultOptions:{"{filterDeleteBtn}":"[data-search-filter-delete]","{filterItem}":"[data-search-filter-item]","{item}":"[data-adv-search-item]",view:{loadingContent:"site/loading/small"}}},function(a){return{init:function(){},"{filterItem} click":function(c,d){d.preventDefault(),b("[data-sidebar-item]").removeClass("active loading"),a.element.addClass("active");
{var e=a.element.data("id");a.element.data("url"),a.element.data("title")}b(c).route(),a.root.content().html(""),a.root.updatingContents(),a.element.addClass("loading"),EasySocial.ajax("site/controllers/search/getFilterResults",{fid:e}).done(function(c){var c=b.buildHTML(c);c.find(a.item.selector).addController("EasySocial.Controller.Search.Advanced.Criteria",{"{parent}":a.root}),a.root.updateContents(c)}).fail(function(a){return a}).always(function(){a.element.removeClass("loading")})}}}),a.resolve()})}),EasySocial.module("site/search/advanced.list.group",function(){var b=this;
EasySocial.require().view("site/loading/small","site/search/loadbutton").script("site/groups/groups").language("COM_EASYSOCIAL_SEARCH_LOAD_MORE_ITEMS").done(function(a){EasySocial.Controller("Search.Advanced.List.Group",{defaultOptions:{"{item}":"[data-search-item]","{pagination}":"[data-search-pagination]","{loadmorebutton}":"[data-search-loadmore-button]","{searchForm}":"[data-adv-search-form]",view:{loadingContent:"site/loading/small",loadmoreContent:"site/search/loadbutton"}}},function(b){return{init:function(){b.item().implement(EasySocial.Controller.Groups.Browser.Item),b.on("scroll.advsearch",window,a._.debounce(function(){b.loading||b.pagination().visible()&&b.loadMore()
},250))},"{loadmorebutton} click":function(){b.loadMore()},loadMore:function(){var a=b.pagination().data("last-limit"),c=b.searchForm().serializeJSON();return"-1"==a?(b.loadmorebutton().hide(),void 0):(b.loading=!0,EasySocial.ajax("site/controllers/search/loadmore",{data:c,nextlimit:a},{beforeSend:function(){b.pagination().html(b.view.loadingContent())}}).done(function(a,c){b.pagination().data("last-limit",c),b.pagination().before(a),b.item().implement(EasySocial.Controller.Groups.Browser.Item),"-1"==c?b.pagination().html(""):b.pagination().html(b.view.loadmoreContent())
}).fail(function(a){return a}).always(function(){b.loading=!1}),void 0)}}}),b.resolve()})}),EasySocial.module("site/search/advanced.list",function(){var b=this;EasySocial.require().view("site/loading/small","site/search/loadbutton").script("site/search/item").language("COM_EASYSOCIAL_SEARCH_LOAD_MORE_ITEMS").done(function(a){EasySocial.Controller("Search.Advanced.List",{defaultOptions:{"{item}":"[data-search-item]","{pagination}":"[data-search-pagination]","{loadmorebutton}":"[data-search-loadmore-button]","{searchForm}":"[data-adv-search-form]",view:{loadingContent:"site/loading/small",loadmoreContent:"site/search/loadbutton"}}},function(b){return{init:function(){b.item().implement(EasySocial.Controller.Search.Item),b.on("scroll.advsearch",window,a._.debounce(function(){b.loading||b.pagination().visible()&&b.loadMore()
},250))},"{loadmorebutton} click":function(){b.loadMore()},loadMore:function(){var a=b.pagination().data("last-limit"),c=b.searchForm().serializeJSON();return"-1"==a?(b.loadmorebutton().hide(),void 0):(b.loading=!0,EasySocial.ajax("site/controllers/search/loadmore",{data:c,nextlimit:a},{beforeSend:function(){b.pagination().html(b.view.loadingContent())}}).done(function(a,c){b.pagination().data("last-limit",c),b.pagination().before(a),b.item().implement(EasySocial.Controller.Search.Item),"-1"==c?b.pagination().html(""):b.pagination().html(b.view.loadmoreContent())
}).fail(function(a){return a}).always(function(){b.loading=!1}),void 0)}}}),b.resolve()})}),EasySocial.module("site/search/item",function(){var b=this;EasySocial.require().view("site/loading/small").language("COM_EASYSOCIAL_FRIENDS_REQUEST_SENT_NOTICE").done(function(a){EasySocial.Controller("Search.Item",{defaultOptions:{"{toggle}":"[data-activity-toggle]","{deleteBtn}":"[data-activity-delete]","{addFriendButton}":"[data-search-friend-button]","{pendingFriendButton}":"[data-search-friend-pending-button]","{dropdown}":"[data-profileFriends-dropdown]",view:{loader:"site/loading/small"}}},function(b){return{init:function(){},"{pendingFriendButton} click":function(){b.dropdown().html(a.language("COM_EASYSOCIAL_FRIENDS_REQUEST_SENT_NOTICE"))
},"{addFriendButton} click":function(c){var d=b.element.data("friend-uid");a(c).addClass("btn-loading"),EasySocial.ajax("site/controllers/friends/request",{viewCallback:"usersRequest",id:d}).done(function(d){a(c).replaceWith(d),b.dropdown().remove(),a(c).removeClass("btn-loading")}).fail(function(a){EasySocial.dialog({content:EasySocial.ajax("site/views/friends/exceeded")}),b.dropdown().html(a)})}}}),b.resolve()})}),EasySocial.module("site/search/dating",function(){var b=this;EasySocial.require().script("site/search/map").done(function(){EasySocial.Controller("Search.Dating",{defaultOptions:{"{itemCriteria}":"[data-itemCriteria]","{itemDataKey}":"[data-itemDataKey]","{itemOperator}":"[data-itemOperator]","{itemCondition}":"[data-itemCondition]","{dateStart}":"[data-start]","{dateEnd}":"[data-end]","{dataCondition}":"[data-condition]","{dataGender}":"[data-gender-radio]","{frmDistance}":"[data-distance]","{frmAddress}":"[data-address]","{frmLatitude}":"[data-latitude]","{frmLongitude}":"[data-longitude]","{locationLabel}":"[data-location-label]","{textField}":"[data-location-textfield]"}},function(a){return{init:function(){a.element.addController(EasySocial.Controller.Search.Map),""!=a.frmAddress().val()&&a.textField().val(a.frmAddress().val())
},"{frmDistance} change":function(){var b=a.frmDistance().val(),c=a.frmAddress().val(),d=a.frmLatitude().val(),e=a.frmLongitude().val(),f=b+"|"+d+"|"+e+"|"+c;a.dataCondition().val(f)},"{dataGender} click":function(b){a.dataCondition().val(b.val())},"{dateStart} change":function(){start=a.dateStart().val(),end=a.dateEnd().val();var b=start;end.length>0&&(b=b+"|"+end),a.dataCondition().val(b)},"{dateEnd} change":function(){start=a.dateStart().val(),end=a.dateEnd().val();var b=end;start.length>0&&(b=start+"|"+b),a.dataCondition().val(b)
}}}),b.resolve()})}),EasySocial.module("site/search/list",function(){var b=this;EasySocial.require().view("site/loading/small","site/search/loadbutton").script("site/search/item").language("COM_EASYSOCIAL_SEARCH_LOAD_MORE_ITEMS").done(function(a){EasySocial.Controller("Search.List",{defaultOptions:{"{item}":"[data-search-item]","{pagination}":"[data-search-pagination]","{loadmorebutton}":"[data-search-loadmore-button]",view:{loadingContent:"site/loading/small",loadmoreContent:"site/search/loadbutton"}}},function(b){return{init:function(){b.item().implement(EasySocial.Controller.Search.Item),b.on("scroll.search",window,a._.debounce(function(){b.loading||b.pagination().visible()&&b.loadMore()
},250))},"{loadmorebutton} click":function(){b.loadMore()},loadMore:function(){var c=a("[data-search-query]").val(),d=a("[data-sidebar-menu].active").data("type"),e=b.pagination().data("last-limit"),f=b.pagination().data("last-type"),g=[];return a("[data-search-filtertypes]:checked").each(function(b,c){g.push(a(c).val())}),"-1"==e?(b.loadmorebutton().hide(),void 0):(b.loading=!0,EasySocial.ajax("site/controllers/search/getItems",{next_limit:e,last_type:f,type:d,q:c,loadmore:"1",filtertypes:g},{beforeSend:function(){b.pagination().html(b.view.loadingContent())
}}).done(function(a,c,d){b.pagination().data("last-limit",d),b.pagination().data("last-type",c),b.pagination().before(a),b.item().implement(EasySocial.Controller.Search.Item),"-1"==d?b.pagination().html(""):b.pagination().html(b.view.loadmoreContent())}).fail(function(a){return a}).always(function(){b.loading=!1}),void 0)}}}),b.resolve()})}),EasySocial.module("site/search/search",function(){var b=this;EasySocial.require().library("history").script("site/search/sidebar","site/profile/friends").view("site/loading/small").done(function(){EasySocial.Controller("Search",{defaultOptions:{items:null,"{container}":"[data-search]","{contentTitle}":"[data-search-content-title]","{content}":"[data-search-content]","{sidebar}":"[data-search-sidebar]","{sidebarItem}":"[data-sidebar-item]",view:{loadingContent:"site/loading/small"}}},function(a){return{init:function(){a.sidebar().implement(EasySocial.Controller.Search.Sidebar,{"{parent}":a}),a.sidebarItem().implement(EasySocial.Controller.Search.Sidebar.Item,{"{parent}":a})
},updatingContents:function(){a.content().html(a.view.loadingContent())},updateContent:function(b){a.content().html(b)}}}),b.resolve()})}),EasySocial.module("site/search/sidebar",function(){var b=this;EasySocial.require().done(function(a){EasySocial.Controller("Search.Sidebar",{defaultOptions:{"{menuItem}":"[data-sidebar-menu]"}},function(b){return{init:function(){},"{menuItem} click":function(c){b.menuItem().removeClass("active"),a(c).addClass("active")}}}),EasySocial.Controller("Search.Sidebar.Item",{defaultOptions:{}},function(b){return{init:function(){},"{self} click":function(){var e=b.element.data("type"),f=b.element.data("url"),g=a("[data-search-query]").val(),h=[];
a("[data-search-filtertypes]").each(function(b,c){a(c).prop("checked",!1)}),""!=e&&(h.push(e),a("[data-search-filtertypes]").each(function(b,c){a(c).val()==e&&a(c).prop("checked",!0)})),History.pushState({state:1},"",f),b.parent.updatingContents(),EasySocial.ajax("site/controllers/search/getItems",{type:e,q:g,filtertypes:h}).done(function(a){b.parent.updateContent(a)}).fail(function(a){console.log(a)}),b.parent.updateContent()}}}),b.resolve()})}),EasySocial.module("site/search/toolbar",function(a){var b=this;
EasySocial.Controller("Search.Toolbar",{defaultOptions:{showadvancedlink:!0,"{textfield}":"[data-nav-search-input]"}},function(b,c,d){return{init:function(){b.options.showadvancedlink=0==b.element.data("showadvancedlink")?0:1,b.element.siblings("[data-nav-search-filter]").addController(EasySocial.Controller.Search.Toolbar.Filter,{"{parent}":b})},cache:{},showPopBox:!1,rePopBox:null,search:a.debounce(function(c){if(!b.loading&&c&&(c=a.trim(c))&&!(c.length<=2)){var e=b.textfield();e.popbox("widget").hide(),e.popbox("widget").destroy();
var g=[];a("[data-search-filtertypes]:checked").each(function(b,c){filterValue=a(c).val(),g.push(filterValue)});var h=EasySocial.ajax("site/controllers/search/getItems",{q:c,mini:"1",showadvancedlink:b.options.showadvancedlink,filtertypes:g}).done(function(){});h.fail(function(a){console.log(a)}).always(function(){b.loading=!1}),b.hide(),d.popbox({content:h,id:"fd",component:"es",type:"search",toggle:"click",cache:!1,offset:0});var i=d.popbox("widget");i.show(),i.keyword=c}},250),reSearch:function(c){if(!b.loading&&c&&(c=a.trim(c))&&!(c.length<=2)){{b.textfield()
}b.textfield().popbox("widget").hide(),b.textfield().popbox("widget").destroy();var g=[];a("[data-search-filtertypes]:checked").each(function(b,c){filterValue=a(c).val(),g.push(filterValue)});var h=EasySocial.ajax("site/controllers/search/getItems",{q:c,mini:"1",showadvancedlink:b.options.showadvancedlink,filtertypes:g}).done(function(){});h.fail(function(a){console.log(a)}).always(function(){b.loading=!1,b.showPopBox=!0}),b.hide(),d.popbox({content:h,id:"fd",component:"es",type:"search",toggle:"click",cache:!1,offset:0})
}},hide:function(){var a=d.popbox("widget");a&&a.hide()},show:function(){var a=d.popbox("widget");a.show()},"{textfield} keydown":function(){b.hide()},"{textfield} keyup":function(a,c){if(27!==c.which){var d=a.val();b.search(d)}},"{self} popboxLoading":function(a,b,c){c.loader.width(d.width()),c.loader.position(c.position),d.addClass("is-active")},"{self} popboxActivate":function(a,b,c){c.tooltip.width(d.width()),c.tooltip.position(c.position),d.addClass("is-active")},"{self} popboxDeactivate":function(){d.removeClass("is-active")
}}}),EasySocial.Controller("Search.Toolbar.Filter",{defaultOptions:{"{filterButton}":"[data-filter-button]","{filterDropdown}":".dropdown-menu","{filterDropdownInput}":".dropdown-menu input","{filterDropdownLabel}":".dropdown-menu label","{filterBox}":"[data-search-filtertypes]","{selectAllBtn}":"[data-filter-selectall]","{deselectAllBtn}":"[data-filter-deselectall]"}},function(a){return{init:function(){},"{self} blur":function(){console.log("test"),a.parent.showPopBox&&a.parent.show()},"{selectAllBtn} click":function(b,c){c.stopPropagation(),a.filterBox().prop("checked",!0)
},"{deselectAllBtn} click":function(b,c){c.stopPropagation(),a.filterBox().prop("checked",!1)},"{filterButton} click":function(){if(a.element.hasClass("open")){var d=a.parent.textfield().val();a.parent.search(d)}else a.parent.hide()},"{filterDropdownInput} click":function(a,b){b.stopPropagation()},"{filterDropdownLabel} click":function(a,b){b.stopPropagation()}}}),b.resolve()}),EasySocial.module("site/stream/item",function(){var a=this;EasySocial.require().library("mentions","placeholder","dialog").view("site/friends/suggest.item","site/friends/suggest.hint.search","site/friends/suggest.hint.empty","site/hashtags/suggest.item","site/hashtags/suggest.hint.search","site/hashtags/suggest.hint.empty").done(function(b){EasySocial.Controller("Stream.Item",{defaultOptions:{view:{suggestItem:"site/friends/suggest.item",tagSuggestItem:"site/hashtags/suggest.item"},id:"",context:"","{deleteFeed}":"[data-stream-delete]","{editStream}":"[data-stream-edit]","{updateStream}":"[data-stream-edit-update]","{cancelEditStream}":"[data-stream-edit-cancel]","{editPoll}":"[data-stream-polls-edit]","{cancelEditPoll}":"[data-stream-polls-edit-cancel]","{updatePoll}":"[data-stream-polls-edit-update]","{publishItem}":"[data-stream-publish]","{addBookmark}":"[data-stream-bookmark-add]","{removeBookmark}":"[data-stream-bookmark-remove]","{addSticky}":"[data-stream-sticky-add]","{removeSticky}":"[data-stream-sticky-remove]","{hideLink}":"[data-stream-hide]","{unHideLink}":"[data-stream-show]","{hideAppLink}":"[data-stream-hide-app]","{unHideAppLink}":"[data-stream-show-app]","{hideActorLink}":"[data-stream-hide-actor]","{unHideActorLink}":"[data-stream-show-actor]","{hideNotice}":"[data-stream-hide-notice]","{actions}":"[data-streamItem-actions]","{contents}":"[data-streamItem-contents]","{streamContent}":"[data-stream-content]","{streamEditor}":"[data-stream-editor]","{streamData}":"[data-stream-item]","{likes}":"[data-likes-action]","{counterBar}":"[data-stream-counter]","{likeContent}":"[data-likes-content]","{repostContent}":"[data-repost-content]","{share}":"[data-repost-action]","{translateLink}":"[data-stream-translate]","{translateLoader}":"[data-stream-translate-loader]","{streamCommentLink}":"[data-stream-action-comments]","{streamCommentBlock}":"[data-comments]"}},function(a,c,d){return{init:function(){c.id=d.data("id"),c.context=d.data("context"),c.ishidden=d.data("ishidden"),c.actor=d.data("actor")
},plugins:{},"{translateLink} click":function(){var d=a.streamContent().html();a.element.addClass("is-translating"),EasySocial.ajax("site/controllers/stream/translate",{contents:d}).done(function(b){a.streamContent().html(b)}).always(function(){a.element.removeClass("is-translating"),a.element.addClass("is-translated")})},"{addBookmark} click":function(){a.element.addClass("is-bookmarked"),EasySocial.ajax("site/controllers/stream/bookmark",{id:a.options.id}).done(function(){}).fail(function(b){a.element.removeClass("is-bookmarked"),a.setMessage(b)
})},"{removeBookmark} click":function(){var d=window.streamFilter||!1;"bookmarks"!=d&&a.element.removeClass("is-bookmarked"),EasySocial.ajax("site/controllers/stream/removeBookmark",{id:a.options.id}).done(function(b){"bookmarks"==d&&a.element.html(b)})},"{addSticky} click":function(){EasySocial.ajax("site/controllers/stream/addSticky",{id:a.options.id}).done(function(){a.element.addClass("is-sticky")}).fail(function(a){EasySocial.dialog({content:a.message})})},"{removeSticky} click":function(){var d=window.streamFilter||!1;
"sticky"!=d&&a.element.removeClass("is-sticky"),EasySocial.ajax("site/controllers/stream/removeSticky",{id:a.options.id}).done(function(b){"sticky"==d&&a.element.html(b)})},"{publishItem} click":function(){var e=c.id;EasySocial.ajax("site/controllers/stream/publish",{id:e}).done(function(){d.switchClass("is-published")})},"{likes} onLiked":function(){a.counterBar().removeClass("hide")},"{likes} onUnliked":function(){var e=a.likeContent().hasClass("hide"),f=a.repostContent().hasClass("hide");e&&f&&a.counterBar().addClass("hide")
},"{share} create":function(){a.counterBar().removeClass("hide")},"{streamCommentLink} click":function(){a.streamCommentBlock().trigger("show")},"{actions} click":function(c){a.actions().removeClass("active"),b(c).addClass("active")},"{deleteFeed} click":function(){var b=a.options.id;EasySocial.dialog({content:EasySocial.ajax("site/views/stream/confirmDelete"),bindings:{"{deleteButton} click":function(){EasySocial.ajax("site/controllers/stream/delete",{id:b}).done(function(b){EasySocial.dialog({content:b}),a.element.fadeOut(),setTimeout(function(){EasySocial.dialog().close()
},2e3)}).fail(function(a){EasySocial.dialog({content:a})})}}})},"{editPoll} click":function(){var b=a.options.id,c="stream";EasySocial.ajax("site/views/polls/edit",{uid:b,element:c,source:"stream"}).done(function(b){a.element.addClass("is-editing"),a.streamContent().hide(),a.streamEditor().html(b)})},"{cancelEditPoll} click":function(){a.element.removeClass("is-editing"),a.streamEditor().html(""),a.streamContent().show()},"{updatePoll} click":function(){var b=a.element.find("[data-polls-edit]").controller("EasySocial.Controller.Polls"),c=b.validateForm();
if(!c)return task.reject("Error validating polls inputs. Please make sure all the required fields are filled in.");var d=b.toData();EasySocial.ajax("site/controllers/polls/update",d).done(function(b){a.streamContent().html(b),a.cancelEditPoll().click()})},"{cancelEditStream} click":function(){a.element.removeClass("is-editing"),a.streamEditor().html(""),a.streamContent().show()},"{editStream} click":function(){var c=a.options.id;EasySocial.ajax("site/views/stream/edit",{id:c}).done(function(c){a.element.addClass("is-editing"),a.streamContent().hide(),a.streamEditor().html(c);
var d=a.streamEditor().find("[data-story-textbox]"),e=d.controller("mentions");return e?(e.cloneLayout(),void 0):(d.mentions({triggers:{"@":{type:"entity",wrap:!1,stop:"",allowSpace:!0,finalize:!0,query:{loadingHint:!0,searchHint:b.View("easysocial/site/friends/suggest.hint.search"),emptyHint:b.View("easysocial/site/friends/suggest.hint.empty"),data:function(c){var d=b.Deferred();return EasySocial.ajax("site/controllers/friends/suggest",{search:c}).done(function(c){b.isArray(c)||d.reject();var c=b.map(c,function(b){return b.title=b.screenName,b.type="user",b.menuHtml=a.view.suggestItem(!0,{item:b,name:"uid[]"}),b
});d.resolve(c)}).fail(d.reject),d},use:function(a){return a.type+":"+a.id}}},"#":{type:"hashtag",wrap:!0,stop:" #",allowSpace:!1,query:{loadingHint:!0,searchHint:b.View("easysocial/site/hashtags/suggest.hint.search"),emptyHint:b.View("easysocial/site/hashtags/suggest.hint.empty"),data:function(c){var d=b.Deferred();return EasySocial.ajax("site/controllers/hashtags/suggest",{search:c}).done(function(c){b.isArray(c)||d.reject();var c=b.map(c,function(b){return b.title="#"+b.title,b.type="hashtag",b.menuHtml=a.view.tagSuggestItem(!0,{item:b,name:"uid[]"}),b
});d.resolve(c)}).fail(d.reject),d}}}},plugin:{autocomplete:{id:"fd",component:"es",modifier:"es-story-mentions-autocomplete",sticky:!0,shadow:!0,position:{my:"left top",at:"left bottom",of:a.streamEditor().find(".es-story-text"),collision:"none"}}}}),void 0)})},"{updateStream} click":function(){var c=a.streamEditor().find("[data-story-textbox]"),d=a.streamEditor().find("[data-story-textfield]"),e=c.mentions("controller").toArray(),f=a.element.data("storyHashtags"),f=f?f.split(","):[],g=!1,h={};if(f.length>0){var i=b.map(e,function(a){return"hashtag"===a.type&&b.inArray(a.value,f)>-1?a:void 0
});g=i.length<1}h.mentions=b.map(e,function(a){return"hashtag"===a.type&&b.isPlainObject(a.value)&&(a.value=a.value.title.slice(1)),JSON.stringify(a)}),h.content=d.val(),h.id=a.options.id,EasySocial.ajax("site/controllers/story/update",h).done(function(b){a.streamContent().html(b),a.cancelEditStream().click()})},"{hideLink} click":function(){a.streamData().addClass("es-feed-loading"),EasySocial.ajax("site/controllers/stream/hide",{id:a.options.id}).done(function(b){a.streamData().removeClass("es-feed-loading"),a.streamData().hide(),a.element.append(b)
}).fail(function(){})},"{hideActorLink} click":function(){EasySocial.ajax("site/controllers/stream/hideactor",{actor:a.options.actor}).done(function(c){a.streamData().hide(),b(".stream-actor-"+a.options.actor).addClass("hide-stream"),a.element.append(c)}).fail(function(a){console.log(a)})},"{unHideActorLink} click":function(){EasySocial.ajax("site/controllers/stream/unhideactor",{actor:a.options.actor}).done(function(){a.hideNotice().remove(),a.streamData().show(),b(".stream-actor-"+a.options.actor).removeClass("hide-stream")
}).fail(function(a){console.log(a)})},"{hideAppLink} click":function(){EasySocial.ajax("site/controllers/stream/hideapp",{context:a.options.context}).done(function(c){a.streamData().hide(),b(".stream-context-"+a.options.context).addClass("hide-stream"),a.element.append(c)}).fail(function(a){console.log(a)})},"{unHideLink} click":function(){EasySocial.ajax("site/controllers/stream/unhide",{id:a.options.id}).done(function(){a.hideNotice().remove(),a.streamData().show()}).fail(function(a){console.log(a)})},"{unHideAppLink} click":function(){EasySocial.ajax("site/controllers/stream/unhideapp",{context:a.options.context}).done(function(){a.hideNotice().remove(),a.streamData().show(),b(".stream-context-"+a.options.context).removeClass("hide-stream")
}).fail(function(a){console.log(a)})}}}),a.resolve()})}),EasySocial.module("site/stream/stream",function(){var a=this;EasySocial.require().script("site/stream/item").view("site/loading/small","site/stream/loadbutton").language("COM_EASYSOCIAL_STREAM_LOAD_PREVIOUS_STREAM_ITEMS").done(function(b){EasySocial.Controller("Stream",{defaultOptions:{interval:30,checknew:null,source:null,sourceId:null,autoload:!0,"{story}":"[data-story]","{share}":"[data-repost-action]","{list}":"[data-stream-list]","{newNotiBar}":"[data-stream-notification-bar]","{newNotiButton}":"[data-stream-notification-button]","{item}":"[data-streamItem]","{pagination}":"[data-stream-pagination]","{paginationGuest}":"[data-stream-pagination-guest]","{paginationCluster}":"[data-stream-pagination-cluster]",view:{loadingContent:"site/loading/small",loadmoreContent:"site/stream/loadbutton"}}},function(a){return{init:function(){a.item().addController(EasySocial.Controller.Stream.Item,{"{parent}":a}),"stream"!=a.options.source&&"unity"!=a.options.source&&1==a.options.checknew&&a.startMonitoring(),1==a.options.autoload&&a.on("scroll.stream",window,b._.debounce(function(){if(!a.loading)if("unity"==a.options.source)a.paginationGuest().visible()&&a.loadMoreGuest();
else{iscluster="dashboard"==a.options.source||"profile"==a.options.source?!1:!0;var b=iscluster===!0?a.paginationCluster():a.pagination();b.visible()&&a.loadMore(iscluster)}},250)),a.setLayout()},setLayout:function(){},"{window} resize":b.debounce(function(){a.setLayout()},500),"{story} create":function(c,d,e,f){""!=f&&a.updateExcludeIds(f),a.updateCurrentDate(),b.buildHTML(e).prependTo(a.list()).addController("EasySocial.Controller.Stream.Item"),a.list().children("li.empty").remove()},"{share} create":function(c,d,e){b.buildHTML(e).prependTo(a.list()).addController("EasySocial.Controller.Stream.Item"),a.list().children("li.empty").remove(),a.updateCurrentDate()
},updateCurrentDate:function(){EasySocial.ajax("site/controllers/stream/getCurrentDate",{}).done(function(b){a.element.data("currentdate",b)}).fail(function(){})},updateExcludeIds:function(b){ids=a.element.data("excludeids"),newIds="",newIds=""!=ids&&void 0!=ids?ids+","+b:b,a.element.data("excludeids",newIds)},clearExcludeIds:function(){a.element.data("excludeids","")},startMonitoring:function(){if(a._destroyed)return a.stopMonitoring();var b=1e3*a.options.interval;EasySocial.debug,a.options.state=setTimeout(a.check,b)
},stopMonitoring:function(){clearTimeout(a.options.state)},"{self} destroyed":function(){a.stopMonitoring()},check:function(){a.stopMonitoring();{var d=(1e3*a.options.interval,b("[data-dashboardSidebar-menu].active").data("type")),e=b("[data-dashboardSidebar-menu].active").data("id"),f=a.element.data("currentdate"),g=a.element.data("excludeids");b.trim(a.newNotiBar().html())}void 0==d&&void 0==e&&"profile"==a.options.source&&(d="me",e=a.options.sourceId),EasySocial.ajax("site/controllers/stream/checkUpdates",{type:d,id:e,currentdate:f,exclude:g,source:a.options.source,view:a.options.source}).done(function(c,d,e){if(a._destroyed)return a.stopMonitoring();
if(a.element.data("currentdate",e),c.length>0){for(var f=0;f<c.length;f++)if(item=c[f],item.cnt>0){var g="[data-stream-counter-"+item.type+"]";curCount=b(g).text(),newCount=""==curCount?item.cnt:parseInt(curCount,10)+parseInt(item.cnt,10),b(g).html(newCount),b(g).parents("li").addClass("has-notice")}d=b.trim(d),curContents=b.trim(a.newNotiBar().text()),d.length>0&&0==curContents.length&&a.newNotiBar().html(d)}a.startMonitoring()})},"{newNotiButton} click":function(c){var e=b(c).data("type"),f=b(c).data("uid"),g=b(c).data("since");
EasySocial.ajax("site/controllers/stream/getUpdates",{type:e,id:f,currentdate:g,source:a.options.source,view:a.options.source}).done(function(c,d,g){var h="[data-stream-counter-";"list"==e?h=h+e+"-"+f:h+=e,h+="]",b(h).parents("li").removeClass("has-notice"),b(h).html("0"),b.each(g,function(b,c){a.item().where("id",c).remove()});var i=g.length,j="";j=a.paginationGuest().length>0?a.paginationGuest():a.pagination();var k=j.data("nextlimit");k+=i,j.data({nextlimit:k}),a.newNotiBar().html(""),b.buildHTML(c).prependTo(a.list()).addController("EasySocial.Controller.Stream.Item"),a.clearExcludeIds(),a.element.data("currentdate",d)
})},"{paginationGuest} click":function(){a.loadMoreGuest()},loadMoreGuest:function(){var c=a.paginationGuest(),d=c.data("nextlimit"),e=a.options.source;d&&(a.loading=!0,c.html(a.view.loadingContent({content:""})),EasySocial.ajax("site/controllers/stream/loadmoreGuest",{startlimit:d,view:e}).done(function(d,e){c.data({nextlimit:e});var d=b.buildHTML(d);d.insertBefore(c).filter(a.item.selector).addController("EasySocial.Controller.Stream.Item");try{MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub])}catch(f){}""==e?c.html(""):c.html(a.view.loadmoreContent())
}).fail(function(a){return a}).always(function(){a.loading=!1}))},"{paginationCluster} click":function(){a.loadMore(!0)},"{pagination} click":function(){a.loadMore()},loadMore:function(c){var d=b("[data-dashboardSidebar-menu].active"),e=d.data("type"),f=d.data("id");tag=d.data("tag"),fid=d.data("fid");var g=c===!0?a.paginationCluster():a.pagination(),h=g.data("nextlimit"),i=g.data("context"),j=a.options.source;h&&(void 0==e&&void 0==f&&"profile"==a.options.source&&(e="me",f=a.options.sourceId),a.loading=!0,g.html(a.view.loadingContent({content:""})),EasySocial.ajax("site/controllers/stream/loadmore",{id:f,type:e,startlimit:h,view:j,tag:tag,filterId:fid,context:i,iscluster:c}).done(function(c,d){g.data({nextlimit:d});
var c=b.buildHTML(c);c.insertBefore(g).filter(a.item.selector).addController("EasySocial.Controller.Stream.Item"),a.setLayout();try{MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub])}catch(e){}""==d?g.html(""):g.html(a.view.loadmoreContent())}).fail(function(a){return a}).always(function(){a.loading=!1}))}}}),a.resolve()})}),EasySocial.module("site/subscriptions/follow",function(){var a=this;EasySocial.require().language("COM_EASYSOCIAL_SUBSCRIPTION_INFO").done(function(b){EasySocial.Controller("Follow",{defaultOptions:{}},function(a){return{init:function(){},"{self} click":function(){EasySocial.ajax("site/controllers/subscriptions/toggle",{uid:a.element.data("id"),type:a.element.data("type"),notify:"1"}).done(function(c,d){a.element.text(d),EasySocial.dialog({title:b.language("COM_EASYSOCIAL_SUBSCRIPTION_INFO"),content:c})
}).fail(function(b){a.setMessage(b,"error")})}}}),a.resolve()})}),EasySocial.module("site/system/broadcast",function(){var b=this;EasySocial.require().library("gritter").done(function(a){EasySocial.Controller("System.Broadcast",{defaultOptions:{interval:30,sticky:!1,period:8}},function(b){return{init:function(){b.startMonitoring()},startMonitoring:function(){var a=1e3*b.options.interval;b.options.state=setTimeout(b.check,a)},stopMonitoring:function(){clearTimeout(b.options.state)},check:function(){b.stopMonitoring();
var c=1e3*b.options.interval;setTimeout(function(){EasySocial.ajax("site/controllers/notifications/getBroadcasts").done(function(c){c&&a(c).each(function(c,d){a.gritter.add({title:d.title,text:d.content,image:d.authorAvatar,sticky:b.options.sticky,time:1e3*b.options.period,class_name:"es-broadcast"})}),b.startMonitoring()})},c)}}}),b.resolve()})}),EasySocial.module("site/toolbar/conversations",function(){var b=this;EasySocial.require().library("tinyscrollbar").done(function(){EasySocial.Controller("Notifications.Conversations",{defaultOptions:{interval:30,"{counter}":"[data-notificationConversation-counter]"}},function(a){return{init:function(){a.startMonitoring()
},startMonitoring:function(){var b=1e3*a.options.interval;EasySocial.debug,a.options.state=setTimeout(a.check,b)},stopMonitoring:function(){EasySocial.debug,clearTimeout(a.options.state)},check:function(){a.stopMonitoring();var b=1e3*a.options.interval;setTimeout(function(){EasySocial.ajax("site/controllers/notifications/getConversationCounter").done(function(b){b>0?(a.element.addClass("has-notice"),a.counter().html(b)):a.element.removeClass("has-notice"),a.startMonitoring()})},b)}}}),b.resolve()})}),EasySocial.module("site/toolbar/friends",function(){var b=this;
EasySocial.require().library("tinyscrollbar").language("COM_EASYSOCIAL_FRIENDS_REQUEST_REJECTED").done(function(a){EasySocial.Controller("Notifications.Friends",{defaultOptions:{interval:3,returnURL:"","{counter}":"[data-notificationFriends-counter]","{loadRequestsButton}":".loadRequestsButton"}},function(a){return{init:function(){a.startMonitoring()},startMonitoring:function(){var b=1e3*a.options.interval;EasySocial.debug,a.options.state=setTimeout(a.check,b)},stopMonitoring:function(){EasySocial.debug,clearTimeout(a.options.state)
},check:function(){a.stopMonitoring();var b=1e3*a.options.interval;setTimeout(function(){EasySocial.ajax("site/controllers/notifications/friendsCounter").done(function(b){b>0?(a.element.addClass("has-notice"),a.counter().html(b)):a.element.removeClass("has-notice"),a.startMonitoring()})},b)}}}),EasySocial.Controller("Notifications.Friends.Item",{defaultOptions:{"{actionsWrapper}":"[data-friend-item-actions]","{acceptFriend}":"[data-friend-item-accept]","{rejectFriend}":"[data-friend-item-reject]","{actions}":"[data-friend-item-action]","{title}":"[data-friend-item-title]","{mutual}":"[data-friend-item-mutual]",view:{loader:"site/loading/small"}}},function(b){return{init:function(){},"{acceptFriend} click":function(c,d){d.stopPropagation();
var e=a("[data-notifications-friends]").controller();b.actionsWrapper().addClass("friend-adding"),EasySocial.ajax("site/controllers/friends/approve",{viewCallback:"notificationsApprove",id:a(c).data("id")}).done(function(a,c){if(b.actionsWrapper().removeClass("friend-adding").addClass("added-friends"),b.title().html(a),b.mutual().html(c),e){var d=e.counter().html(),d=parseInt(d),d=d-1;d=d.toString(),e.counter().html(d),0==d&&e.element.removeClass("has-notice")}}).fail(function(a){b.element.html(a.message)})},"{rejectFriend} click":function(c,d){d.stopPropagation(),EasySocial.ajax("site/controllers/friends/reject",{id:a(c).data("id")}).done(function(){b.actionsWrapper().html(a.language("COM_EASYSOCIAL_FRIENDS_REQUEST_REJECTED"))
}).fail(function(a){b.element.html(a.message)})}}}),b.resolve()})}),EasySocial.module("site/toolbar/login",function(){var b=this;EasySocial.require().library("popbox").done(function(a){EasySocial.Controller("Toolbar.Login",{defaultOptions:{"{dropdown}":"[data-toolbar-login-dropdown]"}},function(){return{init:function(){},"{self} popboxActivate":function(b,c,d){a(d.tooltip).find("label").on("click",function(b){b.preventDefault(),b.stopPropagation();var c=a(this).attr("for"),d=a("[data-popbox-content] #"+c);d.is(":checkbox")?d.click():d.focus()
})}}}),b.resolve()})}),EasySocial.module("site/toolbar/notifications",function(){var b=this;EasySocial.require().script("site/toolbar/friends","site/toolbar/story","site/toolbar/system","site/toolbar/profile","site/toolbar/login","site/toolbar/conversations").done(function(a){EasySocial.Controller("Notifications",{defaultOptions:{friendsInterval:30,systemInterval:30,conversationsInterval:30,"{friendNotifications}":"[data-notifications-friends]","{conversationNotifications}":"[data-notifications-conversations]","{systemNotifications}":"[data-notifications-system]","{profileItem}":"[data-toolbar-profile]","{storyForm}":"[data-toolbar-story]","{login}":"[data-toolbar-login]","{item}":"[data-toolbar-item]"}},function(b,c){return{init:function(){b.login().addController(EasySocial.Controller.Toolbar.Login),c.guest||(b.profileItem().addController(EasySocial.Controller.Toolbar.Profile,{interval:b.options.systemInterval}),b.systemNotifications().addController(EasySocial.Controller.Notifications.System,{interval:c.systemInterval}),b.friendNotifications().addController(EasySocial.Controller.Notifications.Friends,{interval:b.options.friendsInterval}),b.conversationNotifications().addController(EasySocial.Controller.Notifications.Conversations,{interval:b.options.conversationsInterval}),b.storyForm().addController(EasySocial.Controller.Notifications.Story)),b.setLayout(),a("body").on("click.out-of-dropdown",function(){b.item().removeClass("open")
})},"{window} resize":a.debounce(function(){b.setLayout()},250),setLayout:function(){var c=b.element,d=c.outerWidth(!0)-80,e=0;b.item().each(function(){e+=a(this).outerWidth(!0)});var f=e>d;c.toggleClass("narrow",f).toggleClass("wide",!f)}}}),b.resolve()})}),EasySocial.module("site/toolbar/story",function(){var b=this;EasySocial.require().done(function(){EasySocial.Controller("Notifications.Story",{defaultOptions:{"{loadFormButton}":".loadFormButton","{dropdown}":".dropdown-menu"}},function(){return{init:function(){},"{dropdown} click":function(){},"{self} hideDropdown":function(){},"{dropdown} click":function(a,b){b.stopPropagation()
}}}),b.resolve()})}),EasySocial.module("site/toolbar/system",function(){var b=this;EasySocial.require().view("site/notifications/system.empty").library("tinyscrollbar").done(function(a){EasySocial.Controller("Notifications.System",{defaultOptions:{pageTitle:null,interval:30,"{counter}":"[data-notificationSystem-counter]"}},function(b,c){return{init:function(){c.pageTitle=a(document).attr("title"),b.startMonitoring()},startMonitoring:function(){var a=1e3*b.options.interval;b.options.state=setTimeout(b.check,a)
},stopMonitoring:function(){clearTimeout(b.options.state)},check:function(){b.stopMonitoring();var c=1e3*b.options.interval;setTimeout(function(){EasySocial.ajax("site/controllers/notifications/getSystemCounter").done(function(c){c>0?(a(document).attr("title",b.options.pageTitle+" ("+c+")"),b.element.addClass("has-notice"),b.counter().html(c)):(b.element.removeClass("has-notice"),a(document).attr("title",b.options.pageTitle)),b.startMonitoring()})},c)},"{window} easysocial.clearSystemNotification":function(){b.element.removeClass("has-notice"),b.counter().html(0)
}}}),EasySocial.Controller("Notifications.System.Popbox",{defaultOptions:{"{readall}":"[data-notificationsystem-readall]","{items}":"[data-notificationsystem-items]",view:{empty:"site/notifications/system.empty"}}},function(b){return{init:function(){},"{readall} click":function(){a("[data-notificationSystem-counter]").parents("li").removeClass("has-notice"),a("[data-notificationSystem-counter]").html(0),EasySocial.ajax("site/controllers/notifications/setAllState",{state:"read"}).done(function(){b.items().html(""),b.items().append(b.view.empty()),b.items().addClass("is-empty"),a(window).trigger("easysocial.clearSystemNotification")
})}}}),b.resolve()})}),EasySocial.module("site/toolbar/profile",function(){var b=this;EasySocial.require().library("popbox").done(function(a){EasySocial.Controller("Toolbar.Profile",{defaultOptions:{"{dropdown}":"[data-toolbar-profile-dropdown]"}},function(){return{init:function(){},"{self} popboxActivate":function(b,c,d){a(d.tooltip).implement(EasySocial.Controller.Toolbar.Profile.Logout)}}}),EasySocial.Controller("Toolbar.Profile.Logout",{defaultOptions:{"{logoutForm}":"[data-toolbar-logout-form]","{logoutButton}":"[data-toolbar-logout-button]"}},function(a){return{logout:function(){a.logoutForm().submit()
},"{logoutButton} click":function(){console.log("debug"),a.logout()}}}),b.resolve()})}),EasySocial.module("site/users/popbox",function(){var b=this;EasySocial.require().library("popbox").done(function(){EasySocial.module("users/popbox",function(){this.resolve(function(a){var b=a.button.data("ids"),c=a.button.attr("data-popbox-position")||"top-left";return{content:EasySocial.ajax("site/views/users/popbox",{ids:b}),id:"fd",component:"es",type:"users",position:c}})})}),b.resolve()}),EasySocial.module("site/users/users",function(){var b=this;
EasySocial.require().library("history").view("site/loading/small","site/users/button.following").done(function(a){EasySocial.Controller("Users",{defaultOptions:{"{content}":"[data-users-content]","{listing}":"[data-users-listing]","{sort}":"[data-users-sort]","{filter}":"[data-users-filter]","{items}":"[data-users-item]","{pagination}":"[data-users-pagination]","{profile}":"[data-users-filter-profile]","{search}":"[data-users-filter-search]",view:{loading:"site/loading/small"}}},function(b){return{init:function(){b.initUserController()
},initUserController:function(){b.items().implement(EasySocial.Controller.Users.Item,{"{parent}":b})},removeActiveFilter:function(){b.filter().each(function(){a(this).parent().removeClass("active")}),b.profile().each(function(){a(this).parent().removeClass("active")}),b.search().each(function(){a(this).parent().removeClass("active")})},"{profile} click":function(c,d){d.preventDefault();var e=a(c).data("id");b.removeActiveFilter(),a(c).parent().addClass("active"),a(c).route(),b.listing().html(b.view.loading()),EasySocial.ajax("site/controllers/users/getUsersByProfile",{id:e}).done(function(a){b.content().html(a),b.initUserController()
})},"{search} click":function(c,d){d.preventDefault();var e=a(c).data("id");b.removeActiveFilter(),a(c).parent().addClass("active"),a(c).route(),b.listing().html(b.view.loading()),EasySocial.ajax("site/controllers/users/getUsersByFilter",{id:e}).done(function(a){b.content().html(a),b.initUserController()})},"{filter} click":function(c,d){d.preventDefault(),b.sort().removeClass("active"),b.removeActiveFilter(),a(c).parent().addClass("active");var e=a(c).data("filter");b.options.filter=e,a(c).route(),b.listing().html(b.view.loading()),b.sort(":first").addClass("active"),EasySocial.ajax("site/controllers/users/getUsers",{filter:e,showpagination:1}).done(function(a){b.content().html(a),b.initUserController()
})},"{sort} click":function(c,d){d.preventDefault();var e=a(c).data("type");a("<a>").attr({title:document.title,href:a(c).attr("href")}).route(),b.sort().removeClass("active"),a(c).addClass("active"),b.listing().html(b.view.loading()),b.pagination().remove(),EasySocial.ajax("site/controllers/users/getUsers",{sort:e,filter:b.options.filter,isSort:!0,showpagination:1}).done(function(a){b.listing().html(a),b.initUserController()})}}}),EasySocial.Controller("Users.Item",{defaultOptions:{id:null,"{followUser}":"[data-es-followers-follow]","{addFriend}":"[data-users-add-friend]","{friendsButton}":"[data-users-friends-button]","{compose}":"[data-users-friends-compose]","{unfriend}":"[data-users-friends-unfriend]",view:{followingButton:"site/users/button.following"}}},function(b){return{init:function(){b.options.id=b.element.data("id")
},"{followUser} following":function(c){a(c).popbox("hide"),a(c).replaceWith(b.view.followingButton())},"{addFriend} click":function(c){a(c).addClass("btn-loading"),EasySocial.ajax("site/controllers/friends/request",{viewCallback:"usersRequest",id:b.options.id}).done(function(b){a(c).replaceWith(b),a(c).removeClass("btn-loading")}).fail(function(b){EasySocial.dialog({content:b.message}),a(c).removeClass("btn-loading")})}}}),b.resolve()})}),EasySocial.module("story",function(a){var b=this;EasySocial.require().language("COM_EASYSOCIAL_LOCATION_PERMISSION_ERROR","COM_EASYSOCIAL_STREAM_META_JOINER").view("apps/user/links/story/attachment.item","site/location/story.suggestion","site/albums/upload.item","site/friends/suggest.item","site/friends/suggest.hint.search","site/friends/suggest.hint.empty","site/hashtags/suggest.item","site/hashtags/suggest.hint.search","site/hashtags/suggest.hint.empty").done(),EasySocial.require().script("story/locations","story/friends","story/mood"),EasySocial.require().library("mentions","placeholder").script("site/stream/item").language("COM_EASYSOCIAL_STORY_SUBMIT_ERROR","COM_EASYSOCIAL_STORY_CONTENT_EMPTY","COM_EASYSOCIAL_STORY_NOT_ON_STREAM_FILTER").done(function(){EasySocial.Controller("Story",{defaultOptions:{view:{suggestItem:"site/friends/suggest.item",tagSuggestItem:"site/hashtags/suggest.item"},plugin:{text:{id:"text",name:"text",selector:"[data-story-plugin-name=photos]",type:"panel"}},sourceView:null,attachment:{limit:1,lifo:!0},enterToSubmit:!1,"{header}":"[data-story-header]","{body}":"[data-story-body]","{footer}":"[data-story-footer]","{form}":"[data-story-form]","{textbox}":"[data-story-textbox]","{textField}":"[data-story-textField]","{target}":"[data-story-target]","{cluster}":"[data-story-cluster]","{clusterType}":"[data-story-clustertype]","{submitButton}":"[data-story-submit]","{resetButton}":"[data-story-reset]","{privacyButton}":"[data-story-privacy]","{panelContents}":"[data-story-panel-contents]","{panelContent}":"[data-story-panel-content]","{panelButton}":"[data-story-panel-button]","{streamContainer}":"[data-streams]","{streamItem}":"[data-streamItem]","{friends}":"[data-story-friends]","{location}":"[data-story-location]","{mood}":"[data-story-mood]","{mentionsOverlay}":"[data-mentions-overlay]","{meta}":"[data-story-meta]","{metaContents}":"[data-story-meta-contents]","{metaContent}":"[data-story-meta-content]","{metaButtons}":"[data-story-meta-buttons]","{metaButton}":"[data-story-meta-button]"},hostname:"story"},function(b,c,d){return{init:function(){b.id=d.data("story"),a.each(b.options.plugin,function(a,c){var d=b.plugins[a]=c;
"attachment"==d.type&&b.attachments.max++,d.selector=b.getPluginSelector(a)}),b.setMentionsLayout(),b.friends().length>0&&EasySocial.module("story/friends").done(function(){b.addPlugin("friends")}),b.location().length>0&&EasySocial.module("story/locations").done(function(){b.addPlugin("locations")}),b.mood().length>0&&EasySocial.module("story/mood").done(function(){b.addPlugin("mood")}),b.placeholder=b.textField().attr("placeholder"),b._setMessage=b.setMessage,b.setMessage=function(){d.hasClass("is-collapsed")||d.hasClass("is-resizing")||(this.element.find("[data-message-group]").remove(),b._setMessage.apply(this,arguments))
},navigator.userAgent.match(/MSIE 9.0/i)&&d.addClass("is-ie"),b.checkResetButton(),a.module("story-"+b.id).resolve(b)},checkResetButton:function(){var a=b.textField(),c=a.attr("data-default");c&&b.resetButton().toggle(a.val()!==c)},"{textField} keyup":a.debounce(function(){b.checkResetButton()},250,{leading:!0}),"{self} click":function(c,d){a(d.target).parents().andSelf().filter(b.resetButton()[0]).length>0||b.expand()},"{textField} touchstart":function(){b.expand()},"{textField} keydown":function(){b.expand()
},"{textField} click":function(){b.expand()},"{textField} mousedown":function(){b.expand()},"{textField} keypress":function(a,d){c.enterToSubmit&&13==d.keyCode&&!(d.shiftKey||d.altKey||d.ctrlKey||d.metaKey)&&(b.save(),d.preventDefault())},expand:a.debounce(function(){if(!d.hasClass("is-expanded")&&!d.hasClass("is-resizing")){var c=a.support&&a.support.transition&&a.support.transition.end,e=(c||"transitionend")+".es.story",f=a.debounce(function(){d.off(e).addClass("is-expanded").removeClass("is-resizing"),b.setMentionsLayout(),b.submitButton().removeAttr("data-disabled"),b.textField().focus()
},1);c?d.on(e,f):setTimeout(f,600),d.removeClass("is-collapsed").addClass("is-resizing")}},1),collapse:function(){d.hasClass("is-collapsed")||d.hasClass("is-resizing")||(d.addClass("is-resizing").removeClass("is-expanded"),setTimeout(function(){d.addClass("is-collapsed").removeClass("is-resizing")},1))},reset:function(a){b.clear(),""===b.textField().val()&&a&&b.collapse()},setMentionsLayout:function(){var c=b.textbox(),d=c.controller("mentions");if(d)return d.cloneLayout(),void 0;var e=b.body();c.mentions({triggers:{"@":{type:"entity",wrap:!1,stop:"",allowSpace:!0,finalize:!0,query:{loadingHint:!0,searchHint:a.View("easysocial/site/friends/suggest.hint.search"),emptyHint:a.View("easysocial/site/friends/suggest.hint.empty"),data:function(c){var d=a.Deferred();
return EasySocial.ajax("site/controllers/friends/suggest",{search:c}).done(function(c){if(!a.isArray(c))return d.reject(),void 0;var c=a.map(c,function(a){return a.title=a.screenName,a.type="user",a.menuHtml=b.view.suggestItem(!0,{item:a,name:"uid[]"}),a});d.resolve(c)}).fail(d.reject),d},use:function(a){return a.type+":"+a.id}}},"#":{type:"hashtag",wrap:!0,stop:" #",allowSpace:!1,query:{loadingHint:!0,searchHint:a.View("easysocial/site/hashtags/suggest.hint.search"),emptyHint:a.View("easysocial/site/hashtags/suggest.hint.empty"),data:function(c){var d=a.Deferred();
return EasySocial.ajax("site/controllers/hashtags/suggest",{search:c}).done(function(c){if(!a.isArray(c))return d.reject(),void 0;var c=a.map(c,function(a){return a.title="#"+a.title,a.type="hashtag",a.menuHtml=b.view.tagSuggestItem(!0,{item:a,name:"uid[]"}),a});d.resolve(c)}).fail(d.reject),d}}}},plugin:{autocomplete:{id:"fd",component:"es",modifier:"es-story-mentions-autocomplete",sticky:!0,shadow:!0,position:{my:"left top",at:"left bottom",of:c.parent(),collision:"none"},size:{width:function(){return e.width()
}}}}})},plugins:{},getPluginName:function(b){return a(b).data("story-plugin-name")},getPluginSelector:function(a){return"[data-story-plugin-name="+a+"]"},hasPlugin:function(a,c){var d=b.plugins[a];return d?c?d.type===c:!0:!1},buildPluginSelectors:function(c,d,e){var f={};return a.each(c,function(a,c){var g=b[c].selector+d.selector;"function"==e?f[c]=function(){return b.find(g)}:f["{"+c+"}"]=g}),f},"{self} addPlugin":function(c,d,e,f,g,h){if(b.hasPlugin(e)){var i=b.plugins[e],j={};switch(i.type){case"panel":var k=["panelButton","panelContent"];
j=b.buildPluginSelectors(k,i,h)}a.extend(g,j)}},"{self} registerPlugin":function(a,c,d,e){if(b.hasPlugin(d)){var f=b.plugins[d];f.instance=e}},panels:{},currentPanel:"text",getPanel:function(a){if(b.hasPlugin(a,"panel")){var c=b.plugins[a];return b.panels[c.name]||(b.panels[c.name]={plugin:c,button:b.panelButton(c.selector),content:b.panelContent(c.selector)})}},activatePanel:function(a){var c=b.getPanel(a);if(c){b.deactivatePanel(b.currentPanel),b.currentPanel=a;var e=b.panelContents();e.addClass("active"),c.button.addClass("active"),c.content.appendTo(e).addClass("active"),d.addClass("plugin-"+a),b.invokePlugin(a,"activatePanel",[c]),b.trigger("activatePanel",[a]),b.textField().focus()
}},deactivatePanel:function(a){var c=b.getPanel(a);c&&(c.button.removeClass("active"),c.content.removeClass("active"),d.removeClass("plugin-"+a),b.panelContents().removeClass("active"),b.invokePlugin(a,"deactivatePanel",[c]),b.trigger("deactivatePanel",[a]))},addPanelCaption:function(a,c){var d=b.getPanel(a);d&&d.button.addClass("has-data").find(".with-data").html(c)},removePanelCaption:function(a){var c=b.getPanel(a);c&&c.button.removeClass("has-data").find(".with-data").empty()},"{panelButton} click":function(a){var d=b.getPluginName(a);
b.activatePanel(d)},saving:!1,save:function(){if(!b.saving){b.saving=!0;var c=a.Deferred();c.data={},c.tasks=[],c.addData=function(d,e){{var f=d.options.name;d.options.type}f===b.currentPanel&&(c.data.attachment=b.currentPanel,a.isPlainObject(e)?a.each(e,function(a,b){c.data[f+"_"+a]=b}):c.data[f]=e)},c.addTask=function(b){var d=a.Deferred();return d.name=b,d.save=c,c.tasks.push(d),d},c.process=function(){return"pending"===c.state()&&a.when.apply(a,c.tasks).done(function(){return a.trim(c.data.content)||c.data.attachment?(c.resolve(),void 0):(c.reject(a.language("COM_EASYSOCIAL_STORY_CONTENT_EMPTY"),"warning"),void 0)
}).fail(c.reject),c},c.currentPanel=b.currentPanel,b.trigger("save",[c]),b.element.addClass("saving"),c.process().done(function(){var d=b.textbox().mentions("controller").toArray(),e=b.element.data("storyHashtags"),e=e?e.split(","):[],f=!1;if(e.length>0){var g=a.map(d,function(b){return"hashtag"===b.type&&a.inArray(b.value,e)>-1?b:void 0});f=g.length<1}b.trigger("beforeSubmit",[c]),EasySocial.ajax("site/controllers/story/create",c.data).done(function(c,d){f&&(c=b.setMessage(a.language("COM_EASYSOCIAL_STORY_NOT_ON_STREAM_FILTER"))),b.trigger("create",[c,d]),b.clear(),b.reset()
}).fail(function(a){b.trigger("fail",arguments),a&&b.setMessage(a.message,a.type)}).always(function(){b.trigger("afterSubmit",[c]),b.element.removeClass("saving"),b.saving=!1})}).fail(function(c,d){c||(c=a.language("COM_EASYSOCIAL_STORY_SUBMIT_ERROR"),d="error"),b.setMessage(c,d),b.element.removeClass("saving"),b.saving=!1})}},clear:function(){b.textField().val(""),b.clearMessage(),b.activatePanel("text"),b.deactivateMeta(b.currentMeta),b.trigger("clear");var a=b.textbox().mentions("controller");a.reset(),b.checkResetButton(),setTimeout(function(){a.cloneLayout()
},500),b.textField().focus()},"{self} save":function(c,d,e){var f=b.textField().val(),g=e.data;g.view=b.options.sourceView,g.content=f,g.target=b.target().val(),g.cluster=b.cluster().val(),g.clusterType=b.clusterType().val(),g.privacy=b.find("[data-privacy-hidden]").val(),g.privacyCustom=b.find("[data-privacy-custom-hidden]").val();var h=b.textbox().mentions("controller").toArray();g.mentions=a.map(h,function(b){return"hashtag"===b.type&&a.isPlainObject(b.value)&&(b.value=b.value.title.slice(1)),JSON.stringify(b)
})},"{submitButton} click":function(){b.save()},"{resetButton} click":function(){b.reset(!0)},"{privacyButton} click":function(a){setTimeout(function(){a.find("[data-es-privacy-container]").hasClass("active")},1)},metas:{friends:"",location:"",mood:""},currentMeta:null,getMeta:function(a){var c={name:a,button:b.metaButton().filterBy("storyMetaButton",a),content:b.metaContent().filterBy("storyMetaContent",a)};return c.button.length<1||c.content.length<1?null:c},activateMeta:function(a){var c=b.getMeta(a);c&&(b.deactivateMeta(b.currentMeta),c.button.addClass("active"),c.content.appendTo(b.metaContents()).addClass("active"),b.currentMeta=a,b.trigger("activateMeta",[c]),d.addClass("has-meta"))
},deactivateMeta:function(a){var c=b.getMeta(a);c&&(c.button.removeClass("active"),c.content.removeClass("active"),b.currentMeta=null,b.trigger("deactivateMeta",[c]),d.removeClass("has-meta"))},toggleMeta:function(a){b.currentMeta==a?b.deactivateMeta(a):b.activateMeta(a)},getMetaText:function(){var c=b.metas,d=[],e=a.language("COM_EASYSOCIAL_STREAM_META_JOINER");return a.each(["friends","location","mood"],function(a,b){var e=c[b];e&&d.push(e)}),d.join(e)},setMeta:function(a,c){b.metas[a]=c,b.updateMeta()},updateMeta:a.debounce(function(){var c=b.getMetaText(),d=b.meta(),e=b.textField();
if(a.each(b.metas,function(a,c){var d=b.getMeta(a);d&&d.button.toggleClass("has-content",!!c)}),!c)return d.remove(),e.attr("placeholder",b.placeholder),void 0;var f=b.mentionsOverlay();d.length<1&&(d=a('<u class="es-story-meta" data-story-meta data-ignore></u>').appendTo(f));var g="rtl"==f.css("direction")?"&#8207;":"";d.html(g+" &mdash; "+c),e.attr("placeholder",""),b.setMentionsLayout()},1),refreshMeta:function(){b.trigger("refreshMeta"),b.updateMeta()},"{textbox} triggerClear":function(){b.refreshMeta()},"{meta} click":function(c,d){a(d.target).is("a")||b.textField().focus()
},"{metaButton} click":function(a){var c=a.attr("data-story-meta-button");b.toggleMeta(c)}}}),b.resolve()})}),EasySocial.module("story/blog",function(){var b=this;EasySocial.require().done(function(){EasySocial.Controller("Story.Blog",{defaultOptions:{"{title}":"[data-blog-title]","{content}":"[data-blog-content]","{category}":"[data-story-blog-category]"}},function(a){return{init:function(){},"{story} save":function(b,c,d){var e=a.category().val(),f=a.title().val(),g=a.content().val(),h={categoryId:e,title:f,content:g};
d.addData(a,h)}}}),b.resolve()})}),EasySocial.module("story/broadcast",function(){var b=this;EasySocial.require().done(function(){EasySocial.Controller("Story.Broadcast",{defaultOptions:{"{profile}":"[data-broadcast-profile]","{title}":"[data-broadcast-title]","{link}":"[data-broadcast-link]","{message}":"[data-broadcast-message]","{type}":"[data-broadcast-type]"}},function(a){return{init:function(){},"{story} save":function(b,c,d){var e=a.profile().val(),f=a.title().val(),g=a.link().val(),h=a.type().val(),i={broadcast:"1",profileId:e,title:f,link:g,type:h};
d.addData(a,i)},"{story} beforeSubmit":function(b,c,d){"broadcast"==d.currentPanel&&(d.data.content=a.message().val())}}}),b.resolve()})}),EasySocial.module("story/event",function(a){var b=this,c=EasySocial.options.momentLang;EasySocial.require().library("datetimepicker","moment/"+c).view("site/loading/small").language("COM_EASYSOCIAL_STORY_EVENT_INSUFFICIENT_DATA","COM_EASYSOCIAL_STORY_EVENT_INVALID_START_END_DATETIME").done(function(){EasySocial.Controller("Story.Event",{defaultOptions:{"{base}":"[data-story-event-base]","{category}":"[data-story-event-category]","{form}":"[data-story-event-form]","{timezone}":"[data-event-timezone]","{datetimeForm}":"[data-event-datetime-form]","{datetime}":"[data-event-datetime]","{title}":"[data-event-title]","{description}":"[data-event-description]",view:{loading:"site/loading/small"}}},function(b){return{init:function(){},"{category} change":function(c){c.val()?(b.form().show().html(b.view.loading()),b.loadStoryForm(c.val()).done(function(c){b.form().html(c);
var e,d=b.datetimeForm().htmlData();e=a.isEmpty(d.yearto)?(new Date).getFullYear()+100:parseInt(d.yearto)+1,a.extend(b.options,{yearfrom:d.yearfrom||1930,yearto:e,allowTime:d.allowtime,allowTimezone:d.allowtimezone,dateFormat:d.dateformat,disallowPast:d.disallowpast,minuteStepping:parseInt(d.minutestepping)}),b.datetime().addController("EasySocial.Controller.Story.Events.Datetime",{"{parent}":b})})):b.form().hide().html("")},loadStoryForm:a.memoize(function(a){return EasySocial.ajax("apps/user/events/controllers/events/loadStoryForm",{id:a})
}),"{story} save":function(a,c,d){if("event"==d.currentPanel){var e={title:b.title().val(),description:b.description().val(),category:b.category().val()};b.options.allowTimezone&&(e.timezone=b.timezone().val()),b.datetime().trigger("datetimeExport",[e]),b.options.name="event";var f=d.addTask("validateEventForm");b.save(f,e)}},save:function(c,d){return a.isEmpty(d.title)||a.isEmpty(d.category)||a.isEmpty(d.start)?c.reject(a.language("COM_EASYSOCIAL_STORY_EVENT_INSUFFICIENT_DATA")):!a.isEmpty(d.start)&&!a.isEmpty(d.end)&&d.end<d.start?c.reject(a.language("COM_EASYSOCIAL_STORY_EVENT_INVALID_START_END_DATETIME")):(c.save.addData(b,d),c.resolve(),void 0)
}}}),EasySocial.Controller("Story.Events.Datetime",{defaultOptions:{type:null,"{picker}":"[data-picker]","{toggle}":"[data-picker-toggle]","{datetime}":"[data-datetime]"}},function(b){return{init:function(){b.options.type=b.element.data("event-datetime");var d=new a.moment;b.parent.options.disallowPast?d.date(d.date()-1):d.year(b.parent.options.yearfrom),b.picker()._datetimepicker({component:"es",useCurrent:!1,format:b.parent.options.dateFormat,minDate:d,maxDate:new a.moment({y:b.parent.options.yearto}),icons:{time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down"},sideBySide:!1,pickTime:1==b.parent.options.allowTime,minuteStepping:b.parent.options.minuteStepping,language:c});
var e=a.moment();e.minute(0),e.second(0),"end"==b.options.type&&e.hour(e.hour()+1),b.datetimepicker("setDate",e)},datetimepicker:function(a,c){return b.picker().data("DateTimePicker")[a](c)},"{toggle} click":function(){b.picker().focus()},"{picker} dp.change":function(c,d){b.setDateValue(d.date.toDate()),b.parent.element.trigger("event"+a.String.capitalize(b.options.type),[d.date])},setDateValue:function(a){b.datetime().val(a.getFullYear()+"-"+("00"+(a.getMonth()+1)).slice(-2)+"-"+("00"+a.getDate()).slice(-2)+" "+("00"+a.getHours()).slice(-2)+":"+("00"+a.getMinutes()).slice(-2)+":"+("00"+a.getSeconds()).slice(-2))
},"{parent} eventStart":function(){"start"===b.options.type},"{parent} eventEnd":function(){"end"===b.options.type},"{self} datetimeExport":function(a,c,d){d[b.options.type]=b.datetime().val()}}}),b.resolve()})}),EasySocial.module("story/files",function(a){var b=this;EasySocial.require().library("plupload").view("apps/user/files/story/attachment.item","apps/user/files/story/progress").done(function(){EasySocial.Controller("Story.Files",{defaultOptions:{"{canvas}":"[data-files-canvas]","{dropsite}":"[data-files-dropsite]","{upload}":"[data-files-upload]","{uploadGroup}":"[data-files-items]","{fileItem}":"[data-files-item]","{removeItem}":"[data-files-item-remove]","{uploadItem}":"[data-files-upload-item]",settings:{url:null,max_file_size:null,filters:[]},view:{attachment:"apps/user/files/story/attachment.item",progress:"apps/user/files/story/progress"}}},function(b){return{items:{},init:function(){var c=a.extend({"{uploadButton}":b.upload.selector,"{uploadDropsite}":b.dropsite.selector},{settings:b.options.settings});
b.uploader=b.canvas().addController("plupload",c),b.plupload=b.uploader.plupload,b.addPlugin("uploader",b.uploader),a.IE||"html5"!=b.plupload.runtime||b.canvas().addClass("can-drop-file"),b.canvas().addClass("can-upload"),b.setLayout()},hasItems:function(){var a=b.fileItem().length>0,c=b.uploadItem().length>0;return a||c},setLayout:function(){b.canvas().toggleClass("has-items",b.hasItems())},removeFile:function(a){b.fileItem().where("id",a).remove(),b.setLayout()},clearFiles:function(){b.fileItem().remove(),b.uploadItem().remove(),b.setLayout()
},removeFileItem:function(a){var c=b.getItem(a);c&&(b.plupload.removeFile(c.file()),c.element.remove(),delete b.items[a],b.setLayout())},getItem:function(c){var d;return a.isString(c)&&(d=c),c&&c.id&&(d=c.id),b.items[d]},createItem:function(a){var c=b.view.progress({file:a});return b.uploadGroup().append(c),b.items[a.id]=c,b.setLayout(),b.trigger("QueueCreated",[c]),c},"{uploader} FilesAdded":function(c,d,e,f){try{f.reverse(),a.each(f,function(a,c){b.getItem(c)||b.createItem(c)})}catch(g){console.error(g)}b.setLayout(),b.uploader.plupload.start()
},"{uploader} FileUploaded":function(a,c,d,e,f){var g=b.getItem(e),h=b.view.attachment({file:e,id:f.id});h.data("file-id",f.id).addClass("new-item").insertAfter(g),g.remove(),b.setLayout(),setTimeout(function(){h.removeClass("new-item")},1)},"{uploader} UploadProgress":function(c,d,e,f){var g=b.getItem(f);if(g){var h=void 0===f.size||"N/A"==f.size;f.percentage=f.percent+"%",f.filesize=h?"":a.plupload.formatSize(f.size),f.remaining=h?"":a.plupload.formatSize(f.size-(f.loaded||0));var i=f.percentage;"100%"==i&&(i="99%"),"0%"==i&&(i="1%"),g.find(".upload-progress-bar").width(i),g.find(".upload-percentage").html(i)
}},"{uploader} FileError":function(a,c,d,e,f){b.story.setMessage(f.message,"error");var g=b.uploadingFile;g&&(g.reject(),delete b.uploadingFile),b.setLayout()},"{uploader} Error":function(a,c,d,e){b.story.setMessage(e.message,"error");var f=b.uploadingFile;f&&(f.reject(),delete b.uploadingFile),b.removeItem().click(function(){setTimeout(function(){b.setLayout()},1)}),b.setLayout()},"{removeItem} click":function(a){var c=a.parent(b.fileItem.selector).data("id");b.removeFile(c)},"{story} save":function(a,c,d){b.hasItems()&&(b.uploadingFile=d.addTask("uploadingFile"),b.save())
},save:function(){var c=b.uploadingFile;if(c){var d=b.fileItem();if(d.length){var e=[];save=c.save,d.each(function(){e.push(a(this).data("id"))}),save.addData(b,e),c.resolve(),delete b.uploadingFile}}},"{story} clear":function(){b.clearFiles()}}}),b.resolve()})}),EasySocial.module("story/friends",function(a){var b=this;EasySocial.require().library("textboxlist").language("COM_EASYSOCIAL_STREAM_STORY_WITH","COM_EASYSOCIAL_STREAM_STORY_WITH_JOINER","COM_EASYSOCIAL_STREAM_STORY_WITH_LAST_JOINER","COM_EASYSOCIAL_AND").done(function(){EasySocial.Controller("Story.Friends",{defaultOptions:{"{friendList}":".es-story-friends-textbox","{textField}":".es-story-friends-textbox [data-textboxlist-textfield]"}},function(b){return{init:function(){b.textField().placeholder(),b.friendList().textboxlist({component:"es",plugin:{autocomplete:{exclusive:!0,cache:!1,query:b.search,filterItem:b.createMenuItem,component:"es",modifier:"es-story-friends-autocomplete",sticky:!0,shadow:!0}}})
},search:function(a){var c=b.getTaggedUsers();return EasySocial.ajax("site/controllers/friends/suggest",{search:a,exclude:c})},getTaggedUsers:function(){var b=[],c=a("[data-textboxlist-item]");return c.length>0&&a.each(c,function(c,d){b.push(a(d).data("id"))}),b},createMenuItem:function(b){b.title=b.screenName;var d=a(new Image).addClass("textboxlist-menu-avatar").attr({src:b.avatar}).toHTML();return b.html=d+" "+b.title,b.menuHtml=d+" "+b.title,b},mention:function(c,d,e){b.search(d).done(function(b){var c=[];
a.each(b,function(a,b){c.push({id:b.id,name:b.screenName,avatar:b.avatar,type:"contact"})}),e(c)})},updateMeta:function(){var c=b.friendList().controller("textboxlist"),d=c.getAddedItems();if(d.length<1)return b.story.setMeta("friends",""),void 0;var e=d.length-1,f=a.language("COM_EASYSOCIAL_STREAM_STORY_WITH")+" ";a.each(d,function(b,c){if(f+='<a href="'+c.permalink+'" target="_blank">'+c.screenName+"</a>",b!=e){var d=a.language("COM_EASYSOCIAL_STREAM_STORY_WITH_JOINER");b==e-1&&(d=a.language("COM_EASYSOCIAL_STREAM_STORY_WITH_LAST_JOINER")),f+=d
}}),b.story.setMeta("friends",f)},"{friendList} addItem":function(){b.updateMeta()},"{friendList} removeItem":function(){b.updateMeta()},"{story} activateMeta":function(a,c,d){"friends"===d.name&&setTimeout(function(){b.textField().focus()},1)},"{story} save":function(a,c,d){var e=b.friendList().controller("textboxlist"),f=e.getAddedItems().map(function(a){return a.id});d.data.friends_tags=f},"{story} clear":function(){var a=b.friendList().controller("textboxlist");a.clearItems()}}}),b.resolve()})}),EasySocial.module("story/links",function(a){var b=this;
EasySocial.require().view("site/links/story/attachment.item").done(function(){EasySocial.Controller("Story.Links",{defaultOptions:{view:{linkItem:"site/links/story/attachment.item"},urlParser:/(^|\s)(https?:\/\/)?(([a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.([a-z]{2,7}))|(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]))(:[0-9]{1,5})?(\/.*)?/gi,validateUrl:!1,"{linkForm}":"[data-story-link-form]","{linkInput}":"[data-story-link-input]","{linkContent}":"[data-story-link-content]","{linkItem}":"[data-story-link-item]","{linkTitle}":"[data-story-link-title]","{linkDescription}":"[data-story-link-description]","{linkImages}":"[data-story-link-images]","{linkImage}":"[data-story-link-image]","{imageWrapper}":"[data-story-link-image-wrapper]","{linkVideo}":"[data-story-link-video]","{titleTextfield}":"[data-story-link-title-textfield]","{descriptionTextfield}":"[data-story-link-description-textfield]","{panelButton}":"[data-story-link-panel-button]","{attachButton}":"[data-story-link-attach-button]","{removeButton}":"[data-story-link-remove-button]","{removeThumbnail}":"[data-story-link-remove-image]"}},function(b){return{init:function(){b.linkInput().placeholder()
},activateAttachment:function(){b.doNotFocus||setTimeout(function(){b.linkInput().focus(),b.doNotFocus=!1},500)},links:{},currentLink:null,crawling:!1,extractUrls:function(c){var d=b.options.urlParser,e=c.match(d);return a.isArray(e)?a.map(e,function(b){return a.trim(b)}):[]},fixUrl:function(b){var b=a.uri(b);return/http|https/.test(b.protocol())||b.setProtocol("http"),b.toString()},getLink:function(c){if(a.isString(c)&&(c=b.extractUrls(c)),!(c.length<0)){var d=c[0];return link=b.links[d]||b.createLink(d)}},createLink:function(c){var d=b.links[c]=a.Deferred();
return d.url=c,b.crawling=!0,EasySocial.ajax("site/controllers/crawler/fetch",{urls:[c]}).done(function(e){var f=e[c];f||d.reject(),d.info=f;var g=f.opengraph||{},h=f.oembed||{},i=[];h.thumbnail&&i.push(h.thumbnail),g.image&&i.push(g.image),f.images&&a.merge(i,f.images),d.data={title:h.title||g.title||f.title,desc:h.description||g.desc||f.description,url:c,images:i,video:g.video?g.video:f.videos},d.item=b.view.linkItem(d.data).data("link",d),d.item.addController("EasySocial.Controller.Story.Links.Item"),d.resolve(d)
}).fail(function(){d.reject()}).always(function(){b.crawling=!1}),d},addLink:function(a){b.linkContent().empty().append(a.item),b.linkForm().hide(),b.currentLink=a},removeLink:function(){b.linkItem().detach(),b.linkForm().show(),b.currentLink=null},"{attachButton} click":function(){var d=(b.linkInput(),b.linkForm()),e=a.trim(b.linkInput().val());""!==e&&(e=b.fixUrl(e),b.linkInput().val(e),d.addClass("busy"),b.getLink(e).done(function(a){b.addLink(a)}).always(function(){d.removeClass("busy")}))},"{removeButton} click":function(){b.currentLink.disabled=!0,b.removeLink()
},"{story.textField} input":a._.debounce(function(a){if(!b.currentLink&&!b.crawling){var d=a.val(),e=b.extractUrls(d),f=e[e.length-1];if(f){var f=b.fixUrl(f),g=b.links[f];if(!g||!g.disabled){if(b.options.validateUrl){return EasySocial.ajax("site/controllers/crawler/validate",{url:f}).done(function(){console.log("valid"),b.linkInput().val(f),b.doNotFocus=!0,b.panelButton().click(),b.attachButton().click()}),void 0}b.linkInput().val(f),b.doNotFocus=!0,b.panelButton().click(),b.attachButton().click()}}}},950),"{story} save":function(a,c,d){if(b.currentLink){var e={title:b.titleTextfield().val(),description:b.descriptionTextfield().val(),url:b.currentLink.url,video:b.linkVideo().val()};
b.removeThumbnail().is(":checked")||(e.image=b.imageWrapper(".active").find("img").attr("src")),d.addData(b,e)}},"{story} clear":function(){b.linkInput().val(""),b.removeLink()}}}),EasySocial.Controller("Story.Links.Item",{defaultOptions:{"{previousImage}":"[data-story-link-image-prev]","{nextImage}":"[data-story-link-image-next]","{image}":"[data-story-link-image]","{imageWrapper}":"[data-story-link-image-wrapper]","{imagesWrapper}":"[data-story-link-images]","{imageIndex}":"[data-story-link-image-index]","{removeThumbnail}":"[data-story-link-remove-image]","{imageDimensions}":"[data-story-link-image-dimensions]","{imageWidth}":"[data-image-width]","{imageHeight}":"[data-image-height]","{title}":"[data-story-link-title]","{description}":"[data-story-link-description]","{titleTextfield}":"[data-story-link-title-textfield]","{descriptionTextfield}":"[data-story-link-description-textfield]"}},function(b){return{init:function(){b.initDimensions()
},initDimensions:function(){b.image().on("load",function(){var c=this.naturalWidth,d=this.naturalHeight,e=a(this).parent();e.find(b.imageWidth.selector).html(c),e.find(b.imageHeight.selector).html(d)})},"{removeThumbnail} click":function(){var a=b.removeThumbnail().is(":checked");a?b.imagesWrapper().hide():b.imagesWrapper().show(),b.element.toggleClass("has-images",!a)},"{previousImage} click":function(){var a=b.imageWrapper(".active"),c=a.prev(),d=parseInt(b.imageIndex().html()),e=d-1;c.length>0&&(a.removeClass("active"),c.addClass("active"),b.imageIndex().html(e))
},"{nextImage} click":function(){var a=b.imageWrapper(".active"),c=a.next(),d=parseInt(b.imageIndex().html()),e=d+1;c.length>0&&(a.removeClass("active"),c.addClass("active"),b.imageIndex().html(e))},"{title} click":function(){var a=b.element.hasClass("editing-title");b.element.toggleClass("editing-title",!a),a||b.editTitle()},editTitleEvent:"click.es.story.editLinkTitle",editTitle:function(){b.element.addClass("editing-title"),setTimeout(function(){b.titleTextfield().val(b.title().text()).focus()[0].select(),a(document).on(b.editTitleEvent,function(a){a.target!==b.titleTextfield()[0]&&b.saveTitle("save")
})},1)},saveTitle:function(c){c||(c=save);var d=b.titleTextfield().val();"save"==c&&(""===d&&(d=b.title().data("default")),b.title().html(d)),b.element.removeClass("editing-title"),a(document).off(b.editTitleEvent)},"{titleTextfield} keyup":function(a,c){27==c.keyCode&&b.saveTitle("revert")},"{description} click":function(){var a=b.element.hasClass("editing-description");b.element.toggleClass("editing-description",!a),a||b.editDescription()},editDescriptionEvent:"click.es.story.editLinkDescription",editDescription:function(){b.element.addClass("editing-description"),setTimeout(function(){var c=b.description().clone(),d=c.hasClass("no-description");
c.wrapInner(b.descriptionTextfield()),d&&b.descriptionTextfield().val(""),b.descriptionTextfield().focus()[0].select(),a(document).on(b.editDescriptionEvent,function(a){a.target!==b.descriptionTextfield()[0]&&b.saveDescription("save")})},1)},saveDescription:function(c){c||(c=save);var d=b.descriptionTextfield().val().replace(/\n/g,"<br//>");switch(c){case"save":var e=""===d;b.description().toggleClass("no-description",e),e&&(d=b.descriptionTextfield().attr("placeholder")),b.description().html(d);break;case"revert":}b.element.find(".textareaClone").remove(),b.element.removeClass("editing-description"),a(document).off(b.editDescriptionEvent)
},"{descriptionTextfield} keyup":function(a,c){27==c.keyCode&&b.saveDescription("revert")}}}),b.resolve()})}),EasySocial.module("story/locations",function(a){var b=this;EasySocial.require().library("gmaps","scrollTo","image").view("site/location/story.suggestion").language("COM_EASYSOCIAL_LOCATION_PERMISSION_ERROR","COM_EASYSOCIAL_LOCATION_TIMEOUT_ERROR","COM_EASYSOCIAL_LOCATION_UNAVAILABLE_ERROR","COM_EASYSOCIAL_STREAM_AT").done(function(){var c={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,ENTER:13,ESCAPE:27,LEFT:37,RIGHT:39,SPACE:32,TAB:9,UP:38};
EasySocial.Controller("Story.Locations",{defaultOptions:{view:{suggestion:"site/location/story.suggestion"},map:{lat:0,lng:0},"{base}":"[data-story-location]","{form}":"[data-story-location-form]","{textField}":"[data-story-location-textField]","{detectButton}":"[data-story-location-detect-button]","{autocomplete}":"[data-story-location-autocomplete]","{suggestions}":"[data-story-location-suggestions]","{suggestion}":"[data-story-location-suggestion]","{textbox}":"[data-story-location-textbox]","{removeButton}":"[data-story-location-remove-button]","{map}":"[data-story-location-map]","{mapImage}":"[data-story-location-map-image]","{meta}":"[data-story-meta-location]"}},function(b){return{init:function(){navigator.geolocation&&b.base().addClass("is-detectable"),b.textField().placeholder(),b.textField().removeAttr("disabled")
},"{window} resize":a.debounce(function(){var a=b.currentLocation;if(a){var c=b.mapImage();if(c.data("width")!==c.width()){var d=a.geometry.location,e=d.lat(),f=d.lng();b.navigate(e,f)}}},250),navigate:function(c,d){var e=b.mapImage(),f=e.width(),g=e.height(),h=a.GMaps.staticMapURL({size:[f,g],lat:c,lng:d,sensor:!0,scale:2,markers:[{lat:c,lng:d}]});a.Image.get(h).done(function(){e.css({backgroundImage:a.cssUrl(h),backgroundSize:"cover",backgroundPosition:"center center"}),b.base().addClass("has-location")})},locations:{},lastQueryAddress:null,"{textField} keypress":function(d,e){switch(e.keyCode){case c.UP:var f=a(b.suggestion(".active").prev(b.suggestion.selector)[0]||b.suggestion(":last")[0]);
b.suggestion().removeClass("active"),f.addClass("active").trigger("activate"),b.suggestions().scrollTo(f,{offset:-1*f.height()}),e.preventDefault();break;case c.DOWN:var g=a(b.suggestion(".active").next(b.suggestion.selector)[0]||b.suggestion(":first")[0]);b.suggestion().removeClass("active"),g.addClass("active").trigger("activate"),b.suggestions().scrollTo(g,{offset:-1*g.height()}),e.preventDefault();break;case c.ENTER:var h=b.suggestion(".active"),i=h.data("location");b.set(i),b.hideSuggestions();break;case c.ESCAPE:b.hideSuggestions()
}},"{textField} keyup":function(d,e){switch(e.keyCode){case c.UP:case c.DOWN:case c.LEFT:case c.RIGHT:case c.ENTER:case c.ESCAPE:break;default:var f=a.trim(d.val());""===f&&(b.base().removeClass("has-location"),b.hideSuggestions());var g=b.locations[f];g?(b.lastQueryAddress=f,b.suggest(g)):b.lookup(f)}},lookup:a.debounce(function(a){b.base().addClass("is-busy"),EasySocial.ajax("site/controllers/location/getLocations",{query:a}).done(function(c){b.base().removeClass("is-busy"),b.locations[a]=c,b.suggest(c),b.lastQueryAddress=a
}).fail(function(a){console.log(a)})},250),suggest:function(c){var d=b.suggestions();d.empty(),c.length<0||(a.each(c,function(a,c){b.view.suggestion({location:c}).data("location",c).appendTo(d)}),b.showSuggestions())},showSuggestions:function(){b.focusSuggestion=!0,b.element.find(".es-story-footer").addClass("swap-zindex"),b.story.clearMessage(),setTimeout(function(){b.autocomplete().addClass("active");var c=a(document),d="click.es.story.location";c.off(d).on(d,function(e){var f=a(e.target).parents().andSelf();
f.filter(b.element).length>0||(c.off(d),b.hideSuggestions())})},500)},hideSuggestions:function(){b.focusSuggestion=!1,b.autocomplete().removeClass("active"),a(document).off("click.es.story.location"),setTimeout(function(){b.focusSuggestion||b.element.find(".es-story-footer").removeClass("swap-zindex")},500)},"{suggestion} activate":function(a){var d=a.data("location");b.navigate(d.latitude,d.longitude)},"{suggestion} mouseover":function(a){b.suggestion().removeClass("active"),a.addClass("active").trigger("activate")
},"{suggestion} click":function(a){var d=a.data("location");b.set(d),b.hideSuggestions()},set:function(c){b.currentLocation=c;var d=a.Deferred();a.isEmpty(c.fulladdress)?b.getAddress(c.latitude,c.longitude).done(function(a){c.fulladdress=c.name+", "+a,d.resolve(c)}):d.resolve(c),d.done(function(c){b.navigate(c.latitude,c.longitude),b.textField().val(c.fulladdress),b.lastQueryAddress=c.address;var d=a('<a href="javascript: void(0);" data-story-meta-location>').html(c.fulladdress).toHTML(),e=a.language("COM_EASYSOCIAL_STREAM_AT")+" "+d;
b.story.setMeta("location",e),b.base().addClass("has-location")})},unset:function(){b.currentLocation=null,b.textField().val(""),b.story.removePanelCaption("locations"),b.mapImage().attr("src",""),b.story.setMeta("location",""),b.base().removeClass("has-location")},activatePanel:function(){setTimeout(function(){b.textField().focus()},500)},deactivatePanel:function(){var a=b.currentLocation;a&&b.set(a)},detectTimer:null,"{detectButton} click":function(){{var c=b.story;b.textbox()}b.base().addClass("is-busy"),clearTimeout(b.detectTimer),b.detectTimer=setTimeout(function(){c.clearMessage(),c.setMessage(a.language("COM_EASYSOCIAL_LOCATION_PERMISSION_ERROR")),b.base().removeClass("is-busy")
},8e3),a.GMaps.geolocate({success:function(a){EasySocial.ajax("site/controllers/location/getLocations",{latitude:a.coords.latitude,longitude:a.coords.longitude}).done(function(a){b.suggest(a),b.textField().focus()}).fail(function(a){console.log(a)})},error:function(b){c.clearMessage();var d="";switch(b.code){case 1:d=a.language("COM_EASYSOCIAL_LOCATION_PERMISSION_ERROR");break;case 2:d=a.language("COM_EASYSOCIAL_LOCATION_TIMEOUT_ERROR");break;case 3:default:d=a.language("COM_EASYSOCIAL_LOCATION_UNAVAILABLE_ERROR")
}c.setMessage(d)},always:function(){clearTimeout(b.detectTimer),b.base().removeClass("is-busy")}})},"{removeButton} click":function(){b.unset(),b.hideSuggestions()},"{meta} click":function(){b.story.activateMeta("location")},"{story} activateMeta":function(a,c,d){"location"===d.name&&setTimeout(function(){b.textField().focus()},1)},"{story} save":function(c,d,e){var f=b.currentLocation;if(f){var g=e.addTask("saveLocation");a.isEmpty(f.fulladdress)?b.getAddress(f.latitude,f.longitude).done(function(a){f.fulladdress=f.name+", "+a,b.save(g,f)
}):b.save(g,f)}},getAddress:a.memoize(function(b,c){var d=a.Deferred(),e=new google.maps.Geocoder,f=new google.maps.LatLng(b,c);return e.geocode({latLng:f},function(a,b){b==google.maps.GeocoderStatus.OK&&d.resolve(a[0].formatted_address)}),d},function(a,b){return a+","+b}),save:function(a,b){a.save.data.locations_short_address=b.name,a.save.data.locations_lat=b.latitude,a.save.data.locations_lng=b.longitude,a.save.data.locations_formatted_address=b.fulladdress,a.save.data.locations_data=JSON.stringify(b),a.resolve()
},"{story} clear":function(){b.unset(),b.hideSuggestions()}}}),b.resolve()})}),EasySocial.module("story/mood",function(a){var b=this;EasySocial.require().language("COM_EASYSOCIAL_MOOD_FEELING_CUSTOM").done(function(){EasySocial.Controller("Story.Mood",{defaultOptions:{"{base}":"[data-story-mood]","{presets}":"[data-story-mood-presets]","{preset}":"[data-story-mood-preset]","{verb}":"[data-story-mood-verb]","{verbType}":"[data-story-mood-verb-type]","{textField}":"[data-story-mood-textfield]","{removeButton}":"[data-story-mood-remove-button]"}},function(b){return{init:function(){b.reset(),b.textField().placeholder()
},setLayout:function(){var a=b.base(),c=b.textField();a.toggleClass("is-empty",""===c.val())},currentMood:{},resetMood:function(){b.currentMood={icon:"",verb:"",subject:"",text:"",custom:!1},b.preset().removeClass("is-disabled"),b.story.setMeta("mood","")},setMood:function(c,d){var e=b.currentMood;a.isPlainObject(c)?a.extend(e,c):e[c]=d,b.base().toggleClass("using-preset",!e.custom),b.updateMeta(),b.setLayout()},getVerb:function(){return b.verbType(".active").data("storyMoodVerbType")||"feeling"},reset:function(){b.selecting=!0,b.resetMood(),b.preset().removeClass("is-disabled"),b.textField().val("").focus(),b.setLayout(),b.base().removeClass("using-preset hide-preset"),b.selecting=!1
},updateMeta:function(){var a=b.currentMood,c=a.icon?'<i class="es-emoticon '+a.icon+'"></i> ':"";b.verbType().removeClass("active").filterBy("storyMoodVerbType",a.verb).addClass("active"),b.story.setMeta("mood",c+a.text)},"{preset} click":function(a){var c={icon:a.data("storyMoodIcon"),verb:a.data("storyMoodVerb"),subject:a.data("storyMoodSubject"),text:a.data("storyMoodText"),subjectText:a.data("storyMoodSubjectText"),custom:!1};b.selecting=!0,b.textField().val(c.subjectText).focus(),b.setMood(c),b.selecting=!1
},"{textField} keydown":function(){b.update()},"{textField} keyup":function(){b.update()},"{textField} input":function(c){if(!b.selecting){var e=c.val();if(!e)return b.reset(),void 0;var f=b.currentMood,g=!f.custom&&e!==f.subjectText;g&&b.setMood("custom",!0);var h=b.preset().filter(function(){var b=a(this),c=0!==b.data("storyMoodSubjectText").indexOf(e);return b.toggleClass("is-disabled",c),!c});b.base().toggleClass("hide-preset",h.length<1);var i=b.getVerb(),j={verb:i,subject:"",custom:!0,text:a.language("COM_EASYSOCIAL_MOOD_"+i.toUpperCase()+"_CUSTOM",e)};
b.setMood(j)}},"{removeButton} click":function(){b.reset()},"{story} activateMeta":function(a,c,d){"mood"===d.name&&setTimeout(function(){b.textField().focus()},1)},"{story} save":function(a,c,d){var e=b.currentMood;e.verb&&(d.data.mood_icon=e.icon,d.data.mood_verb=e.verb,d.data.mood_subject=e.subject,d.data.mood_custom=e.custom,d.data.mood_text=e.text)},"{story} clear":function(){b.reset()}}}),b.resolve()})}),EasySocial.module("story/photos",function(a){var b=this;EasySocial.require().script("albums/uploader").done(function(){EasySocial.Controller("Story.Photos",{defaultOptions:{"{albumView}":"[data-album-view]","{albumContent}":"[data-album-content]","{uploadButton}":"[data-album-upload-button]","{photoItemGroup}":"[data-photo-item-group]","{photoItem}":"[data-photo-item]","{photoImage}":"[data-photo-image]","{photoRemoveButton}":"[data-photo-remove-button]","{uploadItem}":"[data-photo-upload-item]","{uploadRemoveButton}":".upload-remove-button"}},function(b){return{init:function(){b.uploader=b.albumView().addController(EasySocial.Controller.Albums.Uploader,a.extend({"{uploadButton}":b.uploadButton.selector,"{uploadItemGroup}":b.photoItemGroup.selector,"{uploadDropsite}":b.albumContent.selector},{settings:b.options.uploader})),b.photoItemGroup().css("opacity",1),b.addPlugin("uploader",b.uploader),b.setLayout()
},hasItems:function(){var a=b.photoItem().length>0,c=b.uploadItem().length>0;return a||c},setLayout:function(){b.albumView().toggleClass("has-photos",b.hasItems())},activateAttachment:function(){},removePhoto:function(a){b.photoItem().filterBy("photoId",a).remove(),b.setLayout()},clearPhoto:function(){b.photoItem().remove(),b.uploadItem().remove(),b.setLayout()},"{uploader} FilesAdded":function(){b.setLayout(),b.uploader.start()},"{uploader} FileUploaded":function(c,d,e,f,g){var h=b.uploader.getItem(f),i=a(a.parseHTML(a.trim(g.html)));
photoData=g.data,i.data("photo",photoData).addClass("new-item").insertAfter(h.element),b.uploader.removeItem(f.id),b.setLayout(),setTimeout(function(){i.removeClass("new-item")},1),b.save()},"{uploader} FileError":function(a,c,d,e,f){b.story.setMessage(f.message,"error");var g=b.uploadingPhoto;g&&(g.reject(),delete b.uploadingPhoto),b.uploader.removeItem(e.id),b.setLayout()},"{uploader} Error":function(a,c,d,e){b.story.setMessage(e.message,"error");var f=b.uploadingPhoto;f&&(f.reject(),delete b.uploadingPhoto),b.uploadRemoveButton().click(function(){setTimeout(function(){b.setLayout()
},1)}),b.setLayout()},"{photoRemoveButton} click":function(a){var c=a.parent(b.photoItem.selector).data("photoId");b.removePhoto(c)},"{story} save":function(a,c,d){b.hasItems()&&(b.uploadingPhoto=d.addTask("uploadingPhoto"),b.save())},save:function(){var c=b.uploadingPhoto;if(c){var d=b.uploadItem();if(d.length<1){var e=[],f=c.save;b.photoItem().each(function(){e.push(a(this).data("photoId"))}),f.addData(b,e),c.resolve(),delete b.uploadingPhoto}}},"{story} clear":function(){b.clearPhoto()}}}),b.resolve()})}),EasySocial.module("story/polls",function(){var b=this;
EasySocial.require().library("datetimepicker").view("site/loading/small").language("COM_EASYSOCIAL_STORY_EVENT_INSUFFICIENT_DATA","COM_EASYSOCIAL_STORY_EVENT_INVALID_START_END_DATETIME").done(function(){EasySocial.Controller("Story.Polls",{defaultOptions:{"{base}":"[data-story-event-base]","{category}":"[data-story-event-category]","{form}":"[data-story-event-form]","{timezone}":"[data-event-timezone]","{datetimeForm}":"[data-event-datetime-form]","{datetime}":"[data-event-datetime]","{title}":"[data-event-title]","{description}":"[data-event-description]",view:{loading:"site/loading/small"}}},function(a){return{init:function(){},"{story} save":function(b,c,d){if("polls"==d.currentPanel){var e=b.find("[data-polls]").controller("EasySocial.Controller.Polls");
a.options.name="polls";var f=d.addTask("validatePollsForm");a.save(f,e)}},save:function(b,c){var d=c.validateForm();if(!d)return b.reject("Error validating polls inputs. Please make sure all the required fields are filled in.");var e=c.toData();b.save.addData(a,e),b.resolve()}}}),b.resolve()})}),EasySocial.module("story/quickpost",function(){var b=this;EasySocial.Controller("Story.Quickpost",{defaultOptions:{"{submitButton}":"[data-quickpost-submit]","{content}":"[data-quickpost-content]","{message}":"[data-quickpost-message]","{privacyButton}":"[data-story-privacy]","{footer}":"[data-story-footer]"}},function(a){return{init:function(){},"{submitButton} click":function(b){id=b.data("quickpost-userid"),content=a.content().val(),EasySocial.ajax("site/controllers/story/createFromModule",{target:id,privacy:"public",content:content}).done(function(b,c,d,e){return b?(a.message().html(c).addClass("alert fade in alert-success"),a.content().val(""),a.trigger("create",[d,e]),void 0):(a.message().html(c).addClass("alert fade in alert-warning"),void 0)
}).fail(function(b){a.message().html(b.message),a.message().addClass("alert fade in alert-warning")})},"{privacyButton} click":function(b){setTimeout(function(){var c=b.find("[data-es-privacy-container]").hasClass("active");a.footer().toggleClass("allow-overflow",c)},1)}}}),b.resolve()}),EasySocial.module("story/tasks",function(a){var b=this;EasySocial.require().view("apps/group/tasks/story/attachment.item").done(function(){EasySocial.Controller("Story.Tasks",{defaultOptions:{view:{taskItem:"apps/group/tasks/story/attachment.item"},"{form}":"[data-story-tasks-form]","{input}":"[data-story-tasks-input]","{list}":"[data-story-tasks-list]","{milestone}":"[data-story-tasks-milestone]"}},function(b){return{init:function(){b.implementForm()
},implementForm:function(){b.form().implement(EasySocial.Controller.Story.Tasks.Form,{"{parent}":b})},createInputRow:function(){var d=b.view.taskItem();a(d).implement(EasySocial.Controller.Story.Tasks.Form,{"{parent}":b}).appendTo(b.list()),a(d).find("input").focus()},"{story} save":function(c,d,e){var f=new Array;a.each(b.input(),function(b,c){""!=a(c).val()&&f.push(a(c).val())});var g={items:f,milestone:b.milestone().val()};e.addData(b,g)},"{story} clear":function(){}}}),EasySocial.Controller("Story.Tasks.Form",{defaultOptions:{"{input}":"[data-story-tasks-input]","{remove}":"[data-story-tasks-remove]"}},function(a){return{init:function(){},"{input} keyup":function(b,c){13==c.keyCode&&a.parent.createInputRow(a.element)
},"{remove} click":function(){a.element.remove()}}}),b.resolve()})}),EasySocial.module("story/videos",function(){var b=this;EasySocial.require().library("image","plupload").language("COM_EASYSOCIAL_VIDEOS_STORY_SELECT_CATEGORY","COM_EASYSOCIAL_VIDEOS_STORY_ENTER_VIDEO","COM_EASYSOCIAL_VIDEOS_STORY_PROCESSING_VIDEO","COM_EASYSOCIAL_VIDEOS_STORY_CLICK_INSERT_VIDEO","COM_EASYSOCIAL_VIDEOS_STORY_NO_VIDEO_DETECTED").done(function(a){EasySocial.Controller("Story.Videos",{defaultOptions:{"{form}":"[data-video-form]","{insertVideo}":"[data-insert-video]","{videoLink}":"[data-video-link]","{videoCategory}":"[data-video-category]","{uploaderForm}":"[data-video-uploader]","{uploaderButton}":"[data-video-uploader-button]","{uploaderDropsite}":"[data-video-uploader-dropsite]","{uploaderProgressBar}":"[data-video-uploader-progress-bar]","{uploaderProgressText}":"[data-video-uploader-progress-text]","{removeButton}":"[data-remove-video]","{previewImageWrapper}":"[data-video-preview-image]","{previewTitle}":"[data-video-preview-title]","{title}":"[data-video-title]","{previewDescription}":"[data-video-preview-description]","{description}":"[data-video-description]"}},function(b,c){return{init:function(){0!=b.uploaderForm().length&&(b.uploader=b.uploaderForm().addController("plupload",a.extend({"{uploadButton}":b.uploaderButton.selector,"{uploadDropsite}":b.uploaderDropsite.selector},c.uploader)),b.plupload=b.uploader.plupload)
},isProcessed:function(){b.form().switchClass("is-processed"),b.processing=!1},isUploading:function(){b.form().switchClass("is-uploading")},isProcessing:function(){b.form().switchClass("is-processing"),b.processing=!0},isInitial:function(){b.form().switchClass("is-waiting")},currentCategory:null,processing:!1,video:null,videoType:null,updatePreview:function(c,d,e){b.video={type:c,title:d.title,description:d.description,link:d.link,id:d.id?d.id:"",isEncoding:!1},d.title&&b.previewTitle().html(d.title),d.description&&b.previewDescription().html(d.description),a.Image.get(e).done(function(a){a.appendTo(b.previewImageWrapper())
})},resetProgress:function(){b.uploaderProgressBar().css("width","0%"),b.uploaderProgressText().html("0%")},clearForm:function(a){a&&(b.video=null),b.isInitial(),b.videoLink().val(""),b.previewImageWrapper().html(""),b.previewTitle().html(""),b.title().val(""),b.previewDescription().html(""),b.description().val("")},editTitleEvent:"click.es.story.video.editLinkTitle",editDescriptionEvent:"click.es.story.video.editLinkDescription",editTitle:function(){b.form().addClass("editing-title"),setTimeout(function(){b.title().val(b.previewTitle().text()).focus()[0].select(),a(document).on(b.editTitleEvent,function(a){a.target!==b.title()[0]&&b.saveTitle("save")
})},1)},saveTitle:function(c){c||(c="save");var d=b.title().val();"save"==c&&b.previewTitle().html(d),b.form().removeClass("editing-title"),b.video.title=d,a(document).off(b.editTitleEvent)},checkVideoStatus:function(a){EasySocial.ajax("site/controllers/videos/status",{id:a,uid:c.video.uid,type:c.video.type,createStream:0}).done(function(c,d,e,f){if("done"===d)return b.processing=!1,b.uploaderProgressBar().css("width","100%"),b.uploaderProgressText().html("100%"),b.isProcessed(),b.updatePreview("upload",e,f),b.resetProgress(),void 0;
var d=d+"%";b.uploaderProgressBar().css("width",d),b.uploaderProgressText().html(d),b.checkVideoStatus(a)})},editDescription:function(){b.form().addClass("editing-description"),setTimeout(function(){var c=b.previewDescription().clone(),d=c.hasClass("no-description");c.wrapInner(b.description()),d&&b.description().val(""),b.description().val(b.previewDescription().text()).focus()[0].select(),a(document).on(b.editDescriptionEvent,function(a){a.target!==b.description()[0]&&b.saveDescription("save")})},1)},saveDescription:function(c){c||(c="save");
var d=b.description().val().replace(/\n/g,"<br//>");switch(c){case"save":var e=""===d;b.previewDescription().toggleClass("no-description",e),e&&(d=b.description().attr("placeholder")),b.previewDescription().html(d),b.video.description=d;break;case"revert":}b.form().find(".textareaClone").remove(),b.form().removeClass("editing-description"),a(document).off(b.editDescriptionEvent)},"{uploaderForm} FilesAdded":function(){b.isUploading(),b.plupload.start()},"{uploaderForm} FileUploaded":function(a,c,d,e,f){return f.error?(b.clearMessage(),b.setMessage(f.error),b.clearForm(!0),!1):f.isEncoding?(b.processing=!0,b.checkVideoStatus(f.data.id),void 0):(b.processing=!1,b.uploaderProgressBar().css("width","100%"),b.uploaderProgressText().html("100%"),b.isProcessed(),b.updatePreview("upload",f.data,f.thumbnail),b.video.isEncoding=!0,b.resetProgress(),void 0)
},"{uploaderForm} Error":function(a,d,e,f){var g=c.errors[f.code];b.story.setMessage(g,"error")},"{previewTitle} click":function(){var a=b.form().hasClass("editing-title");b.form().toggleClass("editing-title",!a),a||b.editTitle()},"{previewDescription} click":function(){var a=b.form().hasClass("editing-description");b.form().toggleClass("editing-description",!a),a||b.editDescription()},"{videoCategory} change":function(a){b.currentCategory=a.val()},"{insertVideo} click":function(){var a=b.videoLink().val();a&&!b.processing&&(b.isProcessing(),EasySocial.ajax("ajax:/apps/user/videos/controllers/process/process",{type:"link",link:a}).done(function(c,d){b.isProcessed(),c.link=a,b.updatePreview("link",c,d)
}))},"{removeButton} click":function(){b.clearForm(!0)},"{story} save":function(c,d,e){if("videos"==e.currentPanel){var f=b.videoLink().val();if(f&&!b.video)return e.reject(a.language("COM_EASYSOCIAL_VIDEOS_STORY_CLICK_INSERT_VIDEO")),void 0;if(!f&&!b.video)return e.reject(a.language("COM_EASYSOCIAL_VIDEOS_STORY_NO_VIDEO_DETECTED")),void 0;b.uploadingVideo=e.addTask("uploadingVideo"),b.save(e)}},"{story} afterSubmit":function(){var a=b.uploadingVideo;if(a)return b.clearForm(!0),delete b.uploadingVideo,b.video&&b.video.isEncoding?(EasySocial.dialog({content:EasySocial.ajax("site/views/videos/showEncodingMessage")}),delete b.video,void 0):(delete b.video,void 0)
},save:function(c){var d=b.uploadingVideo;if(d){if(b.processing)return c.reject(a.language("COM_EASYSOCIAL_VIDEOS_STORY_PROCESSING_VIDEO")),void 0;if(b.video.category=b.videoCategory().val(),!b.video.category||0==b.video.category)return c.reject(a.language("COM_EASYSOCIAL_VIDEOS_STORY_SELECT_CATEGORY")),void 0;c.addData(b,b.video),d.resolve(),b.videoType=b.video.type}},"{story} clear":function(){b.clearForm(!1)}}}),b.resolve()})}),EasySocial.module("stream",function(){var a=this;EasySocial.require().library("dialog").script("comment").view("site/likes/item").language("COM_EASYSOCIAL_SUBSCRIPTION_DIALOG_UNSUBSCRIBE","COM_EASYSOCIAL_SUBSCRIPTION_DIALOG_SUBSCRIBE","COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_OK","COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_SUBMIT","COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_CANCEL","COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_UNSUBSCRIBE","COM_EASYSOCIAL_SUBSCRIPTION_ARE_YOU_SURE_UNSUBSCRIBE","COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_SUBSCRIBE","COM_EASYSOCIAL_STREAM_DIALOG_FEED","COM_EASYSOCIAL_STREAM_BUTTON_CLOSE").done(function(b){EasySocial.Controller("Stream.Item",{defaultOptions:{id:"","{streamItem}":".streamItem","{streamData}":".streamData","{streamResponds}":".stream-responds","{likeItem}":".likeItem","{likeItemList}":".likeItemList","{commentLink}":".commentLink","{commentFrame}":".commentFrame","{commentInput}":".commentInput","{followItem}":".followItem","{unfollowItem}":".unfollowItem","{hideItem}":".hideItem","{unhideItem}":".unhideItem"}},function(a){return{init:function(){a.commentFrame().implement("EasySocial.Controller.Comments",{uid:a.element.data("id"),pagination:new CommentPagination({total:a.commentFrame().data("total")}),commentlist:new Comment.List})
},"{likeItem} click":function(){EasySocial.ajax("site:/controllers/likes/toggle",{id:a.element.data("id"),type:"stream"},{success:function(b){var c="";b.likeCount>0&&(c=a.view.likeitem({likeCount:b.likeCount}),c.find(".likeText").html(b.message)),a.likeItemList().html(c),a.likeItem().text(b.label)},fail:function(){}})},"{unfollowItem} click":function(){var c=a.element.data("sid");c&&b.dialog({title:b.language("COM_EASYSOCIAL_SUBSCRIPTION_DIALOG_UNSUBSCRIBE"),content:b.language("COM_EASYSOCIAL_SUBSCRIPTION_ARE_YOU_SURE_UNSUBSCRIBE"),buttons:[{name:b.language("COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_UNSUBSCRIBE"),click:function(){EasySocial.ajax("site:/controllers/subscriptions/remove",{id:c},{success:function(c){b.dialog({title:b.language("COM_EASYSOCIAL_SUBSCRIPTION_DIALOG_UNSUBSCRIBE"),content:c.message,buttons:[{name:b.language("COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_OK"),click:function(){a.unfollowItem().removeClass("unfollowItem"),b.dialog().close()
}}]})},fail:function(){}})}},{name:b.language("COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_CANCEL"),click:function(){b.dialog().close()}}]})},"{followItem} click":function(){EasySocial.ajax("site:/controllers/subscriptions/form",{contentId:a.element.data("id"),contentType:"stream"},{success:function(c){return""!=c.message?(b.dialog({title:b.language("COM_EASYSOCIAL_SUBSCRIPTION_DIALOG_SUBSCRIBE"),content:c.message,buttons:[{name:b.language("COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_CANCEL"),click:function(){b.dialog().close()
}}]}),void 0):(b.dialog({title:b.language("COM_EASYSOCIAL_SUBSCRIPTION_DIALOG_SUBSCRIBE"),content:c.htmlform,buttons:[{name:b.language("COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_SUBMIT"),click:function(){var c=b("#esfullname").val(),d=b("#email").val();EasySocial.ajax("site:/controllers/subscriptions/add",{contentId:a.element.data("id"),contentType:"stream",esfullname:c,email:d},{success:function(c){b.dialog({title:b.language("COM_EASYSOCIAL_SUBSCRIPTION_DIALOG_SUBSCRIBE"),content:c.message,buttons:[{name:b.language("COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_OK"),click:function(){a.followItem().removeClass("followItem"),b.dialog().close()
}}]})},fail:function(){}})}},{name:b.language("COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_CANCEL"),click:function(){b.dialog().close()}}]}),void 0)},fail:function(){}})},"{hideItem} click":function(){EasySocial.ajax("site:/controllers/stream/hide",{id:a.element.data("id")},{success:function(b){var c="<div>"+b.message+"</div>";a.streamData().hide(),a.element.append(c)},fail:function(a){b.dialog({title:b.language("COM_EASYSOCIAL_STREAM_DIALOG_FEED"),content:a.message,buttons:[{name:b.language("COM_EASYSOCIAL_STREAM_BUTTON_CLOSE"),click:function(){b.dialog().close()
}}]})}})},"{unhideItem} click":function(){EasySocial.ajax("site:/controllers/stream/unhide",{id:a.element.data("id")},{success:function(){a.streamData().show(),a.element.children().last().remove()},fail:function(a){b.dialog({title:b.language("COM_EASYSOCIAL_STREAM_DIALOG_FEED"),content:a.message,buttons:[{name:b.language("COM_EASYSOCIAL_STREAM_BUTTON_CLOSE"),click:function(){b.dialog().close()}}]})}})},"{commentLink} click":function(){a.commentInput().focus()}}}),a.resolve()})}),EasySocial.module("tab",function(a){var b=this;
EasySocial.Controller("Tab",{defaultOptions:{view:{},"{tabs}":"","{tabsContent}":"","{defaultActive}":""}},function(b){return{init:function(){b.defaultActive().click()},"{tabs} click":function(c){if(a(c).hasClass("inactive"))return!1;b.tabs(".active").removeClass("active"),a(c).addClass("active"),b.tabsContent().hide();var d=".tab-"+a(c).attr("id");b.tabsContent(d).show()}}}),b.resolve()}),EasySocial.module("toggle",function(a){var b=this;EasySocial.Controller("Toggle",{defaultOptions:{view:{},"{selector}":""}},function(){return{init:function(){},"{selector} click":function(b){a(b).next().toggle(),a(b).toggleClass("this-closed")
}}}),b.resolve()}),EasySocial.module("uploader/item",function(){var b=this;EasySocial.require().view("site/uploader/preview").done(function(a){EasySocial.Controller("Uploader.Item",{defaults:{"{uploadItem}":".uploadItem","{uploadItemPreview}":".uploadItem.preview a.itemLink","{itemLink}":".itemLink","{itemDelete}":".itemDelete",view:{preview:"site/uploader/preview"}}},function(){return{init:function(){},"{itemDelete} click":function(b){var c=a(b).data("id");EasySocial.ajax("site:/controllers/uploader/delete",{id:c},function(){a(b).parents("li.uploadItem").remove()
})},"{uploadItemPreview} click":function(b){var c=a(b).data("uri"),d=a(b).data("title");a.dialog({title:d,content:a.Image.get(c)})}}})}),b.resolve()}),EasySocial.module("videos/form",function(){var b=this;EasySocial.require().script("site/friends/suggest").library("mentions").done(function(a){EasySocial.Controller("Videos.Form",{defaultOptions:{"{videoSource}":"[data-video-source]","{forms}":"[data-form-source]","{linkForm}":"[data-form-link]","{uploadForm}":"[data-form-upload]","{mentions}":"[data-mentions]"}},function(b,c){return{init:function(){b.initMentions()
},initMentions:function(){b.mentions().addController("EasySocial.Controller.Friends.Suggest",{showNonFriend:!1,includeSelf:!0,name:"tags[]",exclusion:c.tagsExclusion})},"{videoSource} change":function(c){var e=a(c).val(),f=b[e+"Form"]();b.forms().addClass("hide"),f.removeClass("hide")}}}),b.resolve()})}),EasySocial.module("videos/item",function(){var b=this;EasySocial.require().done(function(a){EasySocial.Controller("Videos.Item",{defaultOptions:{tagAdding:null,"{tagPeople}":"[data-video-tag]","{tagsWrapper}":"[data-video-tag-wrapper]","{deleteButton}":"[data-video-delete]","{removeTag}":"[data-remove-tag]","{tagItem}":"[data-tags-item]","{featureButton}":"[data-video-feature]","{unfeatureButton}":"[data-video-unfeature]"}},function(b,c){return{init:function(){c.id=b.element.data("id")
},"{unfeatureButton} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/videos/confirmUnfeature",{id:c.id,callbackUrl:c.callbackUrl})})},"{featureButton} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/videos/confirmFeature",{id:c.id,callbackUrl:c.callbackUrl})})},"{deleteButton} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/videos/confirmDelete",{id:c.id}),bindings:{}})},"{removeTag} click":function(a){var d=a.parents(b.tagItem.selector),e=d.data("id");
d.remove(),1==b.tagsWrapper().children().length&&b.tagsWrapper().addClass("is-empty"),EasySocial.ajax("site/controllers/videos/removeTag",{id:e}).done(function(){})},"{tagPeople} click":function(){b.tagAdding=!1,EasySocial.dialog({content:EasySocial.ajax("site/views/videos/tagPeople",{id:c.id,exclusion:c.tagsExclusion}),bindings:{"{submit} click":function(){if(!b.tagAdding){b.tagAdding=!0;var f=this.suggest().textboxlist("controller"),g=f.getAddedItems();if(!(g.length<=0)){var h=a.pluck(g,"id");EasySocial.ajax("site/controllers/videos/tag",{ids:h,id:c.id}).done(function(d){c.tagsExclusion||(c.tagsExclusion=[]),a.each(h,function(a,b){c.tagsExclusion.push(b)
}),b.tagsWrapper().removeClass("is-empty"),b.tagsWrapper().append(d),f.clearItems(),EasySocial.dialog().close(),b.tagAdding=!1})}}}}})}}}),b.resolve()})}),EasySocial.module("videos/list",function(){var b=this;EasySocial.require().done(function(){EasySocial.Controller("Videos.List",{defaultOptions:{"{filter}":"[data-videos-filter]","{sorting}":"[data-videos-sorting]","{activeFilter}":".filter-item.active a","{result}":"[data-videos-result]","{item}":"[data-video-item]","{deleteButton}":"[data-video-delete]","{featureButton}":"[data-video-feature]","{unfeatureButton}":"[data-video-unfeature]"}},function(a,b){return{init:function(){},currentFilter:"",currentSorting:"",categoryId:null,setActiveFilter:function(b){a.filter().parent().removeClass("active"),b.parent().addClass("active")
},getVideos:function(){a.currentSorting||(a.currentSorting=a.sorting().val()),a.currentFilter||(a.currentFilter=a.activeFilter().data("type")),a.currentFilter||(a.currentFilter="all"),a.element.addClass("is-loading"),EasySocial.ajax("site/controllers/videos/getVideos",{filter:a.currentFilter,categoryId:a.categoryId,sort:a.currentSorting,uid:b.uid,type:b.type}).done(function(b){a.element.removeClass("is-loading"),a.result().html(b)})},"{sorting} change":function(b){if(a.currentSorting=b.val(),""!=b.val()){var d=a.activeFilter().prop("href");
d=d.indexOf("?")>=0?d+"&sort="+b.val():d+"?sort="+b.val(),History.pushState({state:1},a.activeFilter().prop("title"),d)}a.getVideos()},"{filter} click":function(b,c){c.preventDefault(),c.stopPropagation();var d=b.data("type");b.route(),a.setActiveFilter(b);var e=null;"category"==d&&(d="all",e=b.data("id")),a.currentFilter=d,a.categoryId=e,a.getVideos(d,e)},"{deleteButton} click":function(b){var d=b.parents(a.item.selector),e=d.data("id");EasySocial.dialog({content:EasySocial.ajax("site/views/videos/confirmDelete",{id:e})})
},"{unfeatureButton} click":function(b){var d=b.parents(a.item.selector),e=d.data("id"),f=b.data("return"),g={id:e};f.length>0&&(g.callbackUrl=f),EasySocial.dialog({content:EasySocial.ajax("site/views/videos/confirmUnfeature",g)})},"{featureButton} click":function(b){var d=b.parents(a.item.selector),e=d.data("id"),f=b.data("return"),g={id:e};f&&(g.callbackUrl=f),EasySocial.dialog({content:EasySocial.ajax("site/views/videos/confirmFeature",g)})}}}),b.resolve()})}),EasySocial.module("videos/process",function(){var b=this;
EasySocial.Controller("Videos.Process",{defaultOptions:{"{progressBar}":"[data-video-progress-bar]","{progressResult}":"[data-video-progress-result]"}},function(a,b,c){return{init:function(){b.id=c.data("id"),a.processVideo()},processVideo:function(){EasySocial.ajax("site/controllers/videos/process",{id:b.id}).done(function(){a.status(b.id)})},status:function(b){EasySocial.ajax("site/controllers/videos/status",{id:b}).done(function(c,d){if("done"==d)return a.progressBar().css("width","100%"),a.progressResult().html("100%"),window.location=c,void 0;
var e=d+"%";a.progressBar().css("width",e),a.progressResult().html(e),a.status(b)})}}}),b.resolve()})});