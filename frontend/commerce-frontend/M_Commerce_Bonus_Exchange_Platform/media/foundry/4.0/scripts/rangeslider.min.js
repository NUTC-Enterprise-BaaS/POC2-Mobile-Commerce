!function(){var moduleFactory=function($){var module=this,exports=function(){function supportsRange(){var input=document.createElement("input");return input.setAttribute("type","range"),"text"!==input.type}function delay(fn,wait){var args=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return fn.apply(null,args)},wait)}function debounce(fn,debounceDuration){return debounceDuration=debounceDuration||100,function(){if(!fn.debouncing){var args=Array.prototype.slice.apply(arguments);fn.lastReturnVal=fn.apply(window,args),fn.debouncing=!0
}return clearTimeout(fn.debounceTimeout),fn.debounceTimeout=setTimeout(function(){fn.debouncing=!1},debounceDuration),fn.lastReturnVal}}function Plugin(element,options){if(this.$window=$(window),this.$document=$(document),this.$element=$(element),this.options=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.startEvent=this.options.startEvent.join("."+pluginName+" ")+"."+pluginName,this.moveEvent=this.options.moveEvent.join("."+pluginName+" ")+"."+pluginName,this.endEvent=this.options.endEvent.join("."+pluginName+" ")+"."+pluginName,this.polyfill=this.options.polyfill,this.onInit=this.options.onInit,this.onSlide=this.options.onSlide,this.onSlideEnd=this.options.onSlideEnd,this.polyfill&&inputrange)return!1;
this.identifier="js-"+pluginName+"-"+ +new Date,this.min=parseFloat(this.$element[0].getAttribute("min")||0),this.max=parseFloat(this.$element[0].getAttribute("max")||100),this.value=parseFloat(this.$element[0].value||this.min+(this.max-this.min)/2),this.step=parseFloat(this.$element[0].getAttribute("step")||1),this.$fill=$('<div class="'+this.options.fillClass+'" />'),this.$handle=$('<div class="'+this.options.handleClass+'" />'),this.$range=$('<div class="'+this.options.rangeClass+'" id="'+this.identifier+'" />').insertAfter(this.$element).prepend(this.$fill,this.$handle),this.$element.css({position:"absolute",width:"1px",height:"1px",overflow:"hidden",opacity:"0"}),this.handleDown=$.proxy(this.handleDown,this),this.handleMove=$.proxy(this.handleMove,this),this.handleEnd=$.proxy(this.handleEnd,this),this.init();
var _this=this;this.$window.on("resize."+pluginName,debounce(function(){delay(function(){_this.update()},300)},20)),this.$document.on(this.startEvent,"#"+this.identifier+":not(."+this.options.disabledClass+")",this.handleDown),this.$element.on("change."+pluginName,function(e,data){if(!data||data.origin!==pluginName){var value=e.target.value,pos=_this.getPositionFromValue(value);_this.setPosition(pos)}})}var pluginName="rangeslider",pluginInstances=[],inputrange=supportsRange(),defaults={polyfill:!0,rangeClass:"rangeslider",disabledClass:"rangeslider--disabled",fillClass:"rangeslider__fill",handleClass:"rangeslider__handle",startEvent:["mousedown","touchstart","pointerdown"],moveEvent:["mousemove","touchmove","pointermove"],endEvent:["mouseup","touchend","pointerup"]};
Plugin.prototype.init=function(){this.onInit&&"function"==typeof this.onInit&&this.onInit(),this.update()},Plugin.prototype.update=function(){this.handleWidth=this.$handle[0].offsetWidth,this.rangeWidth=this.$range[0].offsetWidth,this.maxHandleX=this.rangeWidth-this.handleWidth,this.grabX=this.handleWidth/2,this.position=this.getPositionFromValue(this.value),this.$element[0].disabled?this.$range.addClass(this.options.disabledClass):this.$range.removeClass(this.options.disabledClass),this.setPosition(this.position)
},Plugin.prototype.handleDown=function(e){if(e.preventDefault(),this.$document.on(this.moveEvent,this.handleMove),this.$document.on(this.endEvent,this.handleEnd),!((" "+e.target.className+" ").replace(/[\n\t]/g," ").indexOf(this.options.handleClass)>-1)){var posX=this.getRelativePosition(this.$range[0],e),handleX=this.getPositionFromNode(this.$handle[0])-this.getPositionFromNode(this.$range[0]);this.setPosition(posX-this.grabX),posX>=handleX&&posX<handleX+this.handleWidth&&(this.grabX=posX-handleX)}},Plugin.prototype.handleMove=function(e){e.preventDefault();
var posX=this.getRelativePosition(this.$range[0],e);this.setPosition(posX-this.grabX)},Plugin.prototype.handleEnd=function(e){e.preventDefault(),this.$document.off(this.moveEvent,this.handleMove),this.$document.off(this.endEvent,this.handleEnd);var posX=this.getRelativePosition(this.$range[0],e);this.onSlideEnd&&"function"==typeof this.onSlideEnd&&this.onSlideEnd(posX-this.grabX,this.value)},Plugin.prototype.cap=function(pos,min,max){return min>pos?min:pos>max?max:pos},Plugin.prototype.setPosition=function(pos){var value,left;
value=this.getValueFromPosition(this.cap(pos,0,this.maxHandleX))/this.step*this.step,left=this.getPositionFromValue(value),this.$fill[0].style.width=left+this.grabX+"px",this.$handle[0].style.left=left+"px",this.setValue(value),this.position=left,this.value=value,this.onSlide&&"function"==typeof this.onSlide&&this.onSlide(left,value)},Plugin.prototype.getPositionFromNode=function(node){for(var i=0;null!==node;)i+=node.offsetLeft,node=node.offsetParent;return i},Plugin.prototype.getRelativePosition=function(node,e){return(e.pageX||e.originalEvent.clientX||e.originalEvent.touches[0].clientX||e.currentPoint.x)-this.getPositionFromNode(node)
},Plugin.prototype.getPositionFromValue=function(value){var percentage,pos;return percentage=(value-this.min)/(this.max-this.min),pos=percentage*this.maxHandleX},Plugin.prototype.getValueFromPosition=function(pos){var percentage,value;return percentage=pos/(this.maxHandleX||1),value=this.step*Math.ceil((percentage*(this.max-this.min)+this.min)/this.step),Number(value.toFixed(2))},Plugin.prototype.setValue=function(value){value!==this.value&&this.$element.val(value).trigger("change",{origin:pluginName})},Plugin.prototype.destroy=function(){this.$document.off(this.startEvent,"#"+this.identifier,this.handleDown),this.$element.off("."+pluginName).removeAttr("style").removeData("plugin_"+pluginName),this.$range&&this.$range.length&&this.$range[0].parentNode.removeChild(this.$range[0]),pluginInstances.splice(pluginInstances.indexOf(this.$element[0]),1),pluginInstances.length||this.$window.off("."+pluginName)
},$.fn[pluginName]=function(options){return this.each(function(){var $this=$(this),data=$this.data("plugin_"+pluginName);data||($this.data("plugin_"+pluginName,data=new Plugin(this,options)),pluginInstances.push(this)),"string"==typeof options&&data[options]()})}};exports(),module.resolveWith(exports)};FD40.module("rangeslider",moduleFactory)}();