/**
* @package 		EasySocial
* @copyright	Copyright (C) 2010 - 2014 Stack Ideas Sdn Bhd. All rights reserved.
* @license 		Proprietary Use License http://stackideas.com/licensing.html
* @author 		Stack Ideas Sdn Bhd
**/
/*------------------------------------*\
	$story - story.less
\*------------------------------------*/

/*
shortcode
.es-story>.es-story-form>form>textarea+(.es-story-panels>.es-story-panelbuttons+.es-story-panelbutton)+(.es-story-panelcontents>.es-story-panelcontent)^.row>button.btn{Share}
*/
.dashboard-story-wrapper {
	padding-top: 15px;
}

.es-story {
	position: relative;
	border-radius: 3px;
	background: @esStoryBackground;
	border: 1px solid @esStoryBorder;
	overflow: hidden;
	z-index: 7;
	// .transition(all 0.5s ease 0s);

	&.is-collapsed {

		// background: @esBackground;
		// height: 48px;

		.es-story-header {
			margin-top: -40px;
		}

		.es-story-body {
			padding: 0 0 0 55px;
		}

		.es-story-footer {
			max-height: 0px;
			overflow: hidden;
			border-top-color: transparent;
		}

		.es-story-text {
			padding: 0;
		}

		.es-story-panel-buttons {
			top: -40px;
		}

		.es-story-textfield {
			font-size: 14px;
			// line-height: 48px;
			line-height: 16px;
			top: (52 - 16) / 2px;
		}

		.es-story-textbox .mentions > div {
			top: (52 - 16) / 2px;
			position: relative;
		}

		&.is-ie {
			.es-story-text-placeholder-ie9 {
				font-size: 14px;
				// line-height: 52px;
				line-height: 16px;
				top: (52 - 16) / 2px;
				position: absolute;
				display: block;
			}
		}
	}

	&.is-resizing {

		.es-story-footer {
			max-height: 100px;
			overflow: hidden;
		}

		.es-story-avatar {
			left: -44px;
		}
	}

	&.is-expanded {
		overflow: visible;

		.es-story-footer {
			max-height: none;
			.transition(none);
		}

		.es-story-avatar {
			display: none;
		}
	}

	> .loading-indicator {
		display: none;
		background: url("@{media_uri}/images/loading.gif") center no-repeat @esStoryLoadingBackground;
		width: 100%;
		height: 100%;
		top: 0;
		left: 0;
		position: absolute;
		z-index: 3;
	}

	//elements

	[data-message-group] .alert {
		margin: 0;
		border-radius: ~"3px 3px 0px 0px";
		border-top: 0px;
		border-left: 0px;
		border-right: 0px;
		padding-right: 28px;
	}

	&.saving {
		> .loading-indicator {
			display: block;
		}
	}
}

.es-story-text-placeholder-ie9 {
	display: none;
}

.es-story-avatar {
	position: absolute;
	top: 10px;
	left: 10px;
	z-index: 4;

	.transition(all 0.5s ease);
}

.es-story-header {
	position: relative;
	z-index: 3;

	margin-top: 0;
	.transition(all 0.5s ease);
}

.es-story-body {
	position: relative;
	z-index: 2;

	// overflow: hidden;
	background: @esBackground;
	.transition(all 0.5s ease);
}

.es-story-footer {
	position: relative;
	z-index: 1;

	.clearfix();
	border-top: 1px solid @esBorder;
	margin-top: 0;

	.transition(all 0.5s ease);
}

.es-story-text {
	padding: 10px;
}

.plugin-polls,
.plugin-event,
.plugin-broadcast,
.plugin-blog,
.plugin-discuss,
.plugin-easydiscuss {
    .es-story-text {
        display: none;
    }
    .es-story-panel-contents.active {
        padding-top: 10px;
    }
}

.es-story-textbox {
	display: block !important; // Quick fix there is unknown inline display:none in IE11
}

.es-story-textbox .mentions > div {
	min-height: 52px;
	// Do not use position: relative here because we won't be able to hover on meta links.
}

// Safari3+, chrome1+ on iPhone #4056
@media (max-width:479px) and (-webkit-min-device-pixel-ratio:0) {
    .mentions div {
        left: 3px;
        position: relative;
    }
    .es-story-textfield:focus {
    	font-size: 12px !important;
    }
}

.es-story-textfield {
	.box-shadow(~"none");
	font-size: 12px;
	line-height: 16px;
	overflow: hidden;
	width: 100%;
	margin: 0;
	padding: 0;
	border: none;
	resize: none;
	top: 0;
    color: @esColor;
	.transition(font-size 0.5s ease);
}

.es-story-actions {
	// padding: 10px;
	margin:4px;
	float: right;

	&.no-privacy {
		.es-story-submit {
			border-radius: 3px !important;
		}
	}
}

.es-story-submit {
	float: left;
	z-index: 3;
	border-radius: 3px 0 0 3px !important;
	border-right: none;
	height: 30px; // for joomla 2.5
}

.es-story-privacy {
	float: right;
	z-index: 2;

	// TODO: Refactor this.
	.es-privacy .es-privacy-toggle,
	.es-privacy .es-privacy-toggle:hover,
	.es-privacy .es-privacy-toggle:focus,
	.es-privacy .es-privacy-toggle:active {
		height: 30px;
		line-height: 30px;
		padding: 0 6px;
		border-radius: 0 3px 3px 0;
		// background-color: @btnEsPrimaryBackground !important;
		#gradient > .vertical(@start-color: @btnEsPrimaryBackgroundHighlight; @end-color: @btnEsPrimaryBackground) !important;
		border-color: @btnEsPrimaryBorder !important;
		color: #FFFFFF !important;

		> i {
			position: relative;
			top: -1px;
		}

		.caret {
			border-top: 4px solid #fff;
			opacity: 1;
		}
	}

	.es-privacy .es-privacy-toggle:active {
		.box-shadow(~"0 3px 5px rgba(0, 0, 0, 0.125) inset");
	}
}

.es-story-reset-button {
	float: right;

	> i {
		float: left;
		font-size: @fontSizeSmall+4;
		line-height: 17px;
	}
}

&.es-story-mentions-autocomplete {
	// Blend into background, hides dashed border behind it.
	border-top: 1px solid @esBackground;
}

.es-story.w480 {

	&.is-resizing {
		.es-story-footer {
			max-height: 150px;
		}
	}
    .es-story-panel-button {
        // padding: 10px 10px;
    }
}
